function Gather(e) {
    var l, d, i, r = "sf_gather_queue_page", c = "sf_gather_queue", u = "sf_gather_event", a = "sf_gather_id", h = !1, s = !1, p = 500, o = 1e3, f = [], _ = [], m = [], g = [], v = {}, y = [], b = !0, t = 0, w = null, C = 0, n = 0, k = 0, T = 60, x = 20, $ = 0, S = 60, D = 10, M = 0, A = !0, P = /^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/, L = !0, I = "";
    function R(e, t, i) {
        return e.hasOwnProperty(t) ? e[t] : i
    }
    function j(e) {
        var t = e.getAttribute("sftag");
        if (!t)
            return null;
        var i = t.split(",");
        if (0 === i.length)
            return null;
        for (var n = {
            event_id: "click_auto",
            tagName: e.tagName.toLowerCase()
        }, a = ["id", "class"], r = 0; r < a.length; r++) {
            e.getAttribute(a[r]) && (n[a[r]] = e.getAttribute(a[r]))
        }
        for (r = 0; r < i.length; r++) {
            var s = i[r].split(":");
            if (2 === s.length) {
                var o = s[0].trim()
                    , l = s[1].trim();
                "event_id" === o ? l && "null" !== l && (n.event_id = l) : n[o] = l
            }
        }
        return n
    }
    function O(e, t, i) {
        e.addEventListener ? e.addEventListener(t, i, !0) : e.attachEvent ? e.attachEvent("on" + t, i) : e["on" + t] = i
    }
    function N() {
        return Math.floor((new Date).getTime() / 1e3)
    }
    function E() {
        var e = (new Date).getTime();
        return e <= M ? M++ : M = e,
            M
    }
    this.q = [],
        this.onload = [],
        this.app_id = "",
        this.device_id = V(a) || (i = (new Date).getTime(),
            "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, function(e) {
                var t = (i + 16 * Math.random()) % 16 | 0;
                return i = Math.floor(i / 16),
                    ("x" == e ? t : 3 & t | 8).toString(16)
            })),
        this.url = "http://218.17.248.243:40021/json_data",
        this.platform = "pc",
        this.app_version = "0.0",
        this.uid = "",
        this.sec_uid = "",
        this.login_type = "",
        this.ignore_visitor = !1,
        this.ignore_report = !1,
        this.force_post = !1,
        this.auto = !0,
        this.auto_error = !0,
        this.auto_pv = !0,
        this.auto_sftag = !0,
        this.canParentAutoPop = !1,
        this.passed_data = {},
    e && (this.q = e.q || [],
        s = e.debug || !1,
        this.url = e.url || "",
        this.app_id = e.app_id || "",
        this.storeKey = e.storeKey || ""),
        this.init = function(e) {
            if (d = N(),
                    v = {},
                    p = (e = e || this).interval || p,
                    o = e.queue_size || o,
                    T = e.fail_timeout || T,
                    x = e.inactivity_time || x,
                    S = e.session_update || S,
                    D = e.max_events || D,
                    this.app_id = e.app_id || this.app_id,
                    this.device_id = e.device_id || this.device_id,
                    this.url = function(e) {
                        if ("/" == e.substr(e.length - 1))
                            return e.substr(0, e.length - 1);
                        return e
                    }(e.url || this.url),
                    this.platform = e.platform || this.platform,
                    this.app_version = e.app_version || this.app_version,
                    this.uid = e.uid || this.uid,
                    this.sec_uid = e.sec_uid || this.sec_uid,
                    this.login_type = e.login_type || this.login_type,
                    s = R(e, "debug", s),
                    this.ignore_visitor = R(e, "ignore_visitor", this.ignore_visitor),
                    this.ignore_report = R(e, "ignore_report", this.ignore_report),
                    this.force_post = R(e, "force_post", this.force_post),
                    this.auto = R(e, "auto", this.auto),
                    this.auto_pv = R(e, "auto_pv", this.auto_pv),
                    this.auto_sftag = R(e, "auto_sftag", this.auto_sftag),
                    this.auto_error = R(e, "auto_error", this.auto_error),
                    this.canParentAutoPop = R(e, "canParentAutoPop", this.canParentAutoPop),
                    this.q = e.q || this.q,
                    this.onload = e.onload || this.onload,
                e.ignore_referrers && e.ignore_referrers.constructor === Array && (y = e.ignore_referrers),
                    I = this.initParams(e.storeKey || this.storeKey || window.location.pathname),
                    m = q(u) || [],
                    f = q(c) || [],
                    function() {
                        var e = q(r) || [];
                        if (e.length && 0 < e.length) {
                            for (var t = 0; t < e.length; t++)
                                f.push(e[t]);
                            q(c, f),
                                q(r, _),
                                e = null
                        }
                    }(),
                "" === this.url && (log("Please provide server URL"),
                    this.ignore_visitor = !0),
                    window.name && 0 === window.name.indexOf("sf_gather:") ? this.passed_data = JSON.parse(window.name.replace("sf_gather:", "")) : location.hash && 0 === location.hash.indexOf("#sf_gather:") && (this.passed_data = JSON.parse(location.hash.replace("#sf_gather:", ""))),
                this.passed_data && this.passed_data.token && this.passed_data.purpose && (this.passed_data.token != q("sf_gather_old_token") && (q("sf_gather_token", this.passed_data.token),
                    q("sf_gather_old_token", this.passed_data.token)),
                "heatmap" === this.passed_data.purpose && (this.ignore_visitor = !0,
                    showLoader(),
                    loadJS(this.url + "/views/heatmap.js", hideLoader))),
                this.auto && this.initAction(),
                    console,
                this.onload.constructor !== Array && (this.onload = []),
                this.q.constructor !== Array && (this.q = []),
                    this.heartBeat(),
                    V(a, this.device_id),
                    location.search)
                for (var t = location.search.substring(1).split("&"), i = 0; i < t.length; i++) {
                    var n = t[i].split("=");
                    n[0] == a ? V("sf_gather_cmp_id", n[1]) : "sf_gather_uid" == n[0] && V("sf_gather_cmp_uid", n[1])
                }
        }
        ,
        this.initParams = function(e) {
            var t = e + "/" + this.app_id;
            if (!s) {
                for (var i = 0, n = 0, a = 0, r = 0; r < t.length; r++)
                    i += a = t.charCodeAt(r),
                    47 == a && n++;
                t = i.toString(16) + "_" + n
            }
            return log("F35大数据:" + t),
                t
        }
        ,
        this.initAction = function() {
            var t = this;
            this.auto_sftag && O(document, "click", function(e) {
                t.globalClickEventHandler(e)
            }),
            this.auto_pv && (O(window, "load", function() {
                t.onPageView()
            }),
                O(window, "hashchange", function() {
                    t.onPageView()
                })),
            this.auto_error && (window.onerror = function() {
                    t.onError(arguments)
                }
            )
        }
        ,
        this.heartBeat = function() {
            var t = this;
            if (!this.ignore_report) {
                var e = 0;
                if (void 0 !== this.onload && 0 < this.onload.length) {
                    for (e = 0; e < this.onload.length; e++)
                        "function" == typeof this.onload[e] && this.onload[e]();
                    this.onload = []
                }
                if (void 0 !== this.q && 0 < this.q.length) {
                    var i, n = this.q;
                    for (this.q = [],
                             e = 0; e < n.length; e++)
                        i = n[e],
                            log("Processing queued call", i),
                            "function" == typeof this[i] ? this[i]() : i.constructor === Array && 0 < i.length && void 0 !== this[i[0]] && this[i[0]].apply(this, i.slice(1))
                }
                if (h && b && L) {
                    var a = N();
                    S < a - l && (this.session_duration(a - l),
                        l = a)
                }
                if (0 < m.length && !this.ignore_visitor) {
                    if (1 === m.length)
                        m.forEach(function(e) {
                            t.toRequestQueue(e)
                        }),
                            m = [];
                    else {
                        var r = m.splice(0, D)
                            , s = {
                            event_id: "batch",
                            type: "batch",
                            properties: []
                        };
                        r.forEach(function(e) {
                            e.type || (e.type = "event"),
                                s.properties.push(e)
                        }),
                            this.toRequestQueue(s)
                    }
                    q(u, m)
                }
                if (0 < f.length && A && N() > k) {
                    A = !1;
                    var o = f.shift();
                    log("Processing request", o),
                        this.sendXmlHttpRequest(o, function(e, t) {
                            log("Request Finished", t, e),
                            e && (f.unshift(t),
                                k = N() + T),
                                q(c, f),
                                A = !0
                        })
                }
            }
            setTimeout(function() {
                t.heartBeat()
            }, p)
        }
        ,
        this.sendDataDirect = function(e, t, i) {
            if (!this.ignore_visitor && e && "function" == typeof e)
                if (this.device_id)
                    if (this.url)
                        if (t) {
                            var n = this.buildEvent(t);
                            if (n) {
                                var a = this.buildRequest(n);
                                _.push(a),
                                    q(r, _),
                                    this.sendXmlHttpRequest(a, this.createTimeoutFunc(e, i))
                            }
                        } else
                            this.createTimeoutFunc(e, i);
                    else
                        log("url is missing");
                else
                    log("device_id is missing")
        }
        ,
        this.createTimeoutFunc = function(e, t) {
            if (e) {
                var i = !1;
                function n() {
                    0 == arguments.length ? log("超时回调") : (log("请求回调参数：" + JSON.stringify(arguments)),
                    arguments[0] || (_.shift(arguments[1]),
                        q(r, _))),
                    i || (i = !0,
                        e(arguments))
                }
                return t = isNaN(t) ? 1e3 : t,
                    setTimeout(n, t),
                    n
            }
        }
        ,
        this.globalClickEventHandler = function(e) {
            var t = B(e)
                , i = j(t);
            if (i && this.q.push(["add_event", i]),
                    this.canParentAutoPop)
                for (; t.parentElement; )
                    (i = j(t = t.parentElement)) && this.q.push(["add_event", i])
        }
        ,
        this.buildRequest = function(e) {
            e.app_id = this.app_id,
                e.platform = this.platform,
                e.device_id = this.device_id,
                e.cookie_id = function(e) {
                    for (var t = e + "=", i = document.cookie.split(";"), n = 0, a = i.length; n < a; n++) {
                        for (var r = i[n]; " " === r.charAt(0); )
                            r = r.substring(1, r.length);
                        if (0 === r.indexOf(t))
                            return r.substring(t.length, r.length)
                    }
                    return null
                }("JSESSIONID") || "",
                e.sdk = "js",
                e.sdk_name = "SfGather-js",
                e.sdk_v = "1.0.12",
                e.s_w = function() {
                    var e = window.devicePixelRatio || 1
                        , t = Math.round(screen.width * e);
                    1242 === t && "ios" === U() && (t = 1080);
                    1082 === t && (t = 1080);
                    return t
                }(),
                e.s_h = function() {
                    var e = window.devicePixelRatio || 1
                        , t = Math.round(screen.height * e);
                    2208 === t && "ios" === U() && (t = 1920);
                    1922 === t && (t = 1920);
                    return t
                }(),
                e.model = function(e) {
                    if ("android" === U(e = e || navigator.userAgent) && /android\s+\d+(?:.\d+)*;\s+(.+)\s+build/i.test(e))
                        return RegExp.$1;
                    return ""
                }(),
                e.os = U(),
                e.os_v = function(e) {
                    var t = U(e = e || navigator.userAgent);
                    if ("android" === t) {
                        if (/android\s+(\d+(.\d+)*)/i.test(e))
                            return RegExp.$1
                    } else if ("ios" === t && /cpu\s+(?:iphone\s+)?os\s+(\d+(_\d+)*)/i.test(e))
                        return RegExp.$1.replace(/_/g, ".");
                    return ""
                }();
            var t = function() {
                var e = {
                    appname: "unknown",
                    version: 0
                }
                    , t = window.navigator.userAgent.toLowerCase();
                /(msie|firefox|opera|chrome|netscape)\D+(\d[\d.]*)/.test(t) ? (e.appname = RegExp.$1,
                    e.version = RegExp.$2) : /version\D+(\d[\d.]*).*safari/.test(t) && (e.appname = "safari",
                    e.version = RegExp.$2);
                return e
            }();
            return e.browser = t.appname,
                e.browser_v = t.version,
            e.event_id || (e.event_id = "view_default"),
            e.type || (e.type = "event"),
            e.time || (e.time = E()),
                e
        }
        ,
        this.toRequestQueue = function(e) {
            this.ignore_visitor || (this.device_id ? this.url ? (this.buildRequest(e),
            f.length > o && f.shift(),
                f.push(e),
                q(c, f)) : log("url is missing") : log("device_id is missing"))
        }
        ,
        this.begin_session = function(e) {
            if (!h) {
                log("Session started"),
                    l = N(),
                    h = !0,
                    b = !e;
                var t = {
                    begin_session: 1,
                    event_id: "session"
                };
                this.add_event(t)
            }
        }
        ,
        this.set_login_info = function(e, t, i) {
            e && (this.uid = e),
            t && (this.sec_uid = t),
            i && (this.login_type = i)
        }
        ,
        this.session_duration = function(e) {
            h && (log("Session extended", e),
                this.add_event({
                    session_duration: e,
                    event_id: "session_duration"
                }))
        }
        ,
        this.end_session = function(e) {
            h && (e = e || N() - l,
                log("Ending session"),
                this.reportViewDuration(),
                h = !1,
                this.add_event({
                    event_id: "session",
                    end_session: 1,
                    session_duration: e
                }))
        }
        ,
        this.change_id = function(e, t) {
            if (this.device_id != e) {
                t || (this.end_session(),
                    v = {});
                var i = this.device_id;
                this.device_id = e,
                    V(a, this.device_id),
                    log("Changing id"),
                    t ? this.toRequestQueue({
                        old_device_id: i
                    }) : this.begin_session(!b)
            }
        }
        ,
        this.add_event = function(e) {
            var t = this.buildEvent(e);
            t && (m.push(t),
                q(u, m))
        }
        ,
        this.buildEvent = function(e) {
            if (!this.ignore_visitor) {
                var t = {};
                return t.time = E(),
                    e.page_url ? (t.page_url = e.page_url,
                        delete e.page_url) : t.page_url = location.href,
                    e.page_ref ? (t.page_ref = e.page_ref,
                        delete e.page_ref) : t.page_ref = document.referrer,
                    e.page_name ? (t.page_name = e.page_name,
                        delete e.page_name) : document.getElementsByTagName("title")[0] && (t.page_name = document.getElementsByTagName("title")[0].innerHTML),
                    e.event_id ? (t.event_id = e.event_id,
                        delete e.event_id) : t.event_id = "view_default",
                    t.properties = e,
                this.uid && (t.uid = this.uid),
                this.sec_uid && (t.sec_uid = this.sec_uid),
                this.login_type && (t.login_type = this.login_type),
                    t
            }
        }
        ,
        this.start_event = function(e) {
            v[e] ? log("Timed event with key " + e + " already started") : v[e] = N()
        }
        ,
        this.end_event = function(e) {
            "string" == typeof e && (e = {
                key: e
            }),
                e.dur = N() - v[e.key],
                this.add_event(e),
                delete v[e.key]
        }
        ,
        this.user_details = function(e) {
            log("Adding userdetails: ", e);
            this.toRequestQueue({
                user_details: JSON.stringify(function(e, t) {
                    for (var i, n = {}, a = 0; a < t.length; a++)
                        i = t[a],
                        void 0 !== e[i] && (n[i] = e[i]);
                    return n
                }(e, ["name", "username", "email", "organization", "phone", "picture", "gender", "byear", "custom"]))
            })
        }
        ,
        this.onError = function(e) {
            var t, i, n;
            0 < e.length && (t = e[0]),
            1 < e.length && (i = e[1]),
            2 < e.length && (n = e[2]);
            var a = "";
            void 0 !== t && (a = a + t + "\n"),
            void 0 !== i && (a += "at " + i),
            void 0 !== n && (a += ":" + n),
                a += "\n";
            try {
                for (var r = [], s = e.callee.caller; s; )
                    r.push(s.name),
                        s = s.caller;
                a += r.join("\n")
            } catch (e) {}
            this.recordError({
                stack: a,
                event_id: "error_auto"
            }, !1)
        }
        ,
        this.track_errors = function(e, t) {
            this.recordError(e, !0, t)
        }
        ,
        this.add_log = function(e) {
            g.push(e)
        }
        ,
        this.stop_time = function() {
            L && (L = !1,
                t = N() - l,
                n = N() - C)
        }
        ,
        this.start_time = function() {
            L || (L = !0,
                l = N() - t,
                C = N() - n,
                n = 0)
        }
        ,
        this.track_sessions = function() {
            this.begin_session(),
                this.start_time();
            var e = this;
            O(window, "beforeunload", function() {
                e.end_session()
            }),
                O(window, "unload", function() {
                    e.end_session()
                });
            var t = "hidden";
            function i() {
                document[t] ? e.stop_time() : e.start_time()
            }
            function n() {
                x <= $ && e.start_time(),
                    $ = 0
            }
            t in document ? document.addEventListener("visibilitychange", i) : (t = "mozHidden")in document ? document.addEventListener("mozvisibilitychange", i) : (t = "webkitHidden")in document ? document.addEventListener("webkitvisibilitychange", i) : (t = "msHidden")in document ? document.addEventListener("msvisibilitychange", i) : "onfocusin"in document ? (O(window, "focusin", function() {
                e.start_time()
            }),
                O(window, "focusout", function() {
                    e.stop_time()
                })) : (O(window, "focus", function() {
                e.start_time()
            }),
                O(window, "blur", function() {
                    e.stop_time()
                }),
                O(window, "pageshow", function() {
                    e.start_time()
                }),
                O(window, "pagehide", function() {
                    e.stop_time()
                })),
                O(window, "mousemove", n),
                O(window, "click", n),
                O(window, "keydown", n),
                O(window, "scroll", n),
                setInterval(function() {
                    x <= ++$ && e.stop_time()
                }, 6e4)
        }
        ,
        this.track_pageview = function(e, t) {
            if (this.reportViewDuration(),
                e && e.constructor === Array && (t = e,
                    e = null),
                    e = e || window.location.pathname,
                t && t.length)
                for (var i = 0; i < t.length; i++)
                    try {
                        if (new RegExp(t[i]).test(e))
                            return void log("Ignored:", e)
                    } catch (e) {}
            w = e,
                C = N();
            var n = {
                name: e,
                visit: 1,
                domain: window.location.hostname
            };
            if (void 0 !== document.referrer && document.referrer.length) {
                var a = P.exec(document.referrer);
                a && a[11] && a[11] != window.location.hostname && (n.start = 1)
            }
            n.event_id = "view_page",
                this.add_event(n)
        }
        ,
        this.onPageView = function() {
            var e = {
                event_id: "view_page_auto"
            };
            window.gatherConfig && window.gatherConfig._st && window.gatherConfig._st instanceof Date && (e.load_time = (new Date).getTime() - window.gatherConfig._st.getTime()),
                this.add_event(e)
        }
        ,
        this.moniter_autoPV = this.onPageView,
        this.track_clicks = function(e, o) {
            e = e || document;
            var l = !0
                , d = this;
            O(e, "click", function(e) {
                if (l) {
                    if (l = !1,
                            F(e),
                        void 0 !== e.pageX && void 0 !== e.pageY) {
                        var t, i = (s = document,
                            Math.max(Math.max(s.body.scrollHeight, s.documentElement.scrollHeight), Math.max(s.body.offsetHeight, s.documentElement.offsetHeight), Math.max(s.body.clientHeight, s.documentElement.clientHeight))), n = (r = document,
                            Math.max(Math.max(r.body.scrollWidth, r.documentElement.scrollWidth), Math.max(r.body.offsetWidth, r.documentElement.offsetWidth), Math.max(r.body.clientWidth, r.documentElement.clientWidth))), a = {
                            type: "click",
                            x: e.pageX,
                            y: e.pageY,
                            width: n,
                            height: i,
                            domain: window.location.hostname
                        };
                        (t = o ? Object.assign(o, a) : a).event_id = "click",
                            d.add_event(t)
                    }
                    setTimeout(function() {
                        l = !0
                    }, 1e3)
                }
                var r, s
            })
        }
        ,
        this.track_links = function(e) {
            O(e = e || document, "click", function(e) {
                var t = B(e).closest("a");
                t && (F(e),
                    this.add_event({
                        event_id: "click_link",
                        href: t.href,
                        text: t.innerText,
                        id: t.id,
                        x: e.pageX,
                        y: e.pageY
                    }),
                void 0 === t.href || "_blank" === t.target || e.metaKey || e.altKey || e.ctrlKey || e.shiftKey || 0 !== t.href.replace(window.location.href.split("#")[0], "").indexOf("#") && this.end_session())
            })
        }
        ,
        this.track_forms = function(e) {
            function l(e) {
                return e.name || e.id || e.type || e.nodeName
            }
            e = e || document;
            var d = this;
            O(e, "submit", function(e) {
                var t, i = B(e), n = {
                    id: i.id,
                    name: i.name,
                    action: i.action,
                    method: i.method
                };
                if (void 0 !== i.elements)
                    for (var a = 0; a < i.elements.length; a++)
                        if ((t = i.elements[a]) && "password" != t.type)
                            if (void 0 === n["input:" + l(t)] && (n["input:" + l(t)] = []),
                                "select" == t.nodeName.toLowerCase())
                                if (void 0 !== t.multiple) {
                                    var r = [];
                                    if (void 0 !== t.options)
                                        for (var s = 0; s < t.options.length; s++)
                                            t.options[s].selected && r.push(t.options[s].value);
                                    n["input:" + l(t)].push(r.join(", "))
                                } else
                                    n["input:" + l(t)].push(t.options[t.selectedIndex].value);
                            else
                                "input" == t.nodeName.toLowerCase() ? void 0 === t.type || "checkbox" != t.type.toLowerCase() && "radio" != t.type.toLowerCase() ? n["input:" + l(t)].push(t.value) : t.checked && n["input:" + l(t)].push(t.value) : "textarea" == t.nodeName.toLowerCase() ? n["input:" + l(t)].push(t.value) : void 0 !== t.value && n["input:" + l(t)].push(t.value);
                for (var o in n)
                    void 0 !== n[o].join && (n[o] = n[o].join(", "));
                n.event_id = "formSubmit",
                    d.add_event(n),
                    d.end_session()
            })
        }
        ,
        this.collect_from_forms = function(h, p) {
            h = h || document;
            var f = this;
            O(h, "submit", function(e) {
                var t, i = B(e), n = {}, a = !1;
                if (void 0 !== i.elements) {
                    var r, s, o = {}, l = h.getElementsByTagName("LABEL");
                    for (r = 0; r < l.length; r++)
                        l[r].htmlFor && "" !== l[r].htmlFor && (o[l[r].htmlFor] = l[r].innerText || l[r].textContent || l[r].innerHTML);
                    for (r = 0; r < i.elements.length; r++)
                        if ((t = i.elements[r]) && "password" != t.type && -1 == t.className.indexOf("sf_gather_user_ignore")) {
                            var d = "";
                            if ("select" == t.nodeName.toLowerCase())
                                if (void 0 !== t.multiple) {
                                    var c = [];
                                    if (void 0 !== t.options)
                                        for (s = 0; s < t.options.length; s++)
                                            t.options[s].selected && c.push(t.options[s].value);
                                    d = c.join(", ")
                                } else
                                    d = t.options[t.selectedIndex].value;
                            else
                                "input" == t.nodeName.toLowerCase() ? void 0 === t.type || "checkbox" != t.type.toLowerCase() && "radio" != t.type.toLowerCase() ? d = t.value : t.checked && (d = t.value) : "textarea" == t.nodeName.toLowerCase() ? d = t.value : void 0 !== t.value && (d = t.value);
                            if (t.className && -1 != t.className.indexOf("sf_gather_user_")) {
                                var u = t.className.split(" ");
                                for (s = 0; s < u.length; s++)
                                    if (0 === u[s].indexOf("sf_gather_user_")) {
                                        n[u[s].replace("sf_gather_user_", "")] = d,
                                            a = !0;
                                        break
                                    }
                            } else
                                t.type && "email" == t.type.toLowerCase() || t.name && -1 != t.name.toLowerCase().indexOf("email") || t.id && -1 != t.id.toLowerCase().indexOf("email") || t.id && o[t.id] && -1 != o[t.id].toLowerCase().indexOf("email") || /[^@\s]+@[^@\s]+\.[^@\s]+/.test(d) ? (n.email || (n.email = d),
                                    a = !0) : t.name && -1 != t.name.toLowerCase().indexOf("username") || t.id && -1 != t.id.toLowerCase().indexOf("username") || t.id && o[t.id] && -1 != o[t.id].toLowerCase().indexOf("username") ? (n.username || (n.username = d),
                                    a = !0) : t.name && (-1 != t.name.toLowerCase().indexOf("tel") || -1 != t.name.toLowerCase().indexOf("phone") || -1 != t.name.toLowerCase().indexOf("number")) || t.id && (-1 != t.id.toLowerCase().indexOf("tel") || -1 != t.id.toLowerCase().indexOf("phone") || -1 != t.id.toLowerCase().indexOf("number")) || t.id && o[t.id] && (-1 != o[t.id].toLowerCase().indexOf("tel") || -1 != o[t.id].toLowerCase().indexOf("phone") || -1 != o[t.id].toLowerCase().indexOf("number")) ? (n.phone || (n.phone = d),
                                    a = !0) : t.name && (-1 != t.name.toLowerCase().indexOf("org") || -1 != t.name.toLowerCase().indexOf("company")) || t.id && (-1 != t.id.toLowerCase().indexOf("org") || -1 != t.id.toLowerCase().indexOf("company")) || t.id && o[t.id] && (-1 != o[t.id].toLowerCase().indexOf("org") || -1 != o[t.id].toLowerCase().indexOf("company")) ? (n.organization || (n.organization = d),
                                    a = !0) : (t.name && -1 != t.name.toLowerCase().indexOf("name") || t.id && -1 != t.id.toLowerCase().indexOf("name") || t.id && o[t.id] && -1 != o[t.id].toLowerCase().indexOf("name")) && (n.name || (n.name = ""),
                                    n.name += d + " ",
                                    a = !0)
                        }
                }
                a && (log("Gathered user data", n),
                    p ? f.user_details({
                        custom: n
                    }) : f.user_details(n)),
                    f.end_session()
            })
        }
        ,
        this.reportViewDuration = function() {
            if (w) {
                var e = {
                    event_id: "view_page_duration",
                    name: w,
                    segment: this.platform,
                    dur: N() - C
                };
                this.add_event(e),
                    w = null
            }
        }
        ,
        log = function() {
            s && "undefined" != typeof console && arguments[1] && "object" == typeof arguments[1] && (arguments[1] = JSON.stringify(arguments[1]))
        }
        ,
        this.recordError = function(e, t, i) {
            if (e) {
                i = i || null;
                var n = "";
                "object" == typeof e ? void 0 !== e.stack ? n = e.stack : (void 0 !== e.name && (n += e.name + ":"),
                void 0 !== e.message && (n += e.message + "\n"),
                void 0 !== e.fileName && (n += "in " + e.fileName + "\n"),
                void 0 !== e.lineNumber && (n += "on " + e.lineNumber),
                void 0 !== e.columnNumber && (n += ":" + e.columnNumber)) : n = e + "",
                    t = !!t;
                var a = function() {
                    var e = {};
                    if (e._app_version = this.app_version,
                            e._ua = navigator.userAgent,
                            screen.width) {
                        var t = screen.width ? parseInt(screen.width) : 0
                            , i = screen.height ? parseInt(screen.height) : 0;
                        if (0 !== t && 0 !== i) {
                            if (navigator.platform && /iPad|iPhone|iPod/.test(navigator.platform) && window.devicePixelRatio)
                                t = Math.round(t * window.devicePixelRatio),
                                    i = Math.round(i * window.devicePixelRatio);
                            else if (90 === Math.abs(window.orientation)) {
                                var n = t;
                                t = i,
                                    i = n
                            }
                            e._resolution = t + "x" + i
                        }
                    }
                    window.devicePixelRatio && (e._density = window.devicePixelRatio);
                    var a = navigator.language || navigator.browserLanguage || navigator.systemLanguage || navigator.userLanguage;
                    if (void 0 !== a && (e._locale = a),
                        void 0 !== document.referrer && document.referrer.length) {
                        var r = P.exec(document.referrer);
                        if (r && r[11] && r[11] != window.location.hostname) {
                            var s = !1;
                            if (y && y.length)
                                for (var o = 0; o < y.length; o++)
                                    try {
                                        if (new RegExp(y[o]).test(document.referrer)) {
                                            log("Ignored:", document.referrer),
                                                s = !0;
                                            break
                                        }
                                    } catch (e) {}
                            s || (e._store = document.referrer)
                        }
                    }
                    return log("Got metrics", e),
                        e
                }()
                    , r = {
                    _resolution: a._resolution,
                    _error: n,
                    _app_version: a._app_version,
                    _run: N() - d,
                    _not_os_specific: !0
                }
                    , s = navigator.battery || navigator.webkitBattery || navigator.mozBattery || navigator.msBattery;
                s && (r._bat = Math.floor(100 * s.level)),
                void 0 !== navigator.onLine && (r._online = !!navigator.onLine),
                    r._background = !document.hasFocus(),
                0 < g.length && (r._logs = g.join("\n")),
                    g = [],
                    r._nonfatal = t,
                    r._view = (window.location.pathname || "") + (window.location.search || "") + (window.location.hash || ""),
                void 0 !== i && (r._custom = i);
                try {
                    var o = document.createElement("canvas").getContext("experimental-webgl");
                    r._opengl = o.getParameter(o.VERSION)
                } catch (e) {}
                var l = e.event_id ? e.event_id : "error";
                this.add_event({
                    error_log: JSON.stringify(r),
                    event_id: l
                })
            }
        }
        ,
        this.sendXmlHttpRequest = function(t, i) {
            try {
                log("Sending XML HTTP request");
                var e = window.XMLHttpRequest ? new window.XMLHttpRequest : window.ActiveXObject ? new ActiveXObject("Microsoft.XMLHTTP") : null
                    , n = JSON.stringify(t);
                e.open("POST", this.url + "", !0),
                    e.setRequestHeader("Content-type", "application/x-www-form-urlencoded"),
                    e.setRequestHeader("Content-type", "text/html; charset=utf-8"),
                    e.onreadystatechange = function() {
                        4 === this.readyState && 200 <= this.status && this.status < 500 ? "function" == typeof i && i(!1, t) : 4 === this.readyState && (log("Failed Server XML HTTP request", this.status),
                        "function" == typeof i && i(!0, t))
                    }
                    ,
                    e.send(n)
            } catch (e) {
                log("Failed XML HTTP request", e),
                "function" == typeof i && i(!0, t)
            }
        }
        ,
    Element.prototype.closest || (Element.prototype.closest = function(e) {
            var t = this;
            for (e = e.toUpperCase(); t; ) {
                if (t.nodeName.toUpperCase() == e)
                    return t;
                t = t.parentElement
            }
        }
    );
    var B = function(e) {
        return e ? void 0 !== e.target ? e.target : e.srcElement : window.event.srcElement
    };
    function F(e) {
        return void 0 === e.pageY && "number" == typeof e.clientX && document.documentElement && (e.pageX = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft,
            e.pageY = e.clientY + document.body.scrollTop + document.documentElement.scrollTop),
            e
    }
    function V(e, t, i) {
        i = i || !1;
        var n, a = !1;
        if ("undefined" != typeof localStorage) {
            a = !0;
            try {
                localStorage.setItem("testLocal", !0)
            } catch (e) {
                a = !1
            }
        }
        if (null != t && ("object" == typeof t && (t = JSON.stringify(t)),
                a ? localStorage.setItem(e, t) : i || r(e, t, 30)),
            void 0 === t) {
            a ? n = localStorage.getItem(e) : i || (n = function(e) {
                for (var t = e + "=", i = document.cookie.split(";"), n = 0, a = i.length; n < a; n++) {
                    for (var r = i[n]; " " === r.charAt(0); )
                        r = r.substring(1, r.length);
                    if (0 === r.indexOf(t))
                        return r.substring(t.length, r.length)
                }
                return null
            }(e));
            try {
                n = JSON.parse(n)
            } catch (e) {
                n = n
            }
            return n
        }
        function r(e, t, i) {
            var n = new Date;
            n.setTime(n.getTime() + 24 * i * 60 * 60 * 1e3);
            var a = "; expires=" + n.toGMTString();
            document.cookie = e + "=" + t + a + "; path=/"
        }
        null === t && (a ? localStorage.removeItem(e) : i || r(e, "", -1))
    }
    function q(e, t) {
        if ("string" == typeof I && "string" == typeof e && 0 !== e.trim().length) {
            var i = I + "_" + e;
            if (void 0 === t) {
                var n = V(i);
                return n || null
            }
            V(i, t)
        }
    }
    function U(e) {
        return e = e || navigator.userAgent,
            /(Windows NT 10.0|Windows 10)/i.test(e) ? "windows 10" : /(Windows NT 6.3|Windows 8.1)/i.test(e) ? "windows 8.1" : /(Windows NT 6.2|Windows 8)/i.test(e) ? "windows 8" : /(Windows NT 6.1|Windows 7)/i.test(e) ? "windows 7" : /Windows NT 6.0/i.test(e) ? "windows vista" : /Windows NT 5.2/i.test(e) ? "windows 2003" : /Windows NT 5.1/i.test(e) ? "windows xp" : /Windows NT 5.0/i.test(e) ? "windows 2000" : /(iPhone|iPad|iPod|iOS)/i.test(e) ? "ios" : /android/i.test(e) ? "android" : /linux/i.test(e) ? "linux" : /(macintosh|mac os x)/i.test(e) ? "mac os" : ""
    }
}
if (function(e, _) {
        "use strict";
        var i = _.prototype.trim
            , n = _.prototype.trimRight
            , a = _.prototype.trimLeft
            , r = function(e) {
            return 1 * e || 0
        }
            , s = function(e, t) {
            if (t < 1)
                return "";
            for (var i = ""; 0 < t; )
                1 & t && (i += e),
                    t >>= 1,
                    e += e;
            return i
        }
            , o = [].slice
            , l = function(e) {
            return null == e ? "\\s" : e.source ? e.source : "[" + h.escapeRegExp(e) + "]"
        };
        function d(e, t) {
            var i, n, a = e.toLowerCase();
            for (t = [].concat(t),
                     i = 0; i < t.length; i += 1)
                if (n = t[i]) {
                    if (n.test && n.test(e))
                        return !0;
                    if (n.toLowerCase() === a)
                        return !0
                }
        }
        var c = {
            lt: "<",
            gt: ">",
            quot: '"',
            amp: "&",
            apos: "'"
        }
            , t = {};
        for (var u in c)
            t[c[u]] = u;
        t["'"] = "#39";
        var m = function() {
            function p(e) {
                return Object.prototype.toString.call(e).slice(8, -1).toLowerCase()
            }
            var f = s
                , e = function() {
                return e.cache.hasOwnProperty(arguments[0]) || (e.cache[arguments[0]] = e.parse(arguments[0])),
                    e.format.call(null, e.cache[arguments[0]], arguments)
            };
            return e.format = function(e, t) {
                var i, n, a, r, s, o, l, d = 1, c = e.length, u = "", h = [];
                for (n = 0; n < c; n++)
                    if ("string" === (u = p(e[n])))
                        h.push(e[n]);
                    else if ("array" === u) {
                        if ((r = e[n])[2])
                            for (i = t[d],
                                     a = 0; a < r[2].length; a++) {
                                if (!i.hasOwnProperty(r[2][a]))
                                    throw new Error(m('[_.sprintf] property "%s" does not exist', r[2][a]));
                                i = i[r[2][a]]
                            }
                        else
                            i = r[1] ? t[r[1]] : t[d++];
                        if (/[^s]/.test(r[8]) && "number" != p(i))
                            throw new Error(m("[_.sprintf] expecting number but found %s", p(i)));
                        switch (r[8]) {
                            case "b":
                                i = i.toString(2);
                                break;
                            case "c":
                                i = _.fromCharCode(i);
                                break;
                            case "d":
                                i = parseInt(i, 10);
                                break;
                            case "e":
                                i = r[7] ? i.toExponential(r[7]) : i.toExponential();
                                break;
                            case "f":
                                i = r[7] ? parseFloat(i).toFixed(r[7]) : parseFloat(i);
                                break;
                            case "o":
                                i = i.toString(8);
                                break;
                            case "s":
                                i = (i = _(i)) && r[7] ? i.substring(0, r[7]) : i;
                                break;
                            case "u":
                                i = Math.abs(i);
                                break;
                            case "x":
                                i = i.toString(16);
                                break;
                            case "X":
                                i = i.toString(16).toUpperCase()
                        }
                        i = /[def]/.test(r[8]) && r[3] && 0 <= i ? "+" + i : i,
                            o = r[4] ? "0" == r[4] ? "0" : r[4].charAt(1) : " ",
                            l = r[6] - _(i).length,
                            s = r[6] ? f(o, l) : "",
                            h.push(r[5] ? i + s : s + i)
                    }
                return h.join("")
            }
                ,
                e.cache = {},
                e.parse = function(e) {
                    for (var t = e, i = [], n = [], a = 0; t; ) {
                        if (null !== (i = /^[^\x25]+/.exec(t)))
                            n.push(i[0]);
                        else if (null !== (i = /^\x25{2}/.exec(t)))
                            n.push("%");
                        else {
                            if (null === (i = /^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-fosuxX])/.exec(t)))
                                throw new Error("[_.sprintf] huh?");
                            if (i[2]) {
                                a |= 1;
                                var r = []
                                    , s = i[2]
                                    , o = [];
                                if (null === (o = /^([a-z_][a-z_\d]*)/i.exec(s)))
                                    throw new Error("[_.sprintf] huh?");
                                for (r.push(o[1]); "" !== (s = s.substring(o[0].length)); )
                                    if (null !== (o = /^\.([a-z_][a-z_\d]*)/i.exec(s)))
                                        r.push(o[1]);
                                    else {
                                        if (null === (o = /^\[(\d+)\]/.exec(s)))
                                            throw new Error("[_.sprintf] huh?");
                                        r.push(o[1])
                                    }
                                i[2] = r
                            } else
                                a |= 2;
                            if (3 === a)
                                throw new Error("[_.sprintf] mixing positional and named placeholders is not (yet) supported");
                            n.push(i)
                        }
                        t = t.substring(i[0].length)
                    }
                    return n
                }
                ,
                e
        }()
            , h = {
            VERSION: "2.3.0",
            isBlank: function(e) {
                return null == e && (e = ""),
                    /^\s*$/.test(e)
            },
            stripTags: function(e) {
                return null == e ? "" : _(e).replace(/<\/?[^>]+>/g, "")
            },
            capitalize: function(e) {
                return (e = null == e ? "" : _(e)).charAt(0).toUpperCase() + e.slice(1)
            },
            chop: function(e, t) {
                return null == e ? [] : (e = _(e),
                    0 < (t = ~~t) ? e.match(new RegExp(".{1," + t + "}","g")) : [e])
            },
            clean: function(e) {
                return h.strip(e).replace(/\s+/g, " ")
            },
            count: function(e, t) {
                if (null == e || null == t)
                    return 0;
                e = _(e);
                for (var i = 0, n = 0, a = (t = _(t)).length; -1 !== (n = e.indexOf(t, n)); )
                    i++,
                        n += a;
                return i
            },
            chars: function(e) {
                return null == e ? [] : _(e).split("")
            },
            swapCase: function(e) {
                return null == e ? "" : _(e).replace(/\S/g, function(e) {
                    return e === e.toUpperCase() ? e.toLowerCase() : e.toUpperCase()
                })
            },
            escapeHTML: function(e) {
                return null == e ? "" : _(e).replace(/[&<>"']/g, function(e) {
                    return "&" + t[e] + ";"
                })
            },
            unescapeHTML: function(e) {
                return null == e ? "" : _(e).replace(/\&([^;]+);/g, function(e, t) {
                    var i;
                    return t in c ? c[t] : (i = t.match(/^#x([\da-fA-F]+)$/)) ? _.fromCharCode(parseInt(i[1], 16)) : (i = t.match(/^#(\d+)$/)) ? _.fromCharCode(~~i[1]) : e
                })
            },
            escapeRegExp: function(e) {
                return null == e ? "" : _(e).replace(/([.*+?^=!:${}()|[\]\/\\])/g, "\\$1")
            },
            splice: function(e, t, i, n) {
                var a = h.chars(e);
                return a.splice(~~t, ~~i, n),
                    a.join("")
            },
            insert: function(e, t, i) {
                return h.splice(e, t, 0, i)
            },
            include: function(e, t) {
                return "" === t || null != e && -1 !== _(e).indexOf(t)
            },
            join: function() {
                var e = o.call(arguments)
                    , t = e.shift();
                return null == t && (t = ""),
                    e.join(t)
            },
            lines: function(e) {
                return null == e ? [] : _(e).split("\n")
            },
            reverse: function(e) {
                return h.chars(e).reverse().join("")
            },
            startsWith: function(e, t) {
                return "" === t || null != e && null != t && (e = _(e),
                    t = _(t),
                e.length >= t.length && e.slice(0, t.length) === t)
            },
            endsWith: function(e, t) {
                return "" === t || null != e && null != t && (e = _(e),
                    t = _(t),
                e.length >= t.length && e.slice(e.length - t.length) === t)
            },
            succ: function(e) {
                return null == e ? "" : (e = _(e)).slice(0, -1) + _.fromCharCode(e.charCodeAt(e.length - 1) + 1)
            },
            titleize: function(e) {
                return null == e ? "" : (e = _(e).toLowerCase()).replace(/(?:^|\s|-)\S/g, function(e) {
                    return e.toUpperCase()
                })
            },
            camelize: function(e) {
                return h.trim(e).replace(/[-_\s]+(.)?/g, function(e, t) {
                    return t ? t.toUpperCase() : ""
                })
            },
            underscored: function(e) {
                return h.trim(e).replace(/([a-z\d])([A-Z]+)/g, "$1_$2").replace(/[-\s]+/g, "_").toLowerCase()
            },
            dasherize: function(e) {
                return h.trim(e).replace(/([A-Z])/g, "-$1").replace(/[-_\s]+/g, "-").toLowerCase()
            },
            classify: function(e) {
                return h.titleize(_(e).replace(/[\W_]/g, " ")).replace(/\s/g, "")
            },
            humanize: function(e) {
                return h.capitalize(h.underscored(e).replace(/_id$/, "").replace(/_/g, " "))
            },
            trim: function(e, t) {
                return null == e ? "" : !t && i ? i.call(e) : (t = l(t),
                    _(e).replace(new RegExp("^" + t + "+|" + t + "+$","g"), ""))
            },
            ltrim: function(e, t) {
                return null == e ? "" : !t && a ? a.call(e) : (t = l(t),
                    _(e).replace(new RegExp("^" + t + "+"), ""))
            },
            rtrim: function(e, t) {
                return null == e ? "" : !t && n ? n.call(e) : (t = l(t),
                    _(e).replace(new RegExp(t + "+$"), ""))
            },
            truncate: function(e, t, i) {
                return null == e ? "" : (i = i || "...",
                    t = ~~t,
                    (e = _(e)).length > t ? e.slice(0, t) + i : e)
            },
            prune: function(e, t, i) {
                if (null == e)
                    return "";
                if (e = _(e),
                        t = ~~t,
                        i = null != i ? _(i) : "...",
                    e.length <= t)
                    return e;
                var n = e.slice(0, t + 1).replace(/.(?=\W*\w*$)/g, function(e) {
                    return e.toUpperCase() !== e.toLowerCase() ? "A" : " "
                });
                return ((n = n.slice(n.length - 2).match(/\w\w/) ? n.replace(/\s*\S+$/, "") : h.rtrim(n.slice(0, n.length - 1))) + i).length > e.length ? e : e.slice(0, n.length) + i
            },
            words: function(e, t) {
                return h.isBlank(e) ? [] : h.trim(e, t).split(t || /\s+/)
            },
            pad: function(e, t, i, n) {
                e = null == e ? "" : _(e),
                    t = ~~t;
                var a = 0;
                switch (i ? 1 < i.length && (i = i.charAt(0)) : i = " ",
                    n) {
                    case "right":
                        return a = t - e.length,
                        e + s(i, a);
                    case "both":
                        return a = t - e.length,
                        s(i, Math.ceil(a / 2)) + e + s(i, Math.floor(a / 2));
                    default:
                        return a = t - e.length,
                        s(i, a) + e
                }
            },
            lpad: function(e, t, i) {
                return h.pad(e, t, i)
            },
            rpad: function(e, t, i) {
                return h.pad(e, t, i, "right")
            },
            lrpad: function(e, t, i) {
                return h.pad(e, t, i, "both")
            },
            sprintf: m,
            vsprintf: function(e, t) {
                return t.unshift(e),
                    m.apply(null, t)
            },
            toNumber: function(e, t) {
                return e ? (e = h.trim(e)).match(/^-?\d+(?:\.\d+)?$/) ? r(r(e).toFixed(~~t)) : NaN : 0
            },
            numberFormat: function(e, t, i, n) {
                if (isNaN(e) || null == e)
                    return "";
                n = "string" == typeof n ? n : ",";
                var a = (e = e.toFixed(~~t)).split(".")
                    , r = a[0]
                    , s = a[1] ? (i || ".") + a[1] : "";
                return r.replace(/(\d)(?=(?:\d{3})+$)/g, "$1" + n) + s
            },
            strRight: function(e, t) {
                if (null == e)
                    return "";
                e = _(e);
                var i = (t = null != t ? _(t) : t) ? e.indexOf(t) : -1;
                return ~i ? e.slice(i + t.length, e.length) : e
            },
            strRightBack: function(e, t) {
                if (null == e)
                    return "";
                e = _(e);
                var i = (t = null != t ? _(t) : t) ? e.lastIndexOf(t) : -1;
                return ~i ? e.slice(i + t.length, e.length) : e
            },
            strLeft: function(e, t) {
                if (null == e)
                    return "";
                e = _(e);
                var i = (t = null != t ? _(t) : t) ? e.indexOf(t) : -1;
                return ~i ? e.slice(0, i) : e
            },
            strLeftBack: function(e, t) {
                if (null == e)
                    return "";
                var i = (e += "").lastIndexOf(t = null != t ? "" + t : t);
                return ~i ? e.slice(0, i) : e
            },
            toSentence: function(e, t, i, n) {
                t = t || ", ",
                    i = i || " and ";
                var a = e.slice()
                    , r = a.pop();
                return 2 < e.length && n && (i = h.rtrim(t) + i),
                    a.length ? a.join(t) + i + r : r
            },
            toSentenceSerial: function() {
                var e = o.call(arguments);
                return e[3] = !0,
                    h.toSentence.apply(h, e)
            },
            slugify: function(e) {
                if (null == e)
                    return "";
                var i = "ąàáäâãåæăćęèéëêìíïîłńòóöôõøśșțùúüûñçżź"
                    , t = new RegExp(l(i),"g");
                return e = _(e).toLowerCase().replace(t, function(e) {
                    var t = i.indexOf(e);
                    return "aaaaaaaaaceeeeeiiiilnoooooosstuuuunczz".charAt(t) || "-"
                }),
                    h.dasherize(e.replace(/[^\w\s-]/g, ""))
            },
            surround: function(e, t) {
                return [t, e, t].join("")
            },
            quote: function(e, t) {
                return h.surround(e, t || '"')
            },
            unquote: function(e, t) {
                return t = t || '"',
                    e[0] === t && e[e.length - 1] === t ? e.slice(1, e.length - 1) : e
            },
            exports: function() {
                var e = {};
                for (var t in this)
                    this.hasOwnProperty(t) && !t.match(/^(?:include|contains|reverse)$/) && (e[t] = this[t]);
                return e
            },
            repeat: function(e, t, i) {
                if (null == e)
                    return "";
                if (t = ~~t,
                    null == i)
                    return s(_(e), t);
                for (var n = []; 0 < t; n[--t] = e)
                    ;
                return n.join(i)
            },
            naturalCmp: function(e, t) {
                if (e == t)
                    return 0;
                if (!e)
                    return -1;
                if (!t)
                    return 1;
                for (var i = /(\.\d+)|(\d+)|(\D+)/g, n = _(e).toLowerCase().match(i), a = _(t).toLowerCase().match(i), r = Math.min(n.length, a.length), s = 0; s < r; s++) {
                    var o = n[s]
                        , l = a[s];
                    if (o !== l) {
                        var d = parseInt(o, 10);
                        if (!isNaN(d)) {
                            var c = parseInt(l, 10);
                            if (!isNaN(c) && d - c)
                                return d - c
                        }
                        return o < l ? -1 : 1
                    }
                }
                return n.length === a.length ? n.length - a.length : e < t ? -1 : 1
            },
            levenshtein: function(e, t) {
                if (null == e && null == t)
                    return 0;
                if (null == e)
                    return _(t).length;
                if (null == t)
                    return _(e).length;
                e = _(e),
                    t = _(t);
                for (var i, n, a = [], r = 0; r <= t.length; r++)
                    for (var s = 0; s <= e.length; s++)
                        n = r && s ? e.charAt(s - 1) === t.charAt(r - 1) ? i : Math.min(a[s], a[s - 1], i) + 1 : r + s,
                            i = a[s],
                            a[s] = n;
                return a.pop()
            },
            toBoolean: function(e, t, i) {
                return "number" == typeof e && (e = "" + e),
                    "string" != typeof e ? !!e : !!d(e = h.trim(e), t || ["true", "1"]) || !d(e, i || ["false", "0"]) && void 0
            }
        };
        h.strip = h.trim,
            h.lstrip = h.ltrim,
            h.rstrip = h.rtrim,
            h.center = h.lrpad,
            h.rjust = h.lpad,
            h.ljust = h.rpad,
            h.contains = h.include,
            h.q = h.quote,
            h.toBool = h.toBoolean,
        "undefined" != typeof exports && ("undefined" != typeof module && module.exports && (module.exports = h),
            exports._s = h),
        "function" == typeof define && define.amd && define("underscore.string", [], function() {
            return h
        }),
            e._ = e._ || {},
            e._.string = e._.str = h
    }(this, String),
        define("templates", [], function() {
            return this.JST = this.JST || {},
                this.JST.acceptCriteriaOther = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += "\x3c!--收寄标准查询结果的模板文件 国际 --\x3e",
                            _.isEmpty(results) ? __p += '<tr><td colspan="8">' + (null == (__t = _l("请精简“物品名称”关键字进行检索。")) ? "" : __t) + "</td><tr>" : _.each(results, function(e, t) {
                                __p += "<tr><td>" + (null == (__t = e.goodsBigType) ? "" : __t) + "</td><td>" + (null == (__t = e.goodsName) ? "" : __t) + "</td><td>" + (null == (__t = "1" == e.receiptType ? _l("允许收寄") : "2" == e.receiptType ? _l("禁止收寄") : _l("限制收寄")) ? "" : __t) + "</td><td>" + (null == (__t = e.remark) ? "" : __t) + "</td></tr>"
                            });
                    return __p
                }
                ,
                this.JST.acceptCriteriaResultCN = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += "\x3c!--收寄标准查询结果的模板文件 中国大陆 --\x3e",
                            _.isEmpty(results) ? __p += '<tr><td colspan="8">请精简“物品名称”关键字进行检索。</td><tr>' : _.each(results, function(e, t) {
                                __p += "<tr><td>" + (null == (__t = e.goodsBigType) ? "" : __t) + "</td><td>" + (null == (__t = e.goodsName) ? "" : __t) + "</td><td>" + (null == (__t = e.landTransport) ? "" : __t) + "</td><td>" + (null == (__t = e.flightTransport) ? "" : __t) + "</td><td>" + (null == (__t = e.remark) ? "" : __t) + "</td></tr>"
                            });
                    return __p
                }
                ,
                this.JST.acceptCriteriaResultHMT = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += "\x3c!--收寄标准查询结果的模板文件 港澳台同城 --\x3e",
                            _.isEmpty(results) ? __p += '<tr><td colspan="8">请精简“物品名称”关键字进行检索。</td><tr>' : _.each(results, function(e, t) {
                                __p += "<tr><td>" + (null == (__t = e.goodsBigType) ? "" : __t) + "</td><td>" + (null == (__t = e.goodsName) ? "" : __t) + "</td><td>" + (null == (__t = e.landTransport) ? "" : __t) + "</td><td>" + (null == (__t = e.remark) ? "" : __t) + "</td></tr>"
                            });
                    return __p
                }
                ,
                this.JST.acsBillConfirm = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="billConfirm"><h3 class="top-title">' + __e(_l("订单确认")),
                        freightFee && (__p += "<small>" + __e(_l("运费")) + ' <span class="red">' + (null == (__t = freightFee) ? "" : __t) + "HKD</span></small></h3>"),
                            __p += "<h4>" + __e(_l("运单号")) + " " + (null == (__t = acsBillNo) ? "" : __t) + '</h4><div class="row"><div class="col-xs-12 title">' + __e(_l("寄件人")) + '</div></div><div class="row"><div class="col-xs-6">' + __e(_l("姓名")) + "：" + (null == (__t = sender.contact) ? "" : __t) + '</div><div class="col-xs-6">' + __e(_l("联络电邮")) + "：" + (null == (__t = sender.email) ? "" : __t) + '</div><div class="col-xs-6">' + __e(_l("电话号码")) + "：" + (null == (__t = sender.mobile) ? "" : __t) + "</div>",
                        isReceiverHK && (__p += '<div class="col-xs-6">' + __e(_l("托寄物")) + "：" + (null == (__t = cargoList.name) ? "" : __t) + "</div>"),
                            __p += '<div class="col-xs-12">' + __e(_l("留港期间地址")) + "：" + (null == (__t = _.uniq(_.compact([sender.addrInfo.province, sender.addrInfo.city, sender.addrInfo.county, sender.addrInfo.address]), !0).join("")) ? "" : __t) + '</div></div><div class="row"><div class="col-xs-12 title">' + __e(_l("收件人")) + '</div></div><div class="row"><div class="col-xs-6">' + __e(_l("姓名")) + "：" + (null == (__t = receiver.contact) ? "" : __t) + '</div><div class="col-xs-6">' + __e(_l("联络电邮")) + "：" + (null == (__t = receiver.email) ? "" : __t) + '</div><div class="col-xs-6">' + __e(_l("电话号码")) + "：" + (null == (__t = receiver.mobile) ? "" : __t) + "</div>",
                        receiver.addrInfo.postalCode && (__p += '<div class="col-xs-6">' + __e(_l("邮政编号")) + "：" + (null == (__t = receiver.addrInfo.postalCode) ? "" : __t) + "</div>"),
                            __p += '<div class="col-xs-12">' + __e(_l("上门地址")) + "：" + (null == (__t = _.uniq(_.compact([receiverCountry, receiver.addrInfo.province, receiver.addrInfo.city, receiver.addrInfo.county, receiver.addrInfo.address]), !0).join("")) ? "" : __t) + "</div></div>",
                        isReceiverHK || (__p += '<div class="row"><div class="col-xs-12 title">' + __e(_l("报关信息")) + '</div></div><div class="row"><div class="col-xs-12">' + __e(_l("文件")) + "：" + (null == (__t = "en" == Helper.getSiteLanguage() && cargoList.englishName ? cargoList.englishName : cargoList.name) ? "" : __t) + '</div><div class="col-xs-12">' + __e(_l("价值")) + "：" + (null == (__t = cargoList.price) ? "" : __t) + (null == (__t = "en" == Helper.getSiteLanguage() ? cargoList.currency : cargoList.currencyCn) ? "" : __t) + '</div><div class="col-xs-12">' + __e(_l("单位")) + "：" + (null == (__t = cargoList.uom) ? "" : __t) + '</div><div class="col-xs-12">' + __e(_l("原产地")) + "：" + (null == (__t = cargoList.origin) ? "" : __t) + "</div></div>"),
                        isReceiverHKorMACAO && (__p += '<div class="row"><div class="col-xs-12 title">' + __e(_l("支付方式")) + '</div></div><div class="row pay-type"><div class="col-xs-12"><a href="javascript:void(0)" class="aicon-checked" data-type="1">' + __e(_l("寄付")) + '</a></div><div class="col-xs-12"><a href="javascript:void(0)" class="aicon-check-Unseleted-x" data-type="2">' + __e(_l("到付")) + "</a></div></div>"),
                            __p += '<div class="submitWrapper"><button type="button" class="primary-button go-back">' + __e(_l("返回")) + '</button><button type="button" class="primary-button submit-order">' + __e(_l("确认订单")) + "</button></div></div>";
                    return __p
                }
                ,
                this.JST.acsBillInfoFill = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<div class="billInfoFill"><h4>' + __e(_l("运单号")) + " <span>" + (null == (__t = acsBillNo) ? "" : __t) + '</span></h4><div class="row"><div class="col-xs-12 title">' + __e(_l("寄件人")) + ' <span class="fr">*' + __e(_l("为必填")) + '</span></div></div><form class="form-horizontal sender-form"><div class="form-group text"><div class="col-xs-4 require form-label">' + __e(_l("姓名")) + '</div><div class="col-xs-4 require form-label">' + __e(_l("电话号码")) + '</div><div class="col-xs-4 require form-label">' + __e(_l("联络电邮")) + '</div></div><div class="form-group input"><div class="col-xs-4"><input type="text" class="form-control" placeholder="' + __e(_l("请输入寄件人姓名")) + '" id="sender-name" name="sender-name" data-parsley-pattern-message="' + __e(_l("该输入框不能包含特殊字符")) + '" data-parsley-pattern="^[\\u4e00-\\u9fa5|\\w| ]+$" data-parsley-required></div><div class="col-xs-4"><input type="text" class="form-control" placeholder="' + __e(_l("请输入电话号码")) + '" id="sender-mobile" name="sender-mobile" data-parsley-required data-parsley-pattern-message="' + __e(_l("您输入的手机号码格式不正确，请重新输入。")) + '" data-parsley-pattern="^(\\d{1,20})$"></div><div class="col-xs-4"><input type="text" class="form-control" placeholder="' + __e(_l("请输入电邮")) + '" id="sender-mail" name="sender-mail" data-parsley-required data-parsley-pattern-message="' + __e(_l("您输入的电邮格式不正确，请重新输入。")) + '" data-parsley-pattern="^(\\w)+(\\.\\w+)*@(\\w)+((\\.\\w+)+)$"></div></div><div class="form-group text"><div class="col-xs-12 require form-label">' + __e(_l("留港期间地址")) + '</div></div><div class="form-group input"><div class="col-xs-12 sender-location location-inputs normal-inputs"><div class="detail-location-input" data-max-level="4" data-hide-area-tab="true" data-hide-macao="true" data-hide-tw="true" data-selected-area="hongkong"><input type="text" class="form-control accessible-click sender-ascbillinfo" readonly data-parsley-required readyonly placeholder="' + __e(_l("请选择所在地区，例如：广东省－深圳市－福田区")) + '"/></div></div></div><div class="form-group text"><div class="col-xs-8 require form-label">' + __e(_l("详细地址")) + '</div></div><div class="form-group input"><div class="col-xs-8"><input type="text" class="form-control" id="sender-address-detail" data-parsley-required placeholder="' + __e(_l("请填写所在街道以及详细地址")) + '"/></div></div></form><div class="row"><div class="col-xs-12 title">' + __e(_l("收件人")) + ' <span class="fr">*' + __e(_l("为必填")) + '</span></div></div><form class="form-horizontal receiver-form"><div class="form-group text"><div class="col-xs-4 require form-label">' + __e(_l("姓名")) + '</div><div class="col-xs-4 require form-label">' + __e(_l("电话号码")) + '</div><div class="col-xs-4 require form-label">' + __e(_l("联络电邮")) + '</div></div><div class="form-group input"><div class="col-xs-4"><input type="text" class="form-control" placeholder="' + __e(_l("请输入收件人姓名")) + '" id="receiver-name" name="receiver-name" data-parsley-pattern-message="' + __e(_l("该输入框不能包含特殊字符")) + '" data-parsley-pattern="^[\\u4e00-\\u9fa5|\\w| ]+$" data-parsley-required></div><div class="col-xs-4"><input type="text" class="form-control" placeholder="' + __e(_l("请输入电话号码")) + '" id="receiver-mobile" name="receiver-mobile" data-parsley-required data-parsley-pattern-message="' + __e(_l("您输入的手机号码格式不正确，请重新输入。")) + '" data-parsley-pattern="^(\\d{1,20})$"></div><div class="col-xs-4"><input type="text" class="form-control" placeholder="' + __e(_l("请输入电邮")) + '" id="receiver-mail" name="receiver-mail" data-parsley-required data-parsley-pattern-message="' + __e(_l("您输入的电邮格式不正确，请重新输入。")) + '" data-parsley-pattern="^([\\w-]+[\\.\\w-]*)@([\\w-])+([\\.\\w-])+"></div></div><div class="form-group text"><div class="col-xs-12 require form-label">' + __e(_l("上门地址")) + '</div></div><div class="form-group input"><div class="col-xs-12 receiver-location location-inputs normal-inputs"><div class="detail-location-input" data-max-level="4" data-hide-hk="false"><input type="text" class="form-control accessible-click receiver-ascbillinfo" data-parsley-required readonly data-parsley-trigger="change" placeholder="' + __e(_l("请选择所在地区，例如：广东省－深圳市－福田区")) + '" disabled="disabled"/></div></div></div><div class="form-group text"><div class="col-xs-8 require form-label">' + __e(_l("详细地址")) + '</div><div class="col-xs-4 form-label receiver-postcode">' + __e(_l("邮政编号")) + '</div></div><div class="form-group input"><div class="col-xs-8"><input type="text" class="form-control" id="receiver-address-detail" data-parsley-required placeholder="' + __e(_l("请填写所在街道以及详细地址")) + '"/></div><div class="col-xs-4 receiver-postcode"><input type="text" class="form-control" placeholder="' + __e(_l("请输入邮政编号")) + '" id="receiver-postcode" name="receiver-postcode" data-parsley-pattern-message="' + __e(_l("您输入的邮编格式不正确，请重新输入。")) + '" data-parsley-pattern="^[0-9]{6}$"></div></div></form><div class="receiver-item"><div class="row"><div class="col-xs-12 title">' + __e(_l("托寄物内容")) + '<p class="fr freightFeeWrapper"><span class="freightFee"></span> ' + __e(_l("预计")) + '</p></div></div><div class="row"><ul class="col-xs-12 receiver-item-menu"><li><a class="aicon-checked" href="javascript:void(0)">' + __e(_l("酒类/液体")) + '</a></li><li><a href="javascript:void(0)" class="aicon-check-Unseleted-x">' + __e(_l("乳霜/液/唇膏")) + '</a></li><li><a href="javascript:void(0)" class="aicon-check-Unseleted-x">' + __e(_l("香水/护肤产品")) + '</a></li><li><a href="javascript:void(0)" class="aicon-check-Unseleted-x">' + __e(_l("凝胶")) + '</a></li><li><a href="javascript:void(0)" class="aicon-check-Unseleted-x">' + __e(_l("指甲钳/剃刀")) + '</a></li><li><a href="javascript:void(0)" class="aicon-check-Unseleted-x">' + __e(_l("膏状物品")) + '</a></li><li><a href="javascript:void(0)" class="others-item aicon-check-Unseleted-x">' + __e(_l("其他")) + '<input type="text" class="form-control other-item-input" placeholder="' + __e(_l("请输入其他物品")) + '"></a></li></ul></div></div><div class="declare"><div class="row"><div class="col-xs-12 title">' + __e(_l("报关信息")) + '<p class="fr freightFeeWrapper"><span class="freightFee"></span> ' + __e(_l("预计")) + '</p></div></div><div class="declare-content"></div><div class="form-horizontal countryOfOrigin"><div class="form-group"><label class="control-label col-xs-3">' + __e(_l("原产地")) + '：</label><div class="col-xs-3"><select class="form-control" id="recommendCountrys"></select></div><div class="col-xs-3 orther-contry"><input type="text" class="form-control" placeholder="' + __e(_l("请选择原产地")) + '"></div></div><div class="form-group error country-err"><div class="col-xs-3 col-xs-offset-6">' + __e(_l("请输入正确原产地名称")) + '</div></div><div class="form-group error network-err"><div class="col-xs-3 col-xs-offset-6">' + __e(_l("网络故障，请稍后重试")) + '</div></div><div class="form-group error country-empty"><div class="col-xs-3 col-xs-offset-6">' + __e(_l("必填项")) + '</div></div></div></div><div class="submitWrapper"><button type="button" class="primary-button confirm-order">' + __e(_l("提交")) + '</button></div></div><div class="confirmWrapper"></div>';
                    return __p
                }
                ,
                this.JST.acsBillInput = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<div class="billInputWrapper"><h3 class="title">' + __e(_l("请输入运单号")) + '</h3><form class="billInput" onSubmit="return false;"><input type="text" id="acsBillNo" placeholder="' + __e(_l("请输入以468开头的运单号")) + '" class="form-control" data-parsley-maxlength="12" data-parsley-required data-parsley-pattern="^468\\d{9}$" data-parsley-pattern-message="' + __e(_l("请输入有效运单号码")) + '"><button type="submit" class="primary-button submit-acs disabled">' + __e(_l("继续")) + '</button></form><div class="error" data-error="billno-used">' + __e(_l("运单号已使用")) + '</div><div class="error" data-error="billno-invalid">' + __e(_l("运单号无效")) + '</div><div class="error" data-error="network">' + __e(_l("网络故障，请稍后重试。")) + '</div><div class="tip"><span class="aicon-circle-check toggleChecked checked"></span><span>' + __e(_l('按下"继续"按钮即同意阁下资料将被储存作机场速运服务派送之用')) + "</span></div></div>";
                    return __p
                }
                ,
                this.JST.acsBillState = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="billState"><img src="' + (null == (__t = imgUrl) ? "" : __t) + '" alt="支付状态图片">',
                            1 == type ? __p += '<div class="title">' + __e(_l("感谢您使用机场速运服务")) + "</div><p>" + __e(_l("确认电邮将发送到你的登记电邮；")) + "</p>" : 2 == type ? __p += '<div class="title">' + __e(_l("支付失败")) + "</div><p>" + __e(_l("很抱歉未能支付成功；")) + "</p>" : 3 == type && (__p += '<div class="title">' + __e(_l("取消支付")) + "</div>"),
                            __p += "<p>" + __e(_l("如有任何查询，请致电客户服务热线")) + "</p><p>+852 2541 2542 (" + __e(_l("香港")) + ")</p>",
                        2 != type && 3 != type || (__p += '<div class="submitWrapper"><button type="button" class="primary-button pay-again">' + __e(_l("再试一次")) + "</button></div>"),
                            __p += "</div>";
                    return __p
                }
                ,
                this.JST.dropdownRecommendCountrys = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        _.each(dropdownItems, function(e) {
                            __p += '<option value="' + __e(e.code) + '">' + __e(e[Helper.getSiteLanguage() + "Name"]) + "</option>"
                        }),
                            __p += '<option value="ORTHERS">' + __e(_l("其他")) + "</option>";
                    return __p
                }
                ,
                this.JST.addressBook = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<form class="form-horizontal search-form"><div class="form-group"><div class="col-xs-5"><div class="input-group"><div class="aicon-search"></div><input type="text" class="form-control search-input"data-parsley-pattern-message="' + __e(_l("该输入框不能包含特殊字符")) + '" data-parsley-pattern="^[\\u4e00-\\u9fa5|\\w]+$"data-parsley-errors-container=".col-xs-5" placeholder="' + __e(_l("请输入姓名/电话查询")) + '"><button class="input-group-addon search primary-btn square" type="submit">' + __e(_l("搜索")) + '</button></div></div><div class="col-xs-7">\x3c!--<button type="button" class="primary-btn white square bulkAdd right">--\x3e\x3c!--<span class="aicon-baoguan"></span>--\x3e\x3c!--' + __e(_l("批量新增")) + '--\x3e\x3c!--</button>--\x3e<button type="button" class="primary-btn white square add right"><span class="aicon-zengjia-01"></span>' + __e(_l("新增地址")) + '</button></div></div></form><ul class="table-title"><li style="width: 174px">' + __e(_l("联系人")) + '</li><li style="width: 252px">' + __e(_l("地址")) + "</li><li>" + __e(_l("公司名称")) + '</li></ul><div class="height-scroll"><dl class="address_loading"><dt><img src="' + __e(loadingImg) + '" alt=""></dt><dd><h5>' + __e(_l("正在加载...")) + '</h5></dd></dl><dl class="address_networkErr" style="display: none"><dt><span class="aicon-28 img"></span></dt><dd><h5>' + __e(_l("加载异常，请刷新重试")) + '</h5></dd><dd><button type="button" class="primary-btn try-again">' + __e(_l("重试")) + '</button></dd></dl><dl class="address_fetch_null" style="display: none"><dt><span class="aicon-emptybox img"></span></dt><dd><h5>' + __e(_l("地址为空")) + "</h5></dd><dd><p>" + __e(_l("您可先添加一条地址信息")) + '</p></dd></dl><dl class="address_search_null" style="display: none"><dt><span class="aicon-emptylist img"></span></dt><dd><p>' + __e(_l("暂时木有内容呀...")) + '</p></dd></dl></div><div class="fix-height"><div class="hide-in-loading"><div class="bootstrap-pagination"><ul class="pagination"></ul></div><p style="text-align: center"><button type="button" class="primary-btn big select-confirm">' + __e(_l("确认选择")) + "</button></p></div></div>";
                    return __p
                }
                ,
                this.JST.addressBookaddOrmod_hk = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<form class="form-horizontal address-form"><div class="form-group"><label class="control-label col-xs-3 required" for="add-name">' + __e(_l("姓名")) + ' :</label><div class="col-xs-9"><input type="text" class="form-control" id="add-name" name="add-name" placeholder="' + __e(_l("请输入姓名")) + '"value="' + __e(addressBook ? addressBook.contactName : "") + '" data-parsley-required></div></div><div class="form-group"><label class="control-label col-xs-3" for="add-company">' + __e(_l("公司名称")) + ' :</label><div class="col-xs-9"><input type="text" class="form-control" id="add-company" name="add-company" placeholder="' + __e(_l("请输入公司名称")) + '"value="' + __e(addressBook ? addressBook.companyName : "") + '"data-parsley-maxlength="20"></div></div><div class="form-group"><label class="control-label col-xs-3 required" for="add-address">' + __e(_l("地址")) + ' :</label><div class="col-xs-9 add-address-container"><div class="detail-location-input" data-max-level="4" data-hide-area-tab="true" data-do-restore-state="false" data-only-current-tab="true"><input type="text" class="form-control readonly" data-parsley-required readonly id="add-address" name="add-address" style="border:1px solid #ccc"data-parsley-trigger="change"data-parsley-errors-container=".add-address-container"placeholder="' + __e(_l("请选择所在地区，例如：香港-香港岛")) + '"value="' + __e(addressBook ? _.uniq(_.compact([addressBook.province, addressBook.city, addressBook.county]), !0).join("-") : "") + '"></div></div></div><div class="form-group"><div class="col-xs-9 col-xs-offset-3"><input type="text" class="form-control" id="add-detailaddress" name="add-detailaddress" data-parsley-required placeholder="' + __e(_l("请填写所在街道以及详细地址")) + '"value="' + __e(addressBook ? addressBook.address : "") + '"></div></div><div class="form-group"><label class="control-label col-xs-3" for="add-mobile">' + __e(_l("手机")) + ' :</label><div class="col-xs-9"><input type="text" class="form-control" id="add-mobile" name="add-mobile" placeholder="' + __e(_l("请输入手机号码")) + '"value="' + __e(addressBook ? addressBook.contactTel : "") + '"data-parsley-trigger="change" data-parsley-pattern-message="' + __e(_l("您输入的手机号码格式不正确，请重新输入。")) + '" data-parsley-pattern="^((\\+86)|(86))?1\\d{10}$|^((\\+852)|(852))?\\d{8}$"></div></div><div class="form-group"><label class="control-label col-xs-3" for="add-phone">' + __e(_l("电话")) + ' :</label><div class="col-xs-9"><input type="text" class="form-control" id="add-phone" name="add-phone" placeholder="' + __e(_l("请输入电话")) + '"value="' + __e(addressBook ? addressBook.contactPhone : "") + '"data-parsley-trigger="change" data-parsley-pattern-message="' + __e(_l("您输入的固话号码格式不正确，请重新输入。")) + '" data-parsley-pattern="^((\\d{7,8})|(0\\d{2,3})-?(\\d{7,8})|(0\\d{2,3})-?(\\d{7,8})-?(\\d{0,7})|(\\d{7,8})-?(\\d{0,7}))$"></div></div><div class="form-group receiver-both-phone-mobile error"><div class="col-xs-9 col-xs-offset-3"><p>' + __e(_l("手机和电话请至少填写一项")) + '</p></div></div><div class="form-group save-fail error"><div class="col-xs-9 col-xs-offset-3"><p>' + __e(_l("保存失败，请重试")) + '</p></div></div><div style="text-align: center"><button type="button" class="primary-button save-address" data-loading-text="' + __e(_l("保存中...")) + '" data-addressid="' + __e(addressBook ? addressBook.addressId : "") + '">' + __e(_l("保存")) + "</button></div></form>";
                    return __p
                }
                ,
                this.JST.addressBookEdit = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<form class="form-horizontal address-form"><div class="sftitle">' + __e(_l("联系人信息")) + '<span class="small">' + __e(_l("标 * 为必填项")) + "</span>",
                        "sc" === Helper.getSiteLanguage() && (__p += '<a href="javascript:void(0)" class="aicon-intellect-address link addIntellectFill">' + __e(_l("智能地址填写")) + "</a>"),
                            __p += '</div><div class="form-group"><div class="col-xs-5"><label class="control-label required" for="add-name">' + __e(_l("姓名")) + '</label><input type="text" class="form-control" id="add-name" name="add-name" placeholder="' + __e(_l("请填写联系人姓名")) + '"value="' + __e(addressBook ? addressBook.contactName : "") + '"data-parsley-pattern-message="' + __e(_l("该输入框不能包含特殊字符")) + '" data-parsley-pattern="^[\\u4e00-\\u9fa5|\\w]+$"data-parsley-required></div>',
                        hasCompany && (__p += '<div class="col-xs-5 col-xs-offset-2"><label class="control-label" for="add-company">' + __e(_l("公司名称")) + '</label><input type="text" class="form-control" id="add-company" name="add-company"placeholder="' + __e(_l("请填写公司名称")) + '"value="' + __e(addressBook ? addressBook.companyName : "") + '"data-parsley-maxlength="20"></div>'),
                            __p += '</div><div class="form-group"><div class="col-xs-5"><label class="control-label required" for="add-mobile">' + __e(_l("手机号码")) + '</label><input type="text" class="form-control" id="add-mobile" name="add-mobile" placeholder="' + __e(_l("请填写手机号码")) + '"value="' + __e(addressBook ? addressBook.contactTel : "") + '"data-parsley-required data-parsley-trigger="change"data-parsley-pattern-message="' + __e(_l("您输入的手机号码格式不正确，请重新输入。")) + '"data-parsley-pattern="^[1][3-9]\\d{9}$|^((\\+?00852[-]?)|(\\+?852[-]?))?[5689]{1}\\d{7}$|^((\\+?00853[-]?)|(\\+?853[-]?))?6\\d{6,7}$|^((\\+?886[-]?))?[0]?[9]\\d{8}$"></div><div class="col-xs-5 col-xs-offset-2"><label class="control-label" for="add-phone">' + __e(_l("固话")) + '</label><input type="text" class="form-control" id="add-phone" name="add-phone" placeholder="' + __e(_l("请填写固话号码")) + '"value="' + __e(addressBook ? addressBook.contactPhone : "") + '"data-parsley-trigger="change" data-parsley-pattern-message="' + __e(_l("您输入的固话号码格式不正确，请重新输入。")) + '"data-parsley-pattern="^((\\d{7,8})|(0\\d{2,3})-?(\\d{7,8})|(0\\d{2,3})-?(\\d{7,8})-?(\\d{0,7})|(\\d{7,8})-?(\\d{0,7}))$"></div></div><div class="form-group"><div class="col-xs-12 add-address-container"><label class="control-label required" for="add-address">' + __e(_l("省市区")) + '</label><div class="detail-location-input" data-max-level="4" data-hide-globe="true" data-hide-hkmctw="' + __e(hideHkmctw) + '"><input type="text" class="form-control readonly" data-parsley-required readonly id="add-address"name="add-address" style="border:1px solid #ccc"data-parsley-trigger="change"data-parsley-errors-container=".add-address-container"placeholder="' + __e(_l("请选择所在地区，例如：广东省－深圳市－福田区")) + '"value="' + __e(addressBook ? _.uniq(_.compact([addressBook.province, addressBook.city, addressBook.county]), !0).join("-") : "") + '"></div></div></div><div class="form-group"><div class="col-xs-12 ui-front"><label class="control-label required" for="add-detailaddress">' + __e(_l("详细地址")) + '</label><input type="text" class="form-control" id="add-detailaddress" name="add-detailaddress"data-parsley-required placeholder="' + __e(_l("请填写所在街道以及详细地址")) + '"value="' + __e(addressBook ? addressBook.address : "") + '"></div></div><div class="form-group TWlicenseInput" ' + (null == (__t = hasCustomerId ? 'style="display:block"' : 'style="display:none"') ? "" : __t) + '><div class="col-xs-5"><label for="TWlicense" class="required control-label">' + __e(_l("收件统编")) + '</label><input type="text" class="form-control" data-parsley-trigger="change" id="TWlicense" name="TWlicense"value="' + __e(hasCustomerId ? addressBook.customerId : "") + '"' + (null == (__t = hasCustomerId ? 'data-parsley-required="true"' : "") ? "" : __t) + 'placeholder="' + __e(_l("如收件方为公司请填写营业执照，个人请填写身份证号")) + '"/></div></div><div style="text-align: center"><button type="button" class="primary-btn save-address big"data-addressid="' + __e(addressBook ? addressBook.addressId : "") + '">' + __e(_l("确认")) + "</button></div></form>";
                    return __p
                }
                ,
                this.JST.addressSuccessBody = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<table class="address_success hide-in-loading table table-hover">',
                            _.each(addressBookList, function(e) {
                                __p += '<tr data-addId="' + __e(e.addressId) + '"><td style="width: 91px"><a href="javascript:void(0)" class="address-check aicon-uncheck"></a>',
                                1 == e.isDefault && (__p += '<span class="default-tip">' + __e(_l("默认")) + "</span>"),
                                    __p += '</td><td style="width: 174px"><p>' + __e(e.contactName) + "</p>",
                                    e.contactTel ? __p += '<p class="gray">' + __e(e.contactTel) + "</p>" : e.contactPhone && (__p += '<p class="gray">' + __e(e.contactPhone) + "</p>"),
                                    __p += '</td><td style="width: 252px"><p>' + __e(_.uniq(_.compact([e.province, e.city, e.county]), !0).join("")) + '</p><p class="gray">' + __e(e.address) + '</p></td><td style="width: 235px"><p>' + __e(e.companyName ? e.companyName : _l("无")) + '</p></td><td class="option" style="width: 148px"><a href="javascript:void(0)" class="modify aicon-bianji"></a><a href="javascript:void(0)" class="set-default aicon-shield' + (null == (__t = 1 == e.isDefault ? " active" : "") ? "" : __t) + '"></a><a href="javascript:void(0)" class="delete aicon-delete2"></a></td></tr>'
                            }),
                            __p += "</table>";
                    return __p
                }
                ,
                this.JST.upDownTemplate = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<div><a href="javascript:void(0)" class="download" download="地址簿模板"><span class="aicon-i-down"></span>' + __e(_l("下载模版")) + '</a><div class="wrapper"><a href="javascript:void(0)"><span class="aicon-1"></span>' + __e(_l("上传模版")) + '</a><input id="fileupload" type="file" name="importedExcel"></div></div>';
                    return __p
                }
                ,
                this.JST.addtionalService = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        _.each(additionalServices, function(e) {
                            __p += '<img src="' + (null == (__t = e.icon) ? "" : __t) + '" alt="' + (null == (__t = e.name) ? "" : __t) + '" class="additional-service-icon" />' + (null == (__t = _l("支持")) ? "" : __t) + (null == (__t = e.name) ? "" : __t)
                        });
                    return __p
                }
                ,
                this.JST.areas = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        _.each(areas, function(e) {
                            __p += "<span ",
                            currentArea.code == e.code && (__p += ' class="current" '),
                                __p += ' ><a href="#" data-code="' + (null == (__t = e.code) ? "" : __t) + '">' + (null == (__t = e.name) ? "" : __t) + "</a></span>"
                        });
                    return __p
                }
                ,
                this.JST.additionalService = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="additional-service"><div class="title"><span>' + __e(_l("签单返还")) + '</span></div><ul class="list">',
                            _.each(signedBackSop, function(e) {
                                __p += '<li><a href="javascript:void(0)" data-sop="' + __e(e) + '"' + (null == (__t = _.contains(signedBackBillIndex, e) ? ' class="aicon-check"' : "") ? "" : __t) + '><span class="aicon-' + __e(iconName[e - 1]) + '"></span><p>' + __e(signedBackName[e - 1]) + "</p></a></li>"
                            }),
                            __p += '</ul><div class="text-center"><button class="primary-btn big save">' + __e(_l("保存")) + "</button></div></div>";
                    return __p
                }
                ,
                this.JST.leaveMsg = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="running-man-msg"><ul class="list">',
                            _.each(msgs, function(e) {
                                __p += '<li><a href="javascript:void(0)" ' + (null == (__t = _.contains(choosedMsgArr, e) ? ' class="active"' : "") ? "" : __t) + "><p>" + __e(e) + "</p></a></li>"
                            }),
                            __p += '</ul><input type="text" class="form-control other-msg" placeholder="' + __e(_l("其他想对小哥说的话（如：物品体积较大）")) + '" value="' + __e(otherMsg) + '"><div class="text-center"><button class="primary-btn big save">' + __e(_l("保存")) + "</button></div></div>";
                    return __p
                }
                ,
                this.JST.payTypeToggle = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="text">' + __e(payTypeNameList[payType - 1]) + '</span><span class="caret"></span></button><ul class="dropdown-menu">',
                            _.each(payTypeList, function(e) {
                                __p += '<li><a href="javascript:void(0)" data-value=' + __e(e) + ">" + __e(payTypeNameList[e - 1]) + "</a></li>"
                            }),
                            __p += '</ul></div><input type="text" class="form-control mounth-account" placeholder="' + __e(_l("月结卡号 *")) + '" style="display:' + __e(4 == payType || 5 == payType ? "block" : "none") + '" value="' + __e(mounthAccount) + '">';
                    return __p
                }
                ,
                this.JST.receiverItemToggle = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="btn-group"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown"><span class="text">' + __e(buttonText) + '</span><span class="caret"></span></button><ul class="dropdown-menu">',
                            _.each(items, function(e) {
                                __p += '<li><a href="javascript:void(0)" class="' + __e(_.contains(choosedItemArr, e) ? "aicon-check" : "aicon-uncheck") + '">' + __e(e) + "</a></li>"
                            }),
                            __p += '<li class="text-center"><button class="ok primary-btn small">' + __e(_l("确定")) + '</button><button class="cancle primary-btn small white">' + __e(_l("取消")) + '</button></li></ul></div><div class="error receiver-item-not-select">' + __e(_l("未选择托寄物")) + '</div><form class="receiver-item-form"><textarea class="form-control medci-input"  rows="2" placeholder="' + (null == (__t = _l("请输入药品名称、数量、单位，保健品类请选择食品。&#10;例如：阿莫西林颗粒，2盒")) ? "" : __t) + '"style="display: ' + __e(choosedMedci ? "block" : "none") + '" data-parsley-maxlength="50">' + __e(choosedMedci) + '</textarea><div class="error medci-select">' + __e(_l("温馨提示：由于药品属于特殊托寄物，请确保收寄人信息准确无误，F35速运竭诚为您服务")) + '</div><input type="text" class="form-control other-input" placeholder="' + __e(_l("请输入其他物品 *")) + '" style="display: ' + __e("" == otherItem ? "none" : "block") + '" value="' + __e(otherItem) + '"data-parsley-maxlength="20"></form>';
                    return __p
                }
                ,
                this.JST.supportVal = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<div class="wrapper"><label class="aicon-umbrella"></label><label class="support-tip not-selecte">' + __e(_l("需要保价")) + '</label><label class="support-value selected">' + __e(_l("保费")) + ' ： ￥<span class="number"></span></label><input class="support-input" type="text" placeholder="' + __e(_l("点击输入保额")) + '"></div><p class="error not-selecte">' + __e(_l(notSelectTip)) + '</p><p class="error selected support-prise">' + __e(_l("温馨提示：感谢您使用F35保价服务，我们将竭诚保护您的货物安全，若在寄递过程中发生丢损，您最高可获得声明价值")) + '<span class="number"></span>' + __e(_l("赔偿")) + '</p><p class="error too-more">' + __e(_l("声明价值最高上限为50万元，如货物价值大于50万，请咨询上门收件员或95338。")) + "</p>";
                    return __p
                }
                ,
                this.JST.weightToggle = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<div class="dpui-numberPicker"><button type="button" class="dpui-numberPicker-decrease">-</button><input type="text" class="dpui-numberPicker-input"><button type="button" class="dpui-numberPicker-increase">+</button></div><p class="over-weight addition-rate-because-over-weight error" weight-valve="50">' + __e(_l("如您的物品单件超过50公斤，将对此件物品收取超长超重费用，详询95338。")) + '</p><p class="over-weight over-weight-forbidden-tip error" weight-valve="130">' + __e(_l("您托寄的物品已超出快递产品重量标准，请选择重货产品，详询95338。")) + "</p>";
                    return __p
                }
                ,
                this.JST.buttonGroupTempletas = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        _.each(items, function(e) {
                            __p += '<button type="button" class="btn btn-default" style="width: ' + (null == (__t = Math.round(100 / items.length)) ? "" : __t) + '%" data-code="' + (null == (__t = e.get("code")) ? "" : __t) + '">' + (null == (__t = e.get("name")) ? "" : __t) + "</button>"
                        });
                    return __p
                }
                ,
                this.JST.cities = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        _.each(cities, function(e) {
                            __p += '<span><a data-code="' + (null == (__t = e.code) ? "" : __t) + '" href="#">' + (null == (__t = e.name.substr(0, 4)) ? "" : __t) + "</a></span>"
                        });
                    return __p
                }
                ,
                this.JST.claims = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<p>请确认您的理赔登记信息</p><div style="overflow: hidden"><table class="table table-bordered col-xs-7"><tr><td class="cel-key col-xs-5">运单号</td><td class="cel-value">' + (null == (__t = data.carryId) ? "" : __t) + '</td></tr><tr><td class="cel-key">赔款金额</td><td class="cel-value">' + (null == (__t = data.endClaimMoney) ? "" : __t) + '</td></tr><tr><td class="cel-key">转账金额</td><td class="cel-value">' + (null == (__t = data.compensateAmt) ? "" : __t) + '</td></tr><tr><td class="cel-key">收款方银行</td><td class="cel-value">' + (null == (__t = data.bankCodeTxt) ? "" : __t) + '</td></tr><tr><td class="cel-key">收款方开户行分/支行</td><td class="cel-value">' + (null == (__t = data.bankName) ? "" : __t) + '</td></tr><tr><td class="cel-key">收款方户</td><td class="cel-value">' + (null == (__t = data.countName) ? "" : __t) + '</td></tr><tr><td class="cel-key">收款方账号</td><td class="cel-value">' + (null == (__t = data.customerBankCard) ? "" : __t) + '</td></tr><tr><td class="cel-key">收款方地址</td><td class="cel-value">' + (null == (__t = data.countProvince) ? "" : __t) + '</td></tr><tr><td class="cel-key">是否对公账号</td><td class="cel-value">' + (null == (__t = "01" == data.ctgyPurp ? "是" : "否") ? "" : __t) + '</td></tr></table></div><div><button type="button" class="primary-button" id="confirmBtn">确定</button>&nbsp;&nbsp;&nbsp;<button type="button" class="primary-button modify" id="backModifyBtn">修改</button></div>';
                    return __p
                }
                ,
                this.JST.consignResult = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<table class="table table-bordered"><thead><tr><th>' + (null == (__t = _l("运单号")) ? "" : __t) + "</th><th>" + (null == (__t = _l("海关货运编号(CCRN)")) ? "" : __t) + "</th><th>" + (null == (__t = _l("主提单号")) ? "" : __t) + "</th><th>" + (null == (__t = _l("航班号")) ? "" : __t) + "</th><th>" + (null == (__t = _l("香港车牌编号")) ? "" : __t) + "</th><th>" + (null == (__t = _l("离港/到港日期")) ? "" : __t) + "</th><th>" + (null == (__t = _l("卸货港口")) ? "" : __t) + "</th></tr></thead><tbody>",
                            _.each(codes, function(i, n) {
                                _.each(results, function(e, t) {
                                    n == t && (null == e.get("bno") ? (1 == type && (__p += "<td>" + (null == (__t = i) ? "" : __t) + "</td><td>-</td>"),
                                    2 == type && (__p += "<td>-</td><td>" + (null == (__t = i) ? "" : __t) + "</td>"),
                                        __p += "<td colspan=5>" + (null == (__t = _l("很抱歉！您搜寻的数据不存在。如有任何查询，请致电客户服务热线 (852) 273 00 273")) ? "" : __t) + "</td></tr>") : __p += "<tr><td>" + (null == (__t = e.get("bno")) ? "" : __t) + "</td>\x3c!--運單號--\x3e<td>" + (null == (__t = e.get("ccrn")) ? "" : __t) + "</td>\x3c!--海關貨物編號（CCRN）--\x3e<td>" + (null == (__t = e.get("awbNo")) ? "" : __t) + "</td>\x3c!--主提单号 --\x3e<td>" + (null == (__t = e.get("flightNo")) ? "" : __t) + "</td>\x3c!--航班号--\x3e<td>" + (null == (__t = e.get("vrn")) ? "" : __t) + "</td>\x3c!--香港车牌编号--\x3e<td>" + (null == (__t = e.get("scheDate")) ? "" : __t) + "</td>\x3c!--离岗到港日期--\x3e<td>" + (null == (__t = e.get("port")) ? "" : __t) + "</td>\x3c!--卸货港口--\x3e</tr>")
                                })
                            }),
                            __p += "</tbody></table>";
                    return __p
                }
                ,
                this.JST.pickupTimePicker = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<ul class="date-wrapper" role="radiogroup">',
                            _.each(dates, function(e) {
                                __p += '<li tabindex="0" role="radio" data-value="' + __e(e.date) + '" class="accessible-click ' + __e(showDate == e.date ? "current" : "") + '"' + __e(showDate == e.date ? "aria-checked=true" : "") + "><p>" + __e(_l(e.text)) + '</p><p class="date">' + __e(e.date) + '</p><span class="aicon-right"></span></li>'
                            }),
                            __p += '</ul><ul class="time-wrapper" role="radiogroup">',
                            times && 0 < times.length ? _.each(times, function(e) {
                                __p += '<li role="radio" tabindex="0" data-value="' + __e(e.start) + '" class="item ' + __e(showTime == e.start ? "current" : "") + ' accessible-click"' + __e(showTime == e.start ? "aria-checked=true" : "") + ' data-time="' + __e(e.prev) + '"><span>' + __e(e.text) + "</span></li>"
                            }) : __p += '<li class="overtime">' + __e(_l("今天上门时间已过，请选择其他日期")) + "</li>",
                            __p += "</ul>";
                    return __p
                }
                ,
                this.JST.detailedDatePicker = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += "";
                    return __p
                }
                ,
                this.JST.detailedDateTimePicker = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<ul class="date-time-tabs" role="radiogroup"><li tabindex="0" role="radio" class="date ' + (null == (__t = showTimePicker ? "" : "current") ? "" : __t) + ' accessible-click" ' + (null == (__t = showTimePicker ? "" : "aria-checked=true") ? "" : __t) + ">" + (null == (__t = _l("日期")) ? "" : __t) + '</li><li tabindex="0" role="radio" class="time ' + (null == (__t = showTimePicker ? "current" : "") ? "" : __t) + ' accessible-click" ' + (null == (__t = showTimePicker ? "aria-checked=true" : "") ? "" : __t) + ">" + (null == (__t = _l("时间")) ? "" : __t) + "</li></ul>",
                            showTimePicker ? (__p += '<div class="detail-time-picker"><div tabindex="0" class="indicator top disabled accessible-click"><span class="sfi sfi-chevron-up"></span></div><div class="picker-wrapper"><ul class="times" role="radiogroup">',
                                _.each(times, function(e, t) {
                                    selectedWithInOneHour ? __p += 0 == t ? '<li role="radio" tabindex="0" class="current accessible-click" aria-checked=true>' + (null == (__t = e) ? "" : __t) + "</li>" : '<li role="radio" tabindex="0" class="accessible-click">' + (null == (__t = e) ? "" : __t) + "</li>" : __p += '<li role="radio" tabindex="0" class="' + (null == (__t = e === selectedTime ? "current" : "") ? "" : __t) + ' accessible-click" ' + (null == (__t = e === selectedTime ? "aria-checked=true" : "") ? "" : __t) + ">" + (null == (__t = e) ? "" : __t) + "</li>"
                                }),
                                __p += '</ul></div><div tabindex="0" class="indicator bottom accessible-click"><span class="sfi sfi-chevron-down"></span></div></div>') : __p += '<div class= "detail-date-picker"></div>';
                    return __p
                }
                ,
                this.JST.detailedLocationPicker = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        if (areaTabs.showAreaTab && (__p += '<ul class="area-level-tabs" role="radiogroup">',
                            areaTabs.showMainLand && (__p += '<li tabindex="0" role="radio"  data-tab="main-land" class="accessible-click ' + (null == (__t = "main-land" === areaTabs.currentTab ? "current" : "") ? "" : __t) + '" ' + (null == (__t = "main-land" === areaTabs.currentTab ? "aria-checked=true" : "") ? "" : __t) + ">" + (null == (__t = _l("大陆")) ? "" : __t) + "</li>"),
                            areaTabs.showHKMCTW && (__p += '<li tabindex="0" role="radio"  data-tab="hk-mc-tw" class="accessible-click ' + (null == (__t = "hk-mc-tw" === areaTabs.currentTab ? "current" : "") ? "" : __t) + '" ' + (null == (__t = "hk-mc-tw" === areaTabs.currentTab ? "aria-checked=true" : "") ? "" : __t) + ">" + (null == (__t = _l("港澳台")) ? "" : __t) + "</li>"),
                            areaTabs.showGlobe && (__p += '<li tabindex="0" role="radio"  data-tab="international" class="accessible-click ' + (null == (__t = "international" === areaTabs.currentTab ? "current" : "") ? "" : __t) + '" ' + (null == (__t = "international" === areaTabs.currentTab ? "aria-checked=true" : "") ? "" : __t) + ">" + (null == (__t = _l("国际")) ? "" : __t) + "</li>"),
                                __p += "</ul>"),
                                __p += '<ul class="region-level-tabs" role="radiogroup">',
                                _.each(regionTabs, function(e) {
                                    __p += '<li tabindex="0" role="radio" data-code="' + (null == (__t = e.parentRegion.code) ? "" : __t) + '" class="accessible-click ' + (null == (__t = e.selected ? "current" : "") ? "" : __t) + " " + (null == (__t = e.selectedRegion && !e.selected ? "has-selection" : "") ? "" : __t) + '" ' + (null == (__t = e.selected ? "aria-checked=true" : "") ? "" : __t) + ' style="width: ' + (null == (__t = Math.min(100 / regionTabs.length, 33)) ? "" : __t) + '%" title="' + (null == (__t = e.selectedRegion ? e.selectedRegion.name : "") ? "" : __t) + '">',
                                        e.alwaysDisplayName ? __p += null == (__t = e.displayName) ? "" : __t : __p += null == (__t = e.selectedRegion && e.selectedRegion.name ? e.selectedRegion.name : e.displayName || _l("请选择")) ? "" : __t,
                                        __p += "</li>"
                                }),
                                __p += "</ul>",
                                isLoading)
                            __p += '<ul class="regions"><p class="loading-text">' + (null == (__t = _l("正在加载地区数据...")) ? "" : __t) + "</p></ul>";
                        else if (errorLoading)
                            __p += '<ul class="regions"><p class="error-loading">' + (null == (__t = _l("抱歉，加载数据地区数据失败。")) ? "" : __t) + "</p></ul>";
                        else if (showNotAvailable)
                            __p += '<ul class="regions"><p class="error-loading">' + (null == (__t = _l("该地区暂时没有开通该项业务")) ? "" : __t) + "</p></ul>";
                        else {
                            if (__p += '<ul class="regions" role="radiogroup">',
                                    _.each(availableRegions, function(e, t) {
                                        t % pageLimit == 0 && (__p += '<div class="accessible-click regions-page ' + (null == (__t = t ? "" : "current") ? "" : __t) + '" ' + (null == (__t = t ? "" : "aria-checked=true") ? "" : __t) + ' data-page="' + (null == (__t = t / pageLimit + 1) ? "" : __t) + '">'),
                                            __p += "<li " + (null == (__t = e.get("code") === currentSelectedRegionCode ? 'class="current" aria-checked=true' : "") ? "" : __t) + ' role="radio"><a href="javascript:void(0)" class="accessible-click" data-id="' + (null == (__t = e.get("id")) ? "" : __t) + '" data-level="' + (null == (__t = e.get("level")) ? "" : __t) + '" data-country-code="' + (null == (__t = e.get("countryCode")) ? "" : __t) + '"data-code="' + (null == (__t = e.get("code")) ? "" : __t) + '" data-rate-code="' + (null == (__t = e.get("rateCode")) ? "" : __t) + '"  data-province-code="' + (null == (__t = e.get("provinceCode")) ? "" : __t) + '"data-province-rate-code="' + (null == (__t = e.get("provinceRateCode")) ? "" : __t) + '" data-province-name="' + (null == (__t = e.get("provinceName")) ? "" : __t) + '"title="' + (null == (__t = e.get("name")) ? "" : __t) + '" data-parent-id="' + (null == (__t = e.get("parentId")) ? "" : __t) + '" data-parent-code="' + (null == (__t = e.get("parentCode")) ? "" : __t) + '" data-dist-id="' + (null == (__t = e.get("distId")) ? "" : __t) + '">' + (null == (__t = e.get("name")) ? "" : __t) + "</a></li>",
                                        t % pageLimit == pageLimit - 1 && (__p += "</div>")
                                    }),
                                availableRegions.length % pageLimit != 0 && (__p += "</div>"),
                                    __p += "</ul>",
                                availableRegions.length > pageLimit) {
                                for (__p += '<ul class="pages-switch">',
                                         i = 0; i < availableRegions.length / pageLimit; i++)
                                    __p += '<li tabindex="0" class="accessible-click ' + (null == (__t = i ? "" : "current") ? "" : __t) + '">' + (null == (__t = i + 1) ? "" : __t) + "</li>";
                                __p += "</ul>"
                            }
                            shouldShowFussySelection && (__p += '<p><a class="hide-picker" href="＃" onclick="return false;">' + (null == (__t = _l("不清楚具体地名?")) ? "" : __t) + "</a></p>"),
                            0 < unavailableRegions.length && (__p += '<div class="unavailable-regions"><p><span class="sfi sfi-info-sign"></span><span>' + (null == (__t = _l("未来将会再开通")) ? "" : __t) + "</span>",
                                3 < unavailableRegions.length ? __p += null == (__t = _p(_l("%s等%d个服务地区"), _.map(_.first(unavailableRegions, 3), function(e) {
                                    return e.get("name")
                                }).join("、"), unavailableRegions.length)) ? "" : __t : __p += null == (__t = _.map(unavailableRegions, function(e) {
                                    return e.get("name")
                                }).join("、")) ? "" : __t,
                                __p += "</p></div>")
                        }
                    return __p
                }
                ,
                this.JST.dropdownAcceptDestCountry = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        dropdownItems.length ? _.each(dropdownItems, function(e) {
                            __p += '<li><a href="#" onclick="return false;" data-code="' + (null == (__t = e.destCode) ? "" : __t) + '" data-tip="' + (null == (__t = e.info) ? "" : __t) + '">' + (null == (__t = e.name) ? "" : __t) + "</a></li>"
                        }) : __p += '<div class="text-center loading-text">' + (null == (__t = _l("正在加载数据...")) ? "" : __t) + "</div>";
                    return __p
                }
                ,
                this.JST.dropdownAcceptSrcCountry = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        dropdownItems.length ? _.each(dropdownItems, function(e) {
                            __p += '<li><a href="#" onclick="return false;" data-code="' + (null == (__t = e.shortName) ? "" : __t) + '">' + (null == (__t = "en" == Helper.getSiteLanguage() || "vi" == Helper.getSiteLanguage() || "th" == Helper.getSiteLanguage() || "ru" == Helper.getSiteLanguage() || "fr" == Helper.getSiteLanguage() || "de" == Helper.getSiteLanguage() ? e.enName : e.cnName) ? "" : __t) + "</a></li>"
                        }) : __p += '<div class="text-center loading-text">' + (null == (__t = _l("正在加载数据...")) ? "" : __t) + "</div>";
                    return __p
                }
                ,
                this.JST.dropdownCity = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        for (var i = 0; i < dropdownItems.length; i++)
                            "A" != dropdownItems[i] && (__p += '<li><a href="#" onclick="return false;" data-code="' + (null == (__t = dropdownItems[i]) ? "" : __t) + '">' + (null == (__t = dropdownItems[i]) ? "" : __t) + "</a></li>");
                    return __p
                }
                ,
                this.JST.dropdownRuleTemplates = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        dropdownItems.length ? _.each(dropdownItems, function(e) {
                            __p += '<li><a href="#" onclick="return false;" data-code="' + (null == (__t = e) ? "" : __t) + '">' + (null == (__t = _l(e)) ? "" : __t) + "</a></li>"
                        }) : __p += '<div class="text-center loading-text">' + (null == (__t = _l("正在加载数据...")) ? "" : __t) + "</div>";
                    return __p
                }
                ,
                this.JST.dropdownSelectTemplate = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        itemList.length ? _.each(itemList, function(e) {
                            __p += '<option value="' + (null == (__t = e.value) ? "" : __t) + '">' + (null == (__t = e.txt) ? "" : __t) + "</option>"
                        }) : __p += "<option>" + (null == (__t = _l("正在加载数据...")) ? "" : __t) + "</option>";
                    return __p
                }
                ,
                this.JST.dropdownTemplates = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        dropdownItems.length ? _.each(dropdownItems, function(e) {
                            __p += '<li><a href="#" onclick="return false;" data-code="' + (null == (__t = e.get("code")) ? "" : __t) + '">' + (null == (__t = e.get("name")) ? "" : __t) + "</a></li>"
                        }) : __p += '<div class="text-center loading-text">' + (null == (__t = _l("正在加载数据...")) ? "" : __t) + "</div>";
                    return __p
                }
                ,
                this.JST.hotline = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj) {
                        __p += '<table class="table"><thead><tr><th id="th-region">' + (null == (__t = _l("地区")) ? "" : __t) + '</th><th id="th-city">' + (null == (__t = _l("城市")) ? "" : __t) + '</th><th id="th-hotline">' + (null == (__t = _l("应急热线")) ? "" : __t) + '</th><th id="th-fax">' + (null == (__t = _l("传真")) ? "" : __t) + "</th></tr></thead><tbody>";
                        for (var len = res.length - 1, pro; 0 <= len; len--)
                            pro = res[len],
                                __p += "<tr><td> " + (null == (__t = pro.province) ? "" : __t) + "  </td><td> " + (null == (__t = pro.city) ? "" : __t) + "  </td><td> " + (null == (__t = pro.telephone) ? "" : __t) + "  </td><td> " + (null == (__t = pro.fax) ? "" : __t) + "  </td></tr>";
                        __p += "</tbody></table>"
                    }
                    return __p
                }
                ,
                this.JST.importExportRuleResult = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += "\x3c!--关务进出口规则显示结果的模板文件 --\x3e",
                            _.isEmpty(results) ? __p += '<tr><td colspan="8"> No Found </td></tr>' : _.each(results, function(e, t) {
                                __p += "<tr><td>" + (null == (__t = (pageIndex - 1) * pageSize + (t + 1)) ? "" : __t) + "</td><td>" + (null == (__t = e.goodCode) ? "" : __t) + '</td><td style="width: 100px;" title="' + (null == (__t = "sc" === Helper.getSiteLanguage() || "tc" === Helper.getSiteLanguage() ? e.goodName : e.goodNameEn) ? "" : __t) + '">' + (null == (__t = "sc" === Helper.getSiteLanguage() || "tc" === Helper.getSiteLanguage() ? e.goodName : Helper.chineseCharSubString(e.goodNameEn, 12, !0)) ? "" : __t) + "</td>\x3c!--<td>",
                                    "sc" === Helper.getSiteLanguage() || "tc" === Helper.getSiteLanguage() ? __p += null == (__t = "1" == e.resultType ? "允许收寄" : "2" == e.resultType ? "禁止收寄" : "限制收寄") ? "" : __t : __p += null == (__t = "1" == e.resultType ? "Permitted" : "2" == e.resultType ? "Prohibited" : "Restricted") ? "" : __t,
                                    __p += '</td>--\x3e<td style="position: relative;"><a data-toggle="tooltip" data-trigger="click" data-html="true" data-placement="bottom" title="" href="javascript:;" item-index="' + (null == (__t = t) ? "" : __t) + '" class="tax-details" >' + (null == (__t = e.taxTotal) ? "" : __t) + '</a></td><td style="width: 120px;">',
                                    _.isEmpty(e.images) ? __p += "&nbsp;" : _.each(e.images, function(e, t) {
                                        __p += (null == (__t = t + 1) ? "" : __t) + ':<a image-src="' + (null == (__t = e.imageNameGw) ? "" : __t) + '" href="javascript:;" class="tax-images">' + (null == (__t = e.imageName) ? "" : __t) + "</a><br>"
                                    }),
                                    __p += "</td>\x3c!--<td>" + (null == (__t = e.remark) ? "" : __t) + "</td>--\x3e</tr>"
                            });
                    return __p
                }
                ,
                this.JST.invoicesResult = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<table class="table"><thead><tr><th>' + (null == (__t = _l("运单号码")) ? "" : __t) + "</th><th>" + (null == (__t = _l("开具日期")) ? "" : __t) + "</th><th>" + (null == (__t = _l("发票号")) ? "" : __t) + "</th><th>" + (null == (__t = _l("发票代码")) ? "" : __t) + "</th><th>" + (null == (__t = _l("金额")) ? "" : __t) + "</th><th>" + (null == (__t = _l("运单状态")) ? "" : __t) + "</th><th>" + (null == (__t = _l("发票状态")) ? "" : __t) + "</th></tr></thead><tbody>",
                            _.each(results, function(e, t) {
                                __p += "<tr><td>" + (null == (__t = e.billId) ? "" : __t) + "</td>",
                                0 == t && (__p += '<td rowspan="' + (null == (__t = results.length) ? "" : __t) + '">' + (null == (__t = e.date) ? "" : __t) + '</td><td rowspan="' + (null == (__t = results.length) ? "" : __t) + '">' + (null == (__t = e.invoiceID) ? "" : __t) + '</td><td rowspan="' + (null == (__t = results.length) ? "" : __t) + '">' + (null == (__t = e.code) ? "" : __t) + '</td><td rowspan="' + (null == (__t = results.length) ? "" : __t) + '">' + (null == (__t = _p("%.2f", e.amount)) ? "" : __t) + "</td>"),
                                    __p += "<td>" + (null == (__t = e.billStatus) ? "" : __t) + "</td><td>" + (null == (__t = e.status) ? "" : __t) + "</td></tr>"
                            }),
                            __p += "</tbody></table>";
                    return __p
                }
                ,
                this.JST.location = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<span class="input-group-addon"><span class="sfi sfi-flag"></span></span><input type="text" class="form-control location-input" placeholder="' + (null == (__t = placeholder) ? "" : __t) + '"><div class="location-overlay"></div><span class="input-group-addon toggle-location-picker"><span class="sfi sfi-th"></span></span>';
                    return __p
                }
                ,
                this.JST.locationLiveSearch = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<p data-code="' + (null == (__t = code) ? "" : __t) + '">' + (null == (__t = name) ? "" : __t) + "</p>";
                    return __p
                }
                ,
                this.JST.locationPicker = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="region">',
                            _.each(areas, function(e, t) {
                                __p += '<span><a href="#" ',
                                t == currentIndex && (__p += ' class="current" '),
                                    __p += ' data-index="' + (null == (__t = t) ? "" : __t) + '">' + (null == (__t = region.name) ? "" : __t) + "</a></span>"
                            }),
                            __p += "</div>";
                    return __p
                }
                ,
                this.JST.locationQuery = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<div class="arrow sfi sfi-chevron-right"></div><button class="rate-search primary-button">' + (null == (__t = searchText) ? "" : __t) + '</button><div class="error"></div>';
                    return __p
                }
                ,
                this.JST.loginWindow = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="loginWindow sf_navtab"><button type="button" class="close closeLoginWindow" data-dismiss="modal" aria-hidden="true">×</button><ul class="nav nav-tabs" role="tablist">',
                        logtype.QRcode && (__p += '<li role="presentation" class="tab-li qrcode-tab active maidian" data-md-name="点击扫码登录"  data-md-id="106004"><a href="#QRcodeLogin" aria-controls="QRcodeLogin" role="tab" data-toggle="tab">' + (null == (__t = _l("扫码登录")) ? "" : __t) + "</a></li>"),
                        logtype.verification && (__p += '<li role="presentation" class="tab-li ' + (null == (__t = logtype.QRcode ? "" : "active") ? "" : __t) + '"><a href="#verificationLogin" aria-controls="verificationLogin" role="tab" data-toggle="tab" class="verifiCationLogin maidian" data-md-name="点击帐号登录"  data-md-id="106003">' + (null == (__t = _l("帐号登录")) ? "" : __t) + "</a></li>"),
                        logtype.password && (__p += '<li role="presentation" class="tab-li ' + (null == (__t = logtype.verification || logtype.QRcode ? "" : "active") ? "" : __t) + '"><a href="#passwordLogin" aria-controls="passwordLogin" role="tab" data-toggle="tab">' + (null == (__t = _l("密码登录")) ? "" : __t) + "</a></li>"),
                            __p += '</ul><div class="tab-content">',
                        logtype.QRcode && (__p += '<div role="tabpanel" class="tab-pane qrcode-pane active" id="QRcodeLogin"><h5>' + (null == (__t = _l("登录后即可免验证快速下单与查件")) ? "" : __t) + '</h5><img class="scan-img" src="" alt="' + (null == (__t = _l("扫码登录")) ? "" : __t) + '"><div class="scan-success"><img src="' + (null == (__t = Helper.getResourceURL("images/login/scan-success.png")) ? "" : __t) + '"/><span>' + (null == (__t = _l("扫描成功")) ? "" : __t) + '</span></div><div class="scan-abate"><img class="refresh-btn" src="' + (null == (__t = Helper.getResourceURL("images/login/refresh.png")) ? "" : __t) + '" /></div><h4 class="text-center QRinfo">' + (null == (__t = _l("请使用微信扫描二维码")) ? "" : __t) + '</h4><h5 class="text-center remember"><input type="checkbox" checked="checked"  id="QRremember"/><label for="QRremember">' + (null == (__t = _l("自动登录")) ? "" : __t) + "</label></h5></div>"),
                        logtype.verification && (__p += '<div role="tabpanel" class="tab-pane ' + (null == (__t = logtype.QRcode ? "" : "active") ? "" : __t) + '" id="verificationLogin"><h5>' + (null == (__t = _l("登录后即可免验证快速下单与查件")) ? "" : __t) + '</h5><form class="quick_login_form"><div class="form-group"><input type="text" class="form-control" id="login_mobile" name="login_mobile" placeholder="' + (null == (__t = _l("请输入手机号")) ? "" : __t) + '"></div><div class="form-group"><div class="row"><div class="col-xs-7"><input type="text" class="form-control" id="login_code" name="login_code" autocomplete="off" placeholder="' + (null == (__t = _l("请输入验证码")) ? "" : __t) + '"></div><div class="col-xs-5"><button type="button" class="primary-button login_validation_code count-down-button maidian" data-md-name="获取验证码"  data-md-id="106001" data-count-down-time="60" data-count-down-title="' + (null == (__t = _l("重新获取%s")) ? "" : __t) + '">' + (null == (__t = _l("获取验证码")) ? "" : __t) + '</button></div></div></div><div class="form-group error telNO-err">' + (null == (__t = _l("手机号错误")) ? "" : __t) + '</div><div class="form-group error login-err">' + (null == (__t = _l("登录失败")) ? "" : __t) + '</div><div class="form-group error limit-send-sms">' + (null == (__t = _l("该手机号本日已达到发送短信上限")) ? "" : __t) + '</div><div class="form-group error get-validation-code-failed">' + (null == (__t = _l("获取验证码失败")) ? "" : __t) + '</div><div class="form-group error validation-code-param-error">' + (null == (__t = _l("验证码参数错误")) ? "" : __t) + '</div><div class="form-group error validation-code-expired">' + (null == (__t = _l("验证码已过期")) ? "" : __t) + '</div><div class="form-group error validation-code-count-expired">' + (null == (__t = _l("验证码超次数，请重新获取")) ? "" : __t) + '</div><div class="form-group error validation-code-error">' + (null == (__t = _l("验证码错误")) ? "" : __t) + '</div><div class="form-group error validation-not-send">\t' + (null == (__t = _l("验证码未发送")) ? "" : __t) + '</div><div class="form-group error validation-code-network-error">' + (null == (__t = _l("网络错误")) ? "" : __t) + '</div><div class="bot-wrapper"><p class="text-center verification_tips">' + (null == (__t = _l("未注册用户登录默认注册F35会员")) ? "" : __t) + '</p><div class="text-center remember"><input type="checkbox" id="pwdRemeber" checked="checked" class="login_term" name="login_term" /><label for="pwdRemeber">' + (null == (__t = _l("自动登录")) ? "" : __t) + '</label></div><button type="button" class="primary-btn big verification_quick_login disabled maidian" data-md-name="点击快速登录"  data-md-id="106005" data-loading-text="' + (null == (__t = _l("登录中...")) ? "" : __t) + '">' + (null == (__t = _l("快速登录")) ? "" : __t) + '</button><a href="' + (null == (__t = memberUrl) ? "" : __t) + '" target="_blank" class="primary-btn big white maidian" data-md-name="点击进入会员系统"  data-md-id="106006">' + (null == (__t = _l("进入会员系统")) ? "" : __t) + '</a><h5 class="text-center error term_tips">' + (null == (__t = _l("请勾选服务条款")) ? "" : __t) + "</h5></div></form></div>"),
                        logtype.password && (__p += '<div role="tabpanel" class="tab-pane ' + (null == (__t = logtype.verification || logtype.QRcode ? "" : "active") ? "" : __t) + '" id="passwordLogin">3</div>'),
                            __p += "</div></div>";
                    return __p
                }
                ,
                this.JST.modal = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '\x3c!-- Modal --\x3e<div class="modal' + (null == (__t = fade ? " fade" : "") ? "" : __t) + '" id=' + (null == (__t = id) ? "" : __t) + ' tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog"' + (null == (__t = width ? ' style="width:' + width + 'px"' : "") ? "" : __t) + '><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button><h4 class="modal-title" id="myModalLabel">' + (null == (__t = title) ? "" : __t) + '</h4></div><div class="modal-body">' + (null == (__t = body) ? "" : __t) + "</div></div>\x3c!-- /.modal-content --\x3e</div>\x3c!-- /.modal-dialog --\x3e</div>\x3c!-- /.modal --\x3e";
                    return __p
                }
                ,
                this.JST.modalNoHeader = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '\x3c!-- Modal --\x3e<div class="modal' + (null == (__t = fade ? " fade" : "") ? "" : __t) + '" id=' + (null == (__t = id) ? "" : __t) + " data-backdrop=" + (null == (__t = backdrop) ? "" : __t) + ' tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"><div class="modal-dialog"' + (null == (__t = width ? ' style="width:' + width + 'px"' : "") ? "" : __t) + '><div class="modal-content"><div class="modal-body">' + (null == (__t = body) ? "" : __t) + "</div></div>\x3c!-- /.modal-content --\x3e</div>\x3c!-- /.modal-dialog --\x3e</div>\x3c!-- /.modal --\x3e";
                    return __p
                }
                ,
                this.JST.moreWeight = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<div class="weight-panel toggle-plugins"><div class="arrow"></div><form class="detail-search form-horizontal"><div class="form-group"><div class="row"><label for="weight-value" class="col-sm-3 control-label">' + (null == (__t = _l("快件重量")) ? "" : __t) + '</label><div class="col-sm-9 input-container input-group"><input placeholder="' + (null == (__t = _l("请输入大于0.1的重量")) ? "" : __t) + '" id="weight-value" type="text"class="form-control weight-value no-right-border"><span id=\'unitWeight\' class="input-group-addon no-left-border">kg</span></div></div></div><div class="form-group"><div class="description">' + (null == (__t = _l("或输入快件体积进行查询")) ? "" : __t) + '</div><div class="row"><label for="length-value" class="control-label col-sm-1 locale-fix">' + (null == (__t = _l("长")) ? "" : __t) + '</label><div class="col-sm-3 input-container locale-fix"><input id="length-value" type="text" class="form-control length-value" placeholder="cm"></div><label for="width-value" class="control-label col-sm-1 locale-fix">' + (null == (__t = _l("宽")) ? "" : __t) + '</label><div class="col-sm-3 input-container locale-fix"><input id="width-value" type="text" class="form-control width-value" placeholder="cm"></div><label for="length-value" class="control-label col-sm-1 locale-fix">' + (null == (__t = _l("高")) ? "" : __t) + '</label><div class="col-sm-3 input-container locale-fix"><input id="height-value" type="text" class="form-control height-value" placeholder="cm"></div></div></div><div class="error"></div><div class="text-center"><button class="weight-search primary-button disabled">' + (null == (__t = _l("计算")) ? "" : __t) + '</button></div><div class="extra-weight-side-note top-gray-gradient"><div class="form-group"><p>' + (null == (__t = _l("香港大件备注", "如您的货件是等同或高于下列重量, 请致电(852) 3123 6826F35大货组专线查询或报价")) ? "" : __t) + '</p></div><div class="form-group"><table class="table table-bordered"><thead><tr><th>' + (null == (__t = _l("原寄地")) ? "" : __t) + "</th><th>" + (null == (__t = _l("目的地")) ? "" : __t) + "</th><th>" + (null == (__t = _l("快件重量（kg）")) ? "" : __t) + '</th></tr></thead><tbody><tr><td rowspan="3">' + (null == (__t = _l("香港")) ? "" : __t) + "</td><td>" + (null == (__t = _l("香港／澳门")) ? "" : __t) + "</td><td>" + (null == (__t = _l("香港到香港／澳门大件重量", "200")) ? "" : __t) + "</td></tr><tr><td>" + (null == (__t = _l("台湾")) ? "" : __t) + "</td><td>" + (null == (__t = _l("香港到台湾大件重量", "100")) ? "" : __t) + "</td></tr><tr><td>" + (null == (__t = _l("大陆")) ? "" : __t) + "</td><td>" + (null == (__t = _l("香港到大陆大件重量", "150")) ? "" : __t) + "</td></tr></tbody></table></div></div></form></div>";
                    return __p
                }
                ,
                this.JST.notIndustryResult = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<table class="table"><thead><tr><th>' + (null == (__t = _l("香港18区")) ? "" : __t) + "</th><th>" + (null == (__t = _l("细分区")) ? "" : __t) + "</th><th>" + (null == (__t = _l("街道名称")) ? "" : __t) + "</th><th>" + (null == (__t = _l("大厦名称")) ? "" : __t) + "</th><th>" + (null == (__t = _l("地址属性")) ? "" : __t) + "</th></tr></thead><tbody>",
                            _.each(results, function(e, t) {
                                __p += "<tr><td>" + (null == (__t = e.area) ? "" : __t) + "</td><td>" + (null == (__t = e.town) ? "" : __t) + "</td>",
                                    "A" != e.road ? __p += "<td>" + (null == (__t = e.road) ? "" : __t) + "</td>" : __p += "<td></td>",
                                    __p += "<td>" + (null == (__t = e.address) ? "" : __t) + "</td><td>" + (null == (__t = e.businessType) ? "" : __t) + "</td></tr>"
                            }),
                            __p += "</tbody></table>";
                    return __p
                }
                ,
                this.JST.addIntellectFill = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<p class="intellect-fill-prompt">' + __e(_l("粘贴整段地址，自动识别姓名、电话和地址")) + '</p><div class="intellect-fill"><textarea class="intellect-order-addr" placeholder="' + __e(_l("例如：顺小哥，13200000000，广东省深圳市南山区某某街道某某大厦001号")) + '"></textarea><p class="intellect-fill-num"><span class="intellect-fill-input">0</span>/<span>100</span></p></div><p class="error error-surpass-max">' + __e(_l("输入内容不能大于100字")) + '</p><p class="error error-network">' + __e(_l("网络异常，请稍后再试")) + '</p><button type="button" class="primary-button intellect-fill-btn" disabled="disabled">' + __e(_l("提交")) + "</button>";
                    return __p
                }
                ,
                this.JST.additionalView = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        qr || (__p += '<a class="other-info-toggle">' + __e(_l("完善预约信息")) + ' <span class="aicon-chevron-double-down"></span></a>'),
                            __p += '<div class="other-info-content"><div class="form-horizontal"><div class="form-group predict-price-content"><div class="col-xs-6"><label class="control-label required">' + __e(_l("托寄物")) + '</label><div class="receiver-item"></div></div><div class="col-xs-3"><label class="control-label required">' + __e(_l("付款方式")) + '</label><div class="pay-type"></div></div>',
                        qr || (__p += '<div class="predict-price"><p class="text">' + __e(_l("预计价格")) + '</p><p class="number"><span class="aicon-money"></span><span class="price">--</span></p></div>'),
                            __p += "</div>",
                        "mainland" == viewFrom && (__p += '<div class="form-group"><div class="col-xs-6"><label class="control-label required">' + __e(_l("托寄物重量/kg")) + '</label><div class="weight"></div></div></div>'),
                            __p += '<div class="form-group"><div class="col-xs-6"><label class="control-label">' + __e(_l("保价服务")) + '</label><div class="support-val"></div></div><div class="col-xs-6"><label class="control-label">' + __e(_l("增值服务")) + '</label><button type="button" class="primary-btn square white additional add-button"><p class="main"><span class="ico aicon-diamond"></span>' + __e(_l("点击添加")) + '</p><p class="second"><span class="title">' + __e(_l("签单返还")) + '：</span><span class="content"></span></p></button><p class="error bill-back-tip">' + __e(_l("提示：签单返还需收取5元增值服务费")) + "</p></div></div>",
                        qr || (__p += '<div class="form-group leave-msg"><div class="col-xs-6"><label class="control-label">' + __e(_l("捎话给快递员")) + '</label><button type="button" class="primary-btn square white add-button leave"><p class="main"><span class="ico aicon-msg"></span>' + __e(_l("点击添加")) + '</p><p class="second"><span class="content"></span></p></button></div></div>'),
                            __p += "</div></div>";
                    return __p
                }
                ,
                this.JST.autocompleteAddressBook = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += "<p><span>" + __e(item.contactName) + "</span>",
                        item.companyName && (__p += "<span>" + __e(item.companyName) + "</span>"),
                        item.contactTel && (__p += "<span>" + __e(item.contactTel) + "</span>"),
                        item.contactPhone && (__p += "<span>" + __e(item.contactPhone) + "</span>"),
                        item.customerId && (__p += "<span>" + __e(item.customerId) + "</span>"),
                            __p += "</p><p><span>" + __e(_.uniq(_.compact([item.province, item.city, item.county, item.address]), !0).join("")) + "</span></p>";
                    return __p
                }
                ,
                this.JST.clearanceItem = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="col-xs-10 col-xs-offset-2">',
                            _.each(data, function(e) {
                                __p += "<ul data-id=" + __e(e.id) + ">",
                                    "goods" == e.declareType ? __p += '<li><div class="item-describe"><p>' + __e(e.name) + __e(e.englishName ? "(" + e.englishName + ")" : "") + "</p><p>" + __e(_l("单价")) + "： " + __e(e.price) + " " + __e("cn" == Helper.getSiteLocation() ? e.currencyCn : e.currency) + ' <span class="number">' + __e(_l("数量")) + "： " + __e(e.quantity) + " " + __e(e.uom) + '</span></p></div></li><li><a class="aicon-delete2 delete" href="javascript:void(0)"></a></li><li><a class="aicon-edit edit" href="javascript:void(0)"></a></li>' : __p += '<li><div class="item-describe"><p>文件(document)</p></div></li><li><a class="aicon-delete2 delete" href="javascript:void(0)"></a></li>',
                                    __p += "</ul>"
                            }),
                            __p += "</div>";
                    return __p
                }
                ,
                this.JST.clearanceItemForm = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<form class="form-horizontal clearance-item-form" autocomplete="off" data-parsley-validate>',
                        fromAcs || (__p += '<div class="form-group"><label class="control-label col-xs-3">' + __e(_l("选择类型")) + '：</label><div class="col-xs-9"><div class="radio-inline"><label><input type="radio" class="itemType" name="itemType" value="file" ' + __e("file" != data.declareType && data.declareType ? "" : "checked") + ">" + __e(_l("文件")) + '</label></div><div class="radio-inline"><label><input type="radio" class="itemType" name="itemType" value="goods" ' + __e("goods" == data.declareType ? "checked" : "") + ">" + __e(_l("物品")) + "</label></div></div></div>"),
                            __p += '<div class="form-group hidediv goods-input-required"><label class="control-label col-xs-3">' + __e(_l("物品名称")) + '：</label><div class="col-xs-8"><input type="text" class="form-control goodsName" value="' + __e(data.name) + '" data-value="' + __e(data.en) + '" data-parsley-required data-parsley-maxlength="50"data-parsley-trigger="change" placeholder="' + __e(_l("请填写物品名称")) + '"><ul class="dropdown-menu dropdown-menu-align goodsName-hint"></ul></div></div><div class="form-group error goodsName-contraband"><div class="col-xs-9 col-xs-offset-3">' + __e(_l("请按“品名+材质+规格型号”填写，如：男士棉衬衫")) + '</div></div><div class="form-group error goodsName-fuzzy"><div class="col-xs-9 col-xs-offset-3">' + __e(_l("此物品为违禁品，请重新选择")) + '</div></div><div class="form-group hidediv goods-input-required"><label class="control-label col-xs-3">' + __e(_l("物品单价")) + '：</label><div class="col-xs-3"><input type="text" class="form-control price" value="' + __e(data.price) + '" data-parsley-required data-parsley-pattern="^(?:[1-9][0-9]*\\.[0-9]+|0\\.(?!0+$)[0-9]+|[1-9]+\\d*)$" data-parsley-maxlength="10" data-parsley-pattern-message="' + __e(_l("请输入正整数或正小数")) + '" data-parsley-trigger="change"placeholder="' + __e(_l("请填写")) + '"></div><div class="col-xs-3"><select class="form-control currency"></select></div></div><div class="form-group hidediv goods-input-required"><label class="control-label col-xs-3">' + __e(_l("物品数量")) + '：</label><div class="col-xs-3">',
                            fromAcs ? __p += '<input type="text" class="form-control goodsQuantity" value="1" readonly>' : __p += '<input type="text" class="form-control goodsQuantity" value="' + __e(data.quantity) + '" data-parsley-required data-parsley-pattern="^[1-9]\\d*$" data-parsley-maxlength="10" data-parsley-pattern-message="' + __e(_l("请输入正整数")) + '"  data-parsley-trigger="change" placeholder="' + __e(_l("请填写")) + '">',
                            __p += '</div><div class="col-xs-3"><select class="form-control unit"></select></div><div class="col-xs-3"><input type="text" class="form-control hidediv otherUnit" placeholder="' + __e(_l("请填写")) + '"></div></div><div class="form-group error unit-error"><div class="col-xs-9 col-xs-offset-3">' + __e(_l("您输入的单位不存在，请重新输入")) + "</div></div>",
                        fromAcs || (__p += '<div class="form-group submit"><button type="button" class="primary-button clearanceItemSubmitBtn">' + __e(_l("确定")) + "</button></div>"),
                            __p += "</form>";
                    return __p
                }
                ,
                this.JST.customsClearanceContent = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="toHKclearance"><div class="row order-service-title"><div class="col-xs-6 title aicon-baoguan">' + __e(_l("完善报关信息")) + '</div></div><div class="form-horizontal"><div class="form-group"><label class="control-label col-xs-2 required">' + __e(_l("海关申报")) + '：</label><div class="col-xs-6 control-label tleft"><a class="add-one-item" href="javascript:void(0)">' + __e(_l("新增")) + ' <span class="aicon-round-add"></span></a></div><div class="col-xs-4 control-label"><a href="' + __e(acceptUrl) + '" target="_blank">' + __e(_l("违禁品查询")) + '</a></div></div><div class="add-goods-content-wrapper"></div><div class="form-group error item-too-more"><div class="col-xs-10 col-xs-offset-2">' + __e(_l("提示：申报物品数量不能大于10条")) + '</div></div><div class="form-group error item-not-enough"><div class="col-xs-10 col-xs-offset-2">' + __e(_l("提示：申报物品必须填写")) + '</div></div><div class="form-group item-list"></div><div class="form-group error currency-not-same"><div class="col-xs-10 col-xs-offset-2">' + __e(_l("提示：物品的申报币种需要保持一致")) + '</div></div><div class="form-group totalPrise"><div class="col-xs-10 col-xs-offset-2">' + __e(_l("申报总价值")) + '：<span class="number"></span></div></div><div class="form-group"><label class="control-label col-xs-2">' + __e(_l("付款方式")) + '：</label><div class="col-xs-10"><div class="control-label fl">' + __e(_l("运费")) + '</div><div class="fl SwidthW"><div class="btn-group Swidth"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">' + __e(_l("寄付现结")) + '<span class="caret"></span></button><ul class="dropdown-menu pay-type fee"><li><a href="#" data-value="1">' + __e(_l("寄付现结")) + '</a></li><li><a href="#" data-value="2">' + __e(_l("到付")) + '</a></li><li><a href="#" data-value="4">' + __e(_l("寄付月结")) + '</a></li></ul></div><input type="text" class="form-control monthAccount" id="fee-monthAccount" name="fee-monthAccount" oninput="if(value.length>10) value=value.slice(0,10)" placeholder="' + __e(_l("请填写月结卡号")) + '"><div class="error fee-month-account-err">' + __e(_l("月结账号无效")) + '</div><div class="error fee-month-account-empty">' + __e(_l("未填写月结账号")) + "</div></div>",
                        isTW && (__p += '<div class="fl control-label">' + __e(_l("税金")) + '</div><div class="fl SwidthW"><div class="btn-group Swidth"><button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">' + __e(_l("到付")) + '<span class="caret"></span></button><ul class="dropdown-menu pay-type tax"><li><a href="#" data-value="2">' + __e(_l("到付")) + '</a></li><li><a href="#" data-value="4">' + __e(_l("寄付月结")) + '</a></li></ul></div><input type="text" class="form-control monthAccount" id="tax-monthAccount" name="tax-monthAccount" oninput="if(value.length>10) value=value.slice(0,10)" placeholder="' + __e(_l("请填写月结卡号")) + '"><div class="error tax-month-account-err">' + __e(_l("月结账号无效")) + '</div><div class="error tax-month-account-empty">' + __e(_l("未填写月结账号")) + "</div></div>"),
                            __p += '</div></div></div><div class="form-horizontal"><div class="form-group"><label class="control-label col-xs-2">' + __e(_l("预估重量")) + '：</label><div class="col-xs-3 weight"></div></div><div class="form-group over-weight addition-rate-because-over-weight error" weight-valve="50"><div class="col-xs-10  col-xs-offset-2">' + __e(_l("如您的物品单件超过50公斤，将对此件物品收取超长超重费用，详询95338。")) + '</div></div><div class="form-group over-weight over-weight-forbidden-tip error" weight-valve="130"><div class="col-xs-10  col-xs-offset-2">' + __e(_l("您托寄的物品已超出快递产品重量标准，请选择重货产品，详询95338。")) + '</div></div></div><div class="form-horizontal"><div class="form-group"><label class="control-label col-xs-2">' + __e(_l("附加服务")) + '：</label><div class="col-xs-10 additionalService"><label for="is-valuation-service" class="control-label col-xs-2"><input type="checkbox" id="is-valuation-service" /><span>' + __e(_l("保价服务")) + '</span></label><div class="valuation-service-content col-xs-10" style="display: none"><label for="valuation-service" class="control-label col-xs-2">' + __e(_l("保值")) + '：</label><div class="valuation-service-wrapper col-xs-6"><input type="text" class="form-control" id="valuation-service" name="valuation-service" placeholder="' + __e(_l("请输入声明价值")) + '" data-parsley-type="number" data-parsley-min="0" data-parsley-max="500000"/></div><label class="control-label col-xs-2">' + __e(_l("保费")) + ':</label><label id="valuation-service-prise" class="control-label col-xs-2" style="color:#eb1d21"></label></div></div></div><div class="form-group valuation-service-selected" style="display: none"><div class="col-xs-10 col-xs-offset-2">' + __e(_l("温馨提示：如保价大于50万，请以小哥上门确认的保价金额为准，保价服务最低收费8元")) + '</div></div><div class="form-group valuation-service-too-big error"><div class="col-xs-10 col-xs-offset-2">' + __e(_l("声明价值最高上限为50万元，如货物价值大于50万，请咨询上门收件员或95338。")) + '</div></div><div class="form-group valuation-more-clearance error"><div class="col-xs-10 col-xs-offset-2">' + __e(_l("保价金额不能超过申报总值，当前申报总值为")) + ' <span class="number"></span></div></div></div><div class="form-horizontal"><div class="form-group"><label class="control-label col-xs-2">' + __e(_l("报关方式")) + '：</label><div class="col-xs-10"><ul class="sfselect clearance"><li class="aicon-right accessible-click active" tabindex="0" data-type="0"><span class="mesg">' + __e(_l("非正式报关")) + '</span><span class="aicon-right-bottom-triangle"></span></li><li class="aicon-right accessible-click" tabindex="0" data-type="1"><span class="mesg">' + __e(_l("正式报关")) + '</span><span class="aicon-right-bottom-triangle"></span></li></ul></div></div><div class="form-group official-clearance-tip"><div class="col-xs-10 col-xs-offset-2"><p class="fee-tip">' + __e(_l("正式报关费用：200元")) + '</p><h4 class="text-center">《' + __e(_l("正式报关须知")) + '》</h4><div class="main-text"></div></div></div></div></div>';
                    return __p
                }
                ,
                this.JST.orderHeavyProductTypeList = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += "<li>",
                            heavyCargo.showErr ? __p += '<a href="javascript:void(0)" data-value="' + __e(heavyCargo.limitTypeCode) + '" class="aicon-right"><dl><dt>' + __e(heavyCargo.totalFreight) + "</dt><dd><p>" + __e(heavyCargo.deliverTime) + "</p></dd></dl></a>" : __p += '<a href="javascript:void(0)" data-value="' + __e(heavyCargo.limitTypeCode) + '" class="aicon-right"><dl><dt><span class="aicon-money">' + __e(heavyCargo.totalFreight) + "</span>" + __e(_l("起")) + "</dt><dd><p>" + __e(heavyCargo.deliverTime ? heavyCargo.deliverTime : _l(heavyCargo.limitTypeName + "时效")) + "</p></dd><dd><p>" + __e(_l("截单时间")) + "： " + __e(heavyCargo.closedTime ? heavyCargo.closedTime : "") + "</p></dd></dl></a>",
                            __p += "</li>";
                    return __p
                }
                ,
                this.JST.orderProductTypeList = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        data.showErr ? __p += '<li><a href="javascript:void(0)" data-value="' + __e(data.limitTypeCode) + '" class="aicon-right"><dl><dt>' + __e(data.totalFreight) + "</dt><dd><p>" + __e(data.deliverTime) + "</p></dd></dl></a></li>" : _.each(data, function(e) {
                            __p += '<li><a href="javascript:void(0)" data-value="' + __e(e.limitTypeCode) + '" class="' + __e(e.limitTypeCode == defaultProduct.limitTypeCode ? "aicon-right" : "") + '"><dl><dt><span class="aicon-money">' + __e(e.totalFreight) + "</span>" + __e(_l("起")) + "</dt><dd><p>" + __e(e.deliverTime ? e.deliverTime : _l(e.limitTypeName + "时效")) + "</p></dd><dd><p>" + __e(_l("截单时间")) + "： " + __e(e.closedTime ? e.closedTime : "") + "</p></dd></dl></a></li>"
                        });
                    return __p
                }
                ,
                this.JST.orderSuccess = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        3 == pickupType ? __p += '<div class="bill-head"><h3>' + __e(_l("运单填写成功")) + "</h3><h4>" + __e(_l("温馨提示：请把“F35联”粘贴在包裹上，并交由快递员揽收")) + "</h4><p>" + __e(_l("运单号")) + "： " + __e(waybillNo) + "</p></div>" : __p += "<h3>" + __e(_l("预约成功")) + "</h3>",
                            null != data ? (1 == pickupType && (__p += '<div class="sfcard bill-man-head"><div class="clearfix"><div class="fl img"></div><div class="fr moment"><p class="gray"><span class="aicon-time"></span>' + __e(_l("预计上门时间")) + "</p><p>" + __e(relativeDate) + '</p><span class="time">' + __e(relativeHour) + '</span></div></div><div class="clearfix"><div class="fl"><p>' + __e(data.resoure.resourceName ? data.resoure.resourceName : _l("快递员")) + '</p><div class="star"><p class="gray"><span class="aicon-star"></span><span class="aicon-star"></span><span class="aicon-star"></span><span class="aicon-star"></span><span class="aicon-star"></span></p><p class="red' + __e(data.resoure.resourceName ? "" : " none") + '"><span class="aicon-star"></span><span class="aicon-star"></span><span class="aicon-star"></span><span class="aicon-star"></span><span class="aicon-star"></span></p><span class="number">' + __e(data.resoure.resourceName ? 4.8 : 0) + "</span></div>",
                            data.resoure.telphone && (__p += "<p>" + __e(_l("联系电话")) + "： " + __e(data.resoure.telphone) + "</p>"),
                                __p += '</div><button class="primary-btn white big square fr cancel"><span class="aicon-bs-refused"></span>' + __e(_l("取消寄件")) + "</button></div></div>"),
                                __p += '<div class="sfcard"><table><tr><td class="send-badge"><span class="sfbadge black">' + __e(_l("寄")) + '</span><span class="aicon-v-dot"></span></td><td><p>' + __e(sender.contactName) + "</p><p>" + __e(sender.contactTel || sender.contactPhone) + '</p></td><td colspan="2"><p>' + __e(_.uniq(_.compact([sender.province, sender.city, sender.county]), !0).join("")) + "</p><p>" + __e(sender.address) + '</p></td></tr><tr><td><span class="sfbadge red">' + __e(_l("收")) + "</span></td><td><p>" + __e(receiver.contactName) + "</p><p>" + __e(receiver.contactTel || receiver.contactPhone) + '</p></td><td colspan="2"><p>' + __e(_.uniq(_.compact([receiver.province, receiver.city, receiver.county]), !0).join("")) + "</p><p>" + __e(receiver.address) + '</p></td></tr><tr><td></td><td colspan="3"><p>' + __e(_l("预约号")) + "： " + __e(data.appointmentNo) + '</p></td></tr></table><table class="others"><tr><td><p class="gray">' + __e(_l("托寄物品信息")) + "</p><p>" + __e(data.cargoInfo.cargo) + '</p></td><td><p class="gray">' + __e(_l("付款方式")) + "</p><p>" + __e(_l(payType)) + '</p></td><td><p class="gray">' + __e(_l("保价")) + "</p><p>" + (null == (__t = data.declaredValue ? '<span class="aicon-money"></span>' + data.declaredValue : _l("无")) ? "" : __t) + '</p></td><td><p class="gray">' + __e(_l("增值服务")) + "</p><p>" + __e(data.signedBackDetail.signedBackName ? data.signedBackDetail.signedBackName : _l("无")) + "</p></td></tr></table></div>") : __p += '<img src="' + __e(imgUrl) + '" alt="下单成功图片">',
                            __p += '<div class="clearfix options"><button class="primary-btn white square fl" style="display: none"><span class="aicon-i-down"></span>' + __e(_l("下载电子运单")) + '</button><a href="' + __e(waybillUrl) + '" class="primary-btn white square fl maidian" data-md-name="查看订单列表" data-md-id="125001"><span class="aicon-intellect-address"></span>' + __e(_l("查看订单列表")) + "</a>",
                        null != data && (3 == pickupType ? __p += '<button class="primary-btn big order-again fr maidian" data-md-name="再下一单" data-md-id="125002">' + __e(_l("再下一单")) + "</button>" : isReceiverHK_MC_TW || (__p += '<button class="primary-btn big fill-bill fr"><span class="aicon-down"></span>' + __e(_l("完善快件信息")) + "</button>")),
                            __p += "</div>";
                    return __p
                }
                ,
                this.JST.qrCodeOrder = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<div class="qr-code-order"><h3 class="title">' + __e(_l("有扫码寄件")) + '<a href="javascript:void(0)" class="paper-bill">' + __e(_l("纸质运单")) + '<span class="aicon-ask"></span></a></h3><ul class="step" flex="cross:stretch"><li><span>01</span><p>' + __e(_l("输入纸质二维码上的运单号")) + "</p></li><li><span>02</span><p>" + __e(_l("填写寄件信息")) + "</p></li><li><span>03</span><p>" + __e(_l("将包裹与二维码交给收派员")) + '</p></li></ul><form class="clearfix"><input type="text" class="fl" name="billNumber" placeholder="' + __e(_l("请输入运单号以开始")) + '"><button class="fl primary-btn square big" type="submit">' + __e(_l("下一步")) + '</button></form><p class="tip">' + __e(_l("温馨提示：此方式下单不会通知快递员上门取件。如需快递员及时上门收件，请使用“寄快递”下单或联系快递员。")) + '</p><img src="' + __e(imgUrl) + '" alt="二维码下单图片" class="qr-order-img"></div>';
                    return __p
                }
                ,
                this.JST.graphValidate = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<form><div class="form-group"><div><img src="" alt="图形验证码图片" class="graph-validate-img" tabindex="0"></div></div><div class="form-group"><input type="text" class="form-control graph-validate-input" placeholder="' + (null == (__t = _l("请输入图片中的验证码")) ? "" : __t) + '" autocomplete="off"></div><div class="form-group text-center"><button type="submit" class="primary-btn">' + (null == (__t = _l("确定")) ? "" : __t) + "</button></div></form>";
                    return __p
                }
                ,
                this.JST.otherService = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        _.each(otherServices, function(e, t) {
                            __p += '<a target="_blank" href="' + (null == (__t = e.get("link")) ? "" : __t) + '" class="other-service clearfix" ' + (null == (__t = e.isExternal ? 'target="_blank"' : "") ? "" : __t) + '><div class="service-info col-xs-8"><div class="service-title ' + (null == (__t = e.get("isPromotion") ? "promote" : "") ? "" : __t) + '"><span class="overflow-text" title="' + (null == (__t = e.get("name")) ? "" : __t) + '">' + (null == (__t = e.get("name")) ? "" : __t) + '</span></div><div class="service-description"><span title="' + (null == (__t = e.get("description")) ? "" : __t) + '">' + (null == (__t = e.get("description")) ? "" : __t) + '</span></div></div><div class="col-xs-4"><div class="hot"><div class="hot-tag" title="' + (null == (__t = e.get("sale")) ? "" : __t) + '"><span class="overflow-text" title="' + (null == (__t = e.get("sale")) ? "" : __t) + '">' + (null == (__t = e.get("sale")) ? "" : __t) + '</span></div><div class="hot-text" title="' + (null == (__t = e.get("client")) ? "" : __t) + '">' + (null == (__t = e.get("client")) ? "" : __t) + "</div></div></div></a>"
                        });
                    return __p
                }
                ,
                this.JST.pagination = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj) {
                        if (__p += '<ul class="pagination"><li class="prevPage ' + (null == (__t = pageIndex <= 1 ? "disable" : "") ? "" : __t) + '"><a href="#page=' + (null == (__t = pageIndex - 1) ? "" : __t) + '"class= "' + (null == (__t = 1 < pageIndex ? "news_month_pagination" : "") ? "" : __t) + '"data-pageindex="' + (null == (__t = pageIndex - 1) ? "" : __t) + '" ><<</a></li>',
                            pageIndex < 20)
                            for (var i = 1; i <= pageCount - 1; i++)
                                i <= 20 && (__p += '<li class="' + (null == (__t = pageIndex === i ? "current" : "") ? "" : __t) + '"><a href="#page=' + (null == (__t = i) ? "" : __t) + '" class= "' + (null == (__t = pageIndex != i ? "news_month_pagination" : "") ? "" : __t) + '"data-pageindex="' + (null == (__t = i) ? "" : __t) + '">' + (null == (__t = i) ? "" : __t) + "</a></li>");
                        else if (20 <= pageIndex && pageIndex < pageCount)
                            for (var i = pageIndex - 20 + 2; i <= pageIndex + 1; i++)
                                __p += '<li class="' + (null == (__t = pageIndex === i ? "current" : "") ? "" : __t) + '"><a href="#page=' + (null == (__t = i) ? "" : __t) + '" class= "' + (null == (__t = pageIndex != i ? "news_month_pagination" : "") ? "" : __t) + '"data-pageindex="' + (null == (__t = i) ? "" : __t) + '">' + (null == (__t = i) ? "" : __t) + "</a></li>";
                        else if (pageIndex == pageCount)
                            for (var i = pageCount - 19; i <= pageCount; i++)
                                __p += '<li class="' + (null == (__t = pageIndex === i ? "current" : "") ? "" : __t) + '"><a href="#page=' + (null == (__t = i) ? "" : __t) + '" class= "' + (null == (__t = pageIndex != i ? "news_month_pagination" : "") ? "" : __t) + '"data-pageindex="' + (null == (__t = i) ? "" : __t) + '">' + (null == (__t = i) ? "" : __t) + "</a></li>";
                        20 < pageCount && (__p += '<li class="">...</li>'),
                            __p += '<li class="' + (null == (__t = pageIndex == pageCount ? "current" : "") ? "" : __t) + '"><a href="#page=' + (null == (__t = pageCount) ? "" : __t) + '"class= "' + (null == (__t = pageIndex != pageCount ? "news_month_pagination" : "") ? "" : __t) + '"data-pageindex="' + (null == (__t = pageCount) ? "" : __t) + '">' + (null == (__t = pageCount) ? "" : __t) + '</a></li><li class="nextPage ' + (null == (__t = pageIndex >= pageCount ? "disable" : "") ? "" : __t) + '">',
                            pageIndex != pageCount ? __p += '<a href="#page=' + (null == (__t = pageIndex + 1) ? "" : __t) + '"class= "' + (null == (__t = pageIndex < pageCount ? "news_month_pagination" : "") ? "" : __t) + '"data-pageindex="' + (null == (__t = pageIndex + 1) ? "" : __t) + '">>></a>' : __p += ">>",
                            __p += "</li></ul>"
                    }
                    return __p
                }
                ,
                this.JST.paginationPro = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        if (1 < pageCount) {
                            if (__p += '<div class="content-page-hk-pages"><ul class="pagination"><li class="' + (null == (__t = 1 == pageIndex ? "current" : "") ? "" : __t) + '"><a href="#page= ' + (null == (__t = 1) ? "" : __t) + '"class= "' + (null == (__t = 1 != pageIndex ? "goToPage" : "") ? "" : __t) + '"data-pageindex="' + (null == (__t = 1) ? "" : __t) + '">' + (null == (__t = _l("第一页")) ? "" : __t) + '</a></li><li class="prevPage ' + (null == (__t = pageIndex <= 1 ? "disable" : "") ? "" : __t) + '">',
                                    1 < pageIndex ? __p += '<a href="#page= ' + (null == (__t = pageIndex - 1) ? "" : __t) + '"class= "' + (null == (__t = 1 < pageIndex ? "goToPage" : "") ? "" : __t) + '"data-pageindex="' + (null == (__t = pageIndex - 1) ? "" : __t) + '" ><<</a>' : __p += '<a href="#" onclick="return false;">&lt;&lt;</a>',
                                    __p += "</li>",
                                10 < pageCount)
                                for (var i = Number(pageIndex); i <= Number(pageIndex) + Number(9); i++)
                                    Number(pageIndex) + Number(9) < pageCount ? __p += '<li class="' + (null == (__t = pageIndex == i ? "current" : "") ? "" : __t) + '"><a href="#page= ' + (null == (__t = i) ? "" : __t) + '"class= "' + (null == (__t = pageIndex != i ? "goToPage" : "") ? "" : __t) + '"data-pageindex="' + (null == (__t = i) ? "" : __t) + '">' + (null == (__t = i) ? "" : __t) + "</a></li>" : __p += '<li class="' + (null == (__t = pageIndex == i - 9 ? "current" : "") ? "" : __t) + '"><a href="#page= ' + (null == (__t = i - 9) ? "" : __t) + '"class= "' + (null == (__t = pageIndex != i - 9 ? "goToPage" : "") ? "" : __t) + '"data-pageindex="' + (null == (__t = i - 9) ? "" : __t) + '">' + (null == (__t = i - 9) ? "" : __t) + "</a></li>";
                            else
                                for (var i = 1; i <= pageCount; i++)
                                    __p += '<li class="' + (null == (__t = pageIndex == i ? "current" : "") ? "" : __t) + '"><a href="#page= ' + (null == (__t = i) ? "" : __t) + '"class= "' + (null == (__t = pageIndex != i ? "goToPage" : "") ? "" : __t) + '"data-pageindex="' + (null == (__t = i) ? "" : __t) + '">' + (null == (__t = i) ? "" : __t) + "</a></li>";
                            __p += '<li class="nextPage ' + (null == (__t = pageIndex >= pageCount ? "disable" : "") ? "" : __t) + '">',
                                pageIndex < pageCount ? __p += '<a href="#page= ' + (null == (__t = Number(pageIndex) + Number(1)) ? "" : __t) + '"class= "' + (null == (__t = pageIndex < pageCount ? "goToPage" : "") ? "" : __t) + '"data-pageindex="' + (null == (__t = Number(pageIndex) + Number(1)) ? "" : __t) + '">>></a>' : __p += '<a href="#" onclick="return false;">&gt;&gt;</a>',
                                __p += '</li><li class="' + (null == (__t = pageIndex == pageCount ? "current" : "") ? "" : __t) + '"><a href="#page= ' + (null == (__t = pageCount) ? "" : __t) + '"class= "' + (null == (__t = pageIndex != pageCount ? "goToPage" : "") ? "" : __t) + '"data-pageindex="' + (null == (__t = pageCount) ? "" : __t) + '">' + (null == (__t = _l("最后一页")) ? "" : __t) + "</a></li></ul></div>"
                        }
                    return __p
                }
                ,
                this.JST.payFee = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<td class="payFee-info" ><div class="service-info-wrapper">',
                            showDefaultService ? __p += "<a href='javascript:void(0)'><div title=\"" + (null == (__t = service.limitTypeName) ? "" : __t) + '" class="service-info-title"><span class="limit-type-name" >' + (null == (__t = service.limitTypeName) ? "" : __t) + "</span></div></a>" : ("#" !== service.link && (__p += "<a href='" + (null == (__t = service.link) ? "" : __t) + '\' target="_blank">'),
                                __p += '<div title="' + (null == (__t = service.limitTypeName) ? "" : __t) + '" class="service-info-title ' + (null == (__t = service.isPromotion ? "promotion" : "") ? "" : __t) + '"><span class="limit-type-name" >' + (null == (__t = service.limitTypeName) ? "" : __t) + "</span>",
                            service.cargoTypeName && " " != service.cargoTypeName && service.shouldShowCargoType && (__p += '<span class="cargo-type"  title="' + (null == (__t = service.cargoTypeName) ? "" : __t) + '">(' + (null == (__t = service.cargoTypeName) ? "" : __t) + ")</span>"),
                                _.each(service.additionalPayFees, function(e) {
                                    ("overdue-refund" === e.code || "earlier-shipping-lower-price" === e.code && 0 != service.regionFreight) && (__p += '<img src="' + (null == (__t = e.icon) ? "" : __t) + '" alt="' + (null == (__t = e.name) ? "" : __t) + '"class="additional-service-icon" />')
                                }),
                                __p += "</div>",
                            "#" !== service.link && (__p += "</a>")),
                            __p += '</div></td><td class="weight-info">',
                            showDefaultService ? __p += '<div class="weight">1kg</div>' : service.showDestCurrencyPrice ? __p += '<div class="weight">' + (null == (__t = service.destWeightUnit ? service.destWeight : service.weight) ? "" : __t) + (null == (__t = "en" === Helper.getSiteLanguage() ? " " : "") ? "" : __t) + (null == (__t = service.destWeightUnit ? service.destWeightUnit : service.weightUnit) ? "" : __t) + '\x3c!-- _l("公斤") --\x3e</div>' : __p += '<div class="weight">' + (null == (__t = service.weight) ? "" : __t) + (null == (__t = "en" === Helper.getSiteLanguage() ? " " : "") ? "" : __t) + (null == (__t = service.weightUnit) ? "" : __t) + "</div>",
                            __p += '</td><td class="time-info">',
                            showDefaultService ? __p += '<div class="time first">' + (null == (__t = service.deliverTime) ? "" : __t) + "</div>" : service.deliverTime ? (__p += '<div class="time first">',
                                service.internet ? __p += (null == (__t = service.deliverTime) ? "" : __t) + "" + (null == (__t = _l("天")) ? "" : __t) + "\x3c!--港澳台地区互寄显示时效为具体时间--\x3e" : "2" === service.destView && "2" === service.orgionView ? __p += null == (__t = moment.isMoment(moment(service.deliverTime).toString()) ? moment(service.deliverTime).format("YYYY-MM-DD") : service.deliverTime + _l("前")) ? "" : __t : service.addTime ? (moment(service.addTime).isBefore(moment(service.deliverTime)) ? __p += (null == (__t = service.addTime) ? "" : __t) + "<br/>" + (null == (__t = _l("偏远区域加时")) ? "" : __t) : moment.isMoment(moment(service.deliverTime).toString()) ? __p += null == (__t = moment(service.deliverTime).format("YYYY-MM-DD")) ? "" : __t : "sc" != Helper.getSiteLanguage() && "tc" != Helper.getSiteLanguage() ? "次日" === service.deliverTime.substr(0, 2) ? __p += null == (__t = service.deliverTime.replace("次日", "Next day ")) ? "" : __t : "工商" === service.deliverTime.substr(0, 2) ? __p += null == (__t = service.deliverTime.replace("工商区:", "Commercial and Industrial area: ").replace(/次日/g, "before Next day ").replace("住宅区:", "Residential area: ").replace("非工商区:", "Residential area: ")) ? "" : __t : __p += (null == (__t = service.deliverTime) ? "" : __t) + '<span class="timeBefore">' + (null == (__t = _l("前")) ? "" : __t) + "</span>" : "Invalid date" == moment(service.deliverTime).format("YYYY-MM-DD HH:mm") ? __p += null == (__t = service.deliverTime) ? "" : __t : __p += (null == (__t = service.deliverTime) ? "" : __t) + '<span class="timeBefore">' + (null == (__t = _l("前")) ? "" : __t) + "</span>",
                                    __p += "\x3c!--" + (null == (__t = moment.isMoment(moment(service.deliverTime).toString()) ? moment(service.deliverTime).format("YYYY-MM-DD") : service.deliverTime) ? "" : __t) + "--\x3e") : (__p += "\x3c!--" + (null == (__t = moment.isMoment(moment(service.deliverTime).toString()) ? moment(service.deliverTime).format("YYYY-MM-DD") : service.deliverTime) ? "" : __t) + "--\x3e",
                                    moment.isMoment(moment(service.deliverTime).toString()) ? __p += null == (__t = moment(service.deliverTime).format("YYYY-MM-DD")) ? "" : __t : "sc" != Helper.getSiteLanguage() && "tc" != Helper.getSiteLanguage() ? "次日" === service.deliverTime.substr(0, 2) ? __p += null == (__t = service.deliverTime.replace("次日", "Next day ")) ? "" : __t : "工商" === service.deliverTime.substr(0, 2) ? __p += null == (__t = service.deliverTime.replace("工商区:", "Commercial and Industrial area: ").replace(/次日/g, "before Next day ").replace("住宅区:", "Residential area: ").replace("非工商区:", "Residential area: ")) ? "" : __t : __p += (null == (__t = service.deliverTime) ? "" : __t) + '<span class="timeBefore">' + (null == (__t = _l("前")) ? "" : __t) + "</span>" : "Invalid date" == moment(service.deliverTime).format("YYYY-MM-DD HH:mm") ? __p += null == (__t = service.deliverTime) ? "" : __t : __p += (null == (__t = service.deliverTime) ? "" : __t) + '<span class="timeBefore">' + (null == (__t = _l("前")) ? "" : __t) + "</span>"),
                                __p += '</div>\x3c!--  <span class="time">' + (null == (__t = moment.isMoment(moment(service.deliverTime).toString()) ? service.deliverDate : "") ? "" : __t) + "&nbsp;&nbsp;" + (null == (__t = moment.isMoment(moment(service.deliverTime).toString()) ? service.deliverMomentTime : "") ? "" : __t) + "</span>--\x3e") : service.deliverTimeForType && (__p += '<div class="time first">' + (null == (__t = service.deliverTimeForType) ? "" : __t) + "</div>"),
                            __p += '</td><td class="rate-info">',
                            showDefaultService ? __p += null == (__t = service.totalFreight) ? "" : __t : service.showDestCurrencyPrice ? "coldChain" === rateType ? "sc" == Helper.getSiteLanguage() ? (__p += null == (__t = service.destCurrencyName) ? "" : __t,
                            service.destPickupFreight && (__p += (null == (__t = _l("提货费：")) ? "" : __t) + "" + (null == (__t = service.destPickupFreight) ? "" : __t) + "</br>"),
                                __p += (null == (__t = _l("运输费：")) ? "" : __t) + "" + (null == (__t = service.destTransportFreight) ? "" : __t) + "</br>",
                            service.destDistributionFreight && (__p += (null == (__t = _l("配送费：")) ? "" : __t) + "" + (null == (__t = service.destDistributionFreight) ? "" : __t))) : (service.destPickupFreight && (__p += (null == (__t = _l("提货费：")) ? "" : __t) + "" + (null == (__t = service.destCurrencyName) ? "" : __t) + (null == (__t = service.destPickupFreight) ? "" : __t) + "</br>"),
                                __p += (null == (__t = _l("运输费：")) ? "" : __t) + "" + (null == (__t = service.destCurrencyName) ? "" : __t) + (null == (__t = service.destTransportFreight) ? "" : __t) + "</br>",
                            service.destDistributionFreight && (__p += (null == (__t = _l("配送费：")) ? "" : __t) + "" + (null == (__t = service.destCurrencyName) ? "" : __t) + (null == (__t = service.destDistributionFreight) ? "" : __t))) : (__p += null == (__t = service.destCurrencyName) ? "" : __t,
                                "1" === service.orgionView && "1" === service.destView ? __p += null == (__t = service.totalFreight) ? "" : __t : __p += null == (__t = service.destFreight) ? "" : __t) : "coldChain" === rateType ? "sc" == Helper.getSiteLanguage() ? (__p += null == (__t = service.currencyName) ? "" : __t,
                            service.pickupFreight && (__p += (null == (__t = _l("提货费：")) ? "" : __t) + "" + (null == (__t = service.pickupFreight) ? "" : __t) + "</br>"),
                                __p += (null == (__t = _l("运输费：")) ? "" : __t) + "" + (null == (__t = service.transportFreight) ? "" : __t) + "</br>",
                            service.distributionFreight && (__p += (null == (__t = _l("配送费：")) ? "" : __t) + "" + (null == (__t = service.distributionFreight) ? "" : __t))) : (service.pickupFreight && (__p += (null == (__t = _l("提货费：")) ? "" : __t) + "" + (null == (__t = service.currencyName) ? "" : __t) + (null == (__t = service.pickupFreight) ? "" : __t) + "</br>"),
                                __p += (null == (__t = _l("运输费：")) ? "" : __t) + "" + (null == (__t = service.currencyName) ? "" : __t) + (null == (__t = service.transportFreight) ? "" : __t) + "</br>",
                            service.distributionFreight && (__p += (null == (__t = _l("配送费：")) ? "" : __t) + "" + (null == (__t = service.currencyName) ? "" : __t) + (null == (__t = service.distributionFreight) ? "" : __t))) : (__p += null == (__t = service.currencyName) ? "" : __t,
                                "1" === service.orgionView && "3" !== service.destView || "2" === service.orgionView && "1" === service.destView ? __p += null == (__t = service.totalFreight) ? "" : __t : __p += null == (__t = service.freight) ? "" : __t),
                            __p += '<div class="additional-services-link"></div></td>';
                    return __p
                }
                ,
                this.JST.payFeeComments = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        _.each(comments, function(e) {
                            e.shouldShow && (__p += '<div class="service-comment">' + (null == (__t = e.detail) ? "" : __t) + "</div>")
                        });
                    return __p
                }
                ,
                this.JST.payFeeContainer = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="service-switch"><a href="javascript:void(0)" data-type="normal" class="active maidian" data-md-name="点击快递"  data-md-id="117002">' + (null == (__t = _l("快递")) ? "" : __t) + '</a><a href="javascript:void(0)" data-type="heavyCargo" class="maidian" data-md-name="点击大件"  data-md-id="117003">' + (null == (__t = _l("大件")) ? "" : __t) + "</a>",
                        "cn" == Helper.getSiteLocation() && (__p += '<a href="javascript:void(0)" data-type="coldChain" class="maidian"  data-md-name="点击冷运"  data-md-id="117004">' + (null == (__t = _l("冷运")) ? "" : __t) + "</a>"),
                            __p += '</div><div class="service-heavyCargo-weight-tip sfi sfi-bell">' + (null == (__t = _l("重货速运产品根据寄件流向会有最低计价重量及最低收费，请知悉")) ? "" : __t) + '</div><div class="services-top-bar"><h5 class="pull-left">' + (null == (__t = _l("我们的产品")) ? "" : __t) + '</h5><ul class="utils pull-right"></ul></div><div class="service-wrapper top-gray-gradient"><span id="not-support-flow-control">' + (null == (__t = _l("暂不支持流向控制")) ? "" : __t) + '</span></div><div class="service-clodchain-tips coldChain-tips"><span><h5>' + (null == (__t = _l("温馨提示：")) ? "" : __t) + "</h5></span><br/><span>" + (null == (__t = _l("a)寄付价=提货费+运输费+送货费：当查询结果未显示提货或送货费用时，请您选择自送至冷库或到冷库自提；如需自助下单请关注【F35冷运】微信公众号”；")) ? "" : __t) + "</span><br/><span>" + (null == (__t = _l("b) 关于时效：“如需提、送服务，时效在此基础上慢0到2天”。")) ? "" : __t) + '</span></div><div class="service-internet-wrapper"><div id="internet"></div></div><div class="services-bottom-bar"><div class="additional-services-link"></div></div>';
                    return __p
                }
                ,
                this.JST.payFeeInitial = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<td class="service-info">',
                        "#" !== link && (__p += "<a href='" + (null == (__t = link) ? "" : __t) + '\' target="_blank">'),
                            __p += '<div class="service-info-wrapper service-popover-container"><div class="service-info-title ' + (null == (__t = isPromotion ? "promotion" : "") ? "" : __t) + '"><span class="circle"></span><div class="limit-type-name">' + (null == (__t = limitTypeName) ? "" : __t) + "</div></div>",
                        "#" !== link && (__p += "</a>"),
                            __p += '</div></td><td class="promotion-info"><p title="' + (null == (__t = promotionMessage) ? "" : __t) + '">' + (null == (__t = promotionMessage) ? "" : __t) + "</p></td>";
                    return __p
                }
                ,
                this.JST.payFeeInternet = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="service-internet"><table  style="width: 100%;"><tbody>',
                        service.internet && (service.expectArriveTm || service.otherService) && (__p += '<tr><td style="width: 25%;text-align:right;font-size:16px;"> ' + (null == (__t = _l("派件服务时间")) ? "" : __t) + ' </td><td style="width:75%;text-align:left;padding:20px;">' + (null == (__t = service.expectArriveTm.replace(/;/g, "<br/>")) ? "" : __t) + "</td></tr>"),
                            __p += "</tbody></table></div>";
                    return __p
                }
                ,
                this.JST.promptDialogTemplate = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        itemList.length && _.each(itemList, function(e) {
                            var t;
                            t = "SC" == e.lang ? e.txt + (e.enTxt ? "&nbsp;&nbsp;(" + e.enTxt + ")" : "") : e.enTxt,
                                __p += '<li><a href="javascript:void(0);" class="text-muted-1"><span class="' + (null == (__t = e.selectable ? "text-muted-1" : "text-muted") ? "" : __t) + '"  data-unit="' + (null == (__t = e.unit) ? "" : __t) + '" data-selectable="' + (null == (__t = e.selectable) ? "" : __t) + '" data-sc= "' + (null == (__t = e.value) ? "" : __t) + '" data-en="' + (null == (__t = e.enTxt) ? "" : __t) + '">' + (null == (__t = t) ? "" : __t) + "</span>" + (null == (__t = e.selectable ? "" : '<span class="text-muted-2">违禁品</span>') ? "" : __t) + "</a></li>"
                        });
                    return __p
                }
                ,
                this.JST.rangeResult = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="main-content-row range-result-brief no-padding"><div class="range-result-brief-content"><span class="location-name">' + (null == (__t = locationName) ? "" : __t) + '</span><dl class="location-type">',
                            "ALL_REGION" === type ? __p += "<dt>" + (null == (__t = _l("全境配送")) ? "" : __t) + "</dt>" : "PART_REGION" === type ? __p += "<dt>" + (null == (__t = _l("部分地区提供服务")) ? "" : __t) + "</dt>" : __p += "<dt>" + (null == (__t = _l("本地区不配送")) ? "" : __t) + "</dt>",
                            __p += "</dl>",
                        unavailableRegions.length && (__p += '<dl class="unavailable-ranges"><dt>' + (null == (__t = _l("不服务的地区为：")) ? "" : __t) + "</dt><dd>" + (null == (__t = _.pluck(unavailableRegions, "name").join("、")) ? "" : __t) + "</dd></dl>"),
                        isHongKongAddress && (__p += '<p class="side-note">' + (null == (__t = _l("备注：") + _l("非工商附加费", "1. 非工商附加费：寄出或派送的快件，须收取HKD18服务费。")) ? "" : __t) + "<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;" + (null == (__t = _l("偏远地区附加费", "2. 偏远地区附加费：寄出或派送的快件，须收取HKD30服务费。")) ? "" : __t) + "</p>"),
                        isTaiWanAddress && (__p += '<p class="side-note">' + (null == (__t = _l("台湾偏远地区范围备注", "备注: 偏远地区需另收取每票NTD150，请<a href='tw_remote_area.html'>按此</a>查询详细台湾偏远地区范围。")) ? "" : __t) + "</p>"),
                            __p += "</div>",
                        "sc" === lang && "cn" === region && (__p += '<div class="find-corresponding-store top-gray-gradient"><a href="' + (null == (__t = storeLinkURL) ? "" : __t) + '">' + (null == (__t = _l("查看全部网点")) ? "" : __t) + '<span class="sfi sfi-chevron-circle-right"></span></a></div>'),
                            __p += "</div>",
                        (normalRegions.length || abnormalRegions.length) && (__p += '<div class="main-content-row range-result-detail"><div class="detail-title">' + (null == (__t = _l("服务地区详情")) ? "" : __t) + '</div><div class="detail-content">',
                        normalRegions.length && (__p += '<div class="region-results-wrapper"><div class="regions-title"><i class="sfi sfi-clipboard"></i><span>' + (null == (__t = _l("正常派送地区：")) ? "" : __t) + '</span></div><ul class="result-regions">',
                            _.each(normalRegions, function(e, t) {
                                t % 6 == 0 && (__p += '<div class="result-regions-row">'),
                                    __p += '<li data-normal-region="true" data-code="' + (null == (__t = e.code) ? "" : __t) + '"><span title="' + (null == (__t = e.name) ? "" : __t) + '">' + (null == (__t = e.name) ? "" : __t) + "</span></li>",
                                t % 6 == 5 && (__p += "</div>")
                            }),
                        normalRegions.length % 6 == 0 && (__p += "</div>"),
                            __p += "</ul></div>"),
                        abnormalRegions.length && (__p += '<div class="region-results-wrapper"><div class="regions-title"><i class="sfi sfi-clipboard"></i><span>' + (null == (__t = _l("部分收送地区：")) ? "" : __t) + '</span></div><ul class="result-regions">',
                            _.each(abnormalRegions, function(e, t) {
                                t % 6 == 0 && (__p += '<div class="result-regions-row">'),
                                    __p += '<li data-code="' + (null == (__t = e.code) ? "" : __t) + '"><span title="' + (null == (__t = e.name) ? "" : __t) + '">' + (null == (__t = e.name) ? "" : __t) + "</span></li>",
                                t % 6 == 5 && (__p += "</div>")
                            }),
                        abnormalRegions.length % 6 == 0 && (__p += "</div>"),
                            __p += "</ul></div>"),
                            __p += "</div></div>");
                    return __p
                }
                ,
                this.JST.rangeResultInternational = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="main-content-row range-result-brief no-padding"><div class="range-result-brief-content"><span class="location-name">' + (null == (__t = name) ? "" : __t) + " - " + (null == (__t = zipCodeInputed) ? "" : __t) + '</span><p class="side-note">',
                            "A000001000" === locationCountryCode ? __p += null == (__t = _l("美国")) ? "" : __t : __p += null == (__t = _l("其他国家")) ? "" : __t,
                            __p += "</p></div></div>";
                    return __p
                }
                ,
                this.JST.rangeResultPopover = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="result-region-detail-wrapper"><div class="result-region-detail">',
                            isNormalRegion ? (__p += '<p class="store-description clearfix" style="margin-bottom: 10px;">',
                                _.each(childrenReg, function(e, t) {
                                    __p += '<span style="width:33%; text-align:center; float:left;"> ' + (null == (__t = e.name) ? "" : __t) + "</span>"
                                }),
                                __p += '</p><p class="store-description">' + (null == (__t = _p(_l("前往%s的网点，到点自寄自取，享方便优惠"), '<span class="location-name">' + region.name + "</span>")) ? "" : __t) + '<a href="' + (null == (__t = linkURL) ? "" : __t) + '" class="redirect">' + (null == (__t = _l("查看网点")) ? "" : __t) + "</a></p>") : (__p += '<div class="result-region-detail-content pull-left"><div class="location-name"><i class="icon-gray-map"></i><span>' + (null == (__t = region.name) ? "" : __t) + '</span><span class="description">' + (null == (__t = _l("服务地区")) ? "" : __t) + "</span></div>",
                                _.each(availableDescription, function(e) {
                                    __p += '<div class="detail-descript"><span class="litter-tag">' + (null == (__t = e.litterTag) ? "" : __t) + "</span><span>" + (null == (__t = e.remark) ? "" : __t) + "</span>",
                                    showRemarkFromEnd && null != e && null != e.remark_content && "" != e.remark_content && (__p += '<br/><span style="display: inline-grid;width: 100px;display: inline-block;width: 290px;padding-left: 25px;padding-top: 5px;word-break: break-word;word-wrap: break-word;">' + (null == (__t = _l("备注：")) ? "" : __t) + (null == (__t = e.remark_content) ? "" : __t) + "</span>"),
                                        __p += "</div>"
                                }),
                            region.remark && showRemark && (__p += '<div class="location-name"><i class="icon-gray-map"></i><span style="font-size:12px">' + (null == (__t = region.remark) ? "" : __t) + "</span></div>"),
                                __p += '</div><a href="' + (null == (__t = linkURL) ? "" : __t) + '"><img class="pull-right" src="' + (null == (__t = _l("selfpickupsalesimg")) ? "" : __t) + '" alt=""></a>'),
                            __p += "</div></div>";
                    return __p
                }
                ,
                this.JST.regulationResult = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<table class="table table-bordered"><tbody>',
                            _.each(results, function(e) {
                                __p += "<tr><td>" + (null == (__t = e.get("goodsName")) ? "" : __t) + "</td><td>" + (null == (__t = e.get("goodsDetails")) ? "" : __t) + "</td></tr>"
                            }),
                            __p += "</tbody></table>";
                    return __p
                }
                ,
                this.JST.storePoint = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="store"><ul class="promotions">',
                        store.selfPickupDiscount && (__p += "<li>" + (null == (__t = _l("自取")) ? "" : __t) + '<div class="price">',
                            3 == store.storeType ? __p += null == (__t = _p(_l("赠%f元积分"), store.selfSendDiscount)) ? "" : __t : __p += null == (__t = _p(_l("省%f元"), store.selfSendDiscount)) ? "" : __t,
                            __p += "</div></li>"),
                        store.selfSendDiscount && (__p += "<li>" + (null == (__t = _l("自寄")) ? "" : __t) + '<div class="price">',
                            3 == store.storeType ? __p += null == (__t = _p(_l("赠%f元积分"), store.selfSendDiscount)) ? "" : __t : __p += null == (__t = _p(_l("省%f元"), store.selfSendDiscount)) ? "" : __t,
                            __p += "</div></li>"),
                            __p += "</ul>",
                        store.services && 0 < store.services.length && (__p += '<ul class="services">',
                            _.each(store.services, function(e) {
                                __p += '<li class="' + (null == (__t = e.flag) ? "" : __t) + '">' + (null == (__t = e.name) ? "" : __t) + "</li>"
                            }),
                            __p += "</ul>"),
                            __p += '<div class="store-head"><img src="' + (null == (__t = store.tipImageUrl) ? "" : __t) + '"><div class="title">' + (null == (__t = store.name) ? "" : __t),
                        store.nameEN && (__p += "(" + (null == (__t = store.nameEN) ? "" : __t) + ")"),
                            __p += '</div><div class="description">' + (null == (__t = label.type) ? "" : __t),
                            label.code ? __p += null == (__t = label.code) ? "" : __t : __p += null == (__t = store.code) ? "" : __t,
                            __p += '</div></div><div class="store-address"><div class="detail">' + (null == (__t = store.address) ? "" : __t),
                        store.addressEN && (__p += "(" + (null == (__t = store.addressEN) ? "" : __t) + ")"),
                            __p += '</div></div><ul class="extra-info">',
                        store.linkman && (__p += '<li class="contact-name">' + (null == (__t = store.linkman) ? "" : __t) + "</li>"),
                        store.tel && (__p += '<li class="phone">' + (null == (__t = store.tel) ? "" : __t) + "</li>"),
                            store.serviceTime6 ? (__p += "<br>",
                            store.serviceTime && (__p += '<li class="time">' + (null == (__t = _l("工作日:")) ? "" : __t) + (null == (__t = store.serviceTime) ? "" : __t) + "</li>"),
                            store.serviceTime6 && (__p += '<li class="time">' + (null == (__t = _l("周六:")) ? "" : __t) + (null == (__t = store.serviceTime6) ? "" : __t) + "<br></li>"),
                            store.serviceTime0 && (__p += '<li class="time">' + (null == (__t = _l("节假日:")) ? "" : __t) + (null == (__t = store.serviceTime0) ? "" : __t) + "</li>"),
                            store.serviceTime7 && (__p += '<li class="time">' + (null == (__t = _l("周日:")) ? "" : __t) + (null == (__t = store.serviceTime7) ? "" : __t) + "</li>")) : store.serviceTime && (__p += '<li class="time">' + (null == (__t = store.serviceTime) ? "" : __t) + "</li>"),
                            __p += '</ul><div class="close"><span class="sfi sfi-close"></span></div></div>';
                    return __p
                }
                ,
                this.JST.subRegions = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        _.each(subRegions, function(e, t) {
                            t % 6 == 0 && (__p += '<div class="sub-region-row">'),
                                __p += '<span><a data-code="' + (null == (__t = e.code) ? "" : __t) + '" href="#">' + (null == (__t = e.name.substr(0, 4)) ? "" : __t) + "</a></span>",
                            t % 6 == 5 && (__p += "</div>")
                        });
                    return __p
                }
                ,
                this.JST.taiwanStoresTable = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<table class="services"><tbody>',
                            _.each(stores, function(e) {
                                __p += '<tr><td><div class="name">' + (null == (__t = e.name) ? "" : __t) + '<span class="code">' + (null == (__t = e.virtual_addr) ? "" : __t) + '</span></div><div class="address">' + (null == (__t = _l("地址")) ? "" : __t) + "<span>" + (null == (__t = e.address) ? "" : __t) + '</span></div><div class="phone">' + (null == (__t = _l("电话")) ? "" : __t) + "<span>" + (null == (__t = e.telephone) ? "" : __t) + "</span></div></td><td>" + (null == (__t = e.service_content_type) ? "" : __t) + "</td></tr>"
                            }),
                            __p += "</tbody></table>";
                    return __p
                }
                ,
                this.JST.taxBorderDetail = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="sfi sfi-times close"></div><h2>中华人民共和国海关</h2><h2>跨境直邮/保税进口税款电子回执</h2><h3>(仅供对账之用)</h3><h4>&nbsp;</h4><div style="padding:5px 10px;overflow:hidden"><div style="float:left;">纳税人姓名（地址）：<span style="color:black;">' + (null == (__t = result.details[0].sfpname) ? "" : __t) + '</span></div><div style="float:right;width:200px;display:inline-block;text-align:right;">申报日期：<span>' + (null == (__t = result.taxDate) ? "" : __t) + '</span></div></div><table class="table"><tbody><tr><th>序号</th><th>分运单号码</th><th>货物名称</th><th>申报价值</th><th>关税税额</th><th>增值税税额</th><th>消费税额</th><th>税金合计(CNY)</th></tr>',
                            _.forEach(result.details, function(e, t) {
                                __p += "<tr><td>" + (null == (__t = t + 1) ? "" : __t) + "</td><td>" + (null == (__t = e.bno) ? "" : __t) + "</td><td>" + (null == (__t = e.gdesc) ? "" : __t) + "</td><td>" + (null == (__t = e.value) ? "" : __t) + "</td><td>" + (null == (__t = e.traiffval) ? "" : __t) + "</td><td>" + (null == (__t = e.vatval) ? "" : __t) + "</td><td>" + (null == (__t = e.payval) ? "" : __t) + "</td><td>" + (null == (__t = e.totalval) ? "" : __t) + "</td></tr>"
                            }),
                            __p += '<tr><td colspan="8" class="text-left">进口税金合计：人民币（大写）  <span>' + (null == (__t = result.totalTax) ? "" : __t) + '</span>\t</td></tr></tbody></table><div class="remark"><div>说明:</div><div class="inline-block">' + (null == (__t = _l("税金计算公式")) ? "" : __t) + ':</div><div class="inline-table"><div>' + (null == (__t = _l("总税计算", "税金合计=关税税额 + 增值税税额 + 消费税税额")) ? "" : __t) + "</div><div>" + (null == (__t = _l("应征关税计算", "应征关税=完税价格*关税税率")) ? "" : __t) + "</div><div>" + (null == (__t = _l("关税税额计算", "关税税额=价值(CIF) * 关税税率")) ? "" : __t) + "</div><div>" + (null == (__t = _l("增值税税额计算", "增值税税额=(价值(CIF) + 关税税额 + 消费税税额) * 增值税税率")) ? "" : __t) + "</div><div>" + (null == (__t = _l("消费税税额计算", "消费税税额=(价值(CID) + 关税税额) / (1 - 消费税税额) * 消费税税率")) ? "" : __t) + '</div><br/><div>备注:</div><div><ul><li>1.根据跨境电商进口税收新政策的说明，跨境电商零售进口商品单次交易总额在限值内的，进口环节增值税、消费税暂按法定应纳税额的70%征收。</li><li>2.税金合计栏四舍五入保留整数.</li><li>3.此为海关电子审单放行回执，仅供对账之用.</li></ul></div></div><div class="row"><div class="verification-code"><div class="input-group col-xs-offset-2 col-xs-3"><input type="text" id="validation-download-code" class="form-control no-right-border" placeholder="请输入验证码下载文件"><span class="input-group-addon refresh no-left-border" id="refresh-download-code"><span class="sfi sfi-refresh"></span></span></div><div class="col-xs-2 no-left-padding"><img class="validation-image" id="validation-download-image" src="/sf-service-web/service/captcha/kj3tax?force=true&amp;time=1407399546971"></div><div class="col-xs-2"><button class="primary-button download disabled fileDownloadPromise">下载</button></div></div></div>';
                    return __p
                }
                ,
                this.JST.taxDetail = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="sfi sfi-times close"></div><h2>' + (null == (__t = _l("进境快件中国海关EDI电子审单放行回执")) ? "" : __t) + "</h2><h3>" + (null == (__t = _l("(仅供企业对账之用)")) ? "" : __t) + "</h3><p>" + (null == (__t = _l("报关单编号")) ? "" : __t) + ":" + (null == (__t = result.taxNO) ? "" : __t) + '</p><table class="table"><tr><th colspan="9" class="text-left">' + (null == (__t = _l("运营人名称")) ? "" : __t) + ": " + (null == (__t = result.operatorName) ? "" : __t) + " &nbsp;&nbsp;&nbsp;\x3c!-- " + (null == (__t = _l("进/出口岸")) ? "" : __t) + ": " + (null == (__t = result.deptCode) ? "" : __t) + " &nbsp;&nbsp;&nbsp;--\x3e" + (null == (__t = _l("运输工具航次")) ? "" : __t) + ": " + (null == (__t = result.flightNO) ? "" : __t) + " &nbsp;&nbsp;&nbsp;" + (null == (__t = _l("进/出境日期")) ? "" : __t) + ": " + (null == (__t = result.taxDate) ? "" : __t) + " &nbsp;&nbsp;&nbsp;" + (null == (__t = _l("总运单号码")) ? "" : __t) + ": " + (null == (__t = result.tWaybillno) ? "" : __t) + " &nbsp;&nbsp;&nbsp;</th></tr><tr><th>" + (null == (__t = _l("序号")) ? "" : __t) + "</th><th>" + (null == (__t = _l("分运单号码")) ? "" : __t) + "</th><th>" + (null == (__t = _l("货物名称")) ? "" : __t) + "</th>\x3c!--<th>" + (null == (__t = _l("价值(CNY)")) ? "" : __t) + "</th>--\x3e<th>" + (null == (__t = _l("重量(KG)")) ? "" : __t) + "</th><th>" + (null == (__t = _l("件数")) ? "" : __t) + "</th>\x3c!-- <th>" + (null == (__t = _l("商品编码(HS)")) ? "" : __t) + "</th><th>" + (null == (__t = _l("关税速率")) ? "" : __t) + "</th> --\x3e<th>" + (null == (__t = _l("关税税额")) ? "" : __t) + "</th>\x3c!-- <th>" + (null == (__t = _l("增值税税率")) ? "" : __t) + "</th>--\x3e<th>" + (null == (__t = _l("增值税税额")) ? "" : __t) + "</th>\x3c!-- <th>" + (null == (__t = _l("消费税税率")) ? "" : __t) + "</th>--\x3e<th>" + (null == (__t = _l("消费税税额")) ? "" : __t) + "</th><th>" + (null == (__t = _l("税金合计(CNY)")) ? "" : __t) + "</th>\x3c!--  <th>" + (null == (__t = _l("收/发件人名称")) ? "" : __t) + "</th>--\x3e</tr>",
                            _.forEach(result.details, function(e, t) {
                                __p += "<tr><td>" + (null == (__t = t + 1) ? "" : __t) + "</td><td>" + (null == (__t = e.bno) ? "" : __t) + "</td><td>" + (null == (__t = e.gdesc) ? "" : __t) + "</td>\x3c!-- <td>" + (null == (__t = e.value) ? "" : __t) + "</td>--\x3e<td>" + (null == (__t = e.weight) ? "" : __t) + "</td><td>" + (null == (__t = e.pcs) ? "" : __t) + "</td>\x3c!-- <td>" + (null == (__t = e.hscode) ? "" : __t) + "</td><td>" + (null == (__t = e.traiff) ? "" : __t) + "</td>--\x3e<td>" + (null == (__t = e.traiffval) ? "" : __t) + "</td>\x3c!-- <td>" + (null == (__t = e.vat) ? "" : __t) + "</td>--\x3e<td>" + (null == (__t = e.vatval) ? "" : __t) + "</td>\x3c!-- <td>" + (null == (__t = e.pay) ? "" : __t) + "</td>--\x3e<td>" + (null == (__t = e.payval) ? "" : __t) + "</td><td>" + (null == (__t = e.totalval) ? "" : __t) + "</td>\x3c!-- <td>" + (null == (__t = e.sfpname) ? "" : __t) + "</td>--\x3e</tr>"
                            }),
                            __p += '<tr><td colspan="9">&nbsp;</td></tr><tr>\x3c!--<td class="no-left-border no-right-border no-bottom-border">' + (null == (__t = result.totalVal) ? "" : __t) + '</td><td class="no-left-border no-right-border no-bottom-border">' + (null == (__t = result.totalWeight) ? "" : __t) + '</td>--\x3e<td colspan="7"></td><td  >' + (null == (__t = _l("总税")) ? "" : __t) + " </td><td >" + (null == (__t = result.totalTax) ? "" : __t) + '</td></tr><tr><td colspan="9" class="text-left">' + (null == (__t = _l("本运营人保证")) ? "" : __t) + ": " + (null == (__t = result.taxDate) ? "" : __t) + " " + (null == (__t = _l("向")) ? "" : __t) + " " + (null == (__t = result.portName) ? "" : __t) + (null == (__t = _l("海关申报", "海关申报的上述货物为《中华人民共和国海关对进出境快件监管办法》中的应予征税的进境货样，广告品，并就申报的真实行和合法性向你关负法律责任。")) ? "" : __t) + '</td></tr><tr><td colspan="5" class="text-left">\x3c!-- ' + (null == (__t = _l("运营人报关专用章", "(运营人报关专用章)报关员")) ? "" : __t) + ':--\x3e</td><td colspan="4" class="text-left">' + (null == (__t = _l("申报日期")) ? "" : __t) + ": " + (null == (__t = result.taxDate) ? "" : __t) + '</td></tr>\x3c!--<tr><td colspan="9">' + (null == (__t = _l("以下由海关填写")) ? "" : __t) + '</td></tr><tr><td colspan="3" class="text-left no-bottom-border no-top-border no-right-border no-bottom-border">' + (null == (__t = _l("海关签章")) ? "" : __t) + ':</td><td colspan="3" class="text-left no-right-border no-left-border">' + (null == (__t = _l("经办关员")) ? "" : __t) + ':</td><td colspan="3" class="text-left no-right-border no-left-border">' + (null == (__t = _l("日期")) ? "" : __t) + ':</td><td colspan="3" class="text-left no-right-border no-left-border">' + (null == (__t = _l("查验关员")) ? "" : __t) + ':</td><td colspan="3" class="text-left no-left-border ">' + (null == (__t = _l("日期")) ? "" : __t) + ':</td></tr>--\x3e</table><div class="remark"><div class="inline-block">' + (null == (__t = _l("备注")) ? "" : __t) + ':</div><div>\x3c!--class="inline-table"--\x3e<div>' + (null == (__t = _l("备注1", "1.总税=关税税额 + 增值税税额 + 消费税税额")) ? "" : __t) + "</div><div>" + (null == (__t = _l("备注2", "2.税金合计栏四舍五入保留整数")) ? "" : __t) + "</div><div>" + (null == (__t = _l("备注3", "3.根据海关相关规定要求征收进出口货物税费，此为海关电子审单放行回执，仅供企业对账之用")) ? "" : __t) + '</div></div><div class="row"><div class="verification-code"><div class="input-group col-xs-offset-2 col-xs-3"><input type="text" id="validation-download-code" class="form-control no-right-border" placeholder="请输入验证码下载文件"><span class="input-group-addon refresh no-left-border" id="refresh-download-code"><span class="sfi sfi-refresh"></span></span></div><div class="col-xs-2 no-left-padding"><img class="validation-image" id="validation-download-image"></div><div class="col-xs-2"><button class="primary-button download disabled fileDownloadPromise">' + (null == (__t = _l("下载")) ? "" : __t) + "</button></div></div></div>";
                    return __p
                }
                ,
                this.JST.taxPersonDetail = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="sfi sfi-times close"></div><h2>中华人民共和国\x3c!--<span style="color:black;text-decoration:underline;padding:0 5px;">&nbsp;&nbsp;' + (null == (__t = result.deptCode) ? "" : __t) + '&nbsp;&nbsp;--\x3e</span>海关</h2><h2>旅客行李、个人邮递物品进口税款电子回执</h2><h3>(仅供对账之用)</h3><h4>&nbsp;</h4><div style="padding:5px 10px;overflow:hidden"><div style="float:left;">纳税人姓名（地址）：<span style="color:black;">' + (null == (__t = result.details[0].sfpname) ? "" : __t) + '</span></div><div style="float:right;width:200px;display:inline-block;text-align:right;">日期：<span>' + (null == (__t = result.taxDate) ? "" : __t) + '</span></div></div><table class="table"><tbody><tr><th>序号</th><th>分运单号码</th><th>货物名称</th><th>完税价格</th><th>税 率%</th><th>关税税额(CNY)</th></tr>',
                            _.forEach(result.details, function(e, t) {
                                __p += "<tr><td>" + (null == (__t = t + 1) ? "" : __t) + "</td><td>" + (null == (__t = e.bno) ? "" : __t) + "</td><td>" + (null == (__t = e.gdesc) ? "" : __t) + "(" + (null == (__t = e.hscode) ? "" : __t) + ")</td><td>" + (null == (__t = e.value) ? "" : __t) + "</td><td>" + (null == (__t = e.traiff) ? "" : __t) + "</td><td>" + (null == (__t = e.totalval) ? "" : __t) + "</td></tr>"
                            }),
                            __p += '<tr><td colspan="6" class="text-left">进口税金合计：人民币（大写）  <span>' + (null == (__t = result.totalTax) ? "" : __t) + '</span>\t</td></tr></tbody></table><div class="remark"><div>说明:</div><div><ul><li>1.税金计算公式：关税税额=完税价格*税率（“完税价格”为海关认定价格，会出现“完税价格≠申报价值”的情况）</li>\x3c!-- <li>2.此为运单号  <span style="text-decoration:underline;">' + (null == (__t = result.waybillNO) ? "" : __t) + '</span>  快件海关进口税款电子回执，仅供参考。如需海关开具的正式《个人邮递物品进口税款缴纳证》，请在快件签收之日起7天内致电F35速运客户服务热线：95338</li>--\x3e</ul></div><br/><div>备注:</div><div><ul><li>1.对个人物品税金的计算，海关会根据物品的实际情况对计税价格进行判定，“完税价格”的取值以海关实际计税标准而定</li><li>2.税金合计栏四舍五入保留整数</li><li>3.此为海关电子审单放行回执，仅供对账之用</li></ul></div></div><div class="row"><div class="verification-code"><div class="input-group col-xs-offset-2 col-xs-3"><input type="text" id="validation-download-code" class="form-control no-right-border" placeholder="请输入验证码下载文件"><span class="input-group-addon refresh no-left-border" id="refresh-download-code"><span class="sfi sfi-refresh"></span></span></div><div class="col-xs-2 no-left-padding"><img class="validation-image" id="validation-download-image" src="/sf-service-web/service/captcha/kj3tax?force=true&amp;time=1407399546971"></div><div class="col-xs-2"><button class="primary-button download disabled fileDownloadPromise">下载</button></div></div></div>';
                    return __p
                }
                ,
                this.JST.tooltipsTable = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '\x3c!--关务进出口规则显示结果的模板文件-内容表格 --\x3e<table class="table table-striped table-bordered table-hover src-table"><thead><tr><td colspan="3" style="text-align:center">' + (null == (__t = "en" === Helper.getSiteLanguage() ? "Tax Rate" : "税率") ? "" : __t) + "</td></tr></thead><tbody><tr>",
                            _.each(taxs, function(e, t) {
                                __p += "<td>" + (null == (__t = e.taxName) ? "" : __t) + "</td>"
                            }),
                            __p += "</tr><tr>",
                            _.each(taxs, function(e, t) {
                                __p += "<td>" + (null == (__t = e.taxRate) ? "" : __t) + "</td>"
                            }),
                            __p += "</tr></tbody></table>";
                    return __p
                }
                ,
                this.JST.topBarUtils = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<li data-tab="weight" class="services_20150709"><span>' + (null == (__t = _l("重量换算器")) ? "" : __t) + '</span><a href="javascript:void(0);" class="more-info"><i class="sfi sfi-calculator"></i>' + (null == (__t = _l("更多")) ? "" : __t) + "</a></li><li><span>" + (null == (__t = _l("预计时效")) ? "" : __t) + '</span></li><li data-tab="price-toggle" class="services_20150709 head-price"><span>' + (null == (__t = showDestCurrency ? _l("到付价") : _l("寄付价")) ? "" : __t) + '</span><a href="#" class="refresh-switch"><i class="sfi sfi-repay"></i>' + (null == (__t = showDestCurrency ? _l("寄付货币换算") : _l("到付货币换算")) ? "" : __t) + '</a></li><div class="more-weight-wrapper"></div>';
                    return __p
                }
                ,
                this.JST.trackResult = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        0 != results.length ? (__p += '<table class="table table-bordered"><thead><tr><th>' + (null == (__t = _l("运单号")) ? "" : __t) + "</th><th>" + (null == (__t = _l("帐户号码")) ? "" : __t) + "</th><th>" + (null == (__t = _l("收件人公司名")) ? "" : __t) + "</th></tr></thead><tbody>",
                            _.each(results, function(e, t) {
                                __p += '<td><a style="color:red;text-decoration:underline;" target= _blank href="' + (null == (__t = patch + e.get("waybillNo")) ? "" : __t) + '">  <font color="red">' + (null == (__t = e.get("waybillNo")) ? "" : __t) + "</font> </a></td>\x3c!--运单号--\x3e<td>" + (null == (__t = e.get("customerCode")) ? "" : __t) + "</td>\x3c!--帐户号码--\x3e<td>" + (null == (__t = e.get("addresseeComp")) ? "" : __t) + "</td>\x3c!--收件人公司名 --\x3e</tr>"
                            }),
                            __p += "</tbody></table>") : __p += '<p class="text-center">' + (null == (__t = _l("很抱歉，暂未查询到与您提供的信息相匹配的运单号码")) ? "" : __t) + (null == (__t = _l("如需要获得更多的信息，请致电客户服务热线 080 393 1111。")) ? "" : __t) + "</p>";
                    return __p
                }
                ,
                this.JST.upLoadAddressBookContent = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        _.each(addressBooksArr, function(e, t) {
                            __p += '<tr data-addId="' + __e(e.addressId) + '"><td><input type="radio" name="addressBook" class="accessible-click"></td><td>' + __e(e.contactName) + "</td><td>" + __e(e.companyName ? e.companyName : _l("无")) + "</td><td>" + __e(_.uniq(_.compact([e.province, e.city, e.county, e.address]), !0).join("-")) + "</td><td>" + __e(e.contactTel ? e.contactTel : e.contactPhone) + '</td><td><a href="javascript:void(0)" class="aicon-bianji edit">' + __e(_l("编辑")) + '</a> <a href="javascript:void(0)" class="aicon-shanchu delete">' + __e(_l("删除")) + "</a></td></tr>"
                        });
                    return __p
                }
                ,
                this.JST.billInfo = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<div class="bill_info_window sf_navtab"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="tab-li active"><a href="#waybillDetail" aria-controls="waybillDetail" role="tab" data-toggle="tab" class="waybillDetail maidian" data-md-name="登录成功后点击运单详情" data-md-id="115009">' + (null == (__t = _l("运单详情")) ? "" : __t) + '</a></li><li role="presentation" class="tab-li" ><a href="#signedBill" aria-controls="signedBill" role="tab" data-toggle="tab" class="signedBill maidian" data-md-name="登录成功后点击签收底单" data-md-id="115010">' + (null == (__t = _l("签收底单")) ? "" : __t) + '</a></li><li role="presentation" class="tab-li"><a href="#electronicStub" aria-controls="electronicStub" role="tab" data-toggle="tab" class="electronicStub maidian" data-md-name="登录成功后点击电子存根" data-md-id="115011">' + (null == (__t = _l("电子存根")) ? "" : __t) + '</a></li></ul><div class="tab-content"><div role="tabpanel" class="tab-pane text-center active" id="waybillDetail"></div><div role="tabpanel" class="tab-pane" id="signedBill"></div><div role="tabpanel" class="tab-pane" id="electronicStub"></div></div></div>';
                    return __p
                }
                ,
                this.JST.billInfoElectronicStub = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<table class="borderrb"><tr><td colspan="3" rowspan="2" class="borderlt" style="text-align: center"><canvas id="barcode"></canvas></td><td class="borderlt">' + (null == (__t = _l("目的地")) ? "" : __t) + '：</td></tr><tr><td class="borderl">' + (null == (__t = data.destZoneCode) ? "" : __t) + '</td></tr><tr><td colspan="4" class="borderlt">' + (null == (__t = _l("寄件方")) ? "" : __t) + "：" + (null == (__t = data.consignorCompName) ? "" : __t) + '</td></tr><tr><td colspan="2" class="borderl">' + (null == (__t = data.consignorContName) ? "" : __t) + '</td><td colspan="2">' + (null == (__t = data.consignorPhone) ? "" : __t) + '</td></tr><tr><td colspan="4" class="borderl">' + (null == (__t = data.consignorAddr) ? "" : __t) + '</td></tr><tr><td colspan="4" class="borderlt">' + (null == (__t = _l("收件方")) ? "" : __t) + "：" + (null == (__t = data.addresseeCompName) ? "" : __t) + '</td></tr><tr><td colspan="2" class="borderl">' + (null == (__t = data.addresseeContName) ? "" : __t) + '</td><td colspan="2">' + (null == (__t = data.addresseePhone) ? "" : __t) + '</td></tr><tr><td colspan="4" class="borderl">' + (null == (__t = data.addresseeAddr) ? "" : __t) + '</td></tr><tr><td colspan="2" class="borderlt">' + (null == (__t = _l("托寄物")) ? "" : __t) + "：" + (null == (__t = data.innerWaybillConsigns) ? "" : __t) + '</td><td class="borderlt">' + (null == (__t = _l("产品类型")) ? "" : __t) + '：</td><td class="borderlt">' + (null == (__t = _l(data.limitTypeName)) ? "" : __t) + '</td></tr><tr><td colspan="2" class="borderl">' + (null == (__t = _l("数量")) ? "" : __t) + "：" + (null == (__t = data.totalShipment) ? "" : __t) + '</td><td class="borderlt">' + (null == (__t = _l("付款方式")) ? "" : __t) + '：</td><td class="borderlt">' + (null == (__t = _l(payType)) ? "" : __t) + '</td></tr><tr><td class="borderlt">' + (null == (__t = _l("实际重量")) ? "" : __t) + '：</td><td class="borderlt">' + (null == (__t = data.realWeightQty) ? "" : __t) + '</td><td class="borderlt">' + (null == (__t = _l("件数")) ? "" : __t) + '：</td><td class="borderlt">' + (null == (__t = data.waybillTotal) ? "" : __t) + '</td></tr><tr><td class="borderlt">' + (null == (__t = _l("计费重量")) ? "" : __t) + '：</td><td class="borderlt">' + (null == (__t = data.meterageWeightQty) ? "" : __t) + '</td><td class="borderlt">' + (null == (__t = _l("运费")) ? "" : __t) + '：</td><td class="borderlt">' + (null == (__t = data.waybillFee) ? "" : __t) + '</td></tr><tr class="borderlt"><td colspan="4">' + (null == (__t = _l("附加费用")) ? "" : __t) + "：</td></tr>",
                            _.each(feeListWidthoutTotalFee, function(e) {
                                __p += '<tr class="borderl"><td colspan="4">' + (null == (__t = _l(e.feeName)) ? "" : __t) + "：" + (null == (__t = e.feeAmt) ? "" : __t) + "</td></tr>"
                            }),
                            __p += '<tr><td colspan="4" class="borderlt">' + (null == (__t = _l("费用合计")) ? "" : __t) + "：" + (null == (__t = data.totalWaybillFee) ? "" : __t) + '</td></tr><tr><td colspan="4" class="borderlt">' + (null == (__t = _l("备注")) ? "" : __t) + "：" + (null == (__t = data.remark) ? "" : __t) + '</td></tr><tr><td class="borderlt" colspan="2">' + (null == (__t = _l("收件员")) ? "" : __t) + "：" + (null == (__t = data.consigneeEmpCode) ? "" : __t) + '</td><td colspan="2" class="bordert" style="text-align: right">' + (null == (__t = _l("收件时间")) ? "" : __t) + "：" + (null == (__t = data.consignedTm) ? "" : __t) + "</td></tr></table>";
                    return __p
                }
                ,
                this.JST.billInfoNoData = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<dl class="text-center"><dt class="img"><span class="aicon-emptybox"></span></dt><dd><p class="text-center">' + (null == (__t = _l("暂无数据")) ? "" : __t) + "</p></dd></dl>";
                    return __p
                }
                ,
                this.JST.billInfoSignedBill = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<div class="print_wrapper"><span class="aicon-printer icons print"></span><span class="aicon-28 icons rotate"></span><img class="signBillPic" src="' + (null == (__t = data) ? "" : __t) + '" alt="签收底单"></div>';
                    return __p
                }
                ,
                this.JST.billInfoWaybillDetail = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        result.originOld && result.destinationOld && (__p += '<h1 class="text-center">' + (null == (__t = result.originOld) ? "" : __t) + '<span class="aicon-arrow-right"></span>' + (null == (__t = result.destinationOld) ? "" : __t) + "</h1>"),
                        !1 === result.signed && result.dynamicExpectedDeliveryTm && result.destination && "hk" !== Helper.getSiteLocation() && ("en" === Helper.getSiteLanguage() ? !1 === result.delay ? __p += '<p class="timeTip">' + (null == (__t = _l("Estimated to arrive before:") + moment(result.dynamicExpectedDeliveryTm.substring(0, 0 <= result.dynamicExpectedDeliveryTm.indexOf("+") ? result.dynamicExpectedDeliveryTm.indexOf("+") : result.dynamicExpectedDeliveryTm.length)).format("YYYY.MM.DD HH:mm")) ? "" : __t) + '</p><p class="timeTip">' + (null == (__t = _l("(For reference only,and the actual time prevails)")) ? "" : __t) + "</p>" : __p += '<p class="timeTip">' + (null == (__t = _l("Recalculating the expected delivery time…")) ? "" : __t) + "</p>" : "sc" === Helper.getSiteLanguage() && (!1 === result.delay ? __p += '<p class="timeTip">' + (null == (__t = _l("预计") + moment(result.dynamicExpectedDeliveryTm.substring(0, 0 <= result.dynamicExpectedDeliveryTm.indexOf("+") ? result.dynamicExpectedDeliveryTm.indexOf("+") : result.dynamicExpectedDeliveryTm.length)).format("YYYY.MM.DD HH:mm")) ? "" : __t) + (null == (__t = _l("前")) ? "" : __t) + (null == (__t = _l("到达")) ? "" : __t) + '</p><p class="timeTip">' + (null == (__t = _l("(仅供参考，具体时效以实际派送时间为准)")) ? "" : __t) + "</p>" : __p += '<p class="timeTip">' + (null == (__t = _l("预计派送时间重新计算中")) ? "" : __t) + "</p>")),
                        result.routes.length && (__p += '<p class="timeTip"><span>' + (null == (__t = moment(result.routes[0].scanDateTime).format("YYYY-MM-DD HH:mm")) ? "" : __t) + "</span><span>",
                        result.routes[0].remark && (result.routes[0].remark = result.routes[0].remark.replace('id="opr_phone"', 'class="route-phone"'),
                        "ru" === Helper.getSiteLocation() && ("T13" === result.limitTypeCode && 31 == result.routes[0].opCode && _.contains(T13_virtualAddressCodeList, result.routes[0].zoneCode) ? result.routes[0].remark += _l("Tip31") : "T14" === result.limitTypeCode && 204 == result.routes[0].opCode && _.contains(T14_virtualAddressCodeList, result.routes[0].zoneCode) && (result.routes[0].remark = _l("Tip204")))),
                            __p += (null == (__t = result.routes[0].remark) ? "" : __t) + "</span></p>"),
                            __p += '<dl><dt class="pos"><span class="big text-center">' + (null == (__t = _l("寄方")) ? "" : __t) + "</span><p>" + (null == (__t = data.consignorContName) ? "" : __t) + "&nbsp&nbsp&nbsp&nbsp" + (null == (__t = data.consignorPhone) ? "" : __t) + "</p><p>" + (null == (__t = data.consignorAddr) ? "" : __t) + '</p></dt><dt class="pos"><span class="big text-center receiver">' + (null == (__t = _l("收方")) ? "" : __t) + "</span><p>" + (null == (__t = data.addresseeContName) ? "" : __t) + "&nbsp&nbsp&nbsp&nbsp" + (null == (__t = data.addresseePhone) ? "" : __t) + "</p><p>" + (null == (__t = data.addresseeAddr) ? "" : __t) + "</p></dt></dl>";
                    return __p
                }
                ,
                this.JST.changeAppointBill = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<div class="bill-change"><div class="from-to"><ul class="from"><li class="sfbadge black">' + __e(_l("寄")) + "</li><li><p>" + __e(sender.contactName) + "</p><p>" + __e(sender.contactTel || sender.contactPhone) + "</p></li><li><p>" + __e(_.uniq(_.compact([sender.province, sender.city, sender.county]), !0).join("")) + "</p><p>" + __e(sender.address) + '</p></li></ul><ul class="receiver-info"></ul><span class="sficon aicon-v-dot"></span><a href="javascript:void(0)" class="sficon aicon-address-book address-book" title="' + __e(_l("地址簿")) + '"></a><a href="javascript:void(0)" class="sficon aicon-bianji receiver-modify" title="' + __e(_l("修改地址")) + '"></a><div class="error-receiver-address-detail error">' + __e(_l("亲，您的收件地址不在我司派送范围内，可选择自取服务")) + '</div><a href="javascript:void(0)" class="aicon-uncheck self-pick-toggle error">' + __e(_l("收件人网点自取")) + '</a></div><div class="line"></div><div class="row other-info"><div class="col-xs-6"><p>' + __e(_l("托寄物品信息")) + '</p><div class="receiver-item"></div></div><div class="col-xs-3"><p>' + __e(_l("付款信息")) + '</p><div class="pay-type"></div></div></div><div class="weight-wrapper"><p class="title">' + __e(_l("托寄物重量/kg *")) + '</p><div class="weight"></div></div><div class="row service"><div class="col-xs-6"><p class="title">' + __e(_l("保价服务")) + '</p><div class="support-val"></div></div><div class="col-xs-6"><p class="title">' + __e(_l("增值服务")) + '</p><button type="button" class="primary-btn square white additional add-button"><p class="main"><span class="ico aicon-diamond"></span>' + __e(_l("点击添加")) + '</p><p class="second"><span class="title">' + __e(_l("签单返还")) + '：</span><span class="content"></span></p></button><p class="error bill-back-tip">' + __e(_l("提示：签单返还需收取5元增值服务费")) + '</p></div></div><div class="row leave-msg"><div class="col-xs-6"><p class="title">' + __e(_l("捎话给快递员")) + '</p><button type="button" class="primary-btn square white add-button leave"><p class="main"><span class="ico aicon-msg"></span>' + __e(_l("点击添加")) + '</p><p class="second"><span class="content"></span></p></button></div></div><div class="text-center submit-wrapper"><button class="primary-btn big confirm-change">' + __e(_l("确认")) + "</button></div></div>";
                    return __p
                }
                ,
                this.JST.changeAppointBillReceiver = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<li class="sfbadge red">' + __e(_l("收")) + "</li><li><p>" + __e(receiver.contactName) + "</p><p>" + __e(receiver.contactTel || receiver.contactPhone) + "</p></li><li><p>" + __e(_.uniq(_.compact([receiver.province, receiver.city, receiver.county]), !0).join("")) + "</p><p>" + __e(receiver.address) + "</p></li>";
                    return __p
                }
                ,
                this.JST.moreInfo = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<div class="bill_info_window sf_navtab"><button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button><ul class="nav nav-tabs" role="tablist"><li role="presentation" class="tab-li active"><a href="#waybillDetail" aria-controls="waybillDetail" role="tab" data-toggle="tab" class="waybillDetail maidian" data-md-name="登录成功后点击运单详情" data-md-id="115009">' + (null == (__t = _l("运单详情")) ? "" : __t) + '</a></li><li role="presentation" class="tab-li" ><a href="#signedBill" aria-controls="signedBill" role="tab" data-toggle="tab" class="signedBill maidian" data-md-name="登录成功后点击签收底单" data-md-id="115010">' + (null == (__t = _l("签收底单")) ? "" : __t) + '</a></li><li role="presentation" class="tab-li"><a href="#electronicStub" aria-controls="electronicStub" role="tab" data-toggle="tab" class="electronicStub maidian" data-md-name="登录成功后点击电子存根" data-md-id="115011">' + (null == (__t = _l("电子存根")) ? "" : __t) + '</a></li></ul><div class="tab-content">\x3c!-- 详情 --\x3e<div role="tabpanel" class="tab-pane text-center active" id="waybillDetail"><dl class="text-center"><dt class="img"><span class="aicon-emptybox"></span></dt><dd><p class="text-center">' + (null == (__t = _l("暂无数据")) ? "" : __t) + '</p></dd></dl></div>\x3c!-- 签收底单--\x3e<div role="tabpanel" class="tab-pane" id="signedBill"><dl class="text-center"><dt class="img"><span class="aicon-emptybox"></span></dt><dd><p class="text-center">' + (null == (__t = _l("暂无数据")) ? "" : __t) + '</p></dd></dl></div>\x3c!-- 电子存根 --\x3e<div role="tabpanel" class="tab-pane" id="electronicStub"><dl class="text-center"><dt class="img"><span class="aicon-emptybox"></span></dt><dd><p class="text-center">' + (null == (__t = _l("暂无数据")) ? "" : __t) + "</p></dd></dl></div></div></div>";
                    return __p
                }
                ,
                this.JST.moreInfoDetail = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        result.originOld && result.destinationOld && (__p += '<h1 class="text-center">' + (null == (__t = result.originOld) ? "" : __t) + '<span class="aicon-arrow-right"></span>' + (null == (__t = result.destinationOld) ? "" : __t) + "</h1>"),
                            __p += "\x3c!-- 预计送达时间 --\x3e" + (null == (__t = deliveryTm) ? "" : __t) + "\x3c!-- 最近一次路由信息 --\x3e",
                        latestInfo && (__p += '<p class="timeTip"><span>' + __e(latestInfo.scanDateTime) + "</span><span>" + (null == (__t = latestInfo.remark) ? "" : __t) + "</span></p>"),
                            __p += '<dl><dt class="pos"><span class="big text-center">' + (null == (__t = _l("寄方")) ? "" : __t) + "</span><p>" + (null == (__t = data.consignorContName) ? "" : __t) + "&nbsp&nbsp&nbsp&nbsp" + (null == (__t = data.consignorPhone) ? "" : __t) + "</p><p>" + (null == (__t = data.consignorAddr) ? "" : __t) + '</p></dt><dt class="pos"><span class="big text-center receiver">' + (null == (__t = _l("收方")) ? "" : __t) + "</span><p>" + (null == (__t = data.addresseeContName) ? "" : __t) + "&nbsp&nbsp&nbsp&nbsp" + (null == (__t = data.addresseePhone) ? "" : __t) + "</p><p>" + (null == (__t = data.addresseeAddr) ? "" : __t) + "</p></dt></dl>";
                    return __p
                }
                ,
                this.JST.nearlyBillNOList = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<ul class="nearly-records clearfix">',
                            _.each(billArr, function(e) {
                                __p += '<li><a class="bill" href="javascript:void(0)" data-bill="' + (null == (__t = e) ? "" : __t) + '">' + (null == (__t = e) ? "" : __t) + '</a><span class="remove">×</span></li>'
                            }),
                            __p += "</ul>";
                    return __p
                }
                ,
                this.JST.userDeliveryList = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        list && list.length ? _.each(list, function(e) {
                            __p += '<li class="item clearfix ' + (null == (__t = e.waybillno ? "canSelect" : "") ? "" : __t) + " " + (null == (__t = e.status ? "appointBill" : "waybill") ? "" : __t) + '"data-id="' + (null == (__t = e.waybillno || e.appointmentNo) ? "" : __t) + '" data-pickup-type="' + (null == (__t = e.pickupType) ? "" : __t) + '" data-appointmentno="' + (null == (__t = e.appointmentNo) ? "" : __t) + '" data-bill-type="' + (null == (__t = e.billType) ? "" : __t) + '"><div class="col-1"><div class="bill-no">' + (null == (__t = _l("运单号")) ? "" : __t) + "：" + (null == (__t = e.billNum) ? "" : __t) + '</div><div class="address" title="' + __e(e.originateCityName || _l("寄")) + '">' + (null == (__t = e.originateCityName || _l("寄")) ? "" : __t) + '</div><div class="user" title="' + __e(e.originateContacts) + '">' + (null == (__t = e.originateContacts) ? "" : __t) + '</div><div class="bill-status"><div><i class="progress ' + (null == (__t = e.statusIcon) ? "" : __t) + '"></i></div><div class="status-text">' + (null == (__t = _l(e.statusTxt)) ? "" : __t) + '</div></div>\x3c!--\t\t\t\t<div class="aicon-arrow-right"></div>--\x3e</div><div class="col-2"><div class="bill-time">',
                            e.time && e.timeTxt && (__p += (null == (__t = _l(e.timeTxt)) ? "" : __t) + "：" + (null == (__t = moment(e.time).format("YYYY-MM-DD HH:mm")) ? "" : __t)),
                                __p += '</div><div class="address" title="' + __e(e.destinationCityName || _l("收")) + '">' + (null == (__t = e.destinationCityName || _l("收")) ? "" : __t) + '</div><div class="user" title="' + __e(e.destinationContacts) + '">' + (null == (__t = e.destinationContacts) ? "" : __t) + '</div></div><div class="col-3 status' + (null == (__t = e.status || e.waybillStatus || "none") ? "" : __t) + '">' + (null == (__t = e.cancel ? '<div class="bill-btn-wrap"><span class="bill-btn cancel-img aicon-bs-refused maidian" data-md-name="点击取消预约" data-md-id="115007" data-tip="' + _l("取消预约") + '"></span></div>' : "") ? "" : __t) + (null == (__t = e.delete ? '<div class="bill-btn-wrap"><span class="bill-btn remove-img aicon-bs-delete" data-tip="' + _l("删除") + '"></span></div>' : "") ? "" : __t) + (null == (__t = e.modify ? '<div class="bill-btn-wrap"><span class="bill-btn modify-img aicon-bs-edit" data-tip="' + _l("完善信息") + '"></span></div>' : "") ? "" : __t) + "<div></div></div></li>"
                        }) : __p += '<li class="empty-list-wrap"><div class="empty-img"></div><div class="empty-info">' + (null == (__t = _l("暂无运单信息")) ? "" : __t) + '</div><a class="empty-btn go-dynamic accessible-click maidian" data-md-name="马上下单" data-md-id="115006" data-location="/order/quick/">' + (null == (__t = _l("马上下单")) ? "" : __t) + "</a></li>";
                    return __p
                }
                ,
                this.JST.waybill_others = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '\x3c!-- 港澳台及海外运单查询 --\x3e<div class="delivery-view"><div class="shipping-search-detail">',
                        "hk" != region && "tw" != region && "ru" != region && (__p += '<ul class="navigation-tabs" ><li data-tab="bill-number" class="current">' + __e(_l("按照单号")) + '</li><li class="link"><a href="' + __e(Helper.getDynamicURLWithContext("/more/track/")) + '">' + __e(_l("按参考号")) + "</a></li></ul>"),
                            __p += '\x3c!-- 查询表单 --\x3e<div class="clearfix"><div class="bill-number-wrapper col-xs-9"><div class="clearfix"><div class="input-group"><input type="text" class="form-control tokenfield bill-number-input" placeholder="' + __e(_l("输入运单号进行查询，单次最多查询20条。请以逗号、空格或回车键隔开")) + '"><label class="input-group-addon clear-inputs"><span class="sfi sfi-trash"></span></label><span id="queryBill" type="button" class="primary-button maidian" data-md-name="点击查询" data-md-id="115002" data-loading-text="' + __e(_l("查询中...")) + '">' + __e(_l("查询")) + '</span></div></div>\x3c!-- 最近查询记录 --\x3e<div class="bill-number-list-content"><ul class="nearly-records clearfix"></ul></div>',
                        "hk" == region && (__p += '<div style="margin:10px auto">' + __e(_l("*客户于F35网络取件时，必须出示F35速运发出之确认短讯，经F35店员核实后，方可取件。")) + "</div>"),
                            __p += '<div><div id="TCaptcha" style="width:310px;height:40px;display: none"  ></div><div class="verification-code"><div class="input-group"><input type="text" class="form-control no-right-border" placeholder="' + __e(_l("请输入验证码")) + '"><span class="input-group-addon refresh no-left-border"><span class="sfi sfi-refresh"></span></span></div><img id="validation-image"><div class="error validation-code-error">' + __e(_l("*验证码有误。")) + '</div></div><div class="error" data-error="bill-number-format">' + __e(_l("*订单号只能为12位数字,且不能重复。")) + '</div><div class="error" data-error="limit-exceeded">' + __e(_l("*您已输入超过20条运单号，系统将自动截取并显示前20条运单号的追踪信息")) + '</div><div class="error" data-error="server-network">' + __e(_l("服务器暂不可用，请稍后再试")) + "</div></div></div>",
                        "hk" != region && "tw" != region || (__p += '<div class="col-xs-3"><div class="query-weixin"><img src="' + __e(Helper.getResourceURL("images/waybill/QR_" + region + "_110-110.jpg")) + '"><p>' + __e(_l("关注微信公众号")) + "<br>" + __e(_l("随时随地查运单")) + "</p></div></div>"),
                            __p += '</div></div>\x3c!-- 运单路由信息 --\x3e<div class="route-result" style="display:none;"><div class="delivery-wrapper"></div></div></div>';
                    return __p
                }
                ,
                this.JST.waybill = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '\x3c!-- 中国大陆运单查询 --\x3e<div class="delivery-view"><div class="shipping-search-detail">\x3c!-- 查询表单 --\x3e<div class="bill-number-wrapper"><div class="clearfix"><div class="input-group"><input type="text" class="form-control tokenfield bill-number-input" placeholder="' + __e(_l("输入运单号进行查询，单次最多查询20条。请以逗号、空格或回车键隔开")) + '"><label class="input-group-addon clear-inputs"><span class="sfi sfi-trash"></span></label><span id="queryBill" type="button" class="primary-button maidian" data-md-name="点击查询" data-md-id="115002" data-loading-text="' + __e(_l("查询中...")) + '">' + __e(_l("查询")) + '</span></div></div>\x3c!-- 最近查询记录 --\x3e<div class="bill-number-list-content"><ul class="nearly-records clearfix"></ul></div><div><div id="TCaptcha" style="width:310px;height:40px;display: none"  ></div><div class="verification-code"><div class="input-group"><input type="text" class="form-control no-right-border" placeholder="' + __e(_l("请输入验证码")) + '"><span class="input-group-addon refresh no-left-border"><span class="sfi sfi-refresh"></span></span></div><img id="validation-image"><div class="error validation-code-error">' + __e(_l("*验证码有误。")) + '</div></div><div class="error" data-error="bill-number-format">' + __e(_l("*订单号只能为12位数字,且不能重复。")) + '</div><div class="error" data-error="limit-exceeded">' + __e(_l("*您已输入超过20条运单号，系统将自动截取并显示前20条运单号的追踪信息")) + '</div><div class="error" data-error="server-network">' + __e(_l("服务器暂不可用，请稍后再试")) + '</div></div></div></div>\x3c!-- 我的运单列表 --\x3e<div class="my-bills"><div class="bill-title">' + __e(_l("我的包裹")) + '</div><div class="bill-tab"><span class="my-send maidian" data-md-name="点击我寄的" data-md-id="115003">' + __e(_l("我寄的")) + '</span><span class="my-accept maidian" data-md-name="点击我收的" data-md-id="115004">' + __e(_l("我收的")) + '</span></div><div class="no-login-wrap"><div class="no-login-tip"><span>' + __e(_l("暂无运单，登录/注册会员可查询更多运单")) + '</span></div><div class="login-btn maidian" data-md-name="点击登录/注册" data-md-id="115005"><span>' + __e(_l("登录/注册")) + '</span></div></div><div class="bill-list send-list"></div><div class="bill-list accept-list"></div></div>\x3c!-- 运单路由信息 --\x3e<div class="route-result" style="display:none;"><div class="bill-title">' + __e(_l("运单信息")) + '<span class="close">×</span></div><div class="delivery-wrapper"></div></div></div>';
                    return __p
                }
                ,
                this.JST.waybillChildQuery = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<div class="verification-code"><div class="input-group"  style="width: 300px;"><input type="text" class="form-control" style="width:300px" placeholder=\'' + (null == (__t = _l("请输入验证码")) ? "" : __t) + '\'><img id="validation-image-child" style="height:31px;margin-left:25px;margin-top: -3px;position:relative;top:-28px;left:147px"></div></div><button type="button" class="primary-button child-waybill disabled" style="margin-left:15px" data-loading-text="查询中...">' + (null == (__t = _l("查询")) ? "" : __t) + '</button><div class="error validation-code-error" style="margin-top: 10px;">' + (null == (__t = _l("您输入的验证码有误，请重新输入")) ? "" : __t) + '</div><div class="error" data-error="server-network">' + (null == (__t = _l("服务器暂不可用，请稍后再试")) ? "" : __t) + "</div>";
                    return __p
                }
                ,
                this.JST.waybillChildRouteTab = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<li data-tab="waybill-childRoute" class="childRoute"><span class="sfi sfi-list"></span><span>' + (null == (__t = _l("子单资料")) ? "" : __t) + "</span></li>";
                    return __p
                }
                ,
                this.JST.waybillDetailRoute = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        0 < results.length ? _.each(results, function(e, t) {
                            __p += '<div data-toggle="status-toggle" class="status-update-box ',
                            0 === t && (__p += " open  "),
                                __p += ' "><div class="status-update-tab">' + (null == (__t = toLocalDate(e[0])) ? "" : __t) + '<b class="arrow"></b></div><table><tbody>',
                                _.each(e[1], function(e) {
                                    __p += '<tr class="status-update"><td class="time">' + (null == (__t = toLocalTime(e.scanDateTime)) ? "" : __t) + "</td>",
                                    e.remark && (e.remark = e.remark.replace('id="opr_phone"', 'class="route-phone"'),
                                    "ru" === Helper.getSiteLocation() && ("T13" === limitCodes && 31 == e.opCode && _.contains(T13_virtualAddressCodeList, e.zoneCode) && -1 == e.remark.indexOf(_l("Tip31")) ? e.remark += _l("Tip31") : "T14" === limitCodes && 204 == e.opCode && _.contains(T14_virtualAddressCodeList, e.zoneCode) && (e.remark = _l("Tip204")))),
                                        __p += '<td class="update">' + (null == (__t = e.remark) ? "" : __t) + "</td></tr>"
                                }),
                                __p += "</tbody></table></div>"
                        }) : __p += '<p class="text-center">' + (null == (__t = _l("该运单目前还没有路由信息，请耐心等待。")) ? "" : __t) + "</p>";
                    return __p
                }
                ,
                this.JST.waybillDetailRouteTab = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape;
                    with (obj)
                        __p += '<li data-tab="waybill-status"><span class="sfi sfi-trace"></span><span>' + (null == (__t = _l("运单动态")) ? "" : __t) + "</span></li>";
                    return __p
                }
                ,
                this.JST.waybillNotFound = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="delivery"><div class="delivery-brief not-found">',
                            "960" === billNumber.substr(0, 3) ? __p += null == (__t = _p(_l("未查到此苹果运单%s信息", "抱歉！未查到此运单%s信息，请确认运单号码是否正确，或致电F35客服热线4006 635 333"), billNumber)) ? "" : __t : __p += null == (__t = _p(_l("未查到此运单%s信息", "抱歉！未查到此运单%s信息，请确认运单号码是否正确，或致电F35客服热线4008 111 111"), billNumber)) ? "" : __t,
                            __p += "</div></div>";
                    return __p
                }
                ,
                this.JST.waybillResult = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="delivery-brief' + (null == (__t = "1" == result.billType && isCNlocation && isRootMenu ? " mybill" : "") ? "" : __t) + '" id="waybill-' + (null == (__t = result.id) ? "" : __t) + '"><div class="wrapper_left">',
                        result.originOld && result.destinationOld && (__p += '<div class="locations">' + (null == (__t = result.originOld) ? "" : __t) + '<span class="location-arrow"></span>' + (null == (__t = result.destinationOld) ? "" : __t) + "</div>"),
                            __p += '<div class="delivery-content"><span class="number">' + (null == (__t = result.id) ? "" : __t) + "</span>",
                        "960" != result.id.substr(0, 3) && (__p += '<span class="product-name">',
                            result.productCode && "http://" === _l(result.productCode).substr(0, 7) && "tc" != Helper.getSiteLanguage() ? __p += '<a href=\'javascript:void(0)\' class="linkProduct" title="' + (null == (__t = result.productCode) ? "" : __t) + '" >' + (null == (__t = _l(result.productName)) ? "" : __t) + "</a>" : result.productCode && "tc" != Helper.getSiteLanguage() && (__p += null == (__t = _l(result.productName)) ? "" : __t),
                            __p += "</span>",
                        !1 === result.signed && result.dynamicExpectedDeliveryTm && result.destination && "hk" !== Helper.getSiteLocation() && ("en" === Helper.getSiteLanguage() ? !1 === result.delay ? __p += '<span class="product-time"><p>' + (null == (__t = _l("Estimated to arrive before:")) ? "" : __t) + "<i>" + (null == (__t = moment(result.dynamicExpectedDeliveryTm.substring(0, 0 <= result.dynamicExpectedDeliveryTm.indexOf("+") ? result.dynamicExpectedDeliveryTm.indexOf("+") : result.dynamicExpectedDeliveryTm.length)).format("YYYY.MM.DD HH:mm")) ? "" : __t) + '</i><p class="product-time-p">' + (null == (__t = _l("(For reference only,and the actual time prevails)")) ? "" : __t) + "</p></span>" : __p += '<span class="product-time">' + (null == (__t = _l("Recalculating the expected delivery time…")) ? "" : __t) + "</span>" : "sc" === Helper.getSiteLanguage() && (!1 === result.delay ? __p += '<span class="product-time"><p>' + (null == (__t = _l("预计")) ? "" : __t) + "<i>" + (null == (__t = moment(result.dynamicExpectedDeliveryTm.substring(0, 0 <= result.dynamicExpectedDeliveryTm.indexOf("+") ? result.dynamicExpectedDeliveryTm.indexOf("+") : result.dynamicExpectedDeliveryTm.length)).format("YYYY.MM.DD HH:mm")) ? "" : __t) + (null == (__t = _l("前")) ? "" : __t) + "</i>" + (null == (__t = _l("到达")) ? "" : __t) + '</p><p class="product-time-p">' + (null == (__t = _l("(仅供参考，具体时效以实际派送时间为准)")) ? "" : __t) + "</p></span>" : __p += '<span class="product-time">' + (null == (__t = _l("预计派送时间重新计算中")) ? "" : __t) + "</span>"))),
                            __p += "</div>",
                        result.routes.length && (__p += '<div class="last-update"><span class="time">' + (null == (__t = moment(result.routes[0].scanDateTime).format("YYYY-MM-DD HH:mm")) ? "" : __t) + '</span><span class="status">',
                        result.routes[0].remark && (result.routes[0].remark = result.routes[0].remark.replace('id="opr_phone"', 'class="route-phone"'),
                        "ru" === Helper.getSiteLocation() && ("T13" === result.limitTypeCode && 31 == result.routes[0].opCode && _.contains(T13_virtualAddressCodeList, result.routes[0].zoneCode) ? result.routes[0].remark += _l("Tip31") : "T14" === result.limitTypeCode && 204 == result.routes[0].opCode && _.contains(T14_virtualAddressCodeList, result.routes[0].zoneCode) && (result.routes[0].remark = _l("Tip204")))),
                            __p += (null == (__t = result.routes[0].remark) ? "" : __t) + "</span></div>"),
                        "0" == result.billType && isCNlocation && isRootMenu && ("sc" === Helper.getSiteLanguage() ? __p += '<div class="brief_tip">如果是你的包裹, <a href="javascript:void(0)" class="a_link_login maidian" data-md-name="点击运单详情页登录按钮" data-md-id="115008">登录</a>后可查看更多运单信息</div>' : __p += '<div class="brief_tip">View more waybill information after <a href="javascript:void(0)" class="a_link_login maidian" data-md-name="点击运单详情页登录按钮" data-md-id="115008">login on</a></div>'),
                        "960" === result.id.substr(0, 3) && ("SINGAPORE" == result.destinationOld.toUpperCase() || "新加坡" == result.destinationOld ? __p += '<div class="customer-services">' + (null == (__t = _l("苹果客服专线：1800-3111-111（限新加坡）")) ? "" : __t) + "</div>" : "HONG KONG" == result.destinationOld.toUpperCase() || "香港" == result.destinationOld ? __p += '<div class="customer-services">' + (null == (__t = _l("苹果客服专线：852-27300273（限香港）")) ? "" : __t) + "</div>" : "TAIWAN" == result.destinationOld.toUpperCase() || "台湾" == result.destinationOld || "台灣" == result.destinationOld ? __p += '<div class="customer-services">' + (null == (__t = _l("苹果客服专线：0800-088830（限台湾座机）02-21926063（台湾座机以外）")) ? "" : __t) + "</div>" : __p += '<div class="customer-services">' + (null == (__t = _l("苹果客服专线", "客服专线：4006 635 333")) ? "" : __t) + "</div>"),
                        "1" == result.billType && isCNlocation && isRootMenu && (__p += '<div class="brief_tip">' + (null == (__t = _l("点击可查看更多")) ? "" : __t) + ' <a href="javascript:void(0)">' + (null == (__t = _l("运单详情")) ? "" : __t) + '</a></div><div class="arrow_right"></div>'),
                            __p += "</div>",
                            expressState ? __p += '<span class="status-icon ' + (null == (__t = expressState.className) ? "" : __t) + '">' + (null == (__t = _l(expressState.txt)) ? "" : __t) + "</span>" : __p += '<span class="status-icon ' + (null == (__t = result.signed ? "delivered" : "delivering") ? "" : __t) + '">' + (null == (__t = result.signed ? _l("已签收") : _l("运送中")) ? "" : __t) + "</span>",
                        certifiedShippingImgUrl && (__p += '<img class="certifiedImg" src="' + (null == (__t = certifiedShippingImgUrl) ? "" : __t) + '" alt="" title="' + (null == (__t = _l("SF.InternationalExpress.Tips")) ? "" : __t) + '">'),
                            __p += '</div><div class="delivery-detail">',
                        1 < detailViewsLength && (__p += '<ul class="tabs-wrapper" role="tablist"><div class="tabs"></div></ul>'),
                        "cn" === Helper.getSiteLocation() && "sc" === Helper.getSiteLanguage() && result.expressServiceEvent && (JSON.parse(result.expressServiceEvent).consigneeMessage ? __p += '<p class="warm-reminder">' + (null == (__t = JSON.parse(result.expressServiceEvent).consigneeMessage) ? "" : __t) + "</p>" : JSON.parse(result.expressServiceEvent).shipperMessage && (__p += '<p class="warm-reminder">' + (null == (__t = JSON.parse(result.expressServiceEvent).shipperMessage) ? "" : __t) + "</p>")),
                            __p += '<ul class="tab-details display-none"></ul></div>';
                    return __p
                }
                ,
                this.JST.waybillResult2 = function(obj) {
                    obj || (obj = {});
                    var __t, __p = "", __e = _.escape, __j = Array.prototype.join;
                    function print() {
                        __p += __j.call(arguments, "")
                    }
                    with (obj)
                        __p += '<div class="delivery-brief ' + (null == (__t = "1" == result.billType && isCNlocation && isRootMenu ? "mybill" : "") ? "" : __t) + '" id="waybill-' + (null == (__t = result.id) ? "" : __t) + '"><div class="wrapper_left">',
                        result.originOld && result.destinationOld && (__p += '<div class="locations">' + (null == (__t = result.originOld) ? "" : __t) + '<span class="location-arrow"></span>' + (null == (__t = result.destinationOld) ? "" : __t) + "</div>"),
                            __p += '<div class="delivery-content">\x3c!-- 运单号 --\x3e<span class="number">' + (null == (__t = result.id) ? "" : __t) + "</span>",
                        "960" != result.id.substr(0, 3) && (__p += '\x3c!-- 产品名称 --\x3e<span class="product-name">' + __e(result.productCode && "tc" != Helper.getSiteLanguage() ? _l(result.productName) : "") + "</span>\x3c!-- 预计送达时间 --\x3e" + (null == (__t = deliveryTm) ? "" : __t)),
                            __p += "</div>\x3c!-- 最近一次站点信息 --\x3e",
                        latestInfo && (__p += '<div class="last-update"><span class="time">' + __e(latestInfo.scanDateTime) + '</span><span class="status">' + (null == (__t = latestInfo.remark) ? "" : __t) + "</span></div>"),
                            __p += "\x3c!-- 苹果客服专线 --\x3e",
                        "960" === result.id.substr(0, 3) && ("SINGAPORE" == result.destinationOld.toUpperCase() || "新加坡" == result.destinationOld ? __p += '<div class="customer-services">' + (null == (__t = _l("苹果客服专线：1800-3111-111（限新加坡）")) ? "" : __t) + "</div>" : "HONG KONG" == result.destinationOld.toUpperCase() || "香港" == result.destinationOld ? __p += '<div class="customer-services">' + (null == (__t = _l("苹果客服专线：852-27300273（限香港）")) ? "" : __t) + "</div>" : "TAIWAN" == result.destinationOld.toUpperCase() || "台湾" == result.destinationOld || "台灣" == result.destinationOld ? __p += '<div class="customer-services">' + (null == (__t = _l("苹果客服专线：0800-088830（限台湾座机）02-21926063（台湾座机以外）")) ? "" : __t) + "</div>" : __p += '<div class="customer-services">' + (null == (__t = _l("苹果客服专线", "客服专线：4006 635 333")) ? "" : __t) + "</div>"),
                            __p += "\x3c!-- 登陆提示或查看更多 --\x3e",
                        isCNlocation && isRootMenu && ("0" == result.billType && ("sc" === Helper.getSiteLanguage() ? __p += '<div class="brief_tip">如果是你的包裹, <a href="javascript:void(0)" class="a_link_login">登录</a>后可查看更多运单信息</div>' : __p += '<div class="brief_tip">View more waybill information after <a href="javascript:void(0)" class="a_link_login">login on</a></div>'),
                        "1" == result.billType && (__p += '<div class="brief_tip">' + (null == (__t = _l("点击可查看更多")) ? "" : __t) + ' <a href="javascript:void(0)">' + (null == (__t = _l("运单详情")) ? "" : __t) + '</a></div><div class="arrow_right"></div>')),
                            __p += '</div>\x3c!-- 快递状态 --\x3e<span class="status-icon ' + (null == (__t = expressState.className) ? "" : __t) + '">' + (null == (__t = _l(expressState.txt)) ? "" : __t) + "</span>\x3c!-- 国际速递图片 --\x3e",
                        certifiedShippingImgUrl && (__p += '<img class="certifiedImg" src="' + (null == (__t = certifiedShippingImgUrl) ? "" : __t) + '" alt="" title="' + (null == (__t = _l("SF.InternationalExpress.Tips")) ? "" : __t) + '">'),
                            __p += '</div><div class="delivery-detail">\x3c!-- tabs --\x3e<ul class="tabs-wrapper display-none" role="tablist"><div class="tabs"><li data-tab="waybill-status"><span class="sfi sfi-trace"></span><span>' + (null == (__t = _l("运单动态")) ? "" : __t) + '</span></li><li data-tab="waybill-childRoute" class="childRoute"><span class="sfi sfi-list"></span><span>' + (null == (__t = _l("子单资料")) ? "" : __t) + "</span></li></div></ul>\x3c!-- 温馨提示 --\x3e",
                        "cn" === Helper.getSiteLocation() && "sc" === Helper.getSiteLanguage() && result.expressServiceEvent && (JSON.parse(result.expressServiceEvent).consigneeMessage ? __p += '<p class="warm-reminder">' + (null == (__t = JSON.parse(result.expressServiceEvent).consigneeMessage) ? "" : __t) + "</p>" : JSON.parse(result.expressServiceEvent).shipperMessage && (__p += '<p class="warm-reminder">' + (null == (__t = JSON.parse(result.expressServiceEvent).shipperMessage) ? "" : __t) + "</p>")),
                            __p += '\x3c!-- 详细信息 --\x3e<ul class="tab-details display-none">\x3c!-- 路由信息 --\x3e<li data-detail="waybill-status" class="status-updates" style="display: none;">',
                            0 < groupRoute.length ? _.each(groupRoute, function(e, t) {
                                __p += '<div data-toggle="status-toggle" class="status-update-box ',
                                0 === t && (__p += " open  "),
                                    __p += ' "><div class="status-update-tab">' + (null == (__t = moment(e[0]).format("YYYY-MM-DD dddd")) ? "" : __t) + '<b class="arrow"></b></div><table><tbody>',
                                    _.each(e[1], function(e) {
                                        __p += '<tr class="status-update"><td class="time">' + (null == (__t = moment(e.scanDateTime).format("HH:mm:ss")) ? "" : __t) + '</td><td class="update">' + (null == (__t = e.remark) ? "" : __t) + "</td></tr>"
                                    }),
                                    __p += "</tbody></table></div>"
                            }) : __p += '<p class="text-center">' + (null == (__t = _l("该运单目前还没有路由信息，请耐心等待。")) ? "" : __t) + "</p>",
                            __p += '</li>\x3c!-- 子单信息--\x3e<li data-detail="waybill-childRoute" class="childRoute-update" ></li></ul></div>';
                    return __p
                }
                ,
                this.JST
        }),
        jQuery.cookie = function(e, t, i) {
            if (void 0 === t) {
                var n = null;
                if (document.cookie && "" != document.cookie)
                    for (var a = document.cookie.split(";"), r = 0; r < a.length; r++) {
                        var s = jQuery.trim(a[r]);
                        if (s.substring(0, e.length + 1) == e + "=") {
                            n = decodeURIComponent(s.substring(e.length + 1));
                            break
                        }
                    }
                return n
            }
            i = i || {},
            null === t && (t = "",
                i.expires = -1);
            var o, l = "";
            i.expires && ("number" == typeof i.expires || i.expires.toUTCString) && ("number" == typeof i.expires ? (o = new Date).setTime(o.getTime() + 24 * i.expires * 60 * 60 * 1e3) : o = i.expires,
                l = "; expires=" + o.toUTCString());
            var d = i.path ? "; path=" + i.path : ""
                , c = i.domain ? "; domain=" + i.domain : ""
                , u = i.secure ? "; secure" : "";
            document.cookie = [e, "=", encodeURIComponent(t), l, d, c, u].join("")
        }
        ,
        define("jqcookie", function() {}),
        define("helper", ["underscore", "templates", "jqcookie"], function(s, e) {
            return {
                urls: {
                    subregionOrigin: "region/%(parentCode)s/subRegions/origins?level=%(level)s",
                    subregionDest: "region/%(parentCode)s/subRegions/dests?originCode=%(originCode)s&level=%(level)s"
                },
                getSiteLocation: function() {
                    return s.has(window, "_cmsConfig") ? window._cmsConfig.region : "cn"
                },
                getSiteLanguage: function() {
                    return s.has(window, "_cmsConfig") ? window._cmsConfig.language : "sc"
                },
                getParsleyLanguage: function() {
                    var e = {
                        sc: "zh_cn",
                        tc: "zh_tw",
                        ko: "ko",
                        ja: "ja",
                        th: "th",
                        fr: "fr",
                        de: "de"
                    };
                    return e[this.getSiteLanguage().toLowerCase()] ? e[this.getSiteLanguage().toLowerCase()] : "en"
                },
                getStandardLocale: function() {
                    return {
                        sc: "zh-CN",
                        en: "en-US",
                        tc: "zh-tw",
                        ko: "ko",
                        ja: "ja",
                        ru: "ru",
                        vi: "vn",
                        th: "th",
                        de: "de",
                        fr: "fr"
                    }[this.getSiteLanguage().toLowerCase()]
                },
                assemabledLocationAndLanguageQureyString: function() {
                    return _p("?lang=%s&region=%s", this.getSiteLanguage(), this.getSiteLocation())
                },
                getOrderRemoteUrl: function(e) {
                    return s.has(window, "_cmsConfigOrder") ? window._cmsConfigOrder.orderRemoteUrl + e : "http://istg.sf-express.com/" + e
                },
                getUcmpOrderRemoteUrl: function(e) {
                    return s.has(window, "_cmsConfigOrder") ? window._cmsConfigOrder.ucmpOrderRemoteUrl + e : "http://10.202.88.26:80/" + e
                },
                switchToUcmpOrderInterface: function() {
                    return !0
                },
                getRESTfulDomain: function(t) {
                    if (_webConfig.newServer.coreSystemIsWork) {
                        var i = !1;
                        if (_webConfig.newServer.coreSystemUrls.forEach(function(e) {
                                new RegExp(e).test(t) && (i = !0)
                            }),
                                i)
                            return "/sf-service-core-web/service/" + t
                    }
                    if (!s.has(window, "_cmsConfig"))
                        return "/sf-service-owf-web/service/" + t;
                    var e = window._cmsConfig.dynamicServerContext;
                    return "/" !== s(e).last() && (e += "/"),
                    e + t
                },
                getImportAndExportPicture: function() {
                    return s.has(window, "_cmsConfig") ? window._cmsConfig.resourcePath + "images/guanwu/" : "http://www.sf-express.com/resource/images/guanwu/"
                },
                getQueryStrings: function() {
                    if (0 === location.search.slice(1).length)
                        return null;
                    var i = {}
                        , e = location.search.slice(1).split("&");
                    return s.each(e, function(e) {
                        var t = e.split("=");
                        i[t[0]] = decodeURIComponent(t[1]) || ""
                    }),
                        i
                },
                switchRegionAndLanguage: function(e, t) {
                    if (s.has(window, "_cmsConfig")) {
                        var i = window.location.href
                            , n = window._cmsConfig.language
                            , a = window._cmsConfig.region;
                        if (a != e) {
                            var r = i.indexOf("/" + a + "/" + n + "/");
                            i = i.substring(0, r),
                                window.location.href = i + "/" + e + "/" + t + "/"
                        } else
                            window.location.href = i.replace("/" + a + "/" + n + "/", "/" + e + "/" + t + "/")
                    }
                },
                getDynamicURLWithContext: function(e) {
                    return this.getURLWithContext("/dynamic_function" + e)
                },
                getURLWithContext: function(e) {
                    var t = "/";
                    if (s.has(window, "_cmsConfig")) {
                        var i = window._cmsConfig;
                        t = i.root[i.region][i.language] + "/"
                    }
                    return "/" === e[0] && (e = e.substring(1)),
                    t + e
                },
                getResourceURL: function(e) {
                    return s.has(window, "_cmsConfig") ? window._cmsConfig.resourcePath + e : e
                },
                validIdcardNumber: function(e) {
                    return /^\d{17}[0-9|x|X]/.test(e)
                },
                getArea: function(e) {
                    return /^1\d{10}$/.test(e) ? "" : "hk" == this.getSiteLocation() ? "852" : "tw" == this.getSiteLocation() ? "886" : ""
                },
                isValidPhoneNumber: function(e) {
                    return /^(?:[\(]?[\+]?[\d]+[\)]?)((?:\s|-)?[\(]?[\d]*[\)]?)*$/.test(e)
                },
                isValidMobileByChinaAndHMT: function(e) {
                    return /^[1]\d{10}$|^[569]{1}\d{7}$|^6\d{7}$|^9\d{8}$/.test(e)
                },
                isValidMailAddr: function(e) {
                    return /^([\w-]+[\.\w-]*)@([\w-])+([\.\w-])+/.test(e)
                },
                parseChineseChar: function(e) {
                    return encodeURIComponent(e).replace(/%[A-F\d]{2}/g, "U")
                },
                chineseCharSubString: function(e, t, i) {
                    for (var n = 0, a = "", r = /[^\x00-\xff]/g, s = "", o = e.replace(r, "**").length, l = 0; l < o && (null != (s = e.charAt(l).toString()).match(r) ? n += 2 : n++,
                        !(t < n)); l++)
                        a += s;
                    return i && t < o && (a += "..."),
                        a
                },
                setArrayToCookie: function(e, t, i) {
                    i && t.length > i && (t = t.splice(0, i)),
                        $.cookie(e, t.join(","), {
                            path: "/",
                            expires: 92
                        })
                },
                getArrayFromCookie: function(e) {
                    return $.cookie(e) ? $.cookie(e).split(",") : []
                },
                delArrayItemFromCookie: function(e, t) {
                    if ($.cookie(e)) {
                        var i = $.cookie(e).split(",");
                        i = i.filter(function(e) {
                            return e != t
                        }),
                            $.cookie(e, i.join(","), {
                                path: "/",
                                expires: 92
                            })
                    }
                },
                getT13_virtualAddressCodeList: function() {
                    return ["MOW01A", "ARN01S", "OSL01S", "HEL01S", "TLL01S", "KBP01S", "VNO01S", "RIX01S", "MSQ01S", "WAW01S"]
                },
                getT14_virtualAddressCodeList: function() {
                    return ["MOW01A", "ARN01S", "OSL01S", "HEL01S", "TLL01S", "KBP01S"]
                },
                handleStr: function(e) {
                    var t = e.length;
                    return 10 < t ? e.substring(0, 3) + "****" + e.substring(t - 4) : 4 < t || 4 == t ? "****" + e.substring(t - 4) : "****"
                },
                isDirectCity: function(t) {
                    return null != s.find(["010", "021", "022", "023"], function(e) {
                        return e == t
                    })
                },
                isHK_MC_TW: function(t) {
                    return null != s.find(["852", "853", "886"], function(e) {
                        return e == t
                    })
                },
                isInternational: function(e) {
                    return new RegExp("[A-Za-z]+").test(e)
                },
                toFixed: function(e, t) {
                    var i = Math.pow(10, t);
                    return (Math.round(e * i) / i).toFixed(t)
                },
                getPayType: function(e) {
                    return "1" == e ? "寄付现结" : "2" == e ? "到付" : "3" == e ? "第三方付" : "4" == e ? "寄付月结" : "5" == e ? "到付月结" : ""
                }
            }
        }),
        function(d) {
            var f, e, n = this, h = Math.round, _ = 0, m = 1, g = 2, v = 3, y = 4, o = 5, l = 6, c = {}, a = {
                _isAMomentObject: null,
                _i: null,
                _f: null,
                _l: null,
                _strict: null,
                _isUTC: null,
                _offset: null,
                _pf: null,
                _lang: null
            }, u = "undefined" != typeof module && module.exports && "undefined" != typeof require, s = /^\/?Date\((\-?\d+)/i, p = /(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/, b = /^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/, w = /(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g, r = /(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g, C = /\d\d?/, k = /\d{1,3}/, T = /\d{1,4}/, x = /[+\-]?\d{1,6}/, $ = /\d+/, S = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i, D = /Z|[\+\-]\d\d:?\d\d/gi, M = /T/i, A = /[\+\-]?\d+(\.\d{1,3})?/, P = /\d/, L = /\d\d/, I = /\d{3}/, R = /\d{4}/, j = /[+-]?\d{6}/, O = /[+-]?\d+/, N = /^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/, E = [["YYYYYY-MM-DD", /[+-]\d{6}-\d{2}-\d{2}/], ["YYYY-MM-DD", /\d{4}-\d{2}-\d{2}/], ["GGGG-[W]WW-E", /\d{4}-W\d{2}-\d/], ["GGGG-[W]WW", /\d{4}-W\d{2}/], ["YYYY-DDD", /\d{4}-\d{3}/]], B = [["HH:mm:ss.SSSS", /(T| )\d\d:\d\d:\d\d\.\d{1,3}/], ["HH:mm:ss", /(T| )\d\d:\d\d:\d\d/], ["HH:mm", /(T| )\d\d:\d\d/], ["HH", /(T| )\d\d/]], F = /([\+\-]|\d\d)/gi, t = "Date|Hours|Minutes|Seconds|Milliseconds".split("|"), i = {
                Milliseconds: 1,
                Seconds: 1e3,
                Minutes: 6e4,
                Hours: 36e5,
                Days: 864e5,
                Months: 2592e6,
                Years: 31536e6
            }, V = {
                ms: "millisecond",
                s: "second",
                m: "minute",
                h: "hour",
                d: "day",
                D: "date",
                w: "week",
                W: "isoWeek",
                M: "month",
                y: "year",
                DDD: "dayOfYear",
                e: "weekday",
                E: "isoWeekday",
                gg: "weekYear",
                GG: "isoWeekYear"
            }, q = {
                dayofyear: "dayOfYear",
                isoweekday: "isoWeekday",
                isoweek: "isoWeek",
                weekyear: "weekYear",
                isoweekyear: "isoWeekYear"
            }, U = {}, Y = "DDD w W M D d".split(" "), H = "M D H h m s w W".split(" "), W = {
                M: function() {
                    return this.month() + 1
                },
                MMM: function(e) {
                    return this.lang().monthsShort(this, e)
                },
                MMMM: function(e) {
                    return this.lang().months(this, e)
                },
                D: function() {
                    return this.date()
                },
                DDD: function() {
                    return this.dayOfYear()
                },
                d: function() {
                    return this.day()
                },
                dd: function(e) {
                    return this.lang().weekdaysMin(this, e)
                },
                ddd: function(e) {
                    return this.lang().weekdaysShort(this, e)
                },
                dddd: function(e) {
                    return this.lang().weekdays(this, e)
                },
                w: function() {
                    return this.week()
                },
                W: function() {
                    return this.isoWeek()
                },
                YY: function() {
                    return te(this.year() % 100, 2)
                },
                YYYY: function() {
                    return te(this.year(), 4)
                },
                YYYYY: function() {
                    return te(this.year(), 5)
                },
                YYYYYY: function() {
                    var e = this.year();
                    return (0 <= e ? "+" : "-") + te(Math.abs(e), 6)
                },
                gg: function() {
                    return te(this.weekYear() % 100, 2)
                },
                gggg: function() {
                    return te(this.weekYear(), 4)
                },
                ggggg: function() {
                    return te(this.weekYear(), 5)
                },
                GG: function() {
                    return te(this.isoWeekYear() % 100, 2)
                },
                GGGG: function() {
                    return te(this.isoWeekYear(), 4)
                },
                GGGGG: function() {
                    return te(this.isoWeekYear(), 5)
                },
                e: function() {
                    return this.weekday()
                },
                E: function() {
                    return this.isoWeekday()
                },
                a: function() {
                    return this.lang().meridiem(this.hours(), this.minutes(), !0)
                },
                A: function() {
                    return this.lang().meridiem(this.hours(), this.minutes(), !1)
                },
                H: function() {
                    return this.hours()
                },
                h: function() {
                    return this.hours() % 12 || 12
                },
                m: function() {
                    return this.minutes()
                },
                s: function() {
                    return this.seconds()
                },
                S: function() {
                    return le(this.milliseconds() / 100)
                },
                SS: function() {
                    return te(le(this.milliseconds() / 10), 2)
                },
                SSS: function() {
                    return te(this.milliseconds(), 3)
                },
                SSSS: function() {
                    return te(this.milliseconds(), 3)
                },
                Z: function() {
                    var e = -this.zone()
                        , t = "+";
                    return e < 0 && (e = -e,
                        t = "-"),
                    t + te(le(e / 60), 2) + ":" + te(le(e) % 60, 2)
                },
                ZZ: function() {
                    var e = -this.zone()
                        , t = "+";
                    return e < 0 && (e = -e,
                        t = "-"),
                    t + te(le(e / 60), 2) + te(le(e) % 60, 2)
                },
                z: function() {
                    return this.zoneAbbr()
                },
                zz: function() {
                    return this.zoneName()
                },
                X: function() {
                    return this.unix()
                },
                Q: function() {
                    return this.quarter()
                }
            }, z = ["months", "monthsShort", "weekdays", "weekdaysShort", "weekdaysMin"];
            function G(t, i) {
                return function(e) {
                    return te(t.call(this, e), i)
                }
            }
            function Q(t, i) {
                return function(e) {
                    return this.lang().ordinal(t.call(this, e), i)
                }
            }
            for (; Y.length; )
                e = Y.pop(),
                    W[e + "o"] = Q(W[e], e);
            for (; H.length; )
                e = H.pop(),
                    W[e + e] = G(W[e], 2);
            function J() {}
            function K(e) {
                he(e),
                    Z(this, e)
            }
            function X(e) {
                var t = se(e)
                    , i = t.year || 0
                    , n = t.month || 0
                    , a = t.week || 0
                    , r = t.day || 0
                    , s = t.hour || 0
                    , o = t.minute || 0
                    , l = t.second || 0
                    , d = t.millisecond || 0;
                this._milliseconds = +d + 1e3 * l + 6e4 * o + 36e5 * s,
                    this._days = +r + 7 * a,
                    this._months = +n + 12 * i,
                    this._data = {},
                    this._bubble()
            }
            function Z(e, t) {
                for (var i in t)
                    t.hasOwnProperty(i) && (e[i] = t[i]);
                return t.hasOwnProperty("toString") && (e.toString = t.toString),
                t.hasOwnProperty("valueOf") && (e.valueOf = t.valueOf),
                    e
            }
            function ee(e) {
                return e < 0 ? Math.ceil(e) : Math.floor(e)
            }
            function te(e, t, i) {
                for (var n = "" + Math.abs(e), a = 0 <= e; n.length < t; )
                    n = "0" + n;
                return (a ? i ? "+" : "" : "-") + n
            }
            function ie(e, t, i, n) {
                var a, r, s = t._milliseconds, o = t._days, l = t._months;
                s && e._d.setTime(+e._d + s * i),
                (o || l) && (a = e.minute(),
                    r = e.hour()),
                o && e.date(e.date() + o * i),
                l && e.month(e.month() + l * i),
                s && !n && f.updateOffset(e),
                (o || l) && (e.minute(a),
                    e.hour(r))
            }
            function ne(e) {
                return "[object Array]" === Object.prototype.toString.call(e)
            }
            function ae(e, t, i) {
                var n, a = Math.min(e.length, t.length), r = Math.abs(e.length - t.length), s = 0;
                for (n = 0; n < a; n++)
                    (i && e[n] !== t[n] || !i && le(e[n]) !== le(t[n])) && s++;
                return s + r
            }
            function re(e) {
                if (e) {
                    var t = e.toLowerCase().replace(/(.)s$/, "$1");
                    e = V[e] || q[t] || t
                }
                return e
            }
            function se(e) {
                var t, i, n = {};
                for (i in e)
                    e.hasOwnProperty(i) && (t = re(i)) && (n[t] = e[i]);
                return n
            }
            function oe(s) {
                var o, l;
                if (0 === s.indexOf("week"))
                    o = 7,
                        l = "day";
                else {
                    if (0 !== s.indexOf("month"))
                        return;
                    o = 12,
                        l = "month"
                }
                f[s] = function(i, e) {
                    var t, n, a = f.fn._lang[s], r = [];
                    if ("number" == typeof i && (e = i,
                            i = d),
                            n = function(e) {
                                var t = f().utc().set(l, e);
                                return a.call(f.fn._lang, t, i || "")
                            }
                            ,
                        null != e)
                        return n(e);
                    for (t = 0; t < o; t++)
                        r.push(n(t));
                    return r
                }
            }
            function le(e) {
                var t = +e
                    , i = 0;
                return 0 !== t && isFinite(t) && (i = 0 <= t ? Math.floor(t) : Math.ceil(t)),
                    i
            }
            function de(e, t) {
                return new Date(Date.UTC(e, t + 1, 0)).getUTCDate()
            }
            function ce(e) {
                return ue(e) ? 366 : 365
            }
            function ue(e) {
                return e % 4 == 0 && e % 100 != 0 || e % 400 == 0
            }
            function he(e) {
                var t;
                e._a && -2 === e._pf.overflow && (t = e._a[m] < 0 || 11 < e._a[m] ? m : e._a[g] < 1 || e._a[g] > de(e._a[_], e._a[m]) ? g : e._a[v] < 0 || 23 < e._a[v] ? v : e._a[y] < 0 || 59 < e._a[y] ? y : e._a[o] < 0 || 59 < e._a[o] ? o : e._a[l] < 0 || 999 < e._a[l] ? l : -1,
                e._pf._overflowDayOfYear && (t < _ || g < t) && (t = g),
                    e._pf.overflow = t)
            }
            function pe(e) {
                return null == e._isValid && (e._isValid = !isNaN(e._d.getTime()) && e._pf.overflow < 0 && !e._pf.empty && !e._pf.invalidMonth && !e._pf.nullInput && !e._pf.invalidFormat && !e._pf.userInvalidated,
                e._strict && (e._isValid = e._isValid && 0 === e._pf.charsLeftOver && 0 === e._pf.unusedTokens.length)),
                    e._isValid
            }
            function fe(e) {
                return e ? e.toLowerCase().replace("_", "-") : e
            }
            function _e(e, t) {
                return t._isUTC ? f(e).zone(t._offset || 0) : f(e).local()
            }
            function me(e) {
                var t, i, n, a, r = 0, s = function(e) {
                    if (!c[e] && u)
                        try {
                            require("./lang/" + e)
                        } catch (e) {}
                    return c[e]
                };
                if (!e)
                    return f.fn._lang;
                if (!ne(e)) {
                    if (i = s(e))
                        return i;
                    e = [e]
                }
                for (; r < e.length; ) {
                    for (t = (a = fe(e[r]).split("-")).length,
                             n = (n = fe(e[r + 1])) ? n.split("-") : null; 0 < t; ) {
                        if (i = s(a.slice(0, t).join("-")))
                            return i;
                        if (n && n.length >= t && ae(a, n, !0) >= t - 1)
                            break;
                        t--
                    }
                    r++
                }
                return f.fn._lang
            }
            function ge(e, t) {
                return e.isValid() ? (t = ve(t, e.lang()),
                U[t] || (U[t] = function(i) {
                    var n, a, e, r = i.match(w);
                    for (n = 0,
                             a = r.length; n < a; n++)
                        W[r[n]] ? r[n] = W[r[n]] : r[n] = (e = r[n]).match(/\[[\s\S]/) ? e.replace(/^\[|\]$/g, "") : e.replace(/\\/g, "");
                    return function(e) {
                        var t = "";
                        for (n = 0; n < a; n++)
                            t += r[n]instanceof Function ? r[n].call(e, i) : r[n];
                        return t
                    }
                }(t)),
                    U[t](e)) : e.lang().invalidDate()
            }
            function ve(e, t) {
                var i = 5;
                function n(e) {
                    return t.longDateFormat(e) || e
                }
                for (r.lastIndex = 0; 0 <= i && r.test(e); )
                    e = e.replace(r, n),
                        r.lastIndex = 0,
                        i -= 1;
                return e
            }
            function ye(e, t) {
                var i, n = t._strict;
                switch (e) {
                    case "DDDD":
                        return I;
                    case "YYYY":
                    case "GGGG":
                    case "gggg":
                        return n ? R : T;
                    case "Y":
                    case "G":
                    case "g":
                        return O;
                    case "YYYYYY":
                    case "YYYYY":
                    case "GGGGG":
                    case "ggggg":
                        return n ? j : x;
                    case "S":
                        if (n)
                            return P;
                    case "SS":
                        if (n)
                            return L;
                    case "SSS":
                        if (n)
                            return I;
                    case "DDD":
                        return k;
                    case "MMM":
                    case "MMMM":
                    case "dd":
                    case "ddd":
                    case "dddd":
                        return S;
                    case "a":
                    case "A":
                        return me(t._l)._meridiemParse;
                    case "X":
                        return A;
                    case "Z":
                    case "ZZ":
                        return D;
                    case "T":
                        return M;
                    case "SSSS":
                        return $;
                    case "MM":
                    case "DD":
                    case "YY":
                    case "GG":
                    case "gg":
                    case "HH":
                    case "hh":
                    case "mm":
                    case "ss":
                    case "ww":
                    case "WW":
                        return n ? L : C;
                    case "M":
                    case "D":
                    case "d":
                    case "H":
                    case "h":
                    case "m":
                    case "s":
                    case "w":
                    case "W":
                    case "e":
                    case "E":
                        return C;
                    default:
                        return new RegExp((i = e.replace("\\", ""),
                            i.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function(e, t, i, n, a) {
                                return t || i || n || a
                            }).replace(/[-\/\\^$*+?.()|[\]{}]/g, "\\$&")))
                }
            }
            function be(e) {
                var t = (e = e || "").match(D) || []
                    , i = ((t[t.length - 1] || []) + "").match(F) || ["-", 0, 0]
                    , n = 60 * i[1] + le(i[2]);
                return "+" === i[0] ? -n : n
            }
            function we(e, t, i) {
                var n, a = i._a;
                switch (e) {
                    case "M":
                    case "MM":
                        null != t && (a[m] = le(t) - 1);
                        break;
                    case "MMM":
                    case "MMMM":
                        null != (n = me(i._l).monthsParse(t)) ? a[m] = n : i._pf.invalidMonth = t;
                        break;
                    case "D":
                    case "DD":
                        null != t && (a[g] = le(t));
                        break;
                    case "DDD":
                    case "DDDD":
                        null != t && (i._dayOfYear = le(t));
                        break;
                    case "YY":
                        a[_] = le(t) + (68 < le(t) ? 1900 : 2e3);
                        break;
                    case "YYYY":
                    case "YYYYY":
                    case "YYYYYY":
                        a[_] = le(t);
                        break;
                    case "a":
                    case "A":
                        i._isPm = me(i._l).isPM(t);
                        break;
                    case "H":
                    case "HH":
                    case "h":
                    case "hh":
                        a[v] = le(t);
                        break;
                    case "m":
                    case "mm":
                        a[y] = le(t);
                        break;
                    case "s":
                    case "ss":
                        a[o] = le(t);
                        break;
                    case "S":
                    case "SS":
                    case "SSS":
                    case "SSSS":
                        a[l] = le(1e3 * ("0." + t));
                        break;
                    case "X":
                        i._d = new Date(1e3 * parseFloat(t));
                        break;
                    case "Z":
                    case "ZZ":
                        i._useUTC = !0,
                            i._tzm = be(t);
                        break;
                    case "w":
                    case "ww":
                    case "W":
                    case "WW":
                    case "d":
                    case "dd":
                    case "ddd":
                    case "dddd":
                    case "e":
                    case "E":
                        e = e.substr(0, 1);
                    case "gg":
                    case "gggg":
                    case "GG":
                    case "GGGG":
                    case "GGGGG":
                        e = e.substr(0, 2),
                        t && (i._w = i._w || {},
                            i._w[e] = t)
                }
            }
            function Ce(i) {
                var e, t, n, a, r, s, o, l, d, c, u = [];
                if (!i._d) {
                    var h, p;
                    for (h = i,
                             p = new Date,
                             n = h._useUTC ? [p.getUTCFullYear(), p.getUTCMonth(), p.getUTCDate()] : [p.getFullYear(), p.getMonth(), p.getDate()],
                         i._w && null == i._a[g] && null == i._a[m] && (r = function(e) {
                             var t = parseInt(e, 10);
                             return e ? e.length < 3 ? 68 < t ? 1900 + t : 2e3 + t : t : null == i._a[_] ? f().weekYear() : i._a[_]
                         }
                             ,
                             null != (s = i._w).GG || null != s.W || null != s.E ? o = De(r(s.GG), s.W || 1, s.E, 4, 1) : (l = me(i._l),
                                 d = null != s.d ? $e(s.d, l) : null != s.e ? parseInt(s.e, 10) + l._week.dow : 0,
                                 c = parseInt(s.w, 10) || 1,
                             null != s.d && d < l._week.dow && c++,
                                 o = De(r(s.gg), c, d, l._week.doy, l._week.dow)),
                             i._a[_] = o.year,
                             i._dayOfYear = o.dayOfYear),
                         i._dayOfYear && (a = null == i._a[_] ? n[_] : i._a[_],
                         i._dayOfYear > ce(a) && (i._pf._overflowDayOfYear = !0),
                             t = xe(a, 0, i._dayOfYear),
                             i._a[m] = t.getUTCMonth(),
                             i._a[g] = t.getUTCDate()),
                             e = 0; e < 3 && null == i._a[e]; ++e)
                        i._a[e] = u[e] = n[e];
                    for (; e < 7; e++)
                        i._a[e] = u[e] = null == i._a[e] ? 2 === e ? 1 : 0 : i._a[e];
                    u[v] += le((i._tzm || 0) / 60),
                        u[y] += le((i._tzm || 0) % 60),
                        i._d = (i._useUTC ? xe : function(e, t, i, n, a, r, s) {
                                var o = new Date(e,t,i,n,a,r,s);
                                e < 1970 && o.setFullYear(e);
                                return o
                            }
                        ).apply(null, u)
                }
            }
            function ke(e) {
                e._a = [],
                    e._pf.empty = !0;
                var t, i, n, a, r, s = me(e._l), o = "" + e._i, l = o.length, d = 0;
                for (n = ve(e._f, s).match(w) || [],
                         t = 0; t < n.length; t++)
                    a = n[t],
                    (i = (o.match(ye(a, e)) || [])[0]) && (0 < (r = o.substr(0, o.indexOf(i))).length && e._pf.unusedInput.push(r),
                        o = o.slice(o.indexOf(i) + i.length),
                        d += i.length),
                        W[a] ? (i ? e._pf.empty = !1 : e._pf.unusedTokens.push(a),
                            we(a, i, e)) : e._strict && !i && e._pf.unusedTokens.push(a);
                e._pf.charsLeftOver = l - d,
                0 < o.length && e._pf.unusedInput.push(o),
                e._isPm && e._a[v] < 12 && (e._a[v] += 12),
                !1 === e._isPm && 12 === e._a[v] && (e._a[v] = 0),
                    Ce(e),
                    he(e)
            }
            function Te(e) {
                var t, i, n, a = e._i, r = s.exec(a);
                a === d ? e._d = new Date : r ? e._d = new Date(+r[1]) : "string" == typeof a ? function(e) {
                    var t, i, n = e._i, a = N.exec(n);
                    if (a) {
                        for (e._pf.iso = !0,
                                 t = 0,
                                 i = E.length; t < i; t++)
                            if (E[t][1].exec(n)) {
                                e._f = E[t][0] + (a[6] || " ");
                                break
                            }
                        for (t = 0,
                                 i = B.length; t < i; t++)
                            if (B[t][1].exec(n)) {
                                e._f += B[t][0];
                                break
                            }
                        n.match(D) && (e._f += "Z"),
                            ke(e)
                    } else
                        e._d = new Date(n)
                }(e) : ne(a) ? (e._a = a.slice(0),
                    Ce(e)) : (n = a,
                    "[object Date]" === Object.prototype.toString.call(n) || n instanceof Date ? e._d = new Date(+a) : "object" == typeof a ? (t = e)._d || (i = se(t._i),
                        t._a = [i.year, i.month, i.day, i.hour, i.minute, i.second, i.millisecond],
                        Ce(t)) : e._d = new Date(a))
            }
            function xe(e) {
                var t = new Date(Date.UTC.apply(null, arguments));
                return e < 1970 && t.setUTCFullYear(e),
                    t
            }
            function $e(e, t) {
                if ("string" == typeof e)
                    if (isNaN(e)) {
                        if ("number" != typeof (e = t.weekdaysParse(e)))
                            return null
                    } else
                        e = parseInt(e, 10);
                return e
            }
            function Se(e, t, i) {
                var n, a = i - t, r = i - e.day();
                return a < r && (r -= 7),
                r < a - 7 && (r += 7),
                    n = f(e).add("d", r),
                    {
                        week: Math.ceil(n.dayOfYear() / 7),
                        year: n.year()
                    }
            }
            function De(e, t, i, n, a) {
                var r, s = xe(e, 0, 1).getUTCDay();
                return {
                    year: 0 < (r = 7 * (t - 1) + ((i = null != i ? i : a) - a) + (a - s + (n < s ? 7 : 0) - (s < a ? 7 : 0)) + 1) ? e : e - 1,
                    dayOfYear: 0 < r ? r : ce(e - 1) + r
                }
            }
            function Me(e) {
                var t = e._i
                    , i = e._f;
                return null === t ? f.invalid({
                    nullInput: !0
                }) : ("string" == typeof t && (e._i = t = me().preparse(t)),
                    f.isMoment(t) ? (e = function(e) {
                        var t, i = {};
                        for (t in e)
                            e.hasOwnProperty(t) && a.hasOwnProperty(t) && (i[t] = e[t]);
                        return i
                    }(t))._d = new Date(+t._d) : i ? ne(i) ? function(e) {
                        var t, i, n, a, r;
                        if (0 === e._f.length)
                            return e._pf.invalidFormat = !0,
                                e._d = new Date(NaN);
                        for (a = 0; a < e._f.length; a++)
                            r = 0,
                                (t = Z({}, e))._pf = {
                                    empty: !1,
                                    unusedTokens: [],
                                    unusedInput: [],
                                    overflow: -2,
                                    charsLeftOver: 0,
                                    nullInput: !1,
                                    invalidMonth: null,
                                    invalidFormat: !1,
                                    userInvalidated: !1,
                                    iso: !1
                                },
                                t._f = e._f[a],
                                ke(t),
                            pe(t) && (r += t._pf.charsLeftOver,
                                r += 10 * t._pf.unusedTokens.length,
                                t._pf.score = r,
                            (null == n || r < n) && (n = r,
                                i = t));
                        Z(e, i || t)
                    }(e) : ke(e) : Te(e),
                    new K(e))
            }
            for (W.DDDD = G(W.DDD, 3),
                     Z(J.prototype, {
                         set: function(e) {
                             var t, i;
                             for (i in e)
                                 "function" == typeof (t = e[i]) ? this[i] = t : this["_" + i] = t
                         },
                         _months: "January_February_March_April_May_June_July_August_September_October_November_December".split("_"),
                         months: function(e) {
                             return this._months[e.month()]
                         },
                         _monthsShort: "Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),
                         monthsShort: function(e) {
                             return this._monthsShort[e.month()]
                         },
                         monthsParse: function(e) {
                             var t, i, n;
                             for (this._monthsParse || (this._monthsParse = []),
                                      t = 0; t < 12; t++)
                                 if (this._monthsParse[t] || (i = f.utc([2e3, t]),
                                         n = "^" + this.months(i, "") + "|^" + this.monthsShort(i, ""),
                                         this._monthsParse[t] = new RegExp(n.replace(".", ""),"i")),
                                         this._monthsParse[t].test(e))
                                     return t
                         },
                         _weekdays: "Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),
                         weekdays: function(e) {
                             return this._weekdays[e.day()]
                         },
                         _weekdaysShort: "Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),
                         weekdaysShort: function(e) {
                             return this._weekdaysShort[e.day()]
                         },
                         _weekdaysMin: "Su_Mo_Tu_We_Th_Fr_Sa".split("_"),
                         weekdaysMin: function(e) {
                             return this._weekdaysMin[e.day()]
                         },
                         weekdaysParse: function(e) {
                             var t, i, n;
                             for (this._weekdaysParse || (this._weekdaysParse = []),
                                      t = 0; t < 7; t++)
                                 if (this._weekdaysParse[t] || (i = f([2e3, 1]).day(t),
                                         n = "^" + this.weekdays(i, "") + "|^" + this.weekdaysShort(i, "") + "|^" + this.weekdaysMin(i, ""),
                                         this._weekdaysParse[t] = new RegExp(n.replace(".", ""),"i")),
                                         this._weekdaysParse[t].test(e))
                                     return t
                         },
                         _longDateFormat: {
                             LT: "h:mm A",
                             L: "MM/DD/YYYY",
                             LL: "MMMM D YYYY",
                             LLL: "MMMM D YYYY LT",
                             LLLL: "dddd, MMMM D YYYY LT"
                         },
                         longDateFormat: function(e) {
                             var t = this._longDateFormat[e];
                             return !t && this._longDateFormat[e.toUpperCase()] && (t = this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g, function(e) {
                                 return e.slice(1)
                             }),
                                 this._longDateFormat[e] = t),
                                 t
                         },
                         isPM: function(e) {
                             return "p" === (e + "").toLowerCase().charAt(0)
                         },
                         _meridiemParse: /[ap]\.?m?\.?/i,
                         meridiem: function(e, t, i) {
                             return 11 < e ? i ? "pm" : "PM" : i ? "am" : "AM"
                         },
                         _calendar: {
                             sameDay: "[Today at] LT",
                             nextDay: "[Tomorrow at] LT",
                             nextWeek: "dddd [at] LT",
                             lastDay: "[Yesterday at] LT",
                             lastWeek: "[Last] dddd [at] LT",
                             sameElse: "L"
                         },
                         calendar: function(e, t) {
                             var i = this._calendar[e];
                             return "function" == typeof i ? i.apply(t) : i
                         },
                         _relativeTime: {
                             future: "in %s",
                             past: "%s ago",
                             s: "a few seconds",
                             m: "a minute",
                             mm: "%d minutes",
                             h: "an hour",
                             hh: "%d hours",
                             d: "a day",
                             dd: "%d days",
                             M: "a month",
                             MM: "%d months",
                             y: "a year",
                             yy: "%d years"
                         },
                         relativeTime: function(e, t, i, n) {
                             var a = this._relativeTime[i];
                             return "function" == typeof a ? a(e, t, i, n) : a.replace(/%d/i, e)
                         },
                         pastFuture: function(e, t) {
                             var i = this._relativeTime[0 < e ? "future" : "past"];
                             return "function" == typeof i ? i(t) : i.replace(/%s/i, t)
                         },
                         ordinal: function(e) {
                             return this._ordinal.replace("%d", e)
                         },
                         _ordinal: "%d",
                         preparse: function(e) {
                             return e
                         },
                         postformat: function(e) {
                             return e
                         },
                         week: function(e) {
                             return Se(e, this._week.dow, this._week.doy).week
                         },
                         _week: {
                             dow: 0,
                             doy: 6
                         },
                         _invalidDate: "Invalid date",
                         invalidDate: function() {
                             return this._invalidDate
                         }
                     }),
                     (f = function(e, t, i, n) {
                             var a;
                             return "boolean" == typeof i && (n = i,
                                 i = d),
                                 (a = {
                                     _isAMomentObject: !0
                                 })._i = e,
                                 a._f = t,
                                 a._l = i,
                                 a._strict = n,
                                 a._isUTC = !1,
                                 a._pf = {
                                     empty: !1,
                                     unusedTokens: [],
                                     unusedInput: [],
                                     overflow: -2,
                                     charsLeftOver: 0,
                                     nullInput: !1,
                                     invalidMonth: null,
                                     invalidFormat: !1,
                                     userInvalidated: !1,
                                     iso: !1
                                 },
                                 Me(a)
                         }
                     ).utc = function(e, t, i, n) {
                         var a;
                         return "boolean" == typeof i && (n = i,
                             i = d),
                             (a = {
                                 _isAMomentObject: !0,
                                 _useUTC: !0,
                                 _isUTC: !0
                             })._l = i,
                             a._i = e,
                             a._f = t,
                             a._strict = n,
                             a._pf = {
                                 empty: !1,
                                 unusedTokens: [],
                                 unusedInput: [],
                                 overflow: -2,
                                 charsLeftOver: 0,
                                 nullInput: !1,
                                 invalidMonth: null,
                                 invalidFormat: !1,
                                 userInvalidated: !1,
                                 iso: !1
                             },
                             Me(a).utc()
                     }
                     ,
                     f.unix = function(e) {
                         return f(1e3 * e)
                     }
                     ,
                     f.duration = function(e, t) {
                         var i, n, a, r = e, s = null;
                         return f.isDuration(e) ? r = {
                             ms: e._milliseconds,
                             d: e._days,
                             M: e._months
                         } : "number" == typeof e ? (r = {},
                             t ? r[t] = e : r.milliseconds = e) : (s = p.exec(e)) ? (i = "-" === s[1] ? -1 : 1,
                             r = {
                                 y: 0,
                                 d: le(s[g]) * i,
                                 h: le(s[v]) * i,
                                 m: le(s[y]) * i,
                                 s: le(s[o]) * i,
                                 ms: le(s[l]) * i
                             }) : (s = b.exec(e)) && (i = "-" === s[1] ? -1 : 1,
                             r = {
                                 y: (a = function(e) {
                                         var t = e && parseFloat(e.replace(",", "."));
                                         return (isNaN(t) ? 0 : t) * i
                                     }
                                 )(s[2]),
                                 M: a(s[3]),
                                 d: a(s[4]),
                                 h: a(s[5]),
                                 m: a(s[6]),
                                 s: a(s[7]),
                                 w: a(s[8])
                             }),
                             n = new X(r),
                         f.isDuration(e) && e.hasOwnProperty("_lang") && (n._lang = e._lang),
                             n
                     }
                     ,
                     f.version = "2.5.1",
                     f.defaultFormat = "YYYY-MM-DDTHH:mm:ssZ",
                     f.updateOffset = function() {}
                     ,
                     f.lang = function(e, t) {
                         var i, n;
                         return e ? (t ? (i = fe(e),
                             (n = t).abbr = i,
                         c[i] || (c[i] = new J),
                             c[i].set(n),
                             c[i]) : null === t ? (delete c[e],
                             e = "en") : c[e] || me(e),
                             (f.duration.fn._lang = f.fn._lang = me(e))._abbr) : f.fn._lang._abbr
                     }
                     ,
                     f.langData = function(e) {
                         return e && e._lang && e._lang._abbr && (e = e._lang._abbr),
                             me(e)
                     }
                     ,
                     f.isMoment = function(e) {
                         return e instanceof K || null != e && e.hasOwnProperty("_isAMomentObject")
                     }
                     ,
                     f.isDuration = function(e) {
                         return e instanceof X
                     }
                     ,
                     e = z.length - 1; 0 <= e; --e)
                oe(z[e]);
            function Ae(e, i) {
                f.fn[e] = f.fn[e + "s"] = function(e) {
                    var t = this._isUTC ? "UTC" : "";
                    return null != e ? (this._d["set" + t + i](e),
                        f.updateOffset(this),
                        this) : this._d["get" + t + i]()
                }
            }
            for (f.normalizeUnits = function(e) {
                return re(e)
            }
                     ,
                     f.invalid = function(e) {
                         var t = f.utc(NaN);
                         return null != e ? Z(t._pf, e) : t._pf.userInvalidated = !0,
                             t
                     }
                     ,
                     f.parseZone = function(e) {
                         return f(e).parseZone()
                     }
                     ,
                     Z(f.fn = K.prototype, {
                         clone: function() {
                             return f(this)
                         },
                         valueOf: function() {
                             return +this._d + 6e4 * (this._offset || 0)
                         },
                         unix: function() {
                             return Math.floor(+this / 1e3)
                         },
                         toString: function() {
                             return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")
                         },
                         toDate: function() {
                             return this._offset ? new Date(+this) : this._d
                         },
                         toISOString: function() {
                             var e = f(this).utc();
                             return 0 < e.year() && e.year() <= 9999 ? ge(e, "YYYY-MM-DD[T]HH:mm:ss.SSS[Z]") : ge(e, "YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")
                         },
                         toArray: function() {
                             var e = this;
                             return [e.year(), e.month(), e.date(), e.hours(), e.minutes(), e.seconds(), e.milliseconds()]
                         },
                         isValid: function() {
                             return pe(this)
                         },
                         isDSTShifted: function() {
                             return !!this._a && (this.isValid() && 0 < ae(this._a, (this._isUTC ? f.utc(this._a) : f(this._a)).toArray()))
                         },
                         parsingFlags: function() {
                             return Z({}, this._pf)
                         },
                         invalidAt: function() {
                             return this._pf.overflow
                         },
                         utc: function() {
                             return this.zone(0)
                         },
                         local: function() {
                             return this.zone(0),
                                 this._isUTC = !1,
                                 this
                         },
                         format: function(e) {
                             var t = ge(this, e || f.defaultFormat);
                             return this.lang().postformat(t)
                         },
                         add: function(e, t) {
                             return ie(this, "string" == typeof e ? f.duration(+t, e) : f.duration(e, t), 1),
                                 this
                         },
                         subtract: function(e, t) {
                             return ie(this, "string" == typeof e ? f.duration(+t, e) : f.duration(e, t), -1),
                                 this
                         },
                         diff: function(e, t, i) {
                             var n, a, r = _e(e, this), s = 6e4 * (this.zone() - r.zone());
                             return "year" === (t = re(t)) || "month" === t ? (n = 432e5 * (this.daysInMonth() + r.daysInMonth()),
                                 a = 12 * (this.year() - r.year()) + (this.month() - r.month()),
                                 a += (this - f(this).startOf("month") - (r - f(r).startOf("month"))) / n,
                                 a -= 6e4 * (this.zone() - f(this).startOf("month").zone() - (r.zone() - f(r).startOf("month").zone())) / n,
                             "year" === t && (a /= 12)) : (n = this - r,
                                 a = "second" === t ? n / 1e3 : "minute" === t ? n / 6e4 : "hour" === t ? n / 36e5 : "day" === t ? (n - s) / 864e5 : "week" === t ? (n - s) / 6048e5 : n),
                                 i ? a : ee(a)
                         },
                         from: function(e, t) {
                             return f.duration(this.diff(e)).lang(this.lang()._abbr).humanize(!t)
                         },
                         fromNow: function(e) {
                             return this.from(f(), e)
                         },
                         calendar: function() {
                             var e = _e(f(), this).startOf("day")
                                 , t = this.diff(e, "days", !0)
                                 , i = t < -6 ? "sameElse" : t < -1 ? "lastWeek" : t < 0 ? "lastDay" : t < 1 ? "sameDay" : t < 2 ? "nextDay" : t < 7 ? "nextWeek" : "sameElse";
                             return this.format(this.lang().calendar(i, this))
                         },
                         isLeapYear: function() {
                             return ue(this.year())
                         },
                         isDST: function() {
                             return this.zone() < this.clone().month(0).zone() || this.zone() < this.clone().month(5).zone()
                         },
                         day: function(e) {
                             var t = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
                             return null != e ? (e = $e(e, this.lang()),
                                 this.add({
                                     d: e - t
                                 })) : t
                         },
                         month: function(e) {
                             var t, i = this._isUTC ? "UTC" : "";
                             return null != e ? ("string" == typeof e && "number" != typeof (e = this.lang().monthsParse(e)) || (t = this.date(),
                                 this.date(1),
                                 this._d["set" + i + "Month"](e),
                                 this.date(Math.min(t, this.daysInMonth())),
                                 f.updateOffset(this)),
                                 this) : this._d["get" + i + "Month"]()
                         },
                         startOf: function(e) {
                             switch (e = re(e)) {
                                 case "year":
                                     this.month(0);
                                 case "month":
                                     this.date(1);
                                 case "week":
                                 case "isoWeek":
                                 case "day":
                                     this.hours(0);
                                 case "hour":
                                     this.minutes(0);
                                 case "minute":
                                     this.seconds(0);
                                 case "second":
                                     this.milliseconds(0)
                             }
                             return "week" === e ? this.weekday(0) : "isoWeek" === e && this.isoWeekday(1),
                                 this
                         },
                         endOf: function(e) {
                             return e = re(e),
                                 this.startOf(e).add("isoWeek" === e ? "week" : e, 1).subtract("ms", 1)
                         },
                         isAfter: function(e, t) {
                             return t = void 0 !== t ? t : "millisecond",
                             +this.clone().startOf(t) > +f(e).startOf(t)
                         },
                         isBefore: function(e, t) {
                             return t = void 0 !== t ? t : "millisecond",
                             +this.clone().startOf(t) < +f(e).startOf(t)
                         },
                         isSame: function(e, t) {
                             return t = t || "ms",
                             +this.clone().startOf(t) == +_e(e, this).startOf(t)
                         },
                         min: function(e) {
                             return (e = f.apply(null, arguments)) < this ? this : e
                         },
                         max: function(e) {
                             return this < (e = f.apply(null, arguments)) ? this : e
                         },
                         zone: function(e) {
                             var t = this._offset || 0;
                             return null == e ? this._isUTC ? t : this._d.getTimezoneOffset() : ("string" == typeof e && (e = be(e)),
                             Math.abs(e) < 16 && (e *= 60),
                                 this._offset = e,
                                 this._isUTC = !0,
                             t !== e && ie(this, f.duration(t - e, "m"), 1, !0),
                                 this)
                         },
                         zoneAbbr: function() {
                             return this._isUTC ? "UTC" : ""
                         },
                         zoneName: function() {
                             return this._isUTC ? "Coordinated Universal Time" : ""
                         },
                         parseZone: function() {
                             return this._tzm ? this.zone(this._tzm) : "string" == typeof this._i && this.zone(this._i),
                                 this
                         },
                         hasAlignedHourOffset: function(e) {
                             return e = e ? f(e).zone() : 0,
                             (this.zone() - e) % 60 == 0
                         },
                         daysInMonth: function() {
                             return de(this.year(), this.month())
                         },
                         dayOfYear: function(e) {
                             var t = h((f(this).startOf("day") - f(this).startOf("year")) / 864e5) + 1;
                             return null == e ? t : this.add("d", e - t)
                         },
                         quarter: function() {
                             return Math.ceil((this.month() + 1) / 3)
                         },
                         weekYear: function(e) {
                             var t = Se(this, this.lang()._week.dow, this.lang()._week.doy).year;
                             return null == e ? t : this.add("y", e - t)
                         },
                         isoWeekYear: function(e) {
                             var t = Se(this, 1, 4).year;
                             return null == e ? t : this.add("y", e - t)
                         },
                         week: function(e) {
                             var t = this.lang().week(this);
                             return null == e ? t : this.add("d", 7 * (e - t))
                         },
                         isoWeek: function(e) {
                             var t = Se(this, 1, 4).week;
                             return null == e ? t : this.add("d", 7 * (e - t))
                         },
                         weekday: function(e) {
                             var t = (this.day() + 7 - this.lang()._week.dow) % 7;
                             return null == e ? t : this.add("d", e - t)
                         },
                         isoWeekday: function(e) {
                             return null == e ? this.day() || 7 : this.day(this.day() % 7 ? e : e - 7)
                         },
                         get: function(e) {
                             return this[e = re(e)]()
                         },
                         set: function(e, t) {
                             return "function" == typeof this[e = re(e)] && this[e](t),
                                 this
                         },
                         lang: function(e) {
                             return e === d ? this._lang : (this._lang = me(e),
                                 this)
                         }
                     }),
                     e = 0; e < t.length; e++)
                Ae(t[e].toLowerCase().replace(/s$/, ""), t[e]);
            function Pe(e) {
                f.duration.fn[e] = function() {
                    return this._data[e]
                }
            }
            function Le(e, t) {
                f.duration.fn["as" + e] = function() {
                    return +this / t
                }
            }
            for (e in Ae("year", "FullYear"),
                f.fn.days = f.fn.day,
                f.fn.months = f.fn.month,
                f.fn.weeks = f.fn.week,
                f.fn.isoWeeks = f.fn.isoWeek,
                f.fn.toJSON = f.fn.toISOString,
                Z(f.duration.fn = X.prototype, {
                    _bubble: function() {
                        var e, t, i, n, a = this._milliseconds, r = this._days, s = this._months, o = this._data;
                        o.milliseconds = a % 1e3,
                            e = ee(a / 1e3),
                            o.seconds = e % 60,
                            t = ee(e / 60),
                            o.minutes = t % 60,
                            i = ee(t / 60),
                            o.hours = i % 24,
                            r += ee(i / 24),
                            o.days = r % 30,
                            s += ee(r / 30),
                            o.months = s % 12,
                            n = ee(s / 12),
                            o.years = n
                    },
                    weeks: function() {
                        return ee(this.days() / 7)
                    },
                    valueOf: function() {
                        return this._milliseconds + 864e5 * this._days + this._months % 12 * 2592e6 + 31536e6 * le(this._months / 12)
                    },
                    humanize: function(e) {
                        var t, i, n, a, r, s, o, l, d, c = +this, u = (t = c,
                            i = !e,
                            n = this.lang(),
                            a = h(Math.abs(t) / 1e3),
                            r = h(a / 60),
                            s = h(r / 60),
                            o = h(s / 24),
                            l = h(o / 365),
                            (d = a < 45 && ["s", a] || 1 === r && ["m"] || r < 45 && ["mm", r] || 1 === s && ["h"] || s < 22 && ["hh", s] || 1 === o && ["d"] || o <= 25 && ["dd", o] || o <= 45 && ["M"] || o < 345 && ["MM", h(o / 30)] || 1 === l && ["y"] || ["yy", l])[2] = i,
                            d[3] = 0 < t,
                            d[4] = n,
                            function(e, t, i, n, a) {
                                return a.relativeTime(t || 1, !!i, e, n)
                            }
                                .apply({}, d));
                        return e && (u = this.lang().pastFuture(c, u)),
                            this.lang().postformat(u)
                    },
                    add: function(e, t) {
                        var i = f.duration(e, t);
                        return this._milliseconds += i._milliseconds,
                            this._days += i._days,
                            this._months += i._months,
                            this._bubble(),
                            this
                    },
                    subtract: function(e, t) {
                        var i = f.duration(e, t);
                        return this._milliseconds -= i._milliseconds,
                            this._days -= i._days,
                            this._months -= i._months,
                            this._bubble(),
                            this
                    },
                    get: function(e) {
                        return this[(e = re(e)).toLowerCase() + "s"]()
                    },
                    as: function(e) {
                        return this["as" + (e = re(e)).charAt(0).toUpperCase() + e.slice(1) + "s"]()
                    },
                    lang: f.fn.lang,
                    toIsoString: function() {
                        var e = Math.abs(this.years())
                            , t = Math.abs(this.months())
                            , i = Math.abs(this.days())
                            , n = Math.abs(this.hours())
                            , a = Math.abs(this.minutes())
                            , r = Math.abs(this.seconds() + this.milliseconds() / 1e3);
                        return this.asSeconds() ? (this.asSeconds() < 0 ? "-" : "") + "P" + (e ? e + "Y" : "") + (t ? t + "M" : "") + (i ? i + "D" : "") + (n || a || r ? "T" : "") + (n ? n + "H" : "") + (a ? a + "M" : "") + (r ? r + "S" : "") : "P0D"
                    }
                }),
                i)
                i.hasOwnProperty(e) && (Le(e, i[e]),
                    Pe(e.toLowerCase()));
            function Ie(e) {
                var t = !1
                    , i = f;
                "undefined" == typeof ender && (e ? (n.moment = function() {
                    return !t && console && console.warn && (t = !0),
                        i.apply(null, arguments)
                }
                    ,
                    Z(n.moment, i)) : n.moment = f)
            }
            Le("Weeks", 6048e5),
                f.duration.fn.asMonths = function() {
                    return (+this - 31536e6 * this.years()) / 2592e6 + 12 * this.years()
                }
                ,
                f.lang("en", {
                    ordinal: function(e) {
                        var t = e % 10;
                        return e + (1 === le(e % 100 / 10) ? "th" : 1 === t ? "st" : 2 === t ? "nd" : 3 === t ? "rd" : "th")
                    }
                }),
                u ? (module.exports = f,
                    Ie(!0)) : "function" == typeof define && define.amd ? define("moment", ["require", "exports", "module"], function(e, t, i) {
                    return i.config && i.config() && !0 !== i.config().noGlobal && Ie(i.config().noGlobal === d),
                        f
                }) : Ie()
        }
            .call(this),
        function(e, t, o) {
            var i, n, a = "[object OperaMini]" == Object.prototype.toString.call(e.operamini), r = "placeholder"in t.createElement("input") && !a, s = "placeholder"in t.createElement("textarea") && !a, l = o.fn, d = o.valHooks, c = o.propHooks;
            function u(e, t) {
                var i = this
                    , n = o(i);
                if (i.value == n.attr("placeholder") && n.hasClass("placeholder"))
                    if (n.data("placeholder-password")) {
                        if (n = n.hide().next().show().attr("id", n.removeAttr("id").data("placeholder-id")),
                            !0 === e)
                            return n[0].value = t;
                        n.focus()
                    } else
                        i.value = "",
                            n.removeClass("placeholder"),
                        i == p() && i.select()
            }
            function h() {
                var t, i, n, a, e = this, r = o(e), s = this.id;
                if (e.value = e.value || "",
                    "" == e.value) {
                    if ("password" == e.type) {
                        if (!r.data("placeholder-textinput")) {
                            try {
                                t = r.clone().attr({
                                    type: "text"
                                })
                            } catch (e) {
                                t = o("<input>").attr(o.extend((i = this,
                                    n = {},
                                    a = /^jQuery\d+$/,
                                    o.each(i.attributes, function(e, t) {
                                        t.specified && !a.test(t.name) && (n[t.name] = t.value)
                                    }),
                                    n), {
                                    type: "text"
                                }))
                            }
                            t.removeAttr("name").data({
                                "placeholder-password": r,
                                "placeholder-id": s
                            }).bind("focus.placeholder", u),
                                r.data({
                                    "placeholder-textinput": t,
                                    "placeholder-id": s
                                }).before(t)
                        }
                        r = r.removeAttr("id").hide().prev().attr("id", s).show()
                    }
                    r.addClass("placeholder"),
                    r[0] && (r[0].value = r.attr("placeholder"))
                } else
                    /\d+-tokenfield$/.test(s) || r.attr("placeholder") == e.value || r.removeClass("placeholder")
            }
            function p() {
                try {
                    return t.activeElement
                } catch (e) {}
            }
            r && s ? (n = l.placeholder = function() {
                    return this
                }
            ).input = n.textarea = !0 : ((n = l.placeholder = function() {
                    return this.filter((r ? "textarea" : ":input") + "[placeholder]").not(".placeholder").bind({
                        "focus.placeholder": u,
                        "blur.placeholder": h
                    }).data("placeholder-enabled", !0).trigger("blur.placeholder"),
                        h.call(this),
                        this
                }
            ).input = r,
                n.textarea = s,
                i = {
                    get: function(e) {
                        var t = o(e)
                            , i = t.data("placeholder-password");
                        return i ? i[0].value : t.data("placeholder-enabled") && t.hasClass("placeholder") ? "" : e.value
                    },
                    set: function(e, t) {
                        var i = o(e)
                            , n = i.data("placeholder-password");
                        return n ? n[0].value = t : i.data("placeholder-enabled") ? ("" == t ? (e.value = t,
                        e != p() && h.call(e)) : i.hasClass("placeholder") && u.call(e, !0, t) || (e.value = t),
                            i) : e.value = t
                    }
                },
            r || (d.input = i,
                c.value = i),
            s || (d.textarea = i,
                c.value = i),
                o(function() {
                    o(t).delegate("form", "submit.placeholder", function() {
                        var e = o(".placeholder", this).each(u);
                        setTimeout(function() {
                            e.each(h)
                        }, 10)
                    })
                }),
                o(e).bind("beforeunload.placeholder", function() {
                    o(".placeholder").each(function() {
                        this.value = ""
                    })
                }))
        }(this, document, jQuery),
        define("jquery-placeholder", function() {}),
        function(e) {
            "function" == typeof define && define.amd ? define("momenttc", ["moment"], e) : "object" == typeof exports ? module.exports = e(require("../moment")) : e(window.moment)
        }(function(e) {
            return e.lang("zh-tw", {
                months: "一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),
                monthsShort: "1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),
                weekdays: "星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),
                weekdaysShort: "週日_週一_週二_週三_週四_週五_週六".split("_"),
                weekdaysMin: "日_一_二_三_四_五_六".split("_"),
                longDateFormat: {
                    LT: "Ah點mm",
                    L: "YYYY年MMMD日",
                    LL: "YYYY年MMMD日",
                    LLL: "YYYY年MMMD日LT",
                    LLLL: "YYYY年MMMD日ddddLT",
                    l: "YYYY年MMMD日",
                    ll: "YYYY年MMMD日",
                    lll: "YYYY年MMMD日LT",
                    llll: "YYYY年MMMD日ddddLT"
                },
                meridiem: function(e, t, i) {
                    var n = 100 * e + t;
                    return n < 900 ? "早上" : n < 1130 ? "上午" : n < 1230 ? "中午" : n < 1800 ? "下午" : "晚上"
                },
                calendar: {
                    sameDay: "[今天]LT",
                    nextDay: "[明天]LT",
                    nextWeek: "[下]ddddLT",
                    lastDay: "[昨天]LT",
                    lastWeek: "[上]ddddLT",
                    sameElse: "L"
                },
                ordinal: function(e, t) {
                    switch (t) {
                        case "d":
                        case "D":
                        case "DDD":
                            return e + "日";
                        case "M":
                            return e + "月";
                        case "w":
                        case "W":
                            return e + "週";
                        default:
                            return e
                    }
                },
                relativeTime: {
                    future: "%s內",
                    past: "%s前",
                    s: "幾秒",
                    m: "一分鐘",
                    mm: "%d分鐘",
                    h: "一小時",
                    hh: "%d小時",
                    d: "一天",
                    dd: "%d天",
                    M: "一個月",
                    MM: "%d個月",
                    y: "一年",
                    yy: "%d年"
                }
            })
        }),
        function(e) {
            "function" == typeof define && define.amd ? define("momentko", ["moment"], e) : "object" == typeof exports ? module.exports = e(require("../moment")) : e(window.moment)
        }(function(e) {
            return e.lang("ko", {
                months: "1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),
                monthsShort: "1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),
                weekdays: "일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),
                weekdaysShort: "일_월_화_수_목_금_토".split("_"),
                weekdaysMin: "일_월_화_수_목_금_토".split("_"),
                longDateFormat: {
                    LT: "A h시 mm분",
                    L: "YYYY.MM.DD",
                    LL: "YYYY년 MMMM D일",
                    LLL: "YYYY년 MMMM D일 LT",
                    LLLL: "YYYY년 MMMM D일 dddd LT"
                },
                meridiem: function(e, t, i) {
                    return e < 12 ? "오전" : "오후"
                },
                calendar: {
                    sameDay: "오늘 LT",
                    nextDay: "내일 LT",
                    nextWeek: "dddd LT",
                    lastDay: "어제 LT",
                    lastWeek: "지난주 dddd LT",
                    sameElse: "L"
                },
                relativeTime: {
                    future: "%s 후",
                    past: "%s 전",
                    s: "몇초",
                    ss: "%d초",
                    m: "일분",
                    mm: "%d분",
                    h: "한시간",
                    hh: "%d시간",
                    d: "하루",
                    dd: "%d일",
                    M: "한달",
                    MM: "%d달",
                    y: "일년",
                    yy: "%d년"
                },
                ordinal: "%d일",
                meridiemParse: /(오전|오후)/,
                isPM: function(e) {
                    return "오후" === e
                }
            })
        }),
        function(e) {
            "function" == typeof define && define.amd ? define("momentja", ["moment"], e) : "object" == typeof exports ? module.exports = e(require("../moment")) : e(window.moment)
        }(function(e) {
            return e.lang("ja", {
                months: "1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),
                monthsShort: "1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),
                weekdays: "日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),
                weekdaysShort: "日_月_火_水_木_金_土".split("_"),
                weekdaysMin: "日_月_火_水_木_金_土".split("_"),
                longDateFormat: {
                    LT: "Ah時m分",
                    L: "YYYY/MM/DD",
                    LL: "YYYY年M月D日",
                    LLL: "YYYY年M月D日LT",
                    LLLL: "YYYY年M月D日LT dddd"
                },
                meridiem: function(e, t, i) {
                    return e < 12 ? "午前" : "午後"
                },
                calendar: {
                    sameDay: "[今日] LT",
                    nextDay: "[明日] LT",
                    nextWeek: "[来週]dddd LT",
                    lastDay: "[昨日] LT",
                    lastWeek: "[前週]dddd LT",
                    sameElse: "L"
                },
                relativeTime: {
                    future: "%s後",
                    past: "%s前",
                    s: "数秒",
                    m: "1分",
                    mm: "%d分",
                    h: "1時間",
                    hh: "%d時間",
                    d: "1日",
                    dd: "%d日",
                    M: "1ヶ月",
                    MM: "%dヶ月",
                    y: "1年",
                    yy: "%d年"
                }
            })
        }),
        function(e) {
            "function" == typeof define && define.amd ? define("momentru", ["moment"], e) : "object" == typeof exports ? module.exports = e(require("../moment")) : e(window.moment)
        }(function(e) {
            function t(e, t, i) {
                var n, a;
                return "m" === i ? t ? "минута" : "минуту" : e + " " + (n = +e,
                    a = {
                        mm: "минута_минуты_минут",
                        hh: "час_часа_часов",
                        dd: "день_дня_дней",
                        MM: "месяц_месяца_месяцев",
                        yy: "год_года_лет"
                    }[i].split("_"),
                    n % 10 == 1 && n % 100 != 11 ? a[0] : 2 <= n % 10 && n % 10 <= 4 && (n % 100 < 10 || 20 <= n % 100) ? a[1] : a[2])
            }
            return e.lang("ru", {
                months: function(e, t) {
                    return {
                        nominative: "январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),
                        accusative: "января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_")
                    }[/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t) ? "accusative" : "nominative"][e.month()]
                },
                monthsShort: function(e, t) {
                    return {
                        nominative: "янв_фев_мар_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),
                        accusative: "янв_фев_мар_апр_мая_июня_июля_авг_сен_окт_ноя_дек".split("_")
                    }[/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t) ? "accusative" : "nominative"][e.month()]
                },
                weekdays: function(e, t) {
                    return {
                        nominative: "воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),
                        accusative: "воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_")
                    }[/\[ ?[Вв] ?(?:прошлую|следующую)? ?\] ?dddd/.test(t) ? "accusative" : "nominative"][e.day()]
                },
                weekdaysShort: "вс_пн_вт_ср_чт_пт_сб".split("_"),
                weekdaysMin: "вс_пн_вт_ср_чт_пт_сб".split("_"),
                monthsParse: [/^янв/i, /^фев/i, /^мар/i, /^апр/i, /^ма[й|я]/i, /^июн/i, /^июл/i, /^авг/i, /^сен/i, /^окт/i, /^ноя/i, /^дек/i],
                longDateFormat: {
                    LT: "HH:mm",
                    L: "DD.MM.YYYY",
                    LL: "D MMMM YYYY г.",
                    LLL: "D MMMM YYYY г., LT",
                    LLLL: "dddd, D MMMM YYYY г., LT"
                },
                calendar: {
                    sameDay: "[Сегодня в] LT",
                    nextDay: "[Завтра в] LT",
                    lastDay: "[Вчера в] LT",
                    nextWeek: function() {
                        return 2 === this.day() ? "[Во] dddd [в] LT" : "[В] dddd [в] LT"
                    },
                    lastWeek: function() {
                        switch (this.day()) {
                            case 0:
                                return "[В прошлое] dddd [в] LT";
                            case 1:
                            case 2:
                            case 4:
                                return "[В прошлый] dddd [в] LT";
                            case 3:
                            case 5:
                            case 6:
                                return "[В прошлую] dddd [в] LT"
                        }
                    },
                    sameElse: "L"
                },
                relativeTime: {
                    future: "через %s",
                    past: "%s назад",
                    s: "несколько секунд",
                    m: t,
                    mm: t,
                    h: "час",
                    hh: t,
                    d: "день",
                    dd: t,
                    M: "месяц",
                    MM: t,
                    y: "год",
                    yy: t
                },
                meridiem: function(e, t, i) {
                    return e < 4 ? "ночи" : e < 12 ? "утра" : e < 17 ? "дня" : "вечера"
                },
                ordinal: function(e, t) {
                    switch (t) {
                        case "M":
                        case "d":
                        case "DDD":
                            return e + "-й";
                        case "D":
                            return e + "-го";
                        case "w":
                        case "W":
                            return e + "-я";
                        default:
                            return e
                    }
                },
                week: {
                    dow: 1,
                    doy: 7
                }
            })
        }),
        function(e) {
            "function" == typeof define && define.amd ? define("momentvn", ["moment"], e) : "object" == typeof exports ? module.exports = e(require("../moment")) : e(window.moment)
        }(function(e) {
            return e.lang("vn", {
                months: "tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),
                monthsShort: "Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),
                weekdays: "chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),
                weekdaysShort: "CN_T2_T3_T4_T5_T6_T7".split("_"),
                weekdaysMin: "CN_T2_T3_T4_T5_T6_T7".split("_"),
                longDateFormat: {
                    LT: "HH:mm",
                    L: "DD/MM/YYYY",
                    LL: "D MMMM [năm] YYYY",
                    LLL: "D MMMM [năm] YYYY LT",
                    LLLL: "dddd, D MMMM [năm] YYYY LT",
                    l: "DD/M/YYYY",
                    ll: "D MMM YYYY",
                    lll: "D MMM YYYY LT",
                    llll: "ddd, D MMM YYYY LT"
                },
                calendar: {
                    sameDay: "[Hôm nay lúc] LT",
                    nextDay: "[Ngày mai lúc] LT",
                    nextWeek: "dddd [tuần tới lúc] LT",
                    lastDay: "[Hôm qua lúc] LT",
                    lastWeek: "dddd [tuần rồi lúc] LT",
                    sameElse: "L"
                },
                relativeTime: {
                    future: "%s tới",
                    past: "%s trước",
                    s: "vài giây",
                    m: "một phút",
                    mm: "%d phút",
                    h: "một giờ",
                    hh: "%d giờ",
                    d: "một ngày",
                    dd: "%d ngày",
                    M: "một tháng",
                    MM: "%d tháng",
                    y: "một năm",
                    yy: "%d năm"
                },
                ordinal: function(e) {
                    return e
                },
                week: {
                    dow: 1,
                    doy: 4
                }
            })
        }),
        function(e) {
            "function" == typeof define && define.amd ? define("momentth", ["moment"], e) : "object" == typeof exports ? module.exports = e(require("../moment")) : e(window.moment)
        }(function(e) {
            return e.lang("th", {
                months: "มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),
                monthsShort: "มกรา_กุมภา_มีนา_เมษา_พฤษภา_มิถุนา_กรกฎา_สิงหา_กันยา_ตุลา_พฤศจิกา_ธันวา".split("_"),
                weekdays: "อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),
                weekdaysShort: "อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),
                weekdaysMin: "อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),
                longDateFormat: {
                    LT: "H นาฬิกา m นาที",
                    L: "YYYY/MM/DD",
                    LL: "D MMMM YYYY",
                    LLL: "D MMMM YYYY เวลา LT",
                    LLLL: "วันddddที่ D MMMM YYYY เวลา LT"
                },
                meridiem: function(e, t, i) {
                    return e < 12 ? "ก่อนเที่ยง" : "หลังเที่ยง"
                },
                calendar: {
                    sameDay: "[วันนี้ เวลา] LT",
                    nextDay: "[พรุ่งนี้ เวลา] LT",
                    nextWeek: "dddd[หน้า เวลา] LT",
                    lastDay: "[เมื่อวานนี้ เวลา] LT",
                    lastWeek: "[วัน]dddd[ที่แล้ว เวลา] LT",
                    sameElse: "L"
                },
                relativeTime: {
                    future: "อีก %s",
                    past: "%sที่แล้ว",
                    s: "ไม่กี่วินาที",
                    m: "1 นาที",
                    mm: "%d นาที",
                    h: "1 ชั่วโมง",
                    hh: "%d ชั่วโมง",
                    d: "1 วัน",
                    dd: "%d วัน",
                    M: "1 เดือน",
                    MM: "%d เดือน",
                    y: "1 ปี",
                    yy: "%d ปี"
                }
            })
        }),
        function(e) {
            "function" == typeof define && define.amd ? define("momentde", ["moment"], e) : "object" == typeof exports ? module.exports = e(require("../moment")) : e(window.moment)
        }(function(e) {
            function t(e, t, i, n) {
                var a = {
                    m: ["eine Minute", "einer Minute"],
                    h: ["eine Stunde", "einer Stunde"],
                    d: ["ein Tag", "einem Tag"],
                    dd: [e + " Tage", e + " Tagen"],
                    M: ["ein Monat", "einem Monat"],
                    MM: [e + " Monate", e + " Monaten"],
                    y: ["ein Jahr", "einem Jahr"],
                    yy: [e + " Jahre", e + " Jahren"]
                };
                return t ? a[i][0] : a[i][1]
            }
            return e.lang("de", {
                months: "Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),
                monthsShort: "Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),
                weekdays: "Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),
                weekdaysShort: "So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),
                weekdaysMin: "So_Mo_Di_Mi_Do_Fr_Sa".split("_"),
                longDateFormat: {
                    LT: "H:mm [Uhr]",
                    L: "DD.MM.YYYY",
                    LL: "D. MMMM YYYY",
                    LLL: "D. MMMM YYYY LT",
                    LLLL: "dddd, D. MMMM YYYY LT"
                },
                calendar: {
                    sameDay: "[Heute um] LT",
                    sameElse: "L",
                    nextDay: "[Morgen um] LT",
                    nextWeek: "dddd [um] LT",
                    lastDay: "[Gestern um] LT",
                    lastWeek: "[letzten] dddd [um] LT"
                },
                relativeTime: {
                    future: "in %s",
                    past: "vor %s",
                    s: "ein paar Sekunden",
                    m: t,
                    mm: "%d Minuten",
                    h: t,
                    hh: "%d Stunden",
                    d: t,
                    dd: t,
                    M: t,
                    MM: t,
                    y: t,
                    yy: t
                },
                ordinal: "%d.",
                week: {
                    dow: 1,
                    doy: 4
                }
            })
        }),
        function(e) {
            "function" == typeof define && define.amd ? define("momentfr", ["moment"], e) : "object" == typeof exports ? module.exports = e(require("../moment")) : e(window.moment)
        }(function(e) {
            return e.lang("fr", {
                months: "janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),
                monthsShort: "janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),
                weekdays: "dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),
                weekdaysShort: "dim._lun._mar._mer._jeu._ven._sam.".split("_"),
                weekdaysMin: "Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),
                longDateFormat: {
                    LT: "HH:mm",
                    L: "DD/MM/YYYY",
                    LL: "D MMMM YYYY",
                    LLL: "D MMMM YYYY LT",
                    LLLL: "dddd D MMMM YYYY LT"
                },
                calendar: {
                    sameDay: "[Aujourd'hui à] LT",
                    nextDay: "[Demain à] LT",
                    nextWeek: "dddd [à] LT",
                    lastDay: "[Hier à] LT",
                    lastWeek: "dddd [dernier à] LT",
                    sameElse: "L"
                },
                relativeTime: {
                    future: "dans %s",
                    past: "il y a %s",
                    s: "quelques secondes",
                    m: "une minute",
                    mm: "%d minutes",
                    h: "une heure",
                    hh: "%d heures",
                    d: "un jour",
                    dd: "%d jours",
                    M: "un mois",
                    MM: "%d mois",
                    y: "un an",
                    yy: "%d ans"
                },
                ordinal: function(e) {
                    return e + (1 === e ? "er" : "")
                },
                week: {
                    dow: 1,
                    doy: 4
                }
            })
        }),
        function(e) {
            "function" == typeof define && define.amd ? define("momentcn", ["moment"], e) : "object" == typeof exports ? module.exports = e(require("../moment")) : e(window.moment)
        }(function(i) {
            return i.lang("zh-cn", {
                months: "一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),
                monthsShort: "1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),
                weekdays: "星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),
                weekdaysShort: "周日_周一_周二_周三_周四_周五_周六".split("_"),
                weekdaysMin: "日_一_二_三_四_五_六".split("_"),
                longDateFormat: {
                    LT: "Ah点mm",
                    L: "YYYY-MM-DD",
                    LL: "YYYY年MMMD日",
                    LLL: "YYYY年MMMD日LT",
                    LLLL: "YYYY年MMMD日ddddLT",
                    l: "YYYY-MM-DD",
                    ll: "YYYY年MMMD日",
                    lll: "YYYY年MMMD日LT",
                    llll: "YYYY年MMMD日ddddLT"
                },
                meridiem: function(e, t, i) {
                    var n = 100 * e + t;
                    return n < 600 ? "凌晨" : n < 900 ? "早上" : n < 1130 ? "上午" : n < 1230 ? "中午" : n < 1800 ? "下午" : "晚上"
                },
                calendar: {
                    sameDay: function() {
                        return 0 === this.minutes() ? "[今天]Ah[点整]" : "[今天]LT"
                    },
                    nextDay: function() {
                        return 0 === this.minutes() ? "[明天]Ah[点整]" : "[明天]LT"
                    },
                    lastDay: function() {
                        return 0 === this.minutes() ? "[昨天]Ah[点整]" : "[昨天]LT"
                    },
                    nextWeek: function() {
                        var e, t;
                        return e = i().startOf("week"),
                            t = 604800 <= this.unix() - e.unix() ? "[下]" : "[本]",
                            0 === this.minutes() ? t + "dddAh点整" : t + "dddAh点mm"
                    },
                    lastWeek: function() {
                        var e, t;
                        return e = i().startOf("week"),
                            t = this.unix() < e.unix() ? "[上]" : "[本]",
                            0 === this.minutes() ? t + "dddAh点整" : t + "dddAh点mm"
                    },
                    sameElse: "LL"
                },
                ordinal: function(e, t) {
                    switch (t) {
                        case "d":
                        case "D":
                        case "DDD":
                            return e + "日";
                        case "M":
                            return e + "月";
                        case "w":
                        case "W":
                            return e + "周";
                        default:
                            return e
                    }
                },
                relativeTime: {
                    future: "%s内",
                    past: "%s前",
                    s: "几秒",
                    m: "1分钟",
                    mm: "%d分钟",
                    h: "1小时",
                    hh: "%d小时",
                    d: "1天",
                    dd: "%d天",
                    M: "1个月",
                    MM: "%d个月",
                    y: "1年",
                    yy: "%d年"
                },
                week: {
                    dow: 1,
                    doy: 4
                }
            })
        }),
        function(e) {
            "function" == typeof define && define.amd ? define("parsleyjs", ["jquery"], e) : e(jQuery)
        }(function(s) {
            void 0 === s && void 0 !== window.jQuery && (s = window.jQuery);
            var o = {
                attr: function(e, t, i) {
                    var n, a = {}, r = this.msieversion(), s = new RegExp("^" + t,"i");
                    if (void 0 === e || void 0 === e[0])
                        return {};
                    for (var o in e[0].attributes)
                        if (null != (n = e[0].attributes[o]) && (!r || 8 <= r || n.specified) && s.test(n.name)) {
                            if (void 0 !== i && new RegExp(i + "$","i").test(n.name))
                                return !0;
                            a[this.camelize(n.name.replace(t, ""))] = this.deserializeValue(n.value)
                        }
                    return void 0 === i && a
                },
                setAttr: function(e, t, i, n) {
                    e[0].setAttribute(this.dasherize(t + i), String(n))
                },
                get: function(e, t) {
                    for (var i = 0, n = (t || "").split("."); this.isObject(e) || this.isArray(e); )
                        if (e = e[n[i++]],
                            i === n.length)
                            return e
                },
                hash: function(e) {
                    return String(Math.random()).substring(2, e ? e + 2 : 9)
                },
                isArray: function(e) {
                    return "[object Array]" === Object.prototype.toString.call(e)
                },
                isObject: function(e) {
                    return e === Object(e)
                },
                deserializeValue: function(t) {
                    var e;
                    try {
                        return t ? "true" == t || "false" != t && ("null" == t ? null : isNaN(e = Number(t)) ? /^[\[\{]/.test(t) ? s.parseJSON(t) : t : e) : t
                    } catch (e) {
                        return t
                    }
                },
                camelize: function(e) {
                    return e.replace(/-+(.)?/g, function(e, t) {
                        return t ? t.toUpperCase() : ""
                    })
                },
                dasherize: function(e) {
                    return e.replace(/::/g, "/").replace(/([A-Z]+)([A-Z][a-z])/g, "$1_$2").replace(/([a-z\d])([A-Z])/g, "$1_$2").replace(/_/g, "-").toLowerCase()
                },
                msieversion: function() {
                    var e = window.navigator.userAgent
                        , t = e.indexOf("MSIE ");
                    return 0 < t || navigator.userAgent.match(/Trident.*rv\:11\./) ? parseInt(e.substring(t + 5, e.indexOf(".", t)), 10) : 0
                }
            }
                , a = {
                namespace: "data-parsley-",
                inputs: "input, textarea, select",
                excluded: "input[type=button], input[type=submit], input[type=reset], input[type=hidden]",
                priorityEnabled: !0,
                uiEnabled: !0,
                validationThreshold: 3,
                focus: "first",
                trigger: !1,
                errorClass: "parsley-error",
                successClass: "parsley-success",
                classHandler: function() {},
                errorsContainer: function() {},
                errorsWrapper: '<ul class="parsley-errors-list"></ul>',
                errorTemplate: "<li></li>"
            }
                , r = function() {};
            r.prototype = {
                asyncSupport: !1,
                actualizeOptions: function() {
                    return this.options = this.OptionsFactory.get(this),
                        this
                },
                validateThroughValidator: function(e, t, i) {
                    return window.ParsleyValidator.validate(e, t, i)
                },
                subscribe: function(e, t) {
                    return s.listenTo(this, e.toLowerCase(), t),
                        this
                },
                unsubscribe: function(e) {
                    return s.unsubscribeTo(this, e.toLowerCase()),
                        this
                },
                reset: function() {
                    if ("ParsleyForm" !== this.__class__)
                        return s.emit("parsley:field:reset", this);
                    for (var e = 0; e < this.fields.length; e++)
                        s.emit("parsley:field:reset", this.fields[e]);
                    s.emit("parsley:form:reset", this)
                },
                destroy: function() {
                    if ("ParsleyForm" !== this.__class__)
                        return this.$element.removeData("Parsley"),
                            this.$element.removeData("ParsleyFieldMultiple"),
                            void s.emit("parsley:field:destroy", this);
                    for (var e = 0; e < this.fields.length; e++)
                        this.fields[e].destroy();
                    this.$element.removeData("Parsley"),
                        s.emit("parsley:form:destroy", this)
                }
            };
            var l = function() {
                var e = {}
                    , l = function(e) {
                    this.__class__ = "Validator",
                        this.__version__ = "1.0.1",
                        this.options = e || {},
                        this.bindingKey = this.options.bindingKey || "_validatorjsConstraint"
                };
                l.prototype = {
                    constructor: l,
                    validate: function(e, t, i) {
                        if ("string" != typeof e && "object" != typeof e)
                            throw new Error("You must validate an object or a string");
                        return "string" == typeof e || h(e) ? this._validateString(e, t, i) : this.isBinded(e) ? this._validateBindedObject(e, t) : this._validateObject(e, t, i)
                    },
                    bind: function(e, t) {
                        if ("object" != typeof e)
                            throw new Error("Must bind a Constraint to an object");
                        return e[this.bindingKey] = new n(t),
                            this
                    },
                    unbind: function(e) {
                        return void 0 === e._validatorjsConstraint || delete e[this.bindingKey],
                            this
                    },
                    isBinded: function(e) {
                        return void 0 !== e[this.bindingKey]
                    },
                    getBinded: function(e) {
                        return this.isBinded(e) ? e[this.bindingKey] : null
                    },
                    _validateString: function(e, t, i) {
                        var n, a = [];
                        h(t) || (t = [t]);
                        for (var r = 0; r < t.length; r++) {
                            if (!(t[r]instanceof c))
                                throw new Error("You must give an Assert or an Asserts array to validate a string");
                            (n = t[r].check(e, i))instanceof d && a.push(n)
                        }
                        return !a.length || a
                    },
                    _validateObject: function(e, t, i) {
                        if ("object" != typeof t)
                            throw new Error("You must give a constraint to validate an object");
                        return t instanceof n ? t.check(e, i) : new n(t).check(e, i)
                    },
                    _validateBindedObject: function(e, t) {
                        return e[this.bindingKey].check(e, t)
                    }
                },
                    l.errorCode = {
                        must_be_a_string: "must_be_a_string",
                        must_be_an_array: "must_be_an_array",
                        must_be_a_number: "must_be_a_number",
                        must_be_a_string_or_array: "must_be_a_string_or_array"
                    };
                var n = function(t, e) {
                    if (this.__class__ = "Constraint",
                            this.options = e || {},
                            this.nodes = {},
                            t)
                        try {
                            this._bootstrap(t)
                        } catch (e) {
                            throw new Error("Should give a valid mapping object to Constraint",e,t)
                        }
                };
                n.prototype = {
                    constructor: n,
                    check: function(e, t) {
                        var i, n = {};
                        for (var a in this.nodes) {
                            for (var r = !1, s = this.get(a), o = h(s) ? s : [s], l = o.length - 1; 0 <= l; l--)
                                "Required" !== o[l].__class__ || (r = o[l].requiresValidation(t));
                            if (this.has(a, e) || this.options.strict || r)
                                try {
                                    this.has(a, this.options.strict || r ? e : void 0) || (new c).HaveProperty(a).validate(e),
                                        i = this._check(a, e[a], t),
                                    (h(i) && 0 < i.length || !h(i) && !u(i)) && (n[a] = i)
                                } catch (e) {
                                    n[a] = e
                                }
                        }
                        return !!u(n) || n
                    },
                    add: function(e, t) {
                        if (t instanceof c || h(t) && t[0]instanceof c)
                            return this.nodes[e] = t,
                                this;
                        if ("object" == typeof t && !h(t))
                            return this.nodes[e] = t instanceof n ? t : new n(t),
                                this;
                        throw new Error("Should give an Assert, an Asserts array, a Constraint",t)
                    },
                    has: function(e, t) {
                        return void 0 !== (t = void 0 !== t ? t : this.nodes)[e]
                    },
                    get: function(e, t) {
                        return this.has(e) ? this.nodes[e] : t || null
                    },
                    remove: function(e) {
                        var t = [];
                        for (var i in this.nodes)
                            i !== e && (t[i] = this.nodes[i]);
                        return this.nodes = t,
                            this
                    },
                    _bootstrap: function(e) {
                        if (e instanceof n)
                            return this.nodes = e.nodes;
                        for (var t in e)
                            this.add(t, e[t])
                    },
                    _check: function(e, t, i) {
                        if (this.nodes[e]instanceof c)
                            return this._checkAsserts(t, [this.nodes[e]], i);
                        if (h(this.nodes[e]))
                            return this._checkAsserts(t, this.nodes[e], i);
                        if (this.nodes[e]instanceof n)
                            return this.nodes[e].check(t, i);
                        throw new Error("Invalid node",this.nodes[e])
                    },
                    _checkAsserts: function(e, t, i) {
                        for (var n, a = [], r = 0; r < t.length; r++)
                            void 0 !== (n = t[r].check(e, i)) && !0 !== n && a.push(n);
                        return a
                    }
                };
                var d = function(e, t, i) {
                    if (this.__class__ = "Violation",
                            !(e instanceof c))
                        throw new Error("Should give an assertion implementing the Assert interface");
                    this.assert = e,
                        this.value = t,
                    void 0 !== i && (this.violation = i)
                };
                d.prototype = {
                    show: function() {
                        var e = {
                            assert: this.assert.__class__,
                            value: this.value
                        };
                        return this.violation && (e.violation = this.violation),
                            e
                    },
                    __toString: function() {
                        return void 0 !== this.violation && (this.violation = '", ' + this.getViolation().constraint + " expected was " + this.getViolation().expected),
                        this.assert.__class__ + ' assert failed for "' + this.value + this.violation || ""
                    },
                    getViolation: function() {
                        var e, t;
                        for (e in this.violation)
                            t = this.violation[e];
                        return {
                            constraint: e,
                            expected: t
                        }
                    }
                };
                var c = function(e) {
                    this.__class__ = "Assert",
                        this.__parentClass__ = this.__class__,
                        this.groups = [],
                    void 0 !== e && this.addGroup(e)
                };
                c.prototype = {
                    construct: c,
                    requiresValidation: function(e) {
                        return !(e && !this.hasGroup(e)) && !(!e && this.hasGroups())
                    },
                    check: function(e, t) {
                        if (this.requiresValidation(t))
                            try {
                                return this.validate(e, t)
                            } catch (e) {
                                return e
                            }
                    },
                    hasGroup: function(e) {
                        return h(e) ? this.hasOneOf(e) : "Any" === e || (this.hasGroups() ? -1 !== this.groups.indexOf(e) : "Default" === e)
                    },
                    hasOneOf: function(e) {
                        for (var t = 0; t < e.length; t++)
                            if (this.hasGroup(e[t]))
                                return !0;
                        return !1
                    },
                    hasGroups: function() {
                        return 0 < this.groups.length
                    },
                    addGroup: function(e) {
                        return h(e) ? this.addGroups(e) : (this.hasGroup(e) || this.groups.push(e),
                            this)
                    },
                    removeGroup: function(e) {
                        for (var t = [], i = 0; i < this.groups.length; i++)
                            e !== this.groups[i] && t.push(this.groups[i]);
                        return this.groups = t,
                            this
                    },
                    addGroups: function(e) {
                        for (var t = 0; t < e.length; t++)
                            this.addGroup(e[t]);
                        return this
                    },
                    HaveProperty: function(e) {
                        return this.__class__ = "HaveProperty",
                            this.node = e,
                            this.validate = function(e) {
                                if (void 0 === e[this.node])
                                    throw new d(this,e,{
                                        value: this.node
                                    });
                                return !0
                            }
                            ,
                            this
                    },
                    Blank: function() {
                        return this.__class__ = "Blank",
                            this.validate = function(e) {
                                if ("string" != typeof e)
                                    throw new d(this,e,{
                                        value: l.errorCode.must_be_a_string
                                    });
                                if ("" !== e.replace(/^\s+/g, "").replace(/\s+$/g, ""))
                                    throw new d(this,e);
                                return !0
                            }
                            ,
                            this
                    },
                    Callback: function(e) {
                        if (this.__class__ = "Callback",
                                this.arguments = Array.prototype.slice.call(arguments),
                                1 === this.arguments.length ? this.arguments = [] : this.arguments.splice(0, 1),
                            "function" != typeof e)
                            throw new Error("Callback must be instanciated with a function");
                        return this.fn = e,
                            this.validate = function(e) {
                                var t = this.fn.apply(this, [e].concat(this.arguments));
                                if (!0 !== t)
                                    throw new d(this,e,{
                                        result: t
                                    });
                                return !0
                            }
                            ,
                            this
                    },
                    Choice: function(e) {
                        if (this.__class__ = "Choice",
                            !h(e) && "function" != typeof e)
                            throw new Error("Choice must be instanciated with an array or a function");
                        return this.list = e,
                            this.validate = function(e) {
                                for (var t = "function" == typeof this.list ? this.list() : this.list, i = 0; i < t.length; i++)
                                    if (e === t[i])
                                        return !0;
                                throw new d(this,e,{
                                    choices: t
                                })
                            }
                            ,
                            this
                    },
                    Collection: function(e) {
                        return this.__class__ = "Collection",
                            this.constraint = void 0 !== e && (e instanceof c ? e : new n(e)),
                            this.validate = function(e, t) {
                                var i, n = new l, a = 0, r = {}, s = this.groups.length ? this.groups : t;
                                if (!h(e))
                                    throw new d(this,e,{
                                        value: l.errorCode.must_be_an_array
                                    });
                                for (var o = 0; o < e.length; o++)
                                    i = this.constraint ? n.validate(e[o], this.constraint, s) : n.validate(e[o], s),
                                    u(i) || (r[a] = i),
                                        a++;
                                return !!u(r) || r
                            }
                            ,
                            this
                    },
                    Count: function(e) {
                        return this.__class__ = "Count",
                            this.count = e,
                            this.validate = function(e) {
                                if (!h(e))
                                    throw new d(this,e,{
                                        value: l.errorCode.must_be_an_array
                                    });
                                var t = "function" == typeof this.count ? this.count(e) : this.count;
                                if (isNaN(Number(t)))
                                    throw new Error("Count must be a valid interger",t);
                                if (t !== e.length)
                                    throw new d(this,e,{
                                        count: t
                                    });
                                return !0
                            }
                            ,
                            this
                    },
                    Email: function() {
                        return this.__class__ = "Email",
                            this.validate = function(e) {
                                if ("string" != typeof e)
                                    throw new d(this,e,{
                                        value: l.errorCode.must_be_a_string
                                    });
                                if (!/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(e))
                                    throw new d(this,e);
                                return !0
                            }
                            ,
                            this
                    },
                    EqualTo: function(e) {
                        if (this.__class__ = "EqualTo",
                            void 0 === e)
                            throw new Error("EqualTo must be instanciated with a value or a function");
                        return this.reference = e,
                            this.validate = function(e) {
                                var t = "function" == typeof this.reference ? this.reference(e) : this.reference;
                                if (t !== e)
                                    throw new d(this,e,{
                                        value: t
                                    });
                                return !0
                            }
                            ,
                            this
                    },
                    GreaterThan: function(e) {
                        if (this.__class__ = "GreaterThan",
                            void 0 === e)
                            throw new Error("Should give a threshold value");
                        return this.threshold = e,
                            this.validate = function(e) {
                                if ("" === e || isNaN(Number(e)))
                                    throw new d(this,e,{
                                        value: l.errorCode.must_be_a_number
                                    });
                                if (this.threshold >= e)
                                    throw new d(this,e,{
                                        threshold: this.threshold
                                    });
                                return !0
                            }
                            ,
                            this
                    },
                    GreaterThanOrEqual: function(e) {
                        if (this.__class__ = "GreaterThanOrEqual",
                            void 0 === e)
                            throw new Error("Should give a threshold value");
                        return this.threshold = e,
                            this.validate = function(e) {
                                if ("" === e || isNaN(Number(e)))
                                    throw new d(this,e,{
                                        value: l.errorCode.must_be_a_number
                                    });
                                if (this.threshold > e)
                                    throw new d(this,e,{
                                        threshold: this.threshold
                                    });
                                return !0
                            }
                            ,
                            this
                    },
                    InstanceOf: function(e) {
                        if (this.__class__ = "InstanceOf",
                            void 0 === e)
                            throw new Error("InstanceOf must be instanciated with a value");
                        return this.classRef = e,
                            this.validate = function(e) {
                                if (1 != e instanceof this.classRef)
                                    throw new d(this,e,{
                                        classRef: this.classRef
                                    });
                                return !0
                            }
                            ,
                            this
                    },
                    Length: function(e) {
                        if (this.__class__ = "Length",
                            !e.min && !e.max)
                            throw new Error("Lenth assert must be instanciated with a { min: x, max: y } object");
                        return this.min = e.min,
                            this.max = e.max,
                            this.validate = function(e) {
                                if ("string" != typeof e && !h(e))
                                    throw new d(this,e,{
                                        value: l.errorCode.must_be_a_string_or_array
                                    });
                                if (void 0 !== this.min && this.min === this.max && e.length !== this.min)
                                    throw new d(this,e,{
                                        min: this.min,
                                        max: this.max
                                    });
                                if (void 0 !== this.max && e.length > this.max)
                                    throw new d(this,e,{
                                        max: this.max
                                    });
                                if (void 0 !== this.min && e.length < this.min)
                                    throw new d(this,e,{
                                        min: this.min
                                    });
                                return !0
                            }
                            ,
                            this
                    },
                    LessThan: function(e) {
                        if (this.__class__ = "LessThan",
                            void 0 === e)
                            throw new Error("Should give a threshold value");
                        return this.threshold = e,
                            this.validate = function(e) {
                                if ("" === e || isNaN(Number(e)))
                                    throw new d(this,e,{
                                        value: l.errorCode.must_be_a_number
                                    });
                                if (this.threshold <= e)
                                    throw new d(this,e,{
                                        threshold: this.threshold
                                    });
                                return !0
                            }
                            ,
                            this
                    },
                    LessThanOrEqual: function(e) {
                        if (this.__class__ = "LessThanOrEqual",
                            void 0 === e)
                            throw new Error("Should give a threshold value");
                        return this.threshold = e,
                            this.validate = function(e) {
                                if ("" === e || isNaN(Number(e)))
                                    throw new d(this,e,{
                                        value: l.errorCode.must_be_a_number
                                    });
                                if (this.threshold < e)
                                    throw new d(this,e,{
                                        threshold: this.threshold
                                    });
                                return !0
                            }
                            ,
                            this
                    },
                    NotNull: function() {
                        return this.__class__ = "NotNull",
                            this.validate = function(e) {
                                if (null == e)
                                    throw new d(this,e);
                                return !0
                            }
                            ,
                            this
                    },
                    NotBlank: function() {
                        return this.__class__ = "NotBlank",
                            this.validate = function(e) {
                                if ("string" != typeof e)
                                    throw new d(this,e,{
                                        value: l.errorCode.must_be_a_string
                                    });
                                if ("" === e.replace(/^\s+/g, "").replace(/\s+$/g, ""))
                                    throw new d(this,e);
                                return !0
                            }
                            ,
                            this
                    },
                    Null: function() {
                        return this.__class__ = "Null",
                            this.validate = function(e) {
                                if (null !== e)
                                    throw new d(this,e);
                                return !0
                            }
                            ,
                            this
                    },
                    Range: function(e, t) {
                        if (this.__class__ = "Range",
                            void 0 === e || void 0 === t)
                            throw new Error("Range assert expects min and max values");
                        return this.min = e,
                            this.max = t,
                            this.validate = function(t) {
                                try {
                                    return "string" == typeof t && isNaN(Number(t)) || h(t) ? (new c).Length({
                                        min: this.min,
                                        max: this.max
                                    }).validate(t) : (new c).GreaterThanOrEqual(this.min).validate(t) && (new c).LessThanOrEqual(this.max).validate(t),
                                        !0
                                } catch (e) {
                                    throw new d(this,t,e.violation)
                                }
                                return !0
                            }
                            ,
                            this
                    },
                    Regexp: function(e, t) {
                        if (this.__class__ = "Regexp",
                            void 0 === e)
                            throw new Error("You must give a regexp");
                        return this.regexp = e,
                            this.flag = t || "",
                            this.validate = function(e) {
                                if ("string" != typeof e)
                                    throw new d(this,e,{
                                        value: l.errorCode.must_be_a_string
                                    });
                                if (!new RegExp(this.regexp,this.flag).test(e))
                                    throw new d(this,e,{
                                        regexp: this.regexp,
                                        flag: this.flag
                                    });
                                return !0
                            }
                            ,
                            this
                    },
                    Required: function() {
                        return this.__class__ = "Required",
                            this.validate = function(t) {
                                if (void 0 === t)
                                    throw new d(this,t);
                                try {
                                    "string" == typeof t ? (new c).NotNull().validate(t) && (new c).NotBlank().validate(t) : !0 === h(t) && (new c).Length({
                                        min: 1
                                    }).validate(t)
                                } catch (e) {
                                    throw new d(this,t)
                                }
                                return !0
                            }
                            ,
                            this
                    },
                    Unique: function(e) {
                        return this.__class__ = "Unique",
                        "object" == typeof e && (this.key = e.key),
                            this.validate = function(e) {
                                var t, i = [];
                                if (!h(e))
                                    throw new d(this,e,{
                                        value: l.errorCode.must_be_an_array
                                    });
                                for (var n = 0; n < e.length; n++)
                                    if (void 0 !== (t = "object" == typeof e[n] ? e[n][this.key] : e[n])) {
                                        if (-1 !== i.indexOf(t))
                                            throw new d(this,e,{
                                                value: t
                                            });
                                        i.push(t)
                                    }
                                return !0
                            }
                            ,
                            this
                    }
                },
                    e.Assert = c,
                    e.Validator = l,
                    e.Violation = d,
                    e.Constraint = n,
                Array.prototype.indexOf || (Array.prototype.indexOf = function(e) {
                        if (null === this)
                            throw new TypeError;
                        var t = Object(this)
                            , i = t.length >>> 0;
                        if (0 === i)
                            return -1;
                        var n = 0;
                        if (1 < arguments.length && ((n = Number(arguments[1])) != n ? n = 0 : 0 !== n && 1 / 0 != n && n != -1 / 0 && (n = (0 < n || -1) * Math.floor(Math.abs(n)))),
                            i <= n)
                            return -1;
                        for (var a = 0 <= n ? n : Math.max(i - Math.abs(n), 0); a < i; a++)
                            if (a in t && t[a] === e)
                                return a;
                        return -1
                    }
                );
                var u = function(e) {
                    for (var t in e)
                        return !1;
                    return !0
                }
                    , h = function(e) {
                    return "[object Array]" === Object.prototype.toString.call(e)
                };
                return "function" == typeof define && define.amd ? define("vendors/validator.js/dist/validator", [], function() {
                    return e
                }) : "undefined" != typeof module && module.exports ? module.exports = e : window["undefined" != typeof validatorjs_ns ? validatorjs_ns : "Validator"] = e,
                    e
            }();
            l = void 0 !== l ? l : "undefined" != typeof module ? module.exports : null;
            var e = function(e, t) {
                this.__class__ = "ParsleyValidator",
                    this.Validator = l,
                    this.locale = "en",
                    this.init(e || {}, t || {})
            };
            e.prototype = {
                init: function(e, t) {
                    for (var i in this.catalog = t,
                        e)
                        this.addValidator(i, e[i].fn, e[i].priority, e[i].requirementsTransformer);
                    s.emit("parsley:validator:init")
                },
                setLocale: function(e) {
                    if (void 0 === this.catalog[e])
                        throw new Error(e + " is not available in the catalog");
                    return this.locale = e,
                        this
                },
                addCatalog: function(e, t, i) {
                    return "object" == typeof t && (this.catalog[e] = t),
                        !0 === i ? this.setLocale(e) : this
                },
                addMessage: function(e, t, i) {
                    return void 0 === this.catalog[e] && (this.catalog[e] = {}),
                        this.catalog[e][t.toLowerCase()] = i,
                        this
                },
                validate: function() {
                    return (new this.Validator.Validator).validate.apply(new l.Validator, arguments)
                },
                addValidator: function(e, t, i, n) {
                    return this.validators[e.toLowerCase()] = function(e) {
                        return s.extend((new l.Assert).Callback(t, e), {
                            priority: i,
                            requirementsTransformer: n
                        })
                    }
                        ,
                        this
                },
                updateValidator: function(e, t, i, n) {
                    return this.addValidator(e, t, i, n)
                },
                removeValidator: function(e) {
                    return delete this.validators[e],
                        this
                },
                getErrorMessage: function(e) {
                    var t;
                    return "" !== (t = "type" === e.name ? this.catalog[this.locale][e.name][e.requirements] : this.formatMessage(this.catalog[this.locale][e.name], e.requirements)) ? t : this.catalog[this.locale].defaultMessage
                },
                formatMessage: function(e, t) {
                    if ("object" == typeof t) {
                        for (var i in t)
                            e = this.formatMessage(e, t[i]);
                        return e
                    }
                    return "string" == typeof e ? e.replace(new RegExp("%s","i"), t) : ""
                },
                validators: {
                    notblank: function() {
                        return s.extend((new l.Assert).NotBlank(), {
                            priority: 2
                        })
                    },
                    required: function() {
                        return s.extend((new l.Assert).Required(), {
                            priority: 512
                        })
                    },
                    type: function(e) {
                        var t;
                        switch (e) {
                            case "email":
                                t = (new l.Assert).Email();
                                break;
                            case "range":
                            case "number":
                                t = (new l.Assert).Regexp("^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$");
                                break;
                            case "integer":
                                t = (new l.Assert).Regexp("^-?\\d+$");
                                break;
                            case "digits":
                                t = (new l.Assert).Regexp("^\\d+$");
                                break;
                            case "alphanum":
                                t = (new l.Assert).Regexp("^\\w+$", "i");
                                break;
                            case "url":
                                t = (new l.Assert).Regexp("(https?:\\/\\/)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,24}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)", "i");
                                break;
                            default:
                                throw new Error("validator type `" + e + "` is not supported")
                        }
                        return s.extend(t, {
                            priority: 256
                        })
                    },
                    pattern: function(e) {
                        var t = "";
                        return /^\/.*\/(?:[gimy]*)$/.test(e) && (t = e.replace(/.*\/([gimy]*)$/, "$1"),
                            e = e.replace(new RegExp("^/(.*?)/" + t + "$"), "$1")),
                            s.extend((new l.Assert).Regexp(e, t), {
                                priority: 64
                            })
                    },
                    minlength: function(e) {
                        return s.extend((new l.Assert).Length({
                            min: e
                        }), {
                            priority: 30,
                            requirementsTransformer: function() {
                                return "string" != typeof e || isNaN(e) ? e : parseInt(e, 10)
                            }
                        })
                    },
                    maxlength: function(e) {
                        return s.extend((new l.Assert).Length({
                            max: e
                        }), {
                            priority: 30,
                            requirementsTransformer: function() {
                                return "string" != typeof e || isNaN(e) ? e : parseInt(e, 10)
                            }
                        })
                    },
                    length: function(e) {
                        return s.extend((new l.Assert).Length({
                            min: e[0],
                            max: e[1]
                        }), {
                            priority: 32
                        })
                    },
                    mincheck: function(e) {
                        return this.minlength(e)
                    },
                    maxcheck: function(e) {
                        return this.maxlength(e)
                    },
                    check: function(e) {
                        return this.length(e)
                    },
                    min: function(e) {
                        return s.extend((new l.Assert).GreaterThanOrEqual(e), {
                            priority: 30,
                            requirementsTransformer: function() {
                                return "string" != typeof e || isNaN(e) ? e : parseInt(e, 10)
                            }
                        })
                    },
                    max: function(e) {
                        return s.extend((new l.Assert).LessThanOrEqual(e), {
                            priority: 30,
                            requirementsTransformer: function() {
                                return "string" != typeof e || isNaN(e) ? e : parseInt(e, 10)
                            }
                        })
                    },
                    range: function(t) {
                        return s.extend((new l.Assert).Range(t[0], t[1]), {
                            priority: 32,
                            requirementsTransformer: function() {
                                for (var e = 0; e < t.length; e++)
                                    t[e] = "string" != typeof t[e] || isNaN(t[e]) ? t[e] : parseInt(t[e], 10);
                                return t
                            }
                        })
                    },
                    equalto: function(e) {
                        return s.extend((new l.Assert).EqualTo(e), {
                            priority: 256,
                            requirementsTransformer: function() {
                                return s(e).length ? s(e).val() : e
                            }
                        })
                    }
                }
            };
            var t = function() {
                this.__class__ = "ParsleyUI"
            };
            t.prototype = {
                listen: function() {
                    return s.listen("parsley:form:init", this, this.setupForm),
                        s.listen("parsley:field:init", this, this.setupField),
                        s.listen("parsley:field:validated", this, this.reflow),
                        s.listen("parsley:form:validated", this, this.focus),
                        s.listen("parsley:field:reset", this, this.reset),
                        s.listen("parsley:form:destroy", this, this.destroy),
                        s.listen("parsley:field:destroy", this, this.destroy),
                        this
                },
                reflow: function(e) {
                    if (void 0 !== e._ui && !1 !== e._ui.active) {
                        var t = this._diff(e.validationResult, e._ui.lastValidationResult);
                        e._ui.lastValidationResult = e.validationResult,
                            e._ui.validatedOnce = !0,
                            this.manageStatusClass(e),
                            this.manageErrorsMessages(e, t),
                            this.actualizeTriggers(e),
                        (t.kept.length || t.added.length) && void 0 === e._ui.failedOnce && this.manageFailingFieldTrigger(e)
                    }
                },
                getErrorsMessages: function(e) {
                    if (!0 === e.validationResult)
                        return [];
                    for (var t = [], i = 0; i < e.validationResult.length; i++)
                        t.push(this._getErrorMessage(e, e.validationResult[i].assert));
                    return t
                },
                manageStatusClass: function(e) {
                    !0 === e.validationResult ? this._successClass(e) : 0 < e.validationResult.length ? this._errorClass(e) : this._resetClass(e)
                },
                manageErrorsMessages: function(e, t) {
                    if (void 0 === e.options.errorsMessagesDisabled) {
                        if (void 0 !== e.options.errorMessage)
                            return t.added.length || t.kept.length ? (0 === e._ui.$errorsWrapper.find(".parsley-custom-error-message").length && e._ui.$errorsWrapper.append(s(e.options.errorTemplate).addClass("parsley-custom-error-message")),
                                e._ui.$errorsWrapper.addClass("filled").find(".parsley-custom-error-message").html(e.options.errorMessage)) : e._ui.$errorsWrapper.removeClass("filled").find(".parsley-custom-error-message").remove();
                        for (var i = 0; i < t.removed.length; i++)
                            this.removeError(e, t.removed[i].assert.name, !0);
                        for (i = 0; i < t.added.length; i++)
                            this.addError(e, t.added[i].assert.name, void 0, t.added[i].assert, !0);
                        for (i = 0; i < t.kept.length; i++)
                            this.updateError(e, t.kept[i].assert.name, void 0, t.kept[i].assert, !0)
                    }
                },
                addError: function(e, t, i, n, a) {
                    e._ui.$errorsWrapper.addClass("filled").append(s(e.options.errorTemplate).addClass("parsley-" + t).html(i || this._getErrorMessage(e, n))),
                    !0 !== a && this._errorClass(e)
                },
                updateError: function(e, t, i, n, a) {
                    e._ui.$errorsWrapper.addClass("filled").find(".parsley-" + t).html(i || this._getErrorMessage(e, n)),
                    !0 !== a && this._errorClass(e)
                },
                removeError: function(e, t, i) {
                    e._ui.$errorsWrapper.removeClass("filled").find(".parsley-" + t).remove(),
                    !0 !== i && this.manageStatusClass(e)
                },
                focus: function(e) {
                    if (!0 === e.validationResult || "none" === e.options.focus)
                        return e._focusedField = null;
                    e._focusedField = null;
                    for (var t = 0; t < e.fields.length; t++)
                        if (!0 !== e.fields[t].validationResult && 0 < e.fields[t].validationResult.length && void 0 === e.fields[t].options.noFocus) {
                            if ("first" === e.options.focus)
                                return e._focusedField = e.fields[t].$element,
                                    e._focusedField.focus();
                            e._focusedField = e.fields[t].$element
                        }
                    return null === e._focusedField ? null : e._focusedField.focus()
                },
                _getErrorMessage: function(e, t) {
                    var i = t.name + "Message";
                    return void 0 !== e.options[i] ? window.ParsleyValidator.formatMessage(e.options[i], t.requirements) : window.ParsleyValidator.getErrorMessage(t)
                },
                _diff: function(e, t, i) {
                    for (var n = [], a = [], r = 0; r < e.length; r++) {
                        for (var s = !1, o = 0; o < t.length; o++)
                            if (e[r].assert.name === t[o].assert.name) {
                                s = !0;
                                break
                            }
                        s ? a.push(e[r]) : n.push(e[r])
                    }
                    return {
                        kept: a,
                        added: n,
                        removed: i ? [] : this._diff(t, e, !0).added
                    }
                },
                setupForm: function(e) {
                    e.$element.on("submit.Parsley", !1, s.proxy(e.onSubmitValidate, e)),
                    !1 !== e.options.uiEnabled && e.$element.attr("novalidate", "")
                },
                setupField: function(e) {
                    var t = {
                        active: !1
                    };
                    !1 !== e.options.uiEnabled && (t.active = !0,
                        e.$element.attr(e.options.namespace + "id", e.__id__),
                        t.$errorClassHandler = this._manageClassHandler(e),
                        t.errorsWrapperId = "parsley-id-" + (void 0 !== e.options.multiple ? "multiple-" + e.options.multiple : e.__id__),
                        t.$errorsWrapper = s(e.options.errorsWrapper).attr("id", t.errorsWrapperId),
                        t.lastValidationResult = [],
                        t.validatedOnce = !1,
                        t.validationInformationVisible = !1,
                        e._ui = t,
                    e.$element.is(e.options.excluded) || this._insertErrorWrapper(e),
                        this.actualizeTriggers(e))
                },
                _manageClassHandler: function(e) {
                    if ("string" == typeof e.options.classHandler && s(e.options.classHandler).length)
                        return s(e.options.classHandler);
                    var t = e.options.classHandler(e);
                    return void 0 !== t && t.length ? t : void 0 === e.options.multiple || e.$element.is("select") ? e.$element : e.$element.parent()
                },
                _insertErrorWrapper: function(e) {
                    var t;
                    if ("string" == typeof e.options.errorsContainer) {
                        if (s(e.options.errorsContainer).length)
                            return s(e.options.errorsContainer).append(e._ui.$errorsWrapper);
                        window.console && window.console.warn && window.console.warn("The errors container `" + e.options.errorsContainer + "` does not exist in DOM")
                    } else
                        "function" == typeof e.options.errorsContainer && (t = e.options.errorsContainer(e));
                    return void 0 !== t && t.length ? t.append(e._ui.$errorsWrapper) : void 0 === e.options.multiple ? e.$element.after(e._ui.$errorsWrapper) : e.$element.parent().after(e._ui.$errorsWrapper)
                },
                actualizeTriggers: function(e) {
                    var t = e.$element;
                    if (e.options.multiple && (t = s("[" + e.options.namespace + 'multiple="' + e.options.multiple + '"]')),
                            t.off(".Parsley"),
                        !1 !== e.options.trigger) {
                        var i = e.options.trigger.replace(/^\s+/g, "").replace(/\s+$/g, "");
                        "" !== i && t.on(i.split(" ").join(".Parsley ") + ".Parsley", s.proxy("function" == typeof e.eventValidate ? e.eventValidate : this.eventValidate, e))
                    }
                },
                eventValidate: function(e) {
                    new RegExp("key").test(e.type) && !this._ui.validationInformationVisible && this.getValue().length <= this.options.validationThreshold || (this._ui.validatedOnce = !0,
                        this.validate())
                },
                manageFailingFieldTrigger: function(e) {
                    return e._ui.failedOnce = !0,
                    e.options.multiple && s("[" + e.options.namespace + 'multiple="' + e.options.multiple + '"]').each(function() {
                        return new RegExp("change","i").test(s(this).parsley().options.trigger || "") ? void 0 : s(this).on("change.ParsleyFailedOnce", !1, s.proxy(e.validate, e))
                    }),
                        e.$element.is("select") && !new RegExp("change","i").test(e.options.trigger || "") ? e.$element.on("change.ParsleyFailedOnce", !1, s.proxy(e.validate, e)) : new RegExp("keyup","i").test(e.options.trigger || "") ? void 0 : e.$element.on("keyup.ParsleyFailedOnce", !1, s.proxy(e.validate, e))
                },
                reset: function(e) {
                    e.$element.off(".Parsley"),
                        e.$element.off(".ParsleyFailedOnce"),
                    void 0 !== e._ui && "ParsleyForm" !== e.__class__ && (e._ui.$errorsWrapper.removeClass("filled").children().remove(),
                        this._resetClass(e),
                        e._ui.validatedOnce = !1,
                        e._ui.lastValidationResult = [],
                        e._ui.validationInformationVisible = !1)
                },
                destroy: function(e) {
                    this.reset(e),
                    "ParsleyForm" !== e.__class__ && (void 0 !== e._ui && e._ui.$errorsWrapper.remove(),
                        delete e._ui)
                },
                _successClass: function(e) {
                    e._ui.validationInformationVisible = !0,
                        e._ui.$errorClassHandler.removeClass(e.options.errorClass).addClass(e.options.successClass)
                },
                _errorClass: function(e) {
                    e._ui.validationInformationVisible = !0,
                        e._ui.$errorClassHandler.removeClass(e.options.successClass).addClass(e.options.errorClass)
                },
                _resetClass: function(e) {
                    e._ui.$errorClassHandler.removeClass(e.options.successClass).removeClass(e.options.errorClass)
                }
            };
            var d = function(e, t, i, n) {
                this.__class__ = "OptionsFactory",
                    this.__id__ = o.hash(4),
                    this.formOptions = null,
                    this.fieldOptions = null,
                    this.staticOptions = s.extend(!0, {}, e, t, i, {
                        namespace: n
                    })
            };
            d.prototype = {
                get: function(e) {
                    if (void 0 === e.__class__)
                        throw new Error("Parsley Instance expected");
                    switch (e.__class__) {
                        case "Parsley":
                            return this.staticOptions;
                        case "ParsleyForm":
                            return this.getFormOptions(e);
                        case "ParsleyField":
                        case "ParsleyFieldMultiple":
                            return this.getFieldOptions(e);
                        default:
                            throw new Error("Instance " + e.__class__ + " is not supported")
                    }
                },
                getFormOptions: function(e) {
                    return this.formOptions = o.attr(e.$element, this.staticOptions.namespace),
                        s.extend({}, this.staticOptions, this.formOptions)
                },
                getFieldOptions: function(e) {
                    return this.fieldOptions = o.attr(e.$element, this.staticOptions.namespace),
                    null === this.formOptions && void 0 !== e.parent && (this.formOptions = this.getFormOptions(e.parent)),
                        s.extend({}, this.staticOptions, this.formOptions, this.fieldOptions)
                }
            };
            var c = function(e, t) {
                if (this.__class__ = "ParsleyForm",
                        this.__id__ = o.hash(4),
                    "OptionsFactory" !== o.get(t, "__class__"))
                    throw new Error("You must give an OptionsFactory instance");
                this.OptionsFactory = t,
                    this.$element = s(e),
                    this.validationResult = null,
                    this.options = this.OptionsFactory.get(this)
            };
            c.prototype = {
                onSubmitValidate: function(e) {
                    return this.validate(void 0, void 0, e),
                    !1 === this.validationResult && e instanceof s.Event && (e.stopImmediatePropagation(),
                        e.preventDefault()),
                        this
                },
                validate: function(e, t, i) {
                    this.submitEvent = i,
                        this.validationResult = !0;
                    var n = [];
                    s.emit("parsley:form:validate", this),
                        this._refreshFields();
                    for (var a = 0; a < this.fields.length; a++)
                        (!e || this._isFieldInGroup(this.fields[a], e)) && (!0 !== (n = this.fields[a].validate(t)) && 0 < n.length && this.validationResult && (this.validationResult = !1));
                    return s.emit("parsley:form:" + (this.validationResult ? "success" : "error"), this),
                        s.emit("parsley:form:validated", this),
                        this.validationResult
                },
                isValid: function(e, t) {
                    this._refreshFields();
                    for (var i = 0; i < this.fields.length; i++)
                        if ((!e || this._isFieldInGroup(this.fields[i], e)) && !1 === this.fields[i].isValid(t))
                            return !1;
                    return !0
                },
                _isFieldInGroup: function(e, t) {
                    return o.isArray(e.options.group) ? -1 !== s.inArray(t, e.options.group) : e.options.group === t
                },
                _refreshFields: function() {
                    return this.actualizeOptions()._bindFields()
                },
                _bindFields: function() {
                    var t = this;
                    return this.fields = [],
                        this.fieldsMappedById = {},
                        this.$element.find(this.options.inputs).each(function() {
                            var e = new window.Parsley(this,{},t);
                            "ParsleyField" !== e.__class__ && "ParsleyFieldMultiple" !== e.__class__ || e.$element.is(e.options.excluded) || void 0 === t.fieldsMappedById[e.__class__ + "-" + e.__id__] && (t.fieldsMappedById[e.__class__ + "-" + e.__id__] = e,
                                t.fields.push(e))
                        }),
                        this
                }
            };
            var u = function(e, t, i, n, a) {
                var r = {};
                if (!new RegExp("ParsleyField").test(o.get(e, "__class__")))
                    throw new Error("ParsleyField or ParsleyFieldMultiple instance expected");
                if ("function" == typeof window.ParsleyValidator.validators[t] && (r = window.ParsleyValidator.validators[t](i)),
                    "Assert" !== r.__parentClass__)
                    throw new Error("Valid validator expected");
                return n = n || (void 0 !== e.options[t + "Priority"] ? e.options[t + "Priority"] : o.get(r, "priority") || 2),
                "function" == typeof r.requirementsTransformer && (i = r.requirementsTransformer(),
                    r = window.ParsleyValidator.validators[t](i)),
                    s.extend(r, {
                        name: t,
                        requirements: i,
                        priority: n,
                        groups: [n],
                        isDomConstraint: a || o.attr(e.$element, e.options.namespace, t)
                    })
            }
                , h = function(e, t, i) {
                this.__class__ = "ParsleyField",
                    this.__id__ = o.hash(4),
                    this.$element = s(e),
                    void 0 !== i ? (this.parent = i,
                        this.OptionsFactory = this.parent.OptionsFactory) : this.OptionsFactory = t,
                    this.options = this.OptionsFactory.get(this),
                    this.constraints = [],
                    this.constraintsByName = {},
                    this.validationResult = [],
                    this._bindConstraints()
            };
            h.prototype = {
                validate: function(e) {
                    return this.value = this.getValue(),
                        s.emit("parsley:field:validate", this),
                        s.emit("parsley:field:" + (this.isValid(e, this.value) ? "success" : "error"), this),
                        s.emit("parsley:field:validated", this),
                        this.validationResult
                },
                isValid: function(e, t) {
                    this.refreshConstraints();
                    var i = this._getConstraintsSortedPriorities();
                    if (0 === i.length)
                        return this.validationResult = [];
                    if (null == t && (t = this.getValue()),
                        !t.length && !this._isRequired() && void 0 === this.options.validateIfEmpty && !0 !== e)
                        return this.validationResult = [];
                    if (!1 === this.options.priorityEnabled)
                        return !0 === (this.validationResult = this.validateThroughValidator(t, this.constraints, "Any"));
                    for (var n = 0; n < i.length; n++)
                        if (!0 !== (this.validationResult = this.validateThroughValidator(t, this.constraints, i[n])))
                            return !1;
                    return !0
                },
                getValue: function() {
                    var e;
                    return null == (e = void 0 !== this.options.value ? this.options.value : this.$element.val()) ? "" : !0 === this.options.trimValue ? e.replace(/^\s+|\s+$/g, "") : e
                },
                refreshConstraints: function() {
                    return this.actualizeOptions()._bindConstraints()
                },
                addConstraint: function(e, t, i, n) {
                    if (e = e.toLowerCase(),
                        "function" == typeof window.ParsleyValidator.validators[e]) {
                        var a = new u(this,e,t,i,n);
                        "undefined" !== this.constraintsByName[a.name] && this.removeConstraint(a.name),
                            this.constraints.push(a),
                            this.constraintsByName[a.name] = a
                    }
                    return this
                },
                removeConstraint: function(e) {
                    for (var t = 0; t < this.constraints.length; t++)
                        if (e === this.constraints[t].name) {
                            this.constraints.splice(t, 1);
                            break
                        }
                    return delete this.constraintsByName[e],
                        this
                },
                updateConstraint: function(e, t, i) {
                    return this.removeConstraint(e).addConstraint(e, t, i)
                },
                _bindConstraints: function() {
                    for (var e = [], t = {}, i = 0; i < this.constraints.length; i++)
                        !1 === this.constraints[i].isDomConstraint && (e.push(this.constraints[i]),
                            t[this.constraints[i].name] = this.constraints[i]);
                    for (var n in this.constraints = e,
                        this.constraintsByName = t,
                        this.options)
                        this.addConstraint(n, this.options[n]);
                    return this._bindHtml5Constraints()
                },
                _bindHtml5Constraints: function() {
                    (this.$element.hasClass("required") || this.$element.attr("required")) && this.addConstraint("required", !0, void 0, !0),
                    "string" == typeof this.$element.attr("pattern") && this.addConstraint("pattern", this.$element.attr("pattern"), void 0, !0),
                        void 0 !== this.$element.attr("min") && void 0 !== this.$element.attr("max") ? this.addConstraint("range", [this.$element.attr("min"), this.$element.attr("max")], void 0, !0) : void 0 !== this.$element.attr("min") ? this.addConstraint("min", this.$element.attr("min"), void 0, !0) : void 0 !== this.$element.attr("max") && this.addConstraint("max", this.$element.attr("max"), void 0, !0),
                        void 0 !== this.$element.attr("minlength") && void 0 !== this.$element.attr("maxlength") ? this.addConstraint("length", [this.$element.attr("minlength"), this.$element.attr("maxlength")], void 0, !0) : void 0 !== this.$element.attr("minlength") ? this.addConstraint("minlength", this.$element.attr("minlength"), void 0, !0) : void 0 !== this.$element.attr("maxlength") && this.addConstraint("maxlength", this.$element.attr("maxlength"), void 0, !0);
                    var e = this.$element.attr("type");
                    return void 0 === e ? this : "number" === e ? void 0 === this.$element.attr("step") || 0 == parseFloat(this.$element.attr("step")) % 1 ? this.addConstraint("type", "integer", void 0, !0) : this.addConstraint("type", "number", void 0, !0) : new RegExp(e,"i").test("email url range") ? this.addConstraint("type", e, void 0, !0) : this
                },
                _isRequired: function() {
                    return void 0 !== this.constraintsByName.required && !1 !== this.constraintsByName.required.requirements
                },
                _getConstraintsSortedPriorities: function() {
                    for (var e = [], t = 0; t < this.constraints.length; t++)
                        -1 === e.indexOf(this.constraints[t].priority) && e.push(this.constraints[t].priority);
                    return e.sort(function(e, t) {
                        return t - e
                    }),
                        e
                }
            };
            var p = function() {
                this.__class__ = "ParsleyFieldMultiple"
            };
            p.prototype = {
                addElement: function(e) {
                    return this.$elements.push(e),
                        this
                },
                refreshConstraints: function() {
                    var e;
                    if (this.constraints = [],
                            this.$element.is("select"))
                        return this.actualizeOptions()._bindConstraints(),
                            this;
                    for (var t = 0; t < this.$elements.length; t++)
                        if (s("html").has(this.$elements[t]).length) {
                            e = this.$elements[t].data("ParsleyFieldMultiple").refreshConstraints().constraints;
                            for (var i = 0; i < e.length; i++)
                                this.addConstraint(e[i].name, e[i].requirements, e[i].priority, e[i].isDomConstraint)
                        } else
                            this.$elements.splice(t, 1);
                    return this
                },
                getValue: function() {
                    if (void 0 !== this.options.value)
                        return this.options.value;
                    if (this.$element.is("input[type=radio]"))
                        return s("[" + this.options.namespace + 'multiple="' + this.options.multiple + '"]:checked').val() || "";
                    if (this.$element.is("input[type=checkbox]")) {
                        var e = [];
                        return s("[" + this.options.namespace + 'multiple="' + this.options.multiple + '"]:checked').each(function() {
                            e.push(s(this).val())
                        }),
                            e.length ? e : []
                    }
                    return this.$element.is("select") && null === this.$element.val() ? [] : this.$element.val()
                },
                _init: function(e) {
                    return this.$elements = [this.$element],
                        this.options.multiple = e,
                        this
                }
            };
            var f = s({})
                , _ = {};
            s.listen = function(e) {
                if (void 0 === _[e] && (_[e] = []),
                    "function" == typeof arguments[1])
                    return _[e].push({
                        fn: arguments[1]
                    });
                if ("object" == typeof arguments[1] && "function" == typeof arguments[2])
                    return _[e].push({
                        fn: arguments[2],
                        ctxt: arguments[1]
                    });
                throw new Error("Wrong parameters")
            }
                ,
                s.listenTo = function(e, t, i) {
                    if (void 0 === _[t] && (_[t] = []),
                            !(e instanceof h || e instanceof c))
                        throw new Error("Must give Parsley instance");
                    if ("string" != typeof t || "function" != typeof i)
                        throw new Error("Wrong parameters");
                    _[t].push({
                        instance: e,
                        fn: i
                    })
                }
                ,
                s.unsubscribe = function(e, t) {
                    if (void 0 !== _[e]) {
                        if ("string" != typeof e || "function" != typeof t)
                            throw new Error("Wrong arguments");
                        for (var i = 0; i < _[e].length; i++)
                            if (_[e][i].fn === t)
                                return _[e].splice(i, 1)
                    }
                }
                ,
                s.unsubscribeTo = function(e, t) {
                    if (void 0 !== _[t]) {
                        if (!(e instanceof h || e instanceof c))
                            throw new Error("Must give Parsley instance");
                        for (var i = 0; i < _[t].length; i++)
                            if (void 0 !== _[t][i].instance && _[t][i].instance.__id__ === e.__id__)
                                return _[t].splice(i, 1)
                    }
                }
                ,
                s.unsubscribeAll = function(e) {
                    void 0 !== _[e] && delete _[e]
                }
                ,
                s.emit = function(e, t) {
                    if (void 0 !== _[e])
                        for (var i = 0; i < _[e].length; i++)
                            if (void 0 !== _[e][i].instance) {
                                if (t instanceof h || t instanceof c)
                                    if (_[e][i].instance.__id__ !== t.__id__) {
                                        if (_[e][i].instance instanceof c && t instanceof h)
                                            for (var n = 0; n < _[e][i].instance.fields.length; n++)
                                                if (_[e][i].instance.fields[n].__id__ === t.__id__) {
                                                    _[e][i].fn.apply(f, Array.prototype.slice.call(arguments, 1));
                                                    continue
                                                }
                                    } else
                                        _[e][i].fn.apply(f, Array.prototype.slice.call(arguments, 1))
                            } else
                                _[e][i].fn.apply(void 0 !== _[e][i].ctxt ? _[e][i].ctxt : f, Array.prototype.slice.call(arguments, 1))
                }
                ,
                s.subscribed = function() {
                    return _
                }
                ,
                window.ParsleyConfig = window.ParsleyConfig || {},
                window.ParsleyConfig.i18n = window.ParsleyConfig.i18n || {},
                window.ParsleyConfig.i18n.en = s.extend(window.ParsleyConfig.i18n.en || {}, {
                    defaultMessage: "This value seems to be invalid.",
                    type: {
                        email: "This value should be a valid email.",
                        url: "This value should be a valid url.",
                        number: "This value should be a valid number.",
                        integer: "This value should be a valid integer.",
                        digits: "This value should be digits.",
                        alphanum: "This value should be alphanumeric."
                    },
                    notblank: "This value should not be blank.",
                    required: "This value is required.",
                    pattern: "This value seems to be invalid.",
                    min: "This value should be greater than or equal to %s.",
                    max: "This value should be lower than or equal to %s.",
                    range: "This value should be between %s and %s.",
                    minlength: "This value is too short. It should have %s characters or more.",
                    maxlength: "This value is too long. It should have %s characters or fewer.",
                    length: "This value length is invalid. It should be between %s and %s characters long.",
                    mincheck: "You must select at least %s choices.",
                    maxcheck: "You must select %s choices or fewer.",
                    check: "You must select between %s and %s choices.",
                    equalto: "This value should be the same."
                }),
            void 0 !== window.ParsleyValidator && window.ParsleyValidator.addCatalog("en", window.ParsleyConfig.i18n.en, !0);
            var i = function(e, t, i) {
                if (this.__class__ = "Parsley",
                        this.__version__ = "2.0.6",
                        this.__id__ = o.hash(4),
                    void 0 === e)
                    throw new Error("You must give an element");
                if (void 0 !== i && "ParsleyForm" !== i.__class__)
                    throw new Error("Parent instance must be a ParsleyForm instance");
                return this.init(s(e), t, i)
            };
            i.prototype = {
                init: function(e, t, i) {
                    if (!e.length)
                        throw new Error("You must bind Parsley on an existing element.");
                    if (this.$element = e,
                            this.$element.data("Parsley")) {
                        var n = this.$element.data("Parsley");
                        return void 0 !== i && (n.parent = i),
                            n
                    }
                    return this.OptionsFactory = new d(a,o.get(window, "ParsleyConfig") || {},t,this.getNamespace(t)),
                        this.options = this.OptionsFactory.get(this),
                        this.$element.is("form") || o.attr(this.$element, this.options.namespace, "validate") && !this.$element.is(this.options.inputs) ? this.bind("parsleyForm") : this.$element.is(this.options.inputs) && !this.$element.is(this.options.excluded) ? this.isMultiple() ? this.handleMultiple(i) : this.bind("parsleyField", i) : this
                },
                isMultiple: function() {
                    return this.$element.is("input[type=radio], input[type=checkbox]") && void 0 === this.options.multiple || this.$element.is("select") && void 0 !== this.$element.attr("multiple")
                },
                handleMultiple: function(e) {
                    var t, i, n, a = this;
                    if (this.options = s.extend(this.options, e ? e.OptionsFactory.get(e) : {}, o.attr(this.$element, this.options.namespace)),
                            this.options.multiple ? i = this.options.multiple : void 0 !== this.$element.attr("name") && this.$element.attr("name").length ? i = t = this.$element.attr("name") : void 0 !== this.$element.attr("id") && this.$element.attr("id").length && (i = this.$element.attr("id")),
                        this.$element.is("select") && void 0 !== this.$element.attr("multiple"))
                        return this.bind("parsleyFieldMultiple", e, i || this.__id__);
                    if (void 0 === i)
                        return window.console && window.console.warn && window.console.warn("To be binded by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.", this.$element),
                            this;
                    if (i = i.replace(/(:|\.|\[|\]|\{|\}|\$)/g, ""),
                        void 0 !== t && s('input[name="' + t + '"]').each(function() {
                            s(this).is("input[type=radio], input[type=checkbox]") && s(this).attr(a.options.namespace + "multiple", i)
                        }),
                            s("[" + this.options.namespace + "multiple=" + i + "]").length)
                        for (var r = 0; r < s("[" + this.options.namespace + "multiple=" + i + "]").length; r++)
                            if (void 0 !== s(s("[" + this.options.namespace + "multiple=" + i + "]").get(r)).data("Parsley")) {
                                n = s(s("[" + this.options.namespace + "multiple=" + i + "]").get(r)).data("Parsley"),
                                this.$element.data("ParsleyFieldMultiple") || (n.addElement(this.$element),
                                    this.$element.attr(this.options.namespace + "id", n.__id__));
                                break
                            }
                    return this.bind("parsleyField", e, i, !0),
                    n || this.bind("parsleyFieldMultiple", e, i)
                },
                getNamespace: function(e) {
                    return void 0 !== this.$element.data("parsleyNamespace") ? this.$element.data("parsleyNamespace") : void 0 !== o.get(e, "namespace") ? e.namespace : void 0 !== o.get(window, "ParsleyConfig.namespace") ? window.ParsleyConfig.namespace : a.namespace
                },
                bind: function(e, t, i, n) {
                    var a;
                    switch (e) {
                        case "parsleyForm":
                            a = s.extend(new c(this.$element,this.OptionsFactory), new r, window.ParsleyExtend)._bindFields();
                            break;
                        case "parsleyField":
                            a = s.extend(new h(this.$element,this.OptionsFactory,t), new r, window.ParsleyExtend);
                            break;
                        case "parsleyFieldMultiple":
                            a = s.extend(new h(this.$element,this.OptionsFactory,t), new r, new p, window.ParsleyExtend)._init(i);
                            break;
                        default:
                            throw new Error(e + "is not a supported Parsley type")
                    }
                    return void 0 !== i && o.setAttr(this.$element, this.options.namespace, "multiple", i),
                        void 0 !== n ? this.$element.data("ParsleyFieldMultiple", a) : new RegExp("ParsleyF","i").test(a.__class__) && (this.$element.data("Parsley", a),
                            s.emit("parsley:" + ("parsleyForm" === e ? "form" : "field") + ":init", a)),
                        a
                }
            },
                s.fn.parsley = s.fn.psly = function(e) {
                    if (1 < this.length) {
                        var t = [];
                        return this.each(function() {
                            t.push(s(this).parsley(e))
                        }),
                            t
                    }
                    return s(this).length ? new i(this,e) : void (window.console && window.console.warn && window.console.warn("You must bind Parsley on an existing element."))
                }
                ,
                window.ParsleyUI = "function" == typeof o.get(window, "ParsleyConfig.ParsleyUI") ? (new window.ParsleyConfig.ParsleyUI).listen() : (new t).listen(),
            void 0 === window.ParsleyExtend && (window.ParsleyExtend = {}),
            void 0 === window.ParsleyConfig && (window.ParsleyConfig = {}),
                window.Parsley = window.psly = i,
                window.ParsleyUtils = o,
                window.ParsleyValidator = new e(window.ParsleyConfig.validators,window.ParsleyConfig.i18n),
            !1 !== o.get(window, "ParsleyConfig.autoBind") && s(function() {
                s("[data-parsley-validate]").length && s("[data-parsley-validate]").parsley()
            })
        }),
        window.ParsleyConfig = window.ParsleyConfig || {},
        window.ParsleyConfig.i18n = window.ParsleyConfig.i18n || {},
        window.ParsleyConfig.i18n.zh_cn = $.extend(window.ParsleyConfig.i18n.zh_cn || {}, {
            defaultMessage: "不正确的值",
            type: {
                email: "请输入一个有效的电子邮箱地址",
                url: "请输入一个有效的链接",
                number: "请输入正确的数字",
                integer: "请输入正确的整数",
                digits: "请输入正确的号码",
                alphanum: "请输入字母或数字"
            },
            notblank: "请输入值",
            required: "必填项",
            pattern: "格式不正确",
            min: "输入值请大于或等于 %s",
            max: "输入值请小于或等于 %s",
            range: "输入值应该在 %s 到 %s 之间",
            minlength: "请输入至少 %s 个字符",
            maxlength: "请输入至多 %s 个字符",
            length: "字符长度应该在 %s 到 %s 之间",
            mincheck: "请至少选择 %s 个选项",
            maxcheck: "请选择不超过 %s 个选项",
            check: "请选择 %s 到 %s 个选项",
            equalto: "输入值不同"
        }),
    void 0 !== window.ParsleyValidator && window.ParsleyValidator.addCatalog("zh_cn", window.ParsleyConfig.i18n.zh_cn, !0),
        define("parsleyjssc", ["parsleyjs"], function() {}),
        window.ParsleyConfig = window.ParsleyConfig || {},
        window.ParsleyConfig.i18n = window.ParsleyConfig.i18n || {},
        window.ParsleyConfig.i18n.zh_tw = $.extend(window.ParsleyConfig.i18n.zh_tw || {}, {
            defaultMessage: "這個值似乎是無效的。",
            type: {
                email: "請輸入一個有效的email。",
                url: "請輸入一個有效的網址。",
                number: "這個值應該是一個數字。",
                integer: "這個值應該是一個整數數字。",
                digits: "這個值應該是一個號碼。",
                alphanum: "這個值應該是字母或數字。"
            },
            notblank: "這個值不應該為空值。",
            required: "這個空格必須填寫。",
            pattern: "這個值似乎是無效的。",
            min: "輸入的值應該大於或等於 %s",
            max: "輸入的值應該小於或等於 %s",
            range: "這個值應該在 %s 和 %s 之間。",
            minlength: "這個值至少要 %s 字元。",
            maxlength: "這個值最多要 %s 字元。",
            length: "字元長度應該在 %s 和 %s",
            mincheck: "你至少要選擇 %s 個項目。",
            maxcheck: "你最多可選擇 %s 個項目。",
            check: "你必須選擇 %s 到 %s 個項目。",
            equalto: "輸入值不同"
        }),
    void 0 !== window.ParsleyValidator && window.ParsleyValidator.addCatalog("zh_tw", window.ParsleyConfig.i18n.zh_tw, !0),
        define("parsleyjstc", ["parsleyjs"], function() {}),
        window.ParsleyConfig = window.ParsleyConfig || {},
        window.ParsleyConfig.i18n = window.ParsleyConfig.i18n || {},
        window.ParsleyConfig.i18n.ko = $.extend(window.ParsleyConfig.i18n.ko || {}, {
            defaultMessage: "입력하신 내용이 올바르지 않습니다.",
            type: {
                email: "입력하신 이메일이 유효하지 않습니다.",
                url: "입력하신 URL이 유효하지 않습니다.",
                number: "입력하신 전화번호가 올바르지 않습니다.",
                integer: "입력하신 URL이 유효하지 않습니다.",
                digits: "숫자를 입력하여 주십시오.",
                alphanum: "입력하신 내용은 알파벳과 숫자의 조합이어야 합니다."
            },
            notblank: "공백은 입력하실 수 없습니다.",
            required: "필수 입력사항입니다.",
            pattern: "입력하신 내용이 올바르지 않습니다.",
            min: "입력하신 내용이 %s보다 크거나 같아야 합니다. ",
            max: "입력하신 내용이 %s보다 작거나 같아야 합니다.",
            range: "입력하신 내용이 %s보다 크고 %s 보다 작아야 합니다.",
            minlength: "%s 이상의 글자수를 입력하십시오. ",
            maxlength: "%s 이하의 글자수를 입력하십시오. ",
            length: "입력하신 내용의 글자수가 %s보다 크고 %s보다 작아야 합니다.",
            mincheck: "최소한 %s개를 선택하여 주십시오. ",
            maxcheck: "%s개 또는 그보다 적게 선택하여 주십시오.",
            check: "선택하신 내용이 %s보다 크거나 %s보다 작아야 합니다.",
            equalto: "같은 값을 입력하여 주십시오."
        }),
    void 0 !== window.ParsleyValidator && window.ParsleyValidator.addCatalog("ko", window.ParsleyConfig.i18n.ko, !0),
        define("parsleyjsko", ["parsleyjs"], function() {}),
        window.ParsleyConfig = window.ParsleyConfig || {},
        window.ParsleyConfig.i18n = window.ParsleyConfig.i18n || {},
        window.ParsleyConfig.i18n.ja = $.extend(window.ParsleyConfig.i18n.ja || {}, {
            defaultMessage: "無効な値です。",
            type: {
                email: "正しいメールアドレスを入力してください。",
                url: "正しいURLを入力してください。",
                number: "正しい数字を入力してください。",
                integer: "正しい数値を入力してください。",
                digits: "正しい桁数で入力してください。",
                alphanum: "正しい英数字を入力してください。"
            },
            notblank: "この値を入力してください",
            required: "この値は必須です。",
            pattern: "この値は無効です。",
            min: "%s 以上の値にしてください。",
            max: "%s 以下の値にしてください。",
            range: "%s から %s の値にしてください。",
            minlength: "%s 文字以上で入力してください。",
            maxlength: "%s 文字以下で入力してください。",
            length: "%s から %s 文字の間で入力してください。",
            mincheck: "%s 個以上選択してください。",
            maxcheck: "%s 個以下選択してください。",
            check: "%s から %s 個選択してください。",
            equalto: "値が違います。"
        }),
    void 0 !== window.ParsleyValidator && window.ParsleyValidator.addCatalog("ja", window.ParsleyConfig.i18n.ja, !0),
        define("parsleyjsja", ["parsleyjs"], function() {}),
        window.ParsleyConfig = window.ParsleyConfig || {},
        window.ParsleyConfig.i18n = window.ParsleyConfig.i18n || {},
        window.ParsleyConfig.i18n.th = $.extend(window.ParsleyConfig.i18n.th || {}, {
            defaultMessage: "ค่านี้ดูเหมือนว่าจะไม่ถูกต้อง",
            type: {
                email: "ค่านี้ควรจะเป็นอีเมลที่ถูกต้อง",
                url: "ค่านี้ควรจะเป็น url ที่ถูกต้อง",
                number: "ค่านี้ควรจะเป็นตัวเลขที่ถูกต้อง",
                integer: "ค่านี้ควรจะเป็นจำนวนเต็มที่ถูกต้อง",
                digits: "ค่านี้ควรเป็นทศนิยมที่ถูกต้อง",
                alphanum: "ค่านี้ควรเป็นอักขระตัวอักษรหรือตัวเลขที่ถูกต้อง"
            },
            notblank: "ค่านี้ไม่ควรจะว่าง",
            required: "ค่านี้จำเป็น",
            pattern: "ค่านี้ดูเหมือนว่าจะไม่ถูกต้อง",
            min: "ค่านี้ควรมากกว่าหรือเท่ากับ %s.",
            max: "ค่านี้ควรจะน้อยกว่าหรือเท่ากับ %s.",
            range: "ค่ายี้ควรจะอยู่ระหว่าง %s และ %s.",
            minlength: "ค่านี้สั้นเกินไป ควรจะมี %s อักขระหรือมากกว่า",
            maxlength: "ค่านี้ยาวเกินไป ควรจะมี %s อักขระหรือน้อยกว่า",
            length: "ความยาวของค่านี้ไม่ถูกต้อง ควรมีความยาวอยู่ระหว่าง %s และ %s อักขระ",
            mincheck: "คุณควรเลือกอย่างน้อย %s ตัวเลือก",
            maxcheck: "คุณควรเลือก %s ตัวเลือกหรือน้อยกว่า",
            check: "คุณควรเลือกระหว่าง %s และ %s ตัวเลือก",
            equalto: "ค่านี้ควรจะเหมือนกัน"
        }),
    void 0 !== window.ParsleyValidator && window.ParsleyValidator.addCatalog("th", window.ParsleyConfig.i18n.th, !0),
        define("parsleyjsth", ["parsleyjs"], function() {}),
        window.ParsleyConfig = window.ParsleyConfig || {},
        window.ParsleyConfig.i18n = window.ParsleyConfig.i18n || {},
        window.ParsleyConfig.i18n.fr = $.extend(window.ParsleyConfig.i18n.fr || {}, {
            defaultMessage: "Cette valeur semble non valide.",
            type: {
                email: "Cette valeur n'est pas une adresse email valide.",
                url: "Cette valeur n'est pas une URL valide.",
                number: "Cette valeur doit être un nombre.",
                integer: "Cette valeur doit être un entier.",
                digits: "Cette valeur doit être numérique.",
                alphanum: "Cette valeur doit être alphanumérique."
            },
            notblank: "Cette valeur ne peut pas être vide.",
            required: "Ce champ est requis.",
            pattern: "Cette valeur semble non valide.",
            min: "Cette valeur ne doit pas être inférieure à %s.",
            max: "Cette valeur ne doit pas excéder %s.",
            range: "Cette valeur doit être comprise entre %s et %s.",
            minlength: "Cette chaîne est trop courte. Elle doit avoir au minimum %s caractères.",
            maxlength: "Cette chaîne est trop longue. Elle doit avoir au maximum %s caractères.",
            length: "Cette valeur doit contenir entre %s et %s caractères.",
            mincheck: "Vous devez sélectionner au moins %s choix.",
            maxcheck: "Vous devez sélectionner %s choix maximum.",
            check: "Vous devez sélectionner entre %s et %s choix.",
            equalto: "Cette valeur devrait être identique."
        }),
    void 0 !== window.ParsleyValidator && window.ParsleyValidator.addCatalog("fr", window.ParsleyConfig.i18n.fr, !0),
        define("parsleyjsfr", ["parsleyjs"], function() {}),
        window.ParsleyConfig = window.ParsleyConfig || {},
        window.ParsleyConfig.i18n = window.ParsleyConfig.i18n || {},
        window.ParsleyConfig.i18n.de = $.extend(window.ParsleyConfig.i18n.de || {}, {
            defaultMessage: "Die Eingabe scheint nicht korrekt zu sein.",
            type: {
                email: "Die Eingabe muss eine gültige E-Mail-Adresse sein.",
                url: "Die Eingabe muss eine gültige URL sein.",
                number: "Die Eingabe muss eine Zahl sein.",
                integer: "Die Eingabe muss eine Zahl sein.",
                digits: "Die Eingabe darf nur Ziffern enthalten.",
                alphanum: "Die Eingabe muss alphanumerisch sein."
            },
            notblank: "Die Eingabe darf nicht leer sein.",
            required: "Dies ist ein Pflichtfeld.",
            pattern: "Die Eingabe scheint ungültig zu sein.",
            min: "Die Eingabe muss größer oder gleich %s sein.",
            max: "Die Eingabe muss kleiner oder gleich %s sein.",
            range: "Die Eingabe muss zwischen %s und %s liegen.",
            minlength: "Die Eingabe ist zu kurz. Es müssen mindestens %s Zeichen eingegeben werden.",
            maxlength: "Die Eingabe ist zu lang. Es dürfen höchstens %s Zeichen eingegeben werden.",
            length: "Die Länge der Eingabe ist ungültig. Es müssen zwischen %s und %s Zeichen eingegeben werden.",
            equalto: "Dieses Feld muss dem anderen entsprechen."
        }),
    void 0 !== window.ParsleyValidator && window.ParsleyValidator.addCatalog("de", window.ParsleyConfig.i18n.de, !0),
        define("parsleyjsde", ["parsleyjs"], function() {}),
        window.SfGather = new Gather(window.SfGather),
        define("sfgather", function() {}),
        define("utils/sfgather", ["backbone", "helper", "moment", "sfgather"], function(e, n) {
            var t;
            window._cmsConfig && (t = window._cmsConfig.sfgatherHost),
            t || (t = "http://10.202.109.3/json_data"),
                SfGather.init({
                    app_id: "cx",
                    url: t,
                    interval: 100
                }),
                window.sfgather = {
                    trackClicks: function(e, t) {
                        var i = {
                            event_id: t,
                            event_name: e,
                            nation: n.getSiteLocation(),
                            language: n.getSiteLanguage(),
                            opera_time: moment().format("YYYY-MM-DD HH:mm:ss")
                        };
                        SfGather.sendDataDirect(function() {}, i, 1)
                    }
                },
                $("body").delegate(".maidian", "click", function(e) {
                    var t = $(e.currentTarget)
                        , i = t.data("md-name")
                        , n = t.data("md-id");
                    sfgather.trackClicks(i, n)
                })
        }),
        define("initialSetups", ["underscore.string", "helper", "moment", "jquery", "jquery-ui", "jquery-placeholder", "momenttc", "momentko", "momentja", "momentru", "momentvn", "momentth", "momentde", "momentfr", "momentcn", "parsleyjs", "parsleyjssc", "parsleyjstc", "parsleyjsko", "parsleyjsja", "parsleyjsth", "parsleyjsfr", "parsleyjsde", "utils/sfgather"], function(e, t, i, n) {
            window.ORDER_SYMBOLS = "abcdefghigklmnopqrstuvwxyz",
                window.ParsleyValidator.setLocale(t.getParsleyLanguage()),
                window.cache = {},
            window.console || (window.console = {
                log: function() {}
            });
            var a = _.indexOf;
            _.indexOf = function(e, t, i) {
                return "string" == typeof e ? e.indexOf(t) : a(e, t, i)
            }
                ,
            String.prototype.trim || (String.prototype.trim = function() {
                    return this.replace(/^\s+|\s+$/gm, "")
                }
            ),
                n("input, textarea").placeholder(),
                String.prototype.commaReplace = function() {
                    return this.replace(/\uFF0C/g, ",")
                }
                ,
                _.str = e,
                _.mixin(_.str.exports());
            var r = n(".ie8").length
                , s = n(".ie9").length
                , o = r || s;
            n.ajaxSetup({
                data: {
                    lang: function() {
                        var e = window.location.pathname;
                        if (0 < e.indexOf("waybill"))
                            return "th" == t.getSiteLanguage() || "vi" == t.getSiteLanguage() || "fr" == t.getSiteLanguage() || "de" == t.getSiteLanguage() ? "en" : t.getSiteLanguage();
                        if (0 < e.indexOf("accept"))
                            return "tc" == t.getSiteLanguage() ? "sc" : t.getSiteLanguage();
                        if (0 < e.indexOf("rate"))
                            return t.getSiteLanguage();
                        return "ko" == t.getSiteLanguage() || "ja" == t.getSiteLanguage() || "ru" == t.getSiteLanguage() || "vi" == t.getSiteLanguage() || "th" == t.getSiteLanguage() || "fr" == t.getSiteLanguage() || "de" == t.getSiteLanguage() ? "en" : t.getSiteLanguage()
                    }(),
                    region: t.getSiteLocation(),
                    translate: "hk" != t.getSiteLocation() && "tw" != t.getSiteLocation() || "tc" !== t.getSiteLanguage() ? "" : "tc"
                },
                cache: !o
            }),
                window._l = function(e, t) {
                    var i = window._ejsLabel;
                    return i && i[e] ? i[e] : t || e
                }
                ,
                window._p = _.sprintf,
                window.Helper = t,
                String.prototype._p = function(e) {
                    var t = this;
                    for (var i in e)
                        t = t.replace("${" + i + "}", e[i]);
                    return t
                }
            ;
            var l = n("#cnnic-link");
            if (l) {
                var d = l.attr("href")
                    , c = "000000" + Math.round(1e6 * Math.random());
                c = c.substr(c.length - 6),
                    l.attr("href", _p(d, c))
            }
            function u() {
                if (n(this).hasClass("disabled"))
                    return !1
            }
            function h(e) {
                e.hasClass("disabled") && !e.data("binded-click") && (e.on("click", u),
                    e.data("binded-click", !0))
            }
            n(window).on("beforeunload", function() {
                n(".detail-location-input input").each(function() {
                    this.value = ""
                })
            }),
                i.lang(t.getStandardLocale()),
                n(window.document).on("mouseup", "button", function() {
                    h(n(this))
                }),
                n(window.document).on("keydown", "form", function(e) {
                    var t;
                    13 === e.keyCode && (h(n(this).find("button")),
                    (t = n(e.currentTarget)).data("binded-enter") || (t.on("keyup", function(e) {
                        if (13 === e.keyCode)
                            return e.stopPropagation(),
                                !1
                    }),
                        t.data("binded-enter", !0)))
                }),
                n(window.document).on("keydown", ".weixin", function(e) {
                    13 === e.keyCode && (n(this).hasClass("hover") ? n(this).removeClass("hover").attr("aria-expanded", !1) : n(this).addClass("hover").attr("aria-expanded", !0))
                }),
                n(window.document).on("keydown", ".accessible-click", function(e) {
                    if (13 === e.keyCode)
                        return e.preventDefault(),
                            n(this).trigger("click"),
                            !1
                })
        }),
        define("event", ["backbone", "underscore"], function(e, t) {
            var i = t.clone(e.Events);
            return i.RateSearch = "RateSearch",
                i.SwitchRateSearch = "SwitchRateSearch",
                i.OriginRegionChange = "OriginRegionChange",
                i.DestRegionChange = "DestRegionChange",
                i.DeliverySelectAll = "DeliverySelectAll",
                i.Needlogin = "Needlogin",
                i.RegisterLoginCallback = "RegisterLoginCallback",
                i.impNeedlogin = "impNeedlogin",
                i.nearlyBillCookied = "nearlyBillCookied",
                i.weightChange = "weightChange",
                i
        }),
        define("service/base", ["event", "helper"], function(d, c) {
            return function(e, t) {
                var i = {
                    type: "GET",
                    basePath: function(t) {
                        if (_webConfig.newServer.coreSystemIsWork) {
                            var i = !1;
                            if (_webConfig.newServer.coreSystemUrls.forEach(function(e) {
                                    new RegExp(e).test(t) && (i = !0)
                                }),
                                    i)
                                return "/sf-service-core-web/service/"
                        }
                        return "/sf-service-owf-web/service/"
                    }(e),
                    langRegion: {
                        lang: function() {
                            var e = window.location.pathname;
                            if (0 < e.indexOf("waybill"))
                                return "th" == c.getSiteLanguage() || "vi" == c.getSiteLanguage() || "fr" == c.getSiteLanguage() || "de" == c.getSiteLanguage() ? "en" : c.getSiteLanguage();
                            if (0 < e.indexOf("rate"))
                                return c.getSiteLanguage();
                            return "ko" == c.getSiteLanguage() || "ja" == c.getSiteLanguage() || "ru" == c.getSiteLanguage() || "vi" == c.getSiteLanguage() || "th" == c.getSiteLanguage() || "fr" == c.getSiteLanguage() || "de" == c.getSiteLanguage() ? "en" : c.getSiteLanguage()
                        }(),
                        region: c.getSiteLocation(),
                        translate: "hk" != c.getSiteLocation() && "tw" != c.getSiteLocation() || "tc" !== c.getSiteLanguage() ? "" : "tc"
                    },
                    gdata: {}
                };
                (t = _.extend({
                    url: e
                }, i, t)).url = t.basePath + t.url;
                var n = Backbone.ajax;
                _.extend(t.gdata, t.langRegion || {}),
                    "GET" === t.type.toUpperCase() ? (_.extend(t.gdata, t.data),
                        t.data = null) : (t.data = JSON.stringify(t.data),
                        t.contentType = t.contentType || "application/json;charset=UTF-8");
                var a = "?";
                for (var r in t.gdata)
                    a += r + "=" + t.gdata[r] + "&";
                t.url += a.substring(0, a.length - 1);
                var s = t.success;
                t.success = function(e) {
                    if (e && void 0 !== e.code && 121 == e.code)
                        return $.cookie("loginUser", "", {
                            expires: -1,
                            path: "/"
                        }),
                            void d.trigger(d.Needlogin, t.login);
                    s && s(e)
                }
                ;
                var o = t.error;
                t.error = function(e) {
                    o && o(e)
                }
                ;
                var l = t.complete;
                return t.complete = function(e) {
                    l && l(e)
                }
                    ,
                    n(t)
            }
        }),
        define("service/ajax", ["service/base"], function(n) {
            window.sfAjax = {
                getScript: function(e) {
                    return this.url = e.url,
                        delete e.url,
                        e.basePath = "",
                        e.langRegion = "",
                        n(this.url, _.extend({
                            dataType: "script",
                            timeout: 1e4
                        }, e))
                },
                getJson: function(e) {
                    return this.url = e.url,
                        delete e.url,
                        e.basePath = "",
                        e.langRegion = "",
                        n(this.url, _.extend({
                            dataType: "json"
                        }, e))
                },
                getMemberSendBillInfo: function(e) {
                    return this.url = "waybills/list/send",
                        n(this.url, _.extend({
                            cache: !1
                        }, e))
                },
                getMemberRecBillInfo: function(e) {
                    return this.url = "waybills/list/rec",
                        n(this.url, _.extend({
                            cache: !1
                        }, e))
                },
                getBillDetailByNum: function(e) {
                    this.url = "bills/${id}/route";
                    var t = this.url._p(e.data);
                    return delete e.data.id,
                        n(t, e)
                },
                cancelAppointmentBill: function(e) {
                    return this.url = "appointment/cancel",
                        n(this.url, _.extend({
                            type: "POST"
                        }, e))
                },
                qrLoginCheck: function(e) {
                    return this.url = "user/qrcode/loginCheck",
                        n(this.url, e)
                },
                queryCustomerControlStrategy: function(e) {
                    return this.url = "order/cxQueryBpsInfo",
                        n(this.url, _.extend({
                            type: "POST"
                        }, e))
                },
                saveOrUpdateAddress: function(e) {
                    return this.url = "address/save",
                        n(this.url, _.extend({
                            type: "POST"
                        }, e))
                },
                goodsNameCheck: function(e) {
                    return this.url = "order/goodsNameCheck",
                        n(this.url, e)
                },
                goodsNameAssociate: function(e) {
                    return this.url = "order/goodsNameAssociate",
                        n(this.url, e)
                },
                getexrate: function(e) {
                    return this.url = "exrate",
                        n(this.url, e)
                },
                compoundQueryAddressBook: function(e) {
                    return this.url = "cx/compoundQuery",
                        n(this.url, e)
                },
                getAddrDistIdByName: function(e) {
                    return this.url = "region/queryAddrDistIdByName",
                        n(this.url, _.extend({
                            type: "POST"
                        }, e))
                },
                getNearbyAddress: function(e) {
                    return this.url = "https://gis.sf-express.com/rgeo/api",
                        e.basePath = "",
                        e.langRegion = "",
                        n(this.url, _.extend({
                            dataType: "jsonp",
                            jsonp: "cb",
                            jsonpCallback: "__jp0"
                        }, e))
                },
                getDetailAddList: function(e) {
                    return this.url = "http://gis-rss-core-hint.sf-express.com/tip",
                        e.basePath = "",
                        e.langRegion = "",
                        n(this.url, _.extend({
                            dataType: "jsonp",
                            jsonp: "cb"
                        }, e))
                },
                validACSCountry: function(e) {
                    return this.url = "order/acs/isValidCountry",
                        n(this.url, _.extend({
                            type: "POST"
                        }, e))
                },
                subACSOrder: function(e) {
                    return this.url = "order/acs/create",
                        n(this.url, _.extend({
                            type: "POST"
                        }, e))
                },
                submitAcsBillNo: function(e) {
                    return this.url = "order/acs/querySolrWaybillno",
                        n(this.url, _.extend({
                            type: "POST"
                        }, e))
                },
                validAcsBillNo: function(e) {
                    return this.url = "order/acs/isValidSolrWaybillNo",
                        n(this.url, _.extend({
                            type: "POST",
                            async: !1
                        }, e))
                },
                fetchAddressBookList: function(e) {
                    return e.data = _.extend({
                        pageNo: 1,
                        rowCount: "8",
                        condition: ""
                    }, e.data),
                        this.url = "address/list",
                        n(this.url, _.extend({
                            cache: !1
                        }, e))
                },
                deleteOneAddress: function(e) {
                    this.url = "address/${id}/delete";
                    var t = this.url._p(e.data);
                    return delete e.data.id,
                        n(t, _.extend({
                            type: "POST"
                        }, e))
                },
                getAddressById: function(e) {
                    this.url = "address/${id}/query";
                    var t = this.url._p(e.data);
                    return n(t, e)
                },
                saveToAddressBook: function(e) {
                    return this.url = "address/save",
                        n(this.url, _.extend({
                            type: "POST"
                        }, e))
                },
                setDefaultAddress: function(e) {
                    return this.url = "cx/addressBook/updateDefaultAddress",
                        n(this.url, _.extend({
                            type: "POST"
                        }, e))
                },
                fetchDefaultAndFirstAddress: function(e) {
                    return this.url = "cx/addressBook/getDefaultAddress",
                        n(this.url, e)
                },
                uploadAddressBook: function(e) {
                    return this.url = "address/importAddress",
                        n(this.url, _.extend({
                            type: "POST"
                        }, e))
                },
                checkMounthAccount: function(e) {
                    this.url = "cx/${account}/isCustomerCard";
                    var t = this.url._p(e.data);
                    return delete e.data.account,
                        n(t, _.extend({
                            type: "POST",
                            async: !1
                        }, e))
                },
                smsUserNotification: function(e) {
                    this.url = "sms/user/${mobile}/notification";
                    var t = this.url._p(e.gdata);
                    return delete e.gdata.mobile,
                        n(t, _.extend({
                            type: "POST"
                        }, e))
                },
                login: function(e) {
                    var t = {
                        "SMS-Verification-App": "user",
                        "SMS-Verification-Code": e.code,
                        "SMS-Verification-Mobile": e.mobile,
                        "SMS-Verification-Mobile-Area": e.area,
                        isRegister: !0
                    };
                    return n("user/sms/login", _.extend({
                        type: "POST",
                        headers: t
                    }, e))
                },
                changeAppointBill: function(e) {
                    this.url = "appointment/${appointmentNo}/detail";
                    var t = this.url._p(e.data);
                    return delete e.data.appointmentNo,
                        n(t, _.extend({
                            cache: !1
                        }, e))
                },
                updateAppointOrder: function(e) {
                    return this.url = "appointment/updateOrder",
                        n(this.url, _.extend({
                            type: "POST"
                        }, e))
                },
                deleteWayBill: function(e) {
                    return this.url = "appointment/delete",
                        n(this.url, _.extend({
                            type: "POST"
                        }, e))
                },
                queryAppointment: function(e) {
                    return this.url = "order/queryAppointment",
                        n(this.url, _.extend({
                            type: "POST"
                        }, e))
                },
                submitNewOrder: function(e) {
                    return this.url = "order/create",
                        n(this.url, _.extend({
                            type: "POST"
                        }, e))
                },
                submitQrNewOrder: function(e) {
                    return this.url = "order/scan",
                        n(this.url, _.extend({
                            type: "POST"
                        }, e))
                },
                routes: function(e) {
                    this.url = "bills/${billNumbers}/routes";
                    var t = this.url._p(e.data);
                    return delete e.data.billNumbers,
                        n(t, e)
                },
                regist: function(e) {
                    this.url = "user/${mobile}/regist";
                    var t = this.url._p(e)
                        , i = {
                        "SMS-Verification-Mobile": e.mobile,
                        "SMS-Verification-Mobile-Area": e.area
                    };
                    return n(t, _.extend({
                        type: "POST",
                        headers: i
                    }, e))
                },
                addressSplit: function(e) {
                    return this.url = "order/orderAddressSplit",
                        n(this.url, _.extend({
                            type: "POST"
                        }, e))
                },
                electronicStub: function(e) {
                    this.url = "memberBills/${id}/getBillEleStub";
                    var t = this.url._p(e.data);
                    return n(t, e)
                },
                signFigure: function(e) {
                    this.url = "memberBills/${id}/image";
                    var t = Helper.getSiteLanguage();
                    -1 < ["th", "ru", "vi", "ge", "fr"].indexOf(t) && (t = "en"),
                        e.langRegion = {
                            lang: t,
                            region: Helper.getSiteLocation()
                        };
                    var i = this.url._p(e.data);
                    return n(i, e),
                        i
                }
            }
        }),
        define("models/detailRegion", ["backbone"], function(e) {
            return e.Model.extend({})
        }),
        define("collections/detailRegions", ["backbone", "models/detailRegion", "helper"], function(e, t, s) {
            var n = "A000810000"
                , a = "A000820000"
                , r = "A000710000"
                , o = "A000086000";
            return e.Collection.extend({
                model: t,
                initialize: function(e) {
                    this.customURL = e.customURL
                },
                relativeURLOnRegion: function(e) {
                    return "POPULAR" === e.code ? "region/popularRegions" : "HKMCTW" === e.code || "GLOBAL" === e.code ? this.subRegionURL("A000000000", -1) : this.subRegionURL(e.code, e.level)
                },
                subRegionURL: function(e, t) {
                    var i = this.customURL() || "region/%s/subRegions?level=%s";
                    return 0 < $(".range-page").length && "international" === $(".range-page .detail-location-picker li.current").data("tab") && (i = "region/%s/subRegions/origins?level=%s"),
                    0 < $(".range-page").length && "hk-mc-tw" === $(".range-page .detail-location-picker li.current").data("tab") && (i = "region/%s/subRegions?level=%s"),
                    null == t && (t = -1),
                        _.sprintf(i, e, t)
                },
                parse: function(e) {
                    return e = _.filter(e, function(e) {
                        return e.name
                    }),
                        _.each(e, function(e) {
                            -1 !== _.indexOf([n, a, r], e.parentCode) && (e.countryCode = e.parentCode),
                                e.name = e.name.replace("印度尼西亚", "印尼").replace("印度尼西亞", "印尼"),
                            "hk" === s.getSiteLocation() && ("澳大利亚" !== e.name && "澳大利亞" !== e.name || (e.name = e.name.replace("澳大利亚", "澳洲").replace("澳大利亞", "澳洲"))),
                                e.name = e.name.replace(/( Province)|( City)|( District)|( County)/g, "")
                        }),
                        e
                },
                parseHKTWMCAndGlobal: function(e) {
                    if ("HKMCTW" === e || "GLOBAL" === e) {
                        var i = "HKMCTW" === e
                            , t = _.filter(this.models, function(e) {
                            if (e.get("code") === o)
                                return !1;
                            var t = -1 !== _.indexOf([n, a, r], e.get("code"));
                            return i ? t : !t
                        });
                        this.set(t)
                    }
                },
                fetchRegions: function(e, i) {
                    this.fetchingRegionLevel = e.level,
                        this.fetchingRegionCode = e.code,
                        this.fetchedRegionsBackup = this.fetchedRegionsBackup || {};
                    var t = this.fetchedRegionsBackup[e.code];
                    if (t && t.relativeURLOnRegion === this.relativeURLOnRegion(e))
                        return this.reset().set(t.data),
                            this.isFetchingData = !1,
                            this.errorLoadingData = !1,
                        i && i(t.respond, t.status),
                            void this.trigger("dataFetched");
                    this.isFetchingData = !0,
                        this.errorLoadingData = !1;
                    var n = this;
                    this.trigger("dataFetched");
                    var a = this.relativeURLOnRegion(e);
                    this.url = s.getRESTfulDomain(a);
                    var r = e.code;
                    this.fetch({
                        complete: function(e, t) {
                            "success" === t && (n.fetchedRegionsBackup[r] = {
                                respond: e,
                                status: t,
                                data: n.toJSON(),
                                relativeURLOnRegion: a
                            }),
                            i && n.fetchingRegionCode === r && (n.fetchingRegionCode = null,
                                i(e, t))
                        },
                        success: function() {
                            n.parseHKTWMCAndGlobal(r),
                            n.fetchingRegionCode === r && (n.isFetchingData = !1,
                                n.errorLoadingData = !1,
                                n.trigger("dataFetched"))
                        },
                        error: function() {
                            n.fetchingRegionCode === e.code && (n.isFetchingData = !1,
                                n.errorLoadingData = !0,
                                n.trigger("dataFetched"))
                        }
                    })
                }
            }, {
                isChinaMainland: function(e) {
                    return e === o
                },
                isNotAboard: function(e) {
                    return e === n || e === a || e === r || e === o
                },
                isNotAboardForRate: function(e) {
                    return "852" == e || "853" == e || "886" == e
                }
            })
        }),
        define("models/regionTabs", ["backbone", "helper"], function(e, n) {
            return e.Model.extend({
                initialize: function(e) {
                    this.getSelectedArea = e.getSelectedArea,
                        this.getMaxLevel = e.getMaxLevel,
                        this.getMinLevel = e.getMinLevel,
                        this.setSelectedArea = e.setSelectedArea,
                        this.datasource = {
                            "main-land-provinces": [{
                                displayName: _l("省/直辖市"),
                                pinToLeft: !0,
                                parentRegion: {
                                    name: _l("省/直辖市"),
                                    code: "A000086000"
                                },
                                selected: !0
                            }],
                            "main-land": [{
                                displayName: _l("常用市"),
                                alwaysDisplayName: !0,
                                pinToLeft: !0,
                                parentRegion: {
                                    name: _l("常用市"),
                                    code: "POPULAR"
                                },
                                selected: !0
                            }, {
                                displayName: _l("省/直辖市"),
                                pinToLeft: !0,
                                parentRegion: {
                                    name: _l("省/直辖市"),
                                    code: "A000086000"
                                },
                                selected: !1
                            }],
                            "hk-mc-tw": [{
                                pinToLeft: !0,
                                displayName: _l("港澳台"),
                                parentRegion: {
                                    name: _l("港澳台"),
                                    code: "HKMCTW"
                                },
                                selected: !0
                            }],
                            international: [{
                                displayName: _l("海外"),
                                parentRegion: {
                                    name: _l("海外"),
                                    code: "GLOBAL"
                                },
                                selected: !0
                            }],
                            hongkong: [{
                                displayName: _l("香港"),
                                parentRegion: {
                                    name: _l("香港"),
                                    code: "HKMCTW"
                                },
                                selected: !0
                            }]
                        }
                },
                getAreaDefaultRegionTab: function(e) {
                    return this.datasource[e]
                },
                saveStateToCookie: function() {
                    Modernizr.localstorage && (localStorage.setItem("currentSelectedArea", this.getSelectedArea()),
                        localStorage.setItem(this.getSelectedArea() + n.assemabledLocationAndLanguageQureyString(), JSON.stringify(this.regionTabs)))
                },
                restoreStateFromCookie: function(e) {
                    if (Modernizr.localstorage) {
                        var t;
                        t = e ? this.getSelectedArea() : localStorage.getItem("currentSelectedArea") || this.getSelectedArea();
                        var i = JSON.parse(localStorage.getItem(t + n.assemabledLocationAndLanguageQureyString()));
                        _.isEmpty(i) ? this.resetRegionTab() : (this.regionTabs = this.trimSavedStateIfNeeded(i),
                            this.setSelectedArea(t),
                            this.trigger("regionTabUpdated"))
                    }
                },
                trimSavedStateIfNeeded: function(e) {
                    var i = this;
                    (e = _.filter(e, function(e) {
                        var t;
                        return t = e.selectedRegion ? i.getMaxLevel(e.selectedRegion.code, e.selectedRegion.countryCode) : i.getMaxLevel(),
                        !e.parentRegion.level || e.parentRegion.level < t
                    }),
                        this.getCurrentSelectedTab()) || (_.last(_.filter(e, function(e) {
                        return e.selectedRegion
                    })).selected = !0);
                    return e
                },
                resetRegionTab: function() {
                    this.regionTabs = this.getAreaDefaultRegionTab(this.getSelectedArea()),
                        this.trigger("regionTabUpdated")
                },
                getRegionTabs: function() {
                    return this.regionTabs
                },
                cleanRegionTabsSelectedStatus: function() {
                    _.each(this.regionTabs, function(e) {
                        e.selected = !1
                    })
                },
                activeTabByParentCode: function(t) {
                    this.cleanRegionTabsSelectedStatus();
                    var e = _.find(this.regionTabs, function(e) {
                        return e.parentRegion.code === t
                    });
                    e && (e.selected = !0),
                        this.trimTabsAfterCurrentIndex(),
                        this.trigger("regionTabUpdated")
                },
                getCurrentSelectedTab: function() {
                    var e = _.findWhere(this.regionTabs, {
                        selected: !0
                    }) || _.first(this.regionTabs);
                    return e && (e.selected = !0),
                        e
                },
                hasReachedMaxLevel: function() {
                    var e = this.getCurrentSelectedTab().selectedRegion;
                    return e.level >= this.getMaxLevel(e.code, e.countryCode, e.rateCode)
                },
                hasReachedMinLevel: function() {
                    var e = this.getCurrentSelectedTab().selectedRegion;
                    return e.level >= this.getMinLevel(e.code, e.countryCode, e.rateCode)
                },
                updateCurrentTabWithSelectedRegion: function(e) {
                    var t = this.getCurrentSelectedTab();
                    t && t.pinToLeft && _.each(this.regionTabs, function(e) {
                        e.pinToLeft && (e.selectedRegion = null)
                    }),
                    t && (t.selectedRegion = e)
                },
                trimTabsAfterCurrentIndex: function() {
                    var i;
                    _.each(this.regionTabs, function(e, t) {
                        (e.pinToLeft || !0 === e.selected) && (i = t)
                    }),
                        this.regionTabs = _.first(this.regionTabs, i + 1)
                },
                getSelectedLocationDescription: function() {
                    var e = _.map(this.regionTabs, function(e) {
                        return e.selectedRegion ? e.selectedRegion.title : ""
                    });
                    return (e = _.filter(e, function(e) {
                        return e && 0 < e.length
                    })).join("-")
                },
                appendSelectedRegionToTabs: function(e) {
                    this.cleanRegionTabsSelectedStatus(),
                        this.regionTabs.push({
                            parentRegion: e,
                            selected: !0
                        })
                },
                handleNewChoosedRegion: function(e) {
                    this.trimTabsAfterCurrentIndex(),
                        this.updateCurrentTabWithSelectedRegion(e)
                }
            })
        }),
        function(_, e) {
            "use strict";
            var m, c, t, i, n = _.layui && layui.define, u = {
                getPath: (i = document.currentScript ? document.currentScript.src : function() {
                    for (var e, t = document.scripts, i = t.length - 1, n = i; 0 < n; n--)
                        if ("interactive" === t[n].readyState) {
                            e = t[n].src;
                            break
                        }
                    return e || t[i].src
                }(),
                    i.substring(0, i.lastIndexOf("/") + 1)),
                config: {},
                end: {},
                minIndex: 0,
                minLeft: [],
                btn: ["&#x786E;&#x5B9A;", "&#x53D6;&#x6D88;"],
                type: ["dialog", "page", "iframe", "loading", "tips"],
                getStyle: function(e, t) {
                    var i = e.currentStyle ? e.currentStyle : _.getComputedStyle(e, null);
                    return i[i.getPropertyValue ? "getPropertyValue" : "getAttribute"](t)
                },
                link: function(e, t, i) {
                    if (g.path) {
                        var n = document.getElementsByTagName("head")[0]
                            , a = document.createElement("link");
                        "string" == typeof t && (i = t);
                        var r = "layuicss-" + (i || e).replace(/\.|\//g, "")
                            , s = 0;
                        a.rel = "stylesheet",
                            a.href = g.path + e,
                            a.id = r,
                        document.getElementById(r) || n.appendChild(a),
                        "function" == typeof t && function e() {
                            return 80 < ++s ? _.console && void 0 : void (1989 === parseInt(u.getStyle(document.getElementById(r), "width")) ? t() : setTimeout(e, 100))
                        }()
                    }
                }
            }, g = {
                v: "3.1.1",
                ie: (t = navigator.userAgent.toLowerCase(),
                !!(_.ActiveXObject || "ActiveXObject"in _) && ((t.match(/msie\s(\d+)/) || [])[1] || "11")),
                index: _.layer && _.layer.v ? 1e5 : 0,
                path: u.getPath,
                config: function(e, t) {
                    return e = e || {},
                        g.cache = u.config = m.extend({}, u.config, e),
                        g.path = u.config.path || g.path,
                    "string" == typeof e.extend && (e.extend = [e.extend]),
                    u.config.path && g.ready(),
                    e.extend && (n ? layui.addcss("modules/layer/" + e.extend) : u.link("theme/" + e.extend)),
                        this
                },
                ready: function(e) {
                    var t = (n ? "modules/layer/" : "theme/") + "default/layer.css?v=" + g.v;
                    return n ? layui.addcss(t, e, "layer") : u.link(t, e, "layer"),
                        this
                },
                alert: function(e, t, i) {
                    var n = "function" == typeof t;
                    return n && (i = t),
                        g.open(m.extend({
                            content: e,
                            yes: i
                        }, n ? {} : t))
                },
                confirm: function(e, t, i, n) {
                    var a = "function" == typeof t;
                    return a && (n = i,
                        i = t),
                        g.open(m.extend({
                            content: e,
                            btn: u.btn,
                            yes: i,
                            btn2: n
                        }, a ? {} : t))
                },
                msg: function(e, t, i) {
                    var n = "function" == typeof t
                        , a = u.config.skin
                        , r = (a ? a + " " + a + "-msg" : "") || "layui-layer-msg"
                        , s = d.anim.length - 1;
                    return n && (i = t),
                        g.open(m.extend({
                            content: e,
                            time: 3e3,
                            shade: !1,
                            skin: r,
                            title: !1,
                            closeBtn: !1,
                            btn: !1,
                            resize: !1,
                            end: i
                        }, n && !u.config.skin ? {
                            skin: r + " layui-layer-hui",
                            anim: s
                        } : ((-1 === (t = t || {}).icon || void 0 === t.icon && !u.config.skin) && (t.skin = r + " " + (t.skin || "layui-layer-hui")),
                            t)))
                },
                load: function(e, t) {
                    return g.open(m.extend({
                        type: 3,
                        icon: e || 0,
                        resize: !1,
                        shade: .01
                    }, t))
                },
                tips: function(e, t, i) {
                    return g.open(m.extend({
                        type: 4,
                        content: [e, t],
                        closeBtn: !1,
                        time: 3e3,
                        shade: !1,
                        resize: !1,
                        fixed: !1,
                        maxWidth: 210
                    }, i))
                }
            }, a = function(e) {
                var t = this;
                t.index = ++g.index,
                    t.config = m.extend({}, t.config, u.config, e),
                    document.body ? t.creat() : setTimeout(function() {
                        t.creat()
                    }, 30)
            };
            a.pt = a.prototype;
            var d = ["layui-layer", ".layui-layer-title", ".layui-layer-main", ".layui-layer-dialog", "layui-layer-iframe", "layui-layer-content", "layui-layer-btn", "layui-layer-close"];
            d.anim = ["layer-anim-00", "layer-anim-01", "layer-anim-02", "layer-anim-03", "layer-anim-04", "layer-anim-05", "layer-anim-06"],
                a.pt.config = {
                    type: 0,
                    shade: .3,
                    fixed: !0,
                    move: d[1],
                    title: "&#x4FE1;&#x606F;",
                    offset: "auto",
                    area: "auto",
                    closeBtn: 1,
                    time: 0,
                    zIndex: 19891014,
                    maxWidth: 360,
                    anim: 0,
                    isOutAnim: !0,
                    icon: -1,
                    moveType: 1,
                    resize: !0,
                    scrollbar: !0,
                    tips: 2
                },
                a.pt.vessel = function(e, t) {
                    var i, n = this.index, a = this.config, r = a.zIndex + n, s = "object" == typeof a.title, o = a.maxmin && (1 === a.type || 2 === a.type), l = a.title ? '<div class="layui-layer-title" style="' + (s ? a.title[1] : "") + '">' + (s ? a.title[0] : a.title) + "</div>" : "";
                    return a.zIndex = r,
                        t([a.shade ? '<div class="layui-layer-shade" id="layui-layer-shade' + n + '" times="' + n + '" style="z-index:' + (r - 1) + '; "></div>' : "", '<div class="' + d[0] + " layui-layer-" + u.type[a.type] + (0 != a.type && 2 != a.type || a.shade ? "" : " layui-layer-border") + " " + (a.skin || "") + '" id="' + d[0] + n + '" type="' + u.type[a.type] + '" times="' + n + '" showtime="' + a.time + '" conType="' + (e ? "object" : "string") + '" style="z-index: ' + r + "; width:" + a.area[0] + ";height:" + a.area[1] + (a.fixed ? "" : ";position:absolute;") + '">' + (e && 2 != a.type ? "" : l) + '<div id="' + (a.id || "") + '" class="layui-layer-content' + (0 == a.type && -1 !== a.icon ? " layui-layer-padding" : "") + (3 == a.type ? " layui-layer-loading" + a.icon : "") + '">' + (0 == a.type && -1 !== a.icon ? '<i class="layui-layer-ico layui-layer-ico' + a.icon + '"></i>' : "") + (1 == a.type && e ? "" : a.content || "") + '</div><span class="layui-layer-setwin">' + (i = o ? '<a class="layui-layer-min" href="javascript:;"><cite></cite></a><a class="layui-layer-ico layui-layer-max" href="javascript:;"></a>' : "",
                        a.closeBtn && (i += '<a class="layui-layer-ico ' + d[7] + " " + d[7] + (a.title ? a.closeBtn : 4 == a.type ? "1" : "2") + '" href="javascript:;"></a>'),
                            i) + "</span>" + (a.btn ? function() {
                            var e = "";
                            "string" == typeof a.btn && (a.btn = [a.btn]);
                            for (var t = 0, i = a.btn.length; t < i; t++)
                                e += '<a class="' + d[6] + t + '">' + a.btn[t] + "</a>";
                            return '<div class="' + d[6] + " layui-layer-btn-" + (a.btnAlign || "") + '">' + e + "</div>"
                        }() : "") + (a.resize ? '<span class="layui-layer-resize"></span>' : "") + "</div>"], l, m('<div class="layui-layer-move"></div>')),
                        this
                }
                ,
                a.pt.creat = function() {
                    var n = this
                        , a = n.config
                        , r = n.index
                        , s = "object" == typeof (l = a.content)
                        , o = m("body");
                    if (!a.id || !m("#" + a.id)[0]) {
                        switch ("string" == typeof a.area && (a.area = "auto" === a.area ? ["", ""] : [a.area, ""]),
                        a.shift && (a.anim = a.shift),
                        6 == g.ie && (a.fixed = !1),
                            a.type) {
                            case 0:
                                a.btn = "btn"in a ? a.btn : u.btn[0],
                                    g.closeAll("dialog");
                                break;
                            case 2:
                                var l = a.content = s ? a.content : [a.content || "http://layer.layui.com", "auto"];
                                a.content = '<iframe scrolling="' + (a.content[1] || "auto") + '" allowtransparency="true" id="' + d[4] + r + '" name="' + d[4] + r + '" onload="this.className=\'\';" class="layui-layer-load" frameborder="0" src="' + a.content[0] + '"></iframe>';
                                break;
                            case 3:
                                delete a.title,
                                    delete a.closeBtn,
                                -1 === a.icon && a.icon,
                                    g.closeAll("loading");
                                break;
                            case 4:
                                s || (a.content = [a.content, "body"]),
                                    a.follow = a.content[1],
                                    a.content = a.content[0] + '<i class="layui-layer-TipsG"></i>',
                                    delete a.title,
                                    a.tips = "object" == typeof a.tips ? a.tips : [a.tips, !0],
                                a.tipsMore || g.closeAll("tips")
                        }
                        if (n.vessel(s, function(e, t, i) {
                                o.append(e[0]),
                                    s ? 2 == a.type || 4 == a.type ? m("body").append(e[1]) : l.parents("." + d[0])[0] || (l.data("display", l.css("display")).show().addClass("layui-layer-wrap").wrap(e[1]),
                                        m("#" + d[0] + r).find("." + d[5]).before(t)) : o.append(e[1]),
                                m(".layui-layer-move")[0] || o.append(u.moveElem = i),
                                    n.layero = m("#" + d[0] + r),
                                a.scrollbar || d.html.css("overflow", "hidden").attr("layer-full", r)
                            }).auto(r),
                                m("#layui-layer-shade" + n.index).css({
                                    "background-color": a.shade[1] || "#000",
                                    opacity: a.shade[0] || a.shade
                                }),
                            2 == a.type && 6 == g.ie && n.layero.find("iframe").attr("src", l[0]),
                                4 == a.type ? n.tips() : n.offset(),
                            a.fixed && c.on("resize", function() {
                                n.offset(),
                                (/^\d+%$/.test(a.area[0]) || /^\d+%$/.test(a.area[1])) && n.auto(r),
                                4 == a.type && n.tips()
                            }),
                            a.time <= 0 || setTimeout(function() {
                                g.close(n.index)
                            }, a.time),
                                n.move().callback(),
                                d.anim[a.anim]) {
                            var e = "layer-anim " + d.anim[a.anim];
                            n.layero.addClass(e).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend", function() {
                                m(this).removeClass(e)
                            })
                        }
                        a.isOutAnim && n.layero.data("isOutAnim", !0)
                    }
                }
                ,
                a.pt.auto = function(e) {
                    var t = this.config
                        , i = m("#" + d[0] + e);
                    "" === t.area[0] && 0 < t.maxWidth && (g.ie && g.ie < 8 && t.btn && i.width(i.innerWidth()),
                    i.outerWidth() > t.maxWidth && i.width(t.maxWidth));
                    var n = [i.innerWidth(), i.innerHeight()]
                        , a = i.find(d[1]).outerHeight() || 0
                        , r = i.find("." + d[6]).outerHeight() || 0
                        , s = function(e) {
                        (e = i.find(e)).height(n[1] - a - r - 2 * (0 | parseFloat(e.css("padding-top"))))
                    };
                    switch (t.type) {
                        case 2:
                            s("iframe");
                            break;
                        default:
                            "" === t.area[1] ? 0 < t.maxHeight && i.outerHeight() > t.maxHeight ? (n[1] = t.maxHeight,
                                s("." + d[5])) : t.fixed && n[1] >= c.height() && (n[1] = c.height(),
                                s("." + d[5])) : s("." + d[5])
                    }
                    return this
                }
                ,
                a.pt.offset = function() {
                    var e = this
                        , t = e.config
                        , i = e.layero
                        , n = [i.outerWidth(), i.outerHeight()]
                        , a = "object" == typeof t.offset;
                    e.offsetTop = (c.height() - n[1]) / 2,
                        e.offsetLeft = (c.width() - n[0]) / 2,
                        a ? (e.offsetTop = t.offset[0],
                            e.offsetLeft = t.offset[1] || e.offsetLeft) : "auto" !== t.offset && ("t" === t.offset ? e.offsetTop = 0 : "r" === t.offset ? e.offsetLeft = c.width() - n[0] : "b" === t.offset ? e.offsetTop = c.height() - n[1] : "l" === t.offset ? e.offsetLeft = 0 : "lt" === t.offset ? (e.offsetTop = 0,
                            e.offsetLeft = 0) : "lb" === t.offset ? (e.offsetTop = c.height() - n[1],
                            e.offsetLeft = 0) : "rt" === t.offset ? (e.offsetTop = 0,
                            e.offsetLeft = c.width() - n[0]) : "rb" === t.offset ? (e.offsetTop = c.height() - n[1],
                            e.offsetLeft = c.width() - n[0]) : e.offsetTop = t.offset),
                    t.fixed || (e.offsetTop = /%$/.test(e.offsetTop) ? c.height() * parseFloat(e.offsetTop) / 100 : parseFloat(e.offsetTop),
                        e.offsetLeft = /%$/.test(e.offsetLeft) ? c.width() * parseFloat(e.offsetLeft) / 100 : parseFloat(e.offsetLeft),
                        e.offsetTop += c.scrollTop(),
                        e.offsetLeft += c.scrollLeft()),
                    i.attr("minLeft") && (e.offsetTop = c.height() - (i.find(d[1]).outerHeight() || 0),
                        e.offsetLeft = i.css("left")),
                        i.css({
                            top: e.offsetTop,
                            left: e.offsetLeft
                        })
                }
                ,
                a.pt.tips = function() {
                    var e = this.config
                        , t = this.layero
                        , i = [t.outerWidth(), t.outerHeight()]
                        , n = m(e.follow);
                    n[0] || (n = m("body"));
                    var a = {
                        width: n.outerWidth(),
                        height: n.outerHeight(),
                        top: n.offset().top,
                        left: n.offset().left
                    }
                        , r = t.find(".layui-layer-TipsG")
                        , s = e.tips[0];
                    e.tips[1] || r.remove(),
                        a.autoLeft = function() {
                            0 < a.left + i[0] - c.width() ? (a.tipLeft = a.left + a.width - i[0],
                                r.css({
                                    right: 12,
                                    left: "auto"
                                })) : a.tipLeft = a.left
                        }
                        ,
                        a.where = [function() {
                            a.autoLeft(),
                                a.tipTop = a.top - i[1] - 10,
                                r.removeClass("layui-layer-TipsB").addClass("layui-layer-TipsT").css("border-right-color", e.tips[1])
                        }
                            , function() {
                                a.tipLeft = a.left + a.width + 10,
                                    a.tipTop = a.top,
                                    r.removeClass("layui-layer-TipsL").addClass("layui-layer-TipsR").css("border-bottom-color", e.tips[1])
                            }
                            , function() {
                                a.autoLeft(),
                                    a.tipTop = a.top + a.height + 10,
                                    r.removeClass("layui-layer-TipsT").addClass("layui-layer-TipsB").css("border-right-color", e.tips[1])
                            }
                            , function() {
                                a.tipLeft = a.left - i[0] - 10,
                                    a.tipTop = a.top,
                                    r.removeClass("layui-layer-TipsR").addClass("layui-layer-TipsL").css("border-bottom-color", e.tips[1])
                            }
                        ],
                        a.where[s - 1](),
                        1 === s ? a.top - (c.scrollTop() + i[1] + 16) < 0 && a.where[2]() : 2 === s ? 0 < c.width() - (a.left + a.width + i[0] + 16) || a.where[3]() : 3 === s ? 0 < a.top - c.scrollTop() + a.height + i[1] + 16 - c.height() && a.where[0]() : 4 === s && 0 < i[0] + 16 - a.left && a.where[1](),
                        t.find("." + d[5]).css({
                            "background-color": e.tips[1],
                            "padding-right": e.closeBtn ? "30px" : ""
                        }),
                        t.css({
                            left: a.tipLeft - (e.fixed ? c.scrollLeft() : 0),
                            top: a.tipTop - (e.fixed ? c.scrollTop() : 0)
                        })
                }
                ,
                a.pt.move = function() {
                    var s = this
                        , o = s.config
                        , e = m(document)
                        , l = s.layero
                        , t = l.find(o.move)
                        , i = l.find(".layui-layer-resize")
                        , d = {};
                    return o.move && t.css("cursor", "move"),
                        t.on("mousedown", function(e) {
                            e.preventDefault(),
                            o.move && (d.moveStart = !0,
                                d.offset = [e.clientX - parseFloat(l.css("left")), e.clientY - parseFloat(l.css("top"))],
                                u.moveElem.css("cursor", "move").show())
                        }),
                        i.on("mousedown", function(e) {
                            e.preventDefault(),
                                d.resizeStart = !0,
                                d.offset = [e.clientX, e.clientY],
                                d.area = [l.outerWidth(), l.outerHeight()],
                                u.moveElem.css("cursor", "se-resize").show()
                        }),
                        e.on("mousemove", function(e) {
                            if (d.moveStart) {
                                var t = e.clientX - d.offset[0]
                                    , i = e.clientY - d.offset[1]
                                    , n = "fixed" === l.css("position");
                                if (e.preventDefault(),
                                        d.stX = n ? 0 : c.scrollLeft(),
                                        d.stY = n ? 0 : c.scrollTop(),
                                        !o.moveOut) {
                                    var a = c.width() - l.outerWidth() + d.stX
                                        , r = c.height() - l.outerHeight() + d.stY;
                                    t < d.stX && (t = d.stX),
                                    a < t && (t = a),
                                    i < d.stY && (i = d.stY),
                                    r < i && (i = r)
                                }
                                l.css({
                                    left: t,
                                    top: i
                                })
                            }
                            if (o.resize && d.resizeStart) {
                                t = e.clientX - d.offset[0],
                                    i = e.clientY - d.offset[1];
                                e.preventDefault(),
                                    g.style(s.index, {
                                        width: d.area[0] + t,
                                        height: d.area[1] + i
                                    }),
                                    d.isResize = !0,
                                o.resizing && o.resizing(l)
                            }
                        }).on("mouseup", function(e) {
                            d.moveStart && (delete d.moveStart,
                                u.moveElem.hide(),
                            o.moveEnd && o.moveEnd(l)),
                            d.resizeStart && (delete d.resizeStart,
                                u.moveElem.hide())
                        }),
                        s
                }
                ,
                a.pt.callback = function() {
                    var t = this
                        , i = t.layero
                        , n = t.config;
                    t.openLayer(),
                    n.success && (2 == n.type ? i.find("iframe").on("load", function() {
                        n.success(i, t.index)
                    }) : n.success(i, t.index)),
                    6 == g.ie && t.IE6(i),
                        i.find("." + d[6]).children("a").on("click", function() {
                            var e = m(this).index();
                            0 === e ? n.yes ? n.yes(t.index, i) : n.btn1 ? n.btn1(t.index, i) : g.close(t.index) : !1 === (n["btn" + (e + 1)] && n["btn" + (e + 1)](t.index, i)) || g.close(t.index)
                        }),
                        i.find("." + d[7]).on("click", function() {
                            !1 === (n.cancel && n.cancel(t.index, i)) || g.close(t.index)
                        }),
                    n.shadeClose && m("#layui-layer-shade" + t.index).on("click", function() {
                        g.close(t.index)
                    }),
                        i.find(".layui-layer-min").on("click", function() {
                            !1 === (n.min && n.min(i)) || g.min(t.index, n)
                        }),
                        i.find(".layui-layer-max").on("click", function() {
                            m(this).hasClass("layui-layer-maxmin") ? (g.restore(t.index),
                            n.restore && n.restore(i)) : (g.full(t.index, n),
                                setTimeout(function() {
                                    n.full && n.full(i)
                                }, 100))
                        }),
                    n.end && (u.end[t.index] = n.end)
                }
                ,
                u.reselect = function() {
                    m.each(m("select"), function(e, t) {
                        var i = m(this);
                        i.parents("." + d[0])[0] || 1 == i.attr("layer") && m("." + d[0]).length < 1 && i.removeAttr("layer").show(),
                            i = null
                    })
                }
                ,
                a.pt.IE6 = function(e) {
                    m("select").each(function(e, t) {
                        var i = m(this);
                        i.parents("." + d[0])[0] || "none" === i.css("display") || i.attr({
                            layer: "1"
                        }).hide(),
                            i = null
                    })
                }
                ,
                a.pt.openLayer = function() {
                    g.zIndex = this.config.zIndex,
                        g.setTop = function(e) {
                            return g.zIndex = parseInt(e[0].style.zIndex),
                                e.on("mousedown", function() {
                                    g.zIndex++,
                                        e.css("z-index", g.zIndex + 1)
                                }),
                                g.zIndex
                        }
                }
                ,
                u.record = function(e) {
                    var t = [e.width(), e.height(), e.position().top, e.position().left + parseFloat(e.css("margin-left"))];
                    e.find(".layui-layer-max").addClass("layui-layer-maxmin"),
                        e.attr({
                            area: t
                        })
                }
                ,
                u.rescollbar = function(e) {
                    d.html.attr("layer-full") == e && (d.html[0].style.removeProperty ? d.html[0].style.removeProperty("overflow") : d.html[0].style.removeAttribute("overflow"),
                        d.html.removeAttr("layer-full"))
                }
                ,
                (_.layer = g).getChildFrame = function(e, t) {
                    return t = t || m("." + d[4]).attr("times"),
                        m("#" + d[0] + t).find("iframe").contents().find(e)
                }
                ,
                g.getFrameIndex = function(e) {
                    return m("#" + e).parents("." + d[4]).attr("times")
                }
                ,
                g.iframeAuto = function(e) {
                    if (e) {
                        var t = g.getChildFrame("html", e).outerHeight()
                            , i = m("#" + d[0] + e)
                            , n = i.find(d[1]).outerHeight() || 0
                            , a = i.find("." + d[6]).outerHeight() || 0;
                        i.css({
                            height: t + n + a
                        }),
                            i.find("iframe").css({
                                height: t
                            })
                    }
                }
                ,
                g.iframeSrc = function(e, t) {
                    m("#" + d[0] + e).find("iframe").attr("src", t)
                }
                ,
                g.style = function(e, t, i) {
                    var n = m("#" + d[0] + e)
                        , a = n.find(".layui-layer-content")
                        , r = n.attr("type")
                        , s = n.find(d[1]).outerHeight() || 0
                        , o = n.find("." + d[6]).outerHeight() || 0;
                    n.attr("minLeft"),
                    r !== u.type[3] && r !== u.type[4] && (i || (parseFloat(t.width) <= 260 && (t.width = 260),
                    parseFloat(t.height) - s - o <= 64 && (t.height = 64 + s + o)),
                        n.css(t),
                        o = n.find("." + d[6]).outerHeight(),
                        r === u.type[2] ? n.find("iframe").css({
                            height: parseFloat(t.height) - s - o
                        }) : a.css({
                            height: parseFloat(t.height) - s - o - parseFloat(a.css("padding-top")) - parseFloat(a.css("padding-bottom"))
                        }))
                }
                ,
                g.min = function(e, t) {
                    var i = m("#" + d[0] + e)
                        , n = i.find(d[1]).outerHeight() || 0
                        , a = i.attr("minLeft") || 181 * u.minIndex + "px"
                        , r = i.css("position");
                    u.record(i),
                    u.minLeft[0] && (a = u.minLeft[0],
                        u.minLeft.shift()),
                        i.attr("position", r),
                        g.style(e, {
                            width: 180,
                            height: n,
                            left: a,
                            top: c.height() - n,
                            position: "fixed",
                            overflow: "hidden"
                        }, !0),
                        i.find(".layui-layer-min").hide(),
                    "page" === i.attr("type") && i.find(d[4]).hide(),
                        u.rescollbar(e),
                    i.attr("minLeft") || u.minIndex++,
                        i.attr("minLeft", a)
                }
                ,
                g.restore = function(e) {
                    var t = m("#" + d[0] + e)
                        , i = t.attr("area").split(",");
                    t.attr("type"),
                        g.style(e, {
                            width: parseFloat(i[0]),
                            height: parseFloat(i[1]),
                            top: parseFloat(i[2]),
                            left: parseFloat(i[3]),
                            position: t.attr("position"),
                            overflow: "visible"
                        }, !0),
                        t.find(".layui-layer-max").removeClass("layui-layer-maxmin"),
                        t.find(".layui-layer-min").show(),
                    "page" === t.attr("type") && t.find(d[4]).show(),
                        u.rescollbar(e)
                }
                ,
                g.full = function(t) {
                    var e, i = m("#" + d[0] + t);
                    u.record(i),
                    d.html.attr("layer-full") || d.html.css("overflow", "hidden").attr("layer-full", t),
                        clearTimeout(e),
                        e = setTimeout(function() {
                            var e = "fixed" === i.css("position");
                            g.style(t, {
                                top: e ? 0 : c.scrollTop(),
                                left: e ? 0 : c.scrollLeft(),
                                width: c.width(),
                                height: c.height()
                            }, !0),
                                i.find(".layui-layer-min").hide()
                        }, 100)
                }
                ,
                g.title = function(e, t) {
                    m("#" + d[0] + (t || g.index)).find(d[1]).html(e)
                }
                ,
                g.close = function(n) {
                    var a = m("#" + d[0] + n)
                        , r = a.attr("type");
                    if (a[0]) {
                        var s = "layui-layer-wrap"
                            , e = function() {
                            if (r === u.type[1] && "object" === a.attr("conType")) {
                                a.children(":not(." + d[5] + ")").remove();
                                for (var e = a.find("." + s), t = 0; t < 2; t++)
                                    e.unwrap();
                                e.css("display", e.data("display")).removeClass(s)
                            } else {
                                if (r === u.type[2])
                                    try {
                                        var i = m("#" + d[4] + n)[0];
                                        i.contentWindow.document.write(""),
                                            i.contentWindow.close(),
                                            a.find("." + d[5])[0].removeChild(i)
                                    } catch (e) {}
                                a[0].innerHTML = "",
                                    a.remove()
                            }
                            "function" == typeof u.end[n] && u.end[n](),
                                delete u.end[n]
                        };
                        a.data("isOutAnim") && a.addClass("layer-anim layer-anim-close"),
                            m("#layui-layer-moves, #layui-layer-shade" + n).remove(),
                        6 == g.ie && u.reselect(),
                            u.rescollbar(n),
                        a.attr("minLeft") && (u.minIndex--,
                            u.minLeft.push(a.attr("minLeft"))),
                            g.ie && g.ie < 10 || !a.data("isOutAnim") ? e() : setTimeout(function() {
                                e()
                            }, 200)
                    }
                }
                ,
                g.closeAll = function(i) {
                    m.each(m("." + d[0]), function() {
                        var e = m(this)
                            , t = i ? e.attr("type") === i : 1;
                        t && g.close(e.attr("times")),
                            t = null
                    })
                }
            ;
            var r = g.cache || {}
                , v = function(e) {
                return r.skin ? " " + r.skin + " " + r.skin + "-" + e : ""
            };
            g.prompt = function(i, n) {
                var e = "";
                if ("function" == typeof (i = i || {}) && (n = i),
                        i.area) {
                    var t = i.area;
                    e = 'style="width: ' + t[0] + "; height: " + t[1] + ';"',
                        delete i.area
                }
                var a, r = 2 == i.formType ? '<textarea class="layui-layer-input"' + e + ">" + (i.value || "") + "</textarea>" : '<input type="' + (1 == i.formType ? "password" : "text") + '" class="layui-layer-input" value="' + (i.value || "") + '">', s = i.success;
                return delete i.success,
                    g.open(m.extend({
                        type: 1,
                        btn: ["&#x786E;&#x5B9A;", "&#x53D6;&#x6D88;"],
                        content: r,
                        skin: "layui-layer-prompt" + v("prompt"),
                        maxWidth: c.width(),
                        success: function(e) {
                            (a = e.find(".layui-layer-input")).focus(),
                            "function" == typeof s && s(e)
                        },
                        resize: !1,
                        yes: function(e) {
                            var t = a.val();
                            "" === t ? a.focus() : t.length > (i.maxlength || 500) ? g.tips("&#x6700;&#x591A;&#x8F93;&#x5165;" + (i.maxlength || 500) + "&#x4E2A;&#x5B57;&#x6570;", a, {
                                tips: 1
                            }) : n && n(t, e, a)
                        }
                    }, i))
            }
                ,
                g.tab = function(a) {
                    var n = (a = a || {}).tab || {}
                        , r = "layui-this"
                        , i = a.success;
                    return delete a.success,
                        g.open(m.extend({
                            type: 1,
                            skin: "layui-layer-tab" + v("tab"),
                            resize: !1,
                            title: function() {
                                var e = n.length
                                    , t = 1
                                    , i = "";
                                if (0 < e)
                                    for (i = '<span class="' + r + '">' + n[0].title + "</span>"; t < e; t++)
                                        i += "<span>" + n[t].title + "</span>";
                                return i
                            }(),
                            content: '<ul class="layui-layer-tabmain">' + function() {
                                var e = n.length
                                    , t = 1
                                    , i = "";
                                if (0 < e)
                                    for (i = '<li class="layui-layer-tabli ' + r + '">' + (n[0].content || "no content") + "</li>"; t < e; t++)
                                        i += '<li class="layui-layer-tabli">' + (n[t].content || "no  content") + "</li>";
                                return i
                            }() + "</ul>",
                            success: function(e) {
                                var t = e.find(".layui-layer-title").children()
                                    , n = e.find(".layui-layer-tabmain").children();
                                t.on("mousedown", function(e) {
                                    e.stopPropagation ? e.stopPropagation() : e.cancelBubble = !0;
                                    var t = m(this)
                                        , i = t.index();
                                    t.addClass(r).siblings().removeClass(r),
                                        n.eq(i).show().siblings().hide(),
                                    "function" == typeof a.change && a.change(i)
                                }),
                                "function" == typeof i && i(e)
                            }
                        }, a))
                }
                ,
                g.photos = function(a, e, t) {
                    var i, n, r, s, o = {};
                    if ((a = a || {}).photos) {
                        var l = a.photos.constructor === Object
                            , d = l ? a.photos : {}
                            , c = d.data || []
                            , u = d.start || 0;
                        o.imgIndex = 1 + (0 | u),
                            a.img = a.img || "img";
                        var h = a.success;
                        if (delete a.success,
                                l) {
                            if (0 === c.length)
                                return g.msg("&#x6CA1;&#x6709;&#x56FE;&#x7247;")
                        } else {
                            var p = m(a.photos)
                                , f = function() {
                                c = [],
                                    p.find(a.img).each(function(e) {
                                        var t = m(this);
                                        t.attr("layer-index", e),
                                            c.push({
                                                alt: t.attr("alt"),
                                                pid: t.attr("layer-pid"),
                                                src: t.attr("layer-src") || t.attr("src"),
                                                thumb: t.attr("src")
                                            })
                                    })
                            };
                            if (f(),
                                0 === c.length)
                                return;
                            if (e || p.on("click", a.img, function() {
                                    var e = m(this).attr("layer-index");
                                    g.photos(m.extend(a, {
                                        photos: {
                                            start: e,
                                            data: c,
                                            tab: a.tab
                                        },
                                        full: a.full
                                    }), !0),
                                        f()
                                }),
                                    !e)
                                return
                        }
                        o.imgprev = function(e) {
                            o.imgIndex--,
                            o.imgIndex < 1 && (o.imgIndex = c.length),
                                o.tabimg(e)
                        }
                            ,
                            o.imgnext = function(e, t) {
                                o.imgIndex++,
                                o.imgIndex > c.length && (o.imgIndex = 1,
                                    t) || o.tabimg(e)
                            }
                            ,
                            o.keyup = function(e) {
                                if (!o.end) {
                                    var t = e.keyCode;
                                    e.preventDefault(),
                                        37 === t ? o.imgprev(!0) : 39 === t ? o.imgnext(!0) : 27 === t && g.close(o.index)
                                }
                            }
                            ,
                            o.tabimg = function(e) {
                                if (!(c.length <= 1))
                                    return d.start = o.imgIndex - 1,
                                        g.close(o.index),
                                        g.photos(a, !0, e)
                            }
                            ,
                            o.event = function() {
                                o.bigimg.hover(function() {
                                    o.imgsee.show()
                                }, function() {
                                    o.imgsee.hide()
                                }),
                                    o.bigimg.find(".layui-layer-imgprev").on("click", function(e) {
                                        e.preventDefault(),
                                            o.imgprev()
                                    }),
                                    o.bigimg.find(".layui-layer-imgnext").on("click", function(e) {
                                        e.preventDefault(),
                                            o.imgnext()
                                    }),
                                    m(document).on("keyup", o.keyup)
                            }
                            ,
                            o.loadi = g.load(1, {
                                shade: !("shade"in a) && .9,
                                scrollbar: !1
                            }),
                            i = c[u].src,
                            n = function(n) {
                                g.close(o.loadi),
                                    o.index = g.open(m.extend({
                                        type: 1,
                                        id: "layui-layer-photos",
                                        area: function() {
                                            var e = [n.width, n.height]
                                                , t = [m(_).width() - 100, m(_).height() - 100];
                                            if (!a.full && (e[0] > t[0] || e[1] > t[1])) {
                                                var i = [e[0] / t[0], e[1] / t[1]];
                                                i[1] < i[0] ? (e[0] = e[0] / i[0],
                                                    e[1] = e[1] / i[0]) : i[0] < i[1] && (e[0] = e[0] / i[1],
                                                    e[1] = e[1] / i[1])
                                            }
                                            return [e[0] + "px", e[1] + "px"]
                                        }(),
                                        title: !1,
                                        shade: .9,
                                        shadeClose: !0,
                                        closeBtn: !1,
                                        move: ".layui-layer-phimg img",
                                        moveType: 1,
                                        scrollbar: !1,
                                        moveOut: !0,
                                        isOutAnim: !1,
                                        skin: "layui-layer-photos" + v("photos"),
                                        content: '<div class="layui-layer-phimg"><img src="' + c[u].src + '" alt="' + (c[u].alt || "") + '" layer-pid="' + c[u].pid + '"><div class="layui-layer-imgsee">' + (1 < c.length ? '<span class="layui-layer-imguide"><a href="javascript:;" class="layui-layer-iconext layui-layer-imgprev"></a><a href="javascript:;" class="layui-layer-iconext layui-layer-imgnext"></a></span>' : "") + '<div class="layui-layer-imgbar" style="display:' + (t ? "block" : "") + '"><span class="layui-layer-imgtit"><a href="javascript:;">' + (c[u].alt || "") + "</a><em>" + o.imgIndex + "/" + c.length + "</em></span></div></div></div>",
                                        success: function(e, t) {
                                            o.bigimg = e.find(".layui-layer-phimg"),
                                                o.imgsee = e.find(".layui-layer-imguide,.layui-layer-imgbar"),
                                                o.event(e),
                                            a.tab && a.tab(c[u], e),
                                            "function" == typeof h && h(e)
                                        },
                                        end: function() {
                                            o.end = !0,
                                                m(document).off("keyup", o.keyup)
                                        }
                                    }, a))
                            }
                            ,
                            r = function() {
                                g.close(o.loadi),
                                    g.msg("&#x5F53;&#x524D;&#x56FE;&#x7247;&#x5730;&#x5740;&#x5F02;&#x5E38;<br>&#x662F;&#x5426;&#x7EE7;&#x7EED;&#x67E5;&#x770B;&#x4E0B;&#x4E00;&#x5F20;&#xFF1F;", {
                                        time: 3e4,
                                        btn: ["&#x4E0B;&#x4E00;&#x5F20;", "&#x4E0D;&#x770B;&#x4E86;"],
                                        yes: function() {
                                            1 < c.length && o.imgnext(!0, !0)
                                        }
                                    })
                            }
                            ,
                            (s = new Image).src = i,
                            s.complete ? n(s) : (s.onload = function() {
                                    s.onload = null,
                                        n(s)
                                }
                                    ,
                                    s.onerror = function(e) {
                                        s.onerror = null,
                                            r(e)
                                    }
                            )
                    }
                }
                ,
                u.run = function(e) {
                    c = (m = e)(_),
                        d.html = m("html"),
                        g.open = function(e) {
                            return new a(e).index
                        }
                }
                ,
                _.layui && layui.define ? (g.ready(),
                    layui.define("jquery", function(e) {
                        g.path = layui.cache.dir,
                            u.run(layui.$),
                            e("layer", _.layer = g)
                    })) : "function" == typeof define && define.amd ? define("xlayer", ["jquery"], function() {
                    return u.run(_.jQuery),
                        g
                }) : (u.run(_.jQuery),
                    g.ready())
        }(window),
        define("sflayer", ["xlayer"], function(s) {
            var o = function() {
                $(".layui-layer-btn a").on("click", function(e) {
                    e.stopPropagation()
                })
            };
            return window.layer = {
                msg: function(e, t, i) {
                    return s.msg(e, t, i)
                },
                confirm: function(e, t, i, n) {
                    "function" == typeof t && (n = i,
                        i = t,
                        t = {}),
                        (t = _.extend({
                            title: _l("温馨提示"),
                            resize: !1,
                            move: !1
                        }, t)).skin = "sf-layer " + (t.skin || "");
                    var a = t.noStop;
                    delete t.noStop;
                    var r = s.confirm(e, t, i, n);
                    return a || o(),
                        r
                },
                load: function(e, t) {
                    return e = e || 0,
                        t = _.extend({
                            shade: [.2, "#000"]
                        }, t),
                        s.load(e, t)
                },
                close: function(e) {
                    s.close(e)
                },
                tips: function(e, t, i) {
                    return s.tips(e, t, i)
                },
                alert: function(e, t, i) {
                    "function" == typeof t && (i = t,
                        t = {}),
                        (t = _.extend({
                            title: _l("温馨提示"),
                            btn: [_l("确定")],
                            resize: !1,
                            move: !1
                        }, t)).skin = "sf-layer " + (t.skin || "");
                    var n = s.alert(e, t, i);
                    return o(),
                        n
                },
                open: function(e) {
                open: function(e) {
                    return (e = _.extend({
                        type: 1,
                        closeBtn: 1,
                        resize: !1,
                        move: !1
                    }, e)).skin = "sf-layer " + (e.skin || ""),
                        s.open(e)
                }
            },
                window.layer
        }),
        define("views/detailedLocationPicker/picker", ["backbone", "templates", "collections/detailRegions", "models/regionTabs", "sflayer", "jquery-ui"], function(e, n, t, a, o) {
            return e.View.extend({
                events: {
                    "click .input-group-addon": "toggleLocationPicker",
                    "click input": "handleInputClick",
                    "click .detail-location-picker": "stopPropagation",
                    mouseout: "stopPropagation",
                    "click .area-level-tabs li": "areaTabSwitch",
                    "click .region-level-tabs li": "regionTabClicked",
                    "click .regions li a": "regionChanged",
                    "click .pages-switch li": "pageSwitcherClicked",
                    "change input": "selectedRegionChanged",
                    toggle: "toggleLocationPicker",
                    "click .hide-picker": "clearCurrentSelection",
                    "keydown input": "hideLocationPicker",
                    "blur input": "checkInputChanged"
                },
                data: {
                    regionTabs: []
                },
                initialize: function(e, t) {
                    this.$el.unbind(),
                        _.bindAll(this, "getMaxLevel"),
                        _.bindAll(this, "getMinLevel"),
                        _.bindAll(this, "getSelectedArea"),
                        _.bindAll(this, "getCustomURL"),
                        _.bindAll(this, "setSelectedArea"),
                        this.data = _.extend({}, this.data, t),
                        this.regionTabsModel = new a({
                            getMaxLevel: this.getMaxLevel,
                            getMinLevel: this.getMinLevel,
                            getSelectedArea: this.getSelectedArea,
                            setSelectedArea: this.setSelectedArea
                        }),
                        this.setupLocationPicker(),
                        this.setupDetailRegions(),
                        this.restoreLocationPickerState(),
                        this.primaryButton = $(".location-inputs .primary-button"),
                        this.destInput = $("input.dests").last(),
                        this.originInput = $("input.origins").last(),
                        this.DUTCG = ["A311000000", "A111000000", "A591100000", "A121000000", "A000830000", "A00084", "A00720000", "A000252001", "A000356001", "C000000374", "C000001091", "C000002920", "C000005726", "001", "0001", "0052", "0056", "007", "030", "031", "032", "033", "034", "0351", "0352", "0353", "0356", "0357", "0358", "0359", "0370", "0371", "0372", "0385", "0386", "036", "039", "040", "0420", "0421", "043", "044", "045", "046", "048", "049", "055", "056", "060", "061", "062", "063", "064", "065", "066", "081", "082", "084", "085", "091", "092", "094", "095", "097", "0971", "673", "880", "976"],
                        this.DUTCGLength = this.DUTCG.length,
                        this.isDests = this.$input.hasClass("dests"),
                        this.originReqUrl = "",
                        this.destReqUrl = "",
                        this.bindAutoComplete();
                    var i = this.$(".detail-location-input.origin-price").data("selected-area")
                        , n = this.$(".detail-location-input.dest-price").data("selected-area");
                    "hk-mc-tw" === i && this.$(".detail-location-input.origin-price").data("max-level", 1),
                    "hk-mc-tw" === n && this.$(".detail-location-input.origin-price").data("max-level", 1)
                },
                bindAutoComplete: function() {
                    var s = this;
                    s.$("input").autocomplete({
                        minLength: 1,
                        delay: 300,
                        select: function(e, t) {
                            if (e.stopPropagation(),
                                    s.removePickerTip(),
                                    s.$input.val(t.item.value),
                                s.$el.hasClass("origin-price") || s.$el.hasClass("dest-price"))
                                s.handleInputedRegion(t.item);
                            else {
                                var i = _.values(t.item);
                                s.setLocation(_.without(i, _.last(i)))
                            }
                            $(e.target).hasClass("dests") && !_.isEmpty(s.originInput.val()) && s.primaryButton.removeClass("disabled")
                        },
                        open: function() {
                            s.hideLocationPicker()
                        },
                        source: function(e, n) {
                            var a = e.term;
                            if (0 < s.$el.find("input.origins").length || 0 < s.$el.find("input.dests").length) {
                                if (s.$el.hasClass("origin-price") || s.$el.hasClass("dest-price")) {
                                    if (a in cache && (n(cache[a]),
                                            !s.isDests))
                                        return;
                                    s.originReqUrl = "region/live/origin",
                                        s.destReqUrl = "region/live/origin/" + s.originInput.data("code") + "/dests"
                                } else {
                                    if (a && "sc" === Helper.getSiteLanguage() && !(a = a.replace(/(^\s+)|(\s+$)/g, "")).match(/^[\u4e00-\u9fa5]{2,}$/))
                                        return;
                                    if (s.originReqUrl = "region/live/order/origin",
                                            s.destReqUrl = "region/live/order/origin/" + s.originInput.data("code") + "/dests",
                                        s.isDests && !s.originInput.data("code"))
                                        return void o.alert(_l("请先选择寄件人的上门地址"))
                                }
                                var t = []
                                    , i = s.areaTabs();
                                i.showAreaTab ? (i.showMainLand && t.push("main-land"),
                                i.showHKMCTW && t.push("hk-mc-tw"),
                                i.showGlobe && t.push("international")) : t.push(s.getSelectedArea());
                                var r = {
                                    query: e.term,
                                    limit: 100,
                                    level: 3,
                                    areaTab: t.join(",")
                                };
                                $.getJSON(Helper.getRESTfulDomain(s.isDests ? s.destReqUrl : s.originReqUrl), r, function(e, t, i) {
                                    if (e && 0 == e.length)
                                        return s.$("input").autocomplete("close"),
                                            void (0 == s.$el.find(".picker-tip").length && s.$el.append('<span class="picker-tip" style="color:red;margin-top: 20px;">' + _l("未找到您所在的地区信息，请重新选择") + "</span>"));
                                    s.removePickerTip(),
                                        s.$el.hasClass("origin-price") || s.$el.hasClass("dest-price") ? cache[a] = _.chain(e).filter(function(e) {
                                            for (var t = 0; t < s.DUTCGLength; t++)
                                                if (e.code === s.DUTCG[t])
                                                    return !1;
                                            return !0
                                        }).map(function(e) {
                                            return e.title = e.value = e.label = e.name,
                                                e
                                        }).value() : cache[a] = e,
                                        cache[a] && 0 == cache[a].length ? 0 == s.$el.find(".picker-tip").length && s.$el.append('<span class="picker-tip" style="color:red;margin-top: 20px;">' + _l("未找到您所在的地区信息，请重新选择") + "</span>") : n(cache[a])
                                })
                            }
                        }
                    }).autocomplete("instance")._renderItem = function(e, t) {
                        return s.$el.hasClass("origin-price") || s.$el.hasClass("dest-price") ? $("<li>").append(t.label + "<br></li>").appendTo(e) : (t.value = _.pluck(t, "name").join("-"),
                            $("<li>").append(t.value + "<br></li>").appendTo(e))
                    }
                },
                handleInputClick: function(e) {
                    this.bindAutoComplete(),
                        this.toggleLocationPicker(e)
                },
                removePickerTip: function() {
                    0 < this.$el.find(".picker-tip").length && this.$(".picker-tip").remove()
                },
                saveLocationPickerState: function() {
                    this.$el.data("do-save-state") && "international" !== this.getSelectedArea() && this.regionTabsModel.saveStateToCookie()
                },
                checkInputChanged: function(e) {
                    var t = $(e.target)
                        , i = this.regionTabsModel.getSelectedLocationDescription();
                    i && t.val() === i || this.$detailedLocationPicker.is(":visible") || (this.regionTabsModel.resetRegionTab(),
                        0 < navigator.userAgent.indexOf("MSIE 8.0") ? t.val(t.attr("placeholder")).addClass("placeholder").trigger("blur.placeholder") : t.val("").data("code", ""),
                        this.primaryButton.addClass("disable"))
                },
                restoreLocationPickerState: function() {
                    var e = this;
                    if (e.$el.data("do-restore-state")) {
                        this.regionTabsModel.restoreStateFromCookie(this.$el.data("only-current-tab")),
                            setTimeout(function() {
                                e.$("input.origins").trigger("change")
                            });
                        var t = _.last(_.filter(this.regionTabsModel.getRegionTabs(), function(e) {
                            return e.selectedRegion
                        }));
                        if (!t)
                            return;
                        if (this.$input.data("code") && this.$input.data("code") !== t.selectedRegion.code)
                            return void this.regionTabsModel.resetRegionTab();
                        t && t.selectedRegion.level >= this.getMinLevel(t.selectedRegion.code, t.selectedRegion.countryCode, t.selectedRegion.rateCode) && (this.updateLocationPickerSelectionToInput(t.selectedRegion),
                            this.triggerRegionModelUpdated())
                    } else
                        this.regionTabsModel.resetRegionTab()
                },
                resetLocationPicker: function() {
                    this.regionTabsModel.resetRegionTab(),
                        this.$input.val(""),
                        this.$input.data("code", "")
                },
                getMaxLevel: function(e, t, i) {
                    return t && this.$el.data("max-" + t) ? this.$el.data("max-" + t) : i && this.$el.data("max-" + i) ? this.$el.data("max-" + i) : this.$el.data("max-level") || 5
                },
                getMinLevel: function(e, t, i) {
                    return t && this.$el.data("min-" + t) ? this.$el.data("min-" + t) : this.$el.data("min-level") || this.getMaxLevel(e, t, i)
                },
                getSelectedArea: function() {
                    if (this.$el.data("selected-area"))
                        return this.$el.data("selected-area");
                    window._cmsConfig && window._cmsConfig.language;
                    var e = window._cmsConfig && window._cmsConfig.region || "cn";
                    return "hk" === e || "tw" === e ? "hk-mc-tw" : "cn" === e ? "main-land" : "international"
                },
                setSelectedArea: function(e) {
                    this.$el.data("selected-area", e)
                },
                getCustomURL: function() {
                    return this.$el.data("custom-url")
                },
                setupLocationPicker: function() {
                    this.$detailedLocationPicker = $('<div class="detail-location-picker toggle-plugins"></div>'),
                        this.$el.append(this.$detailedLocationPicker),
                        this.$input = this.$("input")
                },
                setupDetailRegions: function() {
                    this.regions = new t({
                        customURL: this.getCustomURL
                    }),
                        this.listenTo(this.regions, "dataFetched", this.render);
                    var e = this;
                    this.listenTo(this.regionTabsModel, "regionTabUpdated", function() {
                        e.$detailedLocationPicker.is(":visible") ? (e.regions.fetchRegions(e.regionTabsModel.getCurrentSelectedTab().parentRegion),
                            e.regionTabDirty = !1) : e.regionTabDirty = !0
                    })
                },
                availableRegions: function() {
                    return !0 === this.$el.data("show-all-region") ? this.regions.models : this.regions.where({
                        availableAsOrigin: !0
                    })
                },
                unavailableRegions: function() {
                    return !0 === this.$el.data("show-all-region") ? [] : this.regions.where({
                        availableAsOrigin: !1
                    })
                },
                areaTabs: function() {
                    return {
                        showAreaTab: !this.$el.data("hide-area-tab"),
                        showMainLand: !this.$el.data("hide-main-land"),
                        showHKMCTW: !this.$el.data("hide-hkmctw"),
                        showGlobe: !this.$el.data("hide-globe"),
                        currentTab: this.getSelectedArea() || this.selectedAreaTab
                    }
                },
                getFilterRegions: function() {
                    var e = this.availableRegions();
                    return this.$el.data("hide-hk") && (e = e.filter(function(e) {
                        return "A000810000" != e.get("code")
                    })),
                    this.$el.data("hide-macao") && (e = e.filter(function(e) {
                        return "A000820000" != e.get("code")
                    })),
                    this.$el.data("hide-tw") && (e = e.filter(function(e) {
                        return "A000710000" != e.get("code")
                    })),
                        e
                },
                render: function() {
                    var e = this.regionTabsModel.getCurrentSelectedTab()
                        , t = this.getFilterRegions()
                        , i = n.detailedLocationPicker({
                        availableRegions: t,
                        unavailableRegions: this.unavailableRegions(),
                        regionTabs: this.regionTabsModel.getRegionTabs(),
                        areaTabs: this.areaTabs(),
                        pageLimit: 52,
                        shouldShowFussySelection: this.shouldShowFussySelection(),
                        currentSelectedRegionCode: e.selectedRegion ? e.selectedRegion.code : void 0,
                        isLoading: this.regions.isFetchingData,
                        showNotAvailable: 0 === t.length,
                        errorLoading: this.regions.errorLoadingData
                    });
                    this.$detailedLocationPicker.html(i)
                },
                shouldShowFussySelection: function() {
                    return !this.$el.data("hide-fussy-selector") && this.regionTabsModel.getCurrentSelectedTab().parentRegion.level + 1 > this.getMinLevel()
                },
                showPicker: function() {
                    $(".toggle-plugins").hide(),
                    this.regionTabDirty && this.regions.fetchRegions(this.regionTabsModel.getCurrentSelectedTab().parentRegion),
                        this.$detailedLocationPicker.show()
                },
                clearCurrentSelection: function() {
                    $(".toggle-plugins").hide();
                    var e = this.regionTabsModel.getCurrentSelectedTab();
                    e.selectedRegion = null,
                        this.updateLocationPickerSelectionToInput(e.parentRegion),
                        this.render(),
                        this.triggerRegionModelUpdated()
                },
                toggleLocationPicker: function(e) {
                    if (this.removePickerTip(),
                            this.$detailedLocationPicker.is(":visible"))
                        this.$detailedLocationPicker.hide();
                    else {
                        if (e && e.stopPropagation(),
                            $(".ui-autocomplete").is(":visible") && $(".ui-autocomplete").hide(),
                                _.isEmpty(this.$input.val())) {
                            this.regionTabsModel.resetRegionTab();
                            var t = this.regionTabsModel.regionTabs[0];
                            t.selected = !0,
                                t.selectedRegion = null
                        } else
                            this.$input.select();
                        this.$input.attr("disabled") || this.showPicker()
                    }
                },
                hideLocationPicker: function(e) {
                    e && 9 != e.keyCode && this.$detailedLocationPicker.is(":visible") && this.$detailedLocationPicker.hide()
                },
                stopPropagation: function(e) {
                    e.stopPropagation()
                },
                selectedRegionChanged: function(e) {
                    var t = $(e.currentTarget);
                    _.isEmpty(t.data("code")) && _.isEmpty(t.val()) && (this.$el.data("selected-area", ""),
                        this.resetLocationPicker())
                },
                setLocationCodeInInput: function(e, t, i, n, a) {
                    this.$input.data("code", e),
                        this.$input.data("parentCode", t),
                        this.$input.data("rateCode", i),
                        this.$input.data("country-code", n),
                        this.$input.data("level", a)
                },
                pageSwitcherClicked: function(e) {
                    this.$(".pages-switch li").removeClass("current");
                    var t = $(e.currentTarget);
                    t.addClass("current"),
                        this.$(".regions-page").removeClass("current"),
                        this.$(".regions-page[data-page=" + t.text() + "]").addClass("current")
                },
                areaTabSwitch: function(e) {
                    this.selectedAreaTab = $(e.currentTarget).data("tab"),
                        this.$el.data("selected-area", this.selectedAreaTab),
                        this.regionTabsModel.resetRegionTab(),
                        this.render()
                },
                regionTabClicked: function(e) {
                    var t = $(e.currentTarget).data("code");
                    this.regionTabsModel.activeTabByParentCode(t)
                },
                updateLocationPickerSelectionToInput: function(e) {
                    this.render(),
                        this.setLocationCodeInInput(e.code, e.parentCode, e.rateCode, e.countryCode, e.level);
                    var t = this.regionTabsModel.getSelectedLocationDescription();
                    this.$input.val() !== t && (this.$input.trigger("blur.placeholder").val(t).attr("title", t).trigger("change"),
                    0 < $(".dest-price input").length && $(".dest-price input").removeAttr("disabled"))
                },
                triggerRegionModelUpdated: function() {
                    this.$el.trigger("regionModelUpdate", [{
                        regionTabs: this.regionTabsModel.getRegionTabs()
                    }]),
                    this.regionTabsModel.hasReachedMaxLevel() && this.$el.trigger("locationChanged", this.getLocationData())
                },
                preProcessInput: function(e) {
                    var t = {};
                    switch (e.countryCode) {
                        case "A000086000":
                            this.$el.data("selected-area", "main-land"),
                                t.activeTab = {
                                    code: "A000086000"
                                },
                                t.handleRegon = {
                                    code: e.parentCode
                                };
                            break;
                        case "A000710000":
                        case "A000810000":
                        case "A000820000":
                            this.$el.data("selected-area", "hk-mc-tw"),
                                t.activeTab = t.handleRegon = {
                                    code: "HKMCTW"
                                };
                            break;
                        default:
                            this.$el.data("selected-area", "international"),
                                t.handleRegon = t.activeTab = {
                                    code: "GLOBAL"
                                }
                    }
                    return t
                },
                handleInputedRegion: function(e) {
                    var t = this.preProcessInput(e);
                    this.regionTabsModel.resetRegionTab(),
                        this.regionTabsModel.activeTabByParentCode(t.activeTab.code),
                        this.regionTabsModel.handleNewChoosedRegion(t.handleRegon),
                        this.regionTabsModel.appendSelectedRegionToTabs(t.handleRegon);
                    var i = {
                        code: e.code,
                        countryCode: e.countryCode,
                        rateCode: null,
                        name: e.name,
                        level: e.level,
                        title: e.name,
                        provinceRateCode: null,
                        provinceName: null
                    };
                    this.renderRengionChanged(i)
                },
                regionChanged: function(e) {
                    var t;
                    e.preventDefault();
                    var i = $(e.currentTarget);
                    t = {
                        id: i.data("id"),
                        code: i.data("code"),
                        countryCode: i.data("country-code"),
                        rateCode: i.data("rate-code"),
                        name: i.text().trim(),
                        level: i.data("level"),
                        title: i.prop("title"),
                        provinceRateCode: i.data("province-rate-code"),
                        provinceName: i.data("province-name"),
                        provinceCode: i.data("province-code"),
                        parentId: i.data("parent-id"),
                        parentCode: i.data("parent-code"),
                        distId: i.data("dist-id")
                    },
                        this.renderRengionChanged(t)
                },
                renderRengionChanged: function(i) {
                    this.regionTabsModel.handleNewChoosedRegion(i),
                        this.triggerRegionModelUpdated();
                    var n = this;
                    this.regionTabsModel.hasReachedMinLevel() && (n.updateLocationPickerSelectionToInput(i),
                        this.saveLocationPickerState()),
                        this.regionTabsModel.hasReachedMaxLevel() ? this.$detailedLocationPicker.hide() : this.regions.fetchRegions(i, function(e, t) {
                            if ("success" === t && 0 < n.availableRegions().length)
                                n.regionTabsModel.appendSelectedRegionToTabs(i),
                                    n.render();
                            else {
                                if ("success" === t && 0 === n.availableRegions().length)
                                    return n.updateLocationPickerSelectionToInput(i),
                                        n.regionTabsModel.trigger("regionTabUpdated"),
                                        void n.$detailedLocationPicker.hide();
                                404 !== e.status && 0 !== n.availableRegions().length || (n.updateLocationPickerSelectionToInput(i),
                                    n.regionTabsModel.trigger("regionTabUpdated"))
                            }
                            n.$detailedLocationPicker.show()
                        })
                },
                getInputValue: function() {
                    return this.$("input").val()
                },
                setLocation: function(e) {
                    if (e.length) {
                        this.$("input").val(""),
                            Helper.isHK_MC_TW(e[0].rateCode) ? this.setSelectedArea("hk-mc-tw") : Helper.isInternational(e[0].rateCode) ? (this.$el.data("max-level", 1),
                                this.setSelectedArea("international")) : this.setSelectedArea("main-land"),
                            this.regionTabsModel.resetRegionTab(),
                        Helper.isHK_MC_TW(e[0].rateCode) || Helper.isInternational(e[0].rateCode) || this.regionTabsModel.activeTabByParentCode("A000086000"),
                            this.$detailedLocationPicker.show();
                        for (var t = 0; t < e.length; t++) {
                            var i = e[t];
                            if (i.title = i.name,
                                    this.setRegionTab(i)) {
                                this.regionTabDirty = !0;
                                break
                            }
                            t == e.length - 1 && this.regions.fetchRegions(e[t])
                        }
                    }
                },
                setLocationData: function(e) {
                    var t = []
                        , i = e.locationCode;
                    if (e.provinceCode) {
                        if (t.push({
                                distId: e.provinceId,
                                code: e.provinceCode,
                                rateCode: i,
                                name: e.province,
                                level: 2
                            }),
                                !e.cityCode)
                            return this.setLocation(t);
                        if (Helper.isDirectCity(i) || "853" == i || t.push({
                                distId: e.cityId,
                                code: e.cityCode,
                                rateCode: i,
                                name: e.city,
                                level: -1 != ["852", "886"].indexOf(i) ? "4" : "3"
                            }),
                                !e.countyCode)
                            return this.setLocation(t);
                        t.push({
                            dist: e.countyId,
                            code: e.countyCode,
                            rateCode: i,
                            name: e.county,
                            level: -1 != ["852", "886"].indexOf(i) ? "5" : "4"
                        }),
                            this.setLocation(t)
                    }
                },
                getLocationData: function() {
                    var e, t = this.regionTabsModel.getRegionTabs(), i = t[0].parentRegion.code;
                    e = "HKMCTW" == i ? 2 : "GLOBAL" == i ? 3 : 1;
                    var n, a = _.filter(t, function(e) {
                        return e.selectedRegion
                    });
                    return n = 3 == e ? this.getGlobalLocation(a) : this.getMainlandLocation(a),
                        _.extend({}, n, {
                            regionType: e
                        })
                },
                getMainlandLocation: function(e) {
                    var t, i, n, a, r, s, o, l, d, c;
                    return 2 === e.length ? (t = e[0].selectedRegion.provinceId || e[0].selectedRegion.distId,
                        i = e[0].selectedRegion.provinceCode || e[0].selectedRegion.code,
                        n = e[0].selectedRegion.provinceName || e[0].selectedRegion.name,
                        a = e[0].selectedRegion.distId,
                        r = e[0].selectedRegion.code,
                        s = e[0].selectedRegion.name,
                        o = e[1].selectedRegion.distId,
                        l = e[1].selectedRegion.code,
                        d = e[1].selectedRegion.name,
                        c = e[0].selectedRegion.rateCode) : 3 === e.length && (t = e[0].selectedRegion.distId,
                        i = e[0].selectedRegion.code,
                        n = e[0].selectedRegion.name,
                        a = e[1].selectedRegion.distId,
                        r = e[1].selectedRegion.code,
                        s = e[1].selectedRegion.name,
                        o = e[2].selectedRegion.distId,
                        l = e[2].selectedRegion.code,
                        d = e[2].selectedRegion.name,
                        c = e[1].selectedRegion.rateCode),
                        {
                            provinceId: t,
                            provinceCode: i,
                            province: n,
                            cityId: a,
                            cityCode: r,
                            city: s,
                            countyId: o,
                            countyCode: l,
                            county: d,
                            locationCode: c
                        }
                },
                getGlobalLocation: function(e) {
                    var t, i, n, a, r, s, o, l, d;
                    return 0 < e.length && (n = e[0].selectedRegion.code,
                        t = e[0].selectedRegion.name,
                        i = e[0].selectedRegion.rateCode,
                        o = e[0].selectedRegion.rateCode,
                        a = s = l = t,
                        r = d = n),
                    2 === e.length && (r = e[1].selectedRegion.code,
                        a = e[1].selectedRegion.name,
                        o = e[1].selectedRegion.rateCode,
                        s = l = a,
                        d = r),
                        {
                            country: t,
                            countryRateCode: i,
                            countryCode: n,
                            province: a,
                            provinceCode: r,
                            city: s,
                            county: l,
                            countyCode: d,
                            locationCode: o
                        }
                },
                setRegionTab: function(e) {
                    return this.regionTabsModel.handleNewChoosedRegion(e),
                    this.regionTabsModel.hasReachedMinLevel() && (this.updateLocationPickerSelectionToInput(e),
                        this.saveLocationPickerState()),
                        this.regionTabsModel.hasReachedMaxLevel() ? (this.triggerRegionModelUpdated(),
                            this.$detailedLocationPicker.hide(),
                            !0) : (this.regionTabsModel.appendSelectedRegionToTabs(e),
                            !1)
                }
            })
        }),
        define("utils/time", ["moment"], function(a) {
            return {
                relativeDate: function(e, t) {
                    var i = e.clone().startOf("day")
                        , n = t || a();
                    return i.isSame(n.clone().add("days", -1), "day") ? _l("昨天") : i.isSame(n, "day") ? _l("今天") : i.isSame(n.clone().add("days", 1), "day") ? _l("明天") : i.isSame(n, "week") ? _l("本") + i.format("ddd") : i.isSame(n.clone().add(7, "d"), "week") ? _l("下") + i.format("ddd") : i.isSame(n.clone().add(-7, "d"), "week") ? _l("上") + i.format("ddd") : i.diff(n, "days") + _l("天")
                }
            }
        }),
        define("views/detailDateTimePicker/pickupTimePicker", ["backbone", "templates", "moment", "utils/time", "helper"], function(e, t, o, a) {
            var l = "YYYY-MM-DD HH:mm"
                , i = "YYYY-MM-DD"
                , d = "HH:mm";
            return e.View.extend({
                data: {
                    serverTime: null,
                    dateTimes: []
                },
                events: {
                    "click .date-wrapper li": "selectDate",
                    "click .time-wrapper li.item": "selectTime",
                    "click input": "toggle"
                },
                initialize: function(e) {
                    var t = this;
                    this.data.serverTime = (e.serverTime || o()).startOf("minutes"),
                        this.data.dateTimes = e.dateTimes || [],
                        this.calculateDates(),
                        this.$picker = $('<div class="pickup-time-picker" style="display:none"></div>'),
                        this.$el.addClass("time-picker-pk").append(this.$picker),
                        $("body").click(function(e) {
                            $(e.target).parents(".time-picker-pk").length || t.$picker.hide()
                        })
                },
                toggle: function() {
                    this.dates.length && (this.handlerSelectedDateTime(),
                        this.$picker.toggle())
                },
                selectDate: function(e) {
                    var t = $(e.currentTarget);
                    this.showDate = t.data("value"),
                        this.render(),
                        e.stopPropagation()
                },
                selectTime: function(e) {
                    var t = $(e.currentTarget)
                        , i = this.$("input");
                    this.showTime = t.data("value"),
                        "within_an_hour" === this.showTime ? (i.val(_l("一小时内")),
                            this.selectedDateTime = null) : (i.val(this.showDate + " " + t.text()),
                            this.selectedDateTime = o(this.showTime)),
                        this.$picker.hide(),
                        i.trigger("change")
                },
                calculateDates: function() {
                    var n = this
                        , e = this.data.dateTimes;
                    this.dates = [],
                    e && e.forEach(function(e) {
                        var t = e.workingTime.split("-")
                            , i = {
                            text: a.relativeDate(o(e.date), n.data.serverTime),
                            date: e.date,
                            start: n.getNextHourSharp(o(e.date + " " + t[0])),
                            end: o(e.date + " " + t[1]).startOf("hour")
                        };
                        i.times = n.calculateTimes(i),
                            n.dates.push(i)
                    })
                },
                calculateTimes: function(e) {
                    var t = []
                        , i = o(e.date)
                        , n = this.handlerWithinOneHour(e.start, e.end);
                    n && t.push(n);
                    for (var a = 0; a < 24; a++) {
                        var r = i.clone().add(a, "hour")
                            , s = r.clone().add(1, "hour");
                        r >= e.start && s <= e.end && r >= this.data.serverTime && t.push({
                            text: r.format(d) + "~" + s.format(d),
                            start: r.format(l)
                        })
                    }
                    return t
                },
                handlerWithinOneHour: function(e, t) {
                    var i = this.data.serverTime
                        , n = this.getNextHourSharp(i);
                    if (e < n && n < t)
                        return {
                            text: _l("一小时内"),
                            start: "within_an_hour"
                        }
                },
                getNextHourSharp: function(e) {
                    return e.clone().add(59, "minute").startOf("hour")
                },
                handlerSelectedDateTime: function() {
                    this.selectedDateTime ? (this.showDate = this.selectedDateTime.format(i),
                        this.showTime = this.selectedDateTime.format(l)) : this.dates.length && (this.data.serverTime <= this.dates[0].start ? (this.showDate = this.dates[0].date,
                        this.showTime = this.dates[0].times[0].start) : this.data.serverTime > this.dates[0].end.clone().add(-1, "hour") ? (this.showDate = this.dates[1].date,
                        this.showTime = this.dates[1].times[0].start) : (this.showDate = this.data.serverTime.format(i),
                        this.showTime = "within_an_hour")),
                        this.render()
                },
                getTimes: function(e) {
                    for (var t = 0; t < this.dates.length; t++) {
                        var i = this.dates[t];
                        if (i.date === e)
                            return i.times
                    }
                },
                setInputValue: function(e) {
                    e = e || this.showTime,
                        this.showTime && "within_an_hour" !== e && void 0 !== this.data.dateTimes ? (this.$("input").val(e + "~" + o(e).add(1, "hour").format(d)),
                            this.selectedDateTime = o(this.showTime)) : (this.$("input").val(_l("一小时内")),
                            this.selectedDateTime = null),
                        this.$("input").trigger("change")
                },
                render: function() {
                    var e = t.pickupTimePicker({
                        dates: this.dates,
                        times: this.getTimes(this.showDate),
                        showDate: this.showDate,
                        showTime: this.showTime
                    });
                    this.$picker.html(e)
                },
                setServerTime: function(e) {
                    return this.data.serverTime = e || o(),
                        this.calculateDates(),
                        this
                },
                setDateTimes: function(e) {
                    return this.data.dateTimes = e,
                        this.calculateDates(),
                        this.handlerSelectedDateTime(),
                        this.setInputValue(),
                        this
                },
                getDateTime: function() {
                    var e, t = this.selectedDateTime;
                    return t ? e = {
                        start: t.format(),
                        finish: t.clone().add(1, "hour").format()
                    } : null === t && (e = {
                        start: "",
                        finish: ""
                    }),
                        e
                }
            })
        }),
        define("views/detailedLocationPicker/amapPicker", ["backbone", "templates", "sflayer", "helper", "jquery-ui"], function(e, t, a, n) {
            return e.View.extend({
                initialize: function() {
                    var n = this;
                    this.$("input").autocomplete({
                        minLength: 0,
                        source: function(e, t) {
                            var i = n.options.location.getInputValue();
                            2 < i.split("-").length ? (n.city = i.split("-")[1],
                                n.district = i.split("-")[2]) : (n.city = i.split("-")[0],
                                n.district = i.split("-")[1]),
                                sfAjax.getDetailAddList({
                                    data: {
                                        q: encodeURIComponent(e.term),
                                        city: encodeURIComponent(n.city),
                                        district: encodeURIComponent(n.district),
                                        ak: "0a3e7329ce960df1db1e5a743926d72d"
                                    },
                                    success: function(e) {
                                        0 == e.status && 0 < e.result.POISum && t(e.result.POISet)
                                    },
                                    error: function() {
                                        a.msg(_l("获取失败"))
                                    }
                                })
                        },
                        select: function(e, t) {
                            return e.stopPropagation(),
                                n.addressSelected(t.item),
                                !1
                        }
                    }).autocomplete("instance")._renderItem = function(e, t) {
                        return $("<li>").append(t.name + " <span>" + t.detail_addr + "</span>").appendTo(e)
                    }
                        ,
                        this.$("input").unbind("input")
                },
                addressSelected: function(e) {
                    this.$("input").val(e.name),
                    e.regcode && !n.isHK_MC_TW(e.regcode) && this.checkAddressSame(e)
                },
                checkAddressSame: function(e) {
                    var t = this;
                    if (-1 == e.adname[1].indexOf(this.city))
                        var i = _p(_l("是否切换城市?详细地址与选择的省市区不一致，是否需要切换到%(city)s"), {
                            city: e.adname[1]
                        })
                            , n = a.confirm(i, {
                            title: _l("温馨提示!"),
                            btn: [_l("切换城市"), _l("重新输入")]
                        }, function() {
                            t.queryAddrDistIdByName(e),
                                a.close(n)
                        }, function() {
                            t.$("input").val(""),
                                a.close(n)
                        });
                    else if (-1 == e.adname[2].indexOf(t.district))
                        i = _p(_l("您选择的地址可能属于%(city)s%(district)s，是否切换？"), {
                            city: e.adname[1],
                            district: e.adname[2]
                        }),
                            n = a.confirm(i, {
                                title: _l("温馨提示!"),
                                btn: [_l("是"), _l("否")]
                            }, function() {
                                t.queryAddrDistIdByName(e),
                                    a.close(n)
                            }, function() {
                                a.close(n)
                            })
                },
                queryAddrDistIdByName: function(e) {
                    var t = "";
                    t = n.isDirectCity(e.regcode) ? e.adname[0].substring(0, 2) : e.adname[0];
                    var i = this;
                    sfAjax.getAddrDistIdByName({
                        data: {
                            provinceName: t,
                            cityName: e.adname[1],
                            districtName: e.adname[2]
                        },
                        success: function(e) {
                            e ? i.options.location.setLocation(e) : a.msg(_l("获取失败"))
                        },
                        error: function() {
                            a.msg(_l("获取失败"))
                        }
                    })
                }
            })
        }),
        function(e) {
            "function" == typeof define && define.amd ? define("jQuery.XDomainRequest", ["jquery"], e) : "object" == typeof exports ? module.exports = e(require("jquery")) : e(jQuery)
        }(function(o) {
            if (o.support.cors || !o.ajaxTransport || !window.XDomainRequest)
                return o;
            var t = /^(https?:)?\/\//i
                , a = /^get|post$/i
                , r = new RegExp("^(//|" + location.protocol + ")","i");
            return o.ajaxTransport("* text html xml json", function(i, n, e) {
                if (i.crossDomain && i.async && a.test(i.type) && t.test(i.url) && r.test(i.url)) {
                    var s = null;
                    return {
                        send: function(e, a) {
                            var t = ""
                                , r = (n.dataType || "").toLowerCase();
                            s = new XDomainRequest,
                            /^\d+$/.test(n.timeout) && (s.timeout = n.timeout),
                                s.ontimeout = function() {
                                    a(500, "timeout")
                                }
                                ,
                                s.onload = function() {
                                    var e = "Content-Length: " + s.responseText.length + "\r\nContent-Type: " + s.contentType
                                        , t = {
                                        code: 200,
                                        message: "success"
                                    }
                                        , i = {
                                        text: s.responseText
                                    };
                                    try {
                                        if ("html" === r || /text\/html/i.test(s.contentType))
                                            i.html = s.responseText;
                                        else if ("json" === r || "text" !== r && /\/json/i.test(s.contentType))
                                            try {
                                                i.json = o.parseJSON(s.responseText)
                                            } catch (e) {
                                                t.code = 500,
                                                    t.message = "parseerror"
                                            }
                                        else if ("xml" === r || "text" !== r && /\/xml/i.test(s.contentType)) {
                                            var n = new ActiveXObject("Microsoft.XMLDOM");
                                            n.async = !1;
                                            try {
                                                n.loadXML(s.responseText)
                                            } catch (e) {
                                                n = void 0
                                            }
                                            if (!n || !n.documentElement || n.getElementsByTagName("parsererror").length)
                                                throw t.code = 500,
                                                    t.message = "parseerror",
                                                "Invalid XML: " + s.responseText;
                                            i.xml = n
                                        }
                                    } catch (e) {
                                        throw e
                                    } finally {
                                        a(t.code, t.message, i, e)
                                    }
                                }
                                ,
                                s.onprogress = function() {}
                                ,
                                s.onerror = function() {
                                    a(500, "error", {
                                        text: s.responseText
                                    })
                                }
                                ,
                            n.data && (t = "string" === o.type(n.data) ? n.data : o.param(n.data)),
                                s.open(i.type, i.url),
                                s.send(t)
                        },
                        abort: function() {
                            s && s.abort()
                        }
                    }
                }
            }),
                o
        }),
        define("models/orderUcmp", ["backbone", "underscore", "helper", "jQuery.XDomainRequest"], function(i, e, n) {
            var t = "HH:mm"
                , r = "YYYY-MM-DD HH:mm:ss";
            return i.Model.extend({
                initialize: function() {
                    this.listenTo(this, "change:senderLocationCityCode", this.getReserveTime),
                    "sc" === n.getSiteLanguage() && (this.listenTo(this, "change:senderLocationCityCode", this.getWarmReminder),
                        this.listenTo(this, "change:receiverLocationCityCode", this.getWarmReminder))
                },
                getReserveTime: function() {
                    var t = this
                        , e = {
                        countryCode: "CN",
                        langCode: n.getSiteLanguage(),
                        mediaCode: "PC.OWF",
                        systemCode: "ESG-OWF-CORE",
                        cityCode: t.get("senderLocationCityCode"),
                        bookingDate: ""
                    };
                    i.ajax({
                        type: "post",
                        async: !1,
                        dataType: "json",
                        contentType: "application/json; charset=UTF-8",
                        url: n.getUcmpOrderRemoteUrl("api/orderService/getCityWorkingTime"),
                        data: JSON.stringify(e),
                        success: function(e) {
                            if (e.status && "1" == e.status) {
                                if (!e.result.time)
                                    return;
                                t.set("dateTimes", e.result.time),
                                    t.setFirstDateTime(e.result.time),
                                    t.setSecondDateTime(e.result.time),
                                    t.setThirdDateTime(e.result.time)
                            }
                        }
                    })
                },
                setFirstDateTime: function(e) {
                    var t = e[0]
                        , i = t.workingTime.split("-")
                        , n = moment(t.date + " " + i[0], r)
                        , a = moment(t.date + " " + i[1], r);
                    this.setFirstPickedStartDateTime(n),
                        this.setFirstPickedEndDateTime(a)
                },
                setSecondDateTime: function(e) {
                    var t = e[1]
                        , i = t.workingTime.split("-")
                        , n = moment(t.date + " " + i[0], r)
                        , a = moment(t.date + " " + i[1], r);
                    this.setSecondPickedStartDateTime(n),
                        this.setSecondPickedEndDateTime(a)
                },
                setThirdDateTime: function(e) {
                    var t = e[2]
                        , i = t.workingTime.split("-")
                        , n = moment(t.date + " " + i[0], r)
                        , a = moment(t.date + " " + i[1], r);
                    this.setThirdPickedStartDateTime(n),
                        this.setThirdPickedEndDateTime(a)
                },
                setFirstPickedStartDateTime: function(e) {
                    e = this.resetStartTime(e),
                        this.set("firstPickedStartDateTime", e)
                },
                setFirstPickedEndDateTime: function(e) {
                    e = this.resetEndTime(e),
                        this.set("firstPickedEndDateTime", e)
                },
                setSecondPickedStartDateTime: function(e) {
                    e = this.resetStartTime(e),
                        this.set("secondPickedStartDateTime", e)
                },
                setSecondPickedEndDateTime: function(e) {
                    e = this.resetEndTime(e),
                        this.set("secondPickedEndDateTime", e)
                },
                setThirdPickedStartDateTime: function(e) {
                    e = this.resetStartTime(e),
                        this.set("thirdPickedStartDateTime", e)
                },
                setThirdPickedEndDateTime: function(e) {
                    e = this.resetEndTime(e),
                        this.set("thirdPickedEndDateTime", e)
                },
                resetStartTime: function(e) {
                    return 0 !== (e = moment(e, t)).minutes() && e.add(1, "hour").startOf("hour"),
                        e
                },
                resetEndTime: function(e) {
                    return (e = "24:00" === (e = moment(e, t)) ? moment("00:00", t).add(1, "day") : moment(e, t)).minutes() < 30 ? e.minutes(0) : e.minutes(30),
                        e
                },
                getSynServerTim: function() {
                    var t = this;
                    i.ajax({
                        type: "GET",
                        async: !1,
                        dataType: "text",
                        url: n.getRESTfulDomain("order/syncServerTim"),
                        success: function(e) {
                            t.set("synServerTim", moment(e, r))
                        },
                        error: function() {
                            t.set("synServerTim", moment())
                        }
                    })
                },
                getWarmReminder: function() {
                    var e = this.get("senderLocationCityCode") ? this.get("senderLocationCityCode") : ""
                        , t = this.get("receiverLocationCityCode") ? this.get("receiverLocationCityCode") : "";
                    i.ajax({
                        type: "get",
                        url: n.getRESTfulDomain("cx/queryOrderExceptionInfo") + "?sourceCityCode=" + e + "&destCityCode=" + t,
                        success: function(e) {
                            $(".warm-reminder").slideUp(),
                                e && e.shipperMessage ? $(".shipper-warm-reminder").html(e.shipperMessage).slideDown() : e && e.consigneeMessage && $(".consignee-warm-reminder").html(e.consigneeMessage).slideDown()
                        }
                    })
                }
            })
        }),
        define("utils/stringUtils", [], function() {
            return {
                uuid: function(e, t) {
                    var i, n, a = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""), r = [];
                    if (t = t || a.length,
                            e)
                        for (i = 0; i < e; i++)
                            r[i] = a[0 | Math.random() * t];
                    else
                        for (r[8] = r[13] = r[18] = r[23] = "-",
                                 r[14] = "4",
                                 i = 0; i < 36; i++)
                            r[i] || (n = 0 | 16 * Math.random(),
                                r[i] = a[19 == i ? 3 & n | 8 : n]);
                    return r.join("")
                }
            }
        }),
        define("baseView", ["backbone", "utils/stringUtils", "sflayer"], function(e, a, r) {
            return e.View.extend({
                layerOpts: {},
                initialize: function(e) {
                    if (!e.el) {
                        var t = "open-" + a.uuid(10)
                            , i = "<div class=" + t + "></div>"
                            , n = _.extend({}, this.layerOpts, {
                            content: i
                        });
                        this.layerIndex = r.open(n),
                            this.$el = $("." + t)
                    }
                    this.init(e),
                        this.render(),
                        $(window).resize()
                },
                init: function() {},
                close: function() {
                    r.close(this.layerIndex)
                }
            })
        }),
        define("views/order/addIntellectFill", ["baseView", "templates"], function(e, t) {
            return e.extend({
                template: t.addIntellectFill,
                layerOpts: {
                    title: _l("智能地址填写"),
                    area: "580px"
                },
                events: {
                    "click .intellect-fill-btn": "orderAddrSplitSubmit",
                    "input .intellect-order-addr": "isValidIntellectAddr"
                },
                init: function(e) {
                    this.fillInput = e.fillInput,
                        this.location = e.location,
                        this.triggerTarget = e.target
                },
                render: function() {
                    this.$el.html(this.template({}))
                },
                isValidIntellectAddr: function() {
                    var e = $.trim($(".intellect-order-addr").val());
                    $(".error-surpass-max").hide(),
                        $(".error-network").hide(),
                        $(".intellect-fill-input").text(e.length),
                        0 == e.length ? $(".intellect-fill-btn").css("background", "#777").attr("disabled", "disabled") : 100 < e.length ? ($(".intellect-fill-btn").css("background", "#777").attr("disabled", "disabled"),
                            $(".error-surpass-max").show()) : $(".intellect-fill-btn").css("background", "red").removeAttr("disabled")
                },
                orderAddrSplitSubmit: function(e) {
                    var a = this;
                    sfAjax.addressSplit({
                        data: {
                            address: this.$(".intellect-order-addr").val().trim()
                        },
                        success: function(e) {
                            if (0 === e.code) {
                                var t, i, n = e.result || {};
                                if (1 == n.hmtareaType)
                                    return void (t = layer.confirm(_l("地址拆分功能暂不支持港澳台及国际地区。"), {
                                        btn: [_l("我知道了")]
                                    }, function() {
                                        layer.close(t)
                                    }));
                                if (a.fillInput(n, a.triggerTarget),
                                        !a.location)
                                    return a.close();
                                1 == n.splitType ? i = _l("未找到对应的省份，请您手动进行选择哦！") : 2 == n.splitType ? i = _l("未找到对应的城市，请您手动进行选择哦！") : 3 == n.splitType && (i = _l("未找到对应的行政区，请您手动进行选择哦！")),
                                    i ? t = layer.confirm(i, {
                                        btn: [_l("我知道了")]
                                    }, function() {
                                        layer.close(t),
                                            a.location.setLocation(n.originDestRegions)
                                    }) : a.location.setLocation(n.originDestRegions),
                                    a.close()
                            }
                        },
                        error: function() {
                            $(".error-surpass-max").hide(),
                                $(".error-network").show()
                        }
                    }),
                        e.stopPropagation()
                }
            })
        }),
    void 0 === dpUI)
    var dpUI = {
        data: {},
        helper: {},
        options: {},
        versions: {}
    };
function QR8bitByte(e) {
    this.mode = QRMode.MODE_8BIT_BYTE,
        this.data = e
}
function QRCode(e, t) {
    this.typeNumber = e,
        this.errorCorrectLevel = t,
        this.modules = null,
        this.moduleCount = 0,
        this.dataCache = null,
        this.dataList = new Array
}
function QRPolynomial(e, t) {
    var i, n;
    if (null == e.length)
        throw new Error(e.length + "/" + t);
    for (i = 0; i < e.length && 0 == e[i]; )
        i++;
    for (this.num = new Array(e.length - i + t),
             n = 0; n < e.length - i; n++)
        this.num[n] = e[n + i]
}
function QRRSBlock(e, t) {
    this.totalCount = e,
        this.dataCount = t
}
function QRBitBuffer() {
    this.buffer = new Array,
        this.length = 0
}
var QRMode, QRErrorCorrectLevel, QRMaskPattern, QRUtil, QRMath, i;
for (dpUI.helper.data2obj = function(e) {
    if (void 0 === e)
        return !1;
    for (var t = {}, i = 0; i < e.attributes.length; i++)
        if (-1 < (e.attributes[i].nodeName + "").indexOf("data-")) {
            var n = (e.attributes[i].nodeName + "").substring(5)
                , a = e.attributes[i].value;
            "true" == a.toLowerCase() ? a = !0 : "false" == a.toLowerCase() ? a = !1 : parseFloat(a) + "" == a && (a = parseFloat(a)),
                t[n] = a
        }
    return t
}
         ,
         dpUI.helper.formatter = function(e, t) {
             if (!t || 0 == t.length)
                 return e + "";
             var i = Math.floor(e)
                 , n = e - i
                 , a = t.indexOf(".")
                 , r = t.length - a - 1;
             for (i += ""; i.length < a; )
                 i = "0" + i;
             for (n = Math.round(n * Math.pow(10, r)) + ""; n.length < r; )
                 n += "0";
             return i + "." + n
         }
         ,
         dpUI.helper.betterParseFloat = function(e) {
             return isNaN(parseFloat(e)) ? e.length < 2 ? parseFloat(e) : dpUI.helper.betterParseFloat(e.substring(1)) : parseFloat(e)
         }
         ,
         dpUI.versions.numberPicker = "2.0.0",
         dpUI.numberPicker = function(e, r) {
             var s = {
                 start: 0,
                 min: !1,
                 max: !1,
                 step: 1,
                 format: !1,
                 formatter: function(e) {
                     return e
                 },
                 increaseText: "+",
                 decreaseText: "-",
                 onReady: function() {},
                 onMin: function() {},
                 onMax: function() {},
                 beforeIncrease: function() {},
                 beforeDecrease: function() {},
                 beforeChange: function() {},
                 afterIncrease: function() {},
                 afterDecrease: function() {},
                 afterChange: function() {}
             };
             $(e).each(function() {
                 function t(e) {
                     e = dpUI.helper.betterParseFloat(e),
                     isNaN(e) && (e = i.number),
                         n.removeClass("dpui-numberPicker-min").removeClass("dpui-numberPicker-max"),
                         i.options.beforeChange.call(i, i, i.number),
                         !1 !== i.options.min && e <= i.options.min ? (n.addClass("dpui-numberPicker-min"),
                             i.number = i.options.min) : !1 !== i.options.max && e >= i.options.max ? (n.addClass("dpui-numberPicker-max"),
                             i.number = i.options.max) : i.number = e,
                         i.number = 1 <= 10 * Number(i.number) % 10 && 10 * Number(i.number) % 10 <= 5 ? (10 * Math.floor(10 * Number(i.number) / 10) + 5) / 10 : Math.round(i.number),
                         a.val(i.options.formatter(dpUI.helper.formatter(i.number, i.options.format))),
                         i.options.afterChange.call(i, i, i.number)
                 }
                 var i = this
                     , n = $(i);
                 i.options = $.extend(s, r),
                     i.options = $.extend(i.options, dpUI.helper.data2obj(i)),
                     i.number = dpUI.helper.betterParseFloat(i.options.start),
                     n.addClass("dpui-numberPicker");
                 var a = n.find(".dpui-numberPicker-input");
                 a.val(i.options.formatter(dpUI.helper.formatter(i.number, i.options.format))),
                 !1 !== i.options.min && i.options.start == i.options.min && n.addClass("dpui-numberPicker-min"),
                 !1 !== i.options.max && i.options.start == i.options.max && n.addClass("dpui-numberPicker-max"),
                     i.set = function(e) {
                         t(e)
                     }
                     ,
                     i.increase = function() {
                         i.options.beforeIncrease.call(i, i, i.number),
                             t(i.number + i.options.step),
                             i.options.afterIncrease.call(i, i, i.number)
                     }
                     ,
                     i.decrease = function() {
                         i.options.beforeDecrease.call(i, i, i.number),
                             t(i.number - i.options.step),
                             i.options.afterDecrease.call(i, i, i.number)
                     }
                     ,
                     n.find(".dpui-numberPicker-decrease").on("click", i.decrease),
                     n.find(".dpui-numberPicker-increase").on("click", i.increase),
                     a.on("change", function() {
                         i.set(a.val())
                     })
             })
         }
         ,
         jQuery.fn.dpNumberPicker = function(e) {
             if ("string" == typeof e) {
                 if ("increase" == e.toLowerCase())
                     this.each(function() {
                         this.increase()
                     });
                 else if ("decrease" == e.toLowerCase())
                     this.each(function() {
                         this.decrease()
                     });
                 else if ("set" == e.toLowerCase() && 1 < arguments.length) {
                     var t = arguments[1];
                     this.each(function() {
                         this.set(t)
                     })
                 }
             } else
                 dpUI.numberPicker(this.selector, e)
         }
         ,
         define("numberpicker", function() {}),
         define("views/order/innerViews/autoAddPicker", ["backbone", "templates", "sflayer", "helper"], function(e, n, t, i) {
             return e.View.extend({
                 initialize: function() {
                     var i = this;
                     this.$("input").autocomplete({
                         minLength: 0,
                         delay: 300,
                         select: function(e, t) {
                             return e.stopPropagation(),
                                 i.options.callback(i.options.addressBookFillOption, t.item),
                                 !1
                         },
                         source: function(e, t) {
                             $.cookie("loginUser") ? sfAjax.compoundQueryAddressBook({
                                 data: {
                                     contact: encodeURIComponent(i.options.paramData().name),
                                     telPhone: encodeURIComponent(i.options.paramData().mobile),
                                     companyName: encodeURIComponent(i.options.paramData().company),
                                     memType: encodeURIComponent("sender" == i.options.addressBookFillOption ? 0 : 1)
                                 },
                                 success: function(e) {
                                     0 === e.code && e.result && t(e.result.slice(0, 9))
                                 }
                             }) : t([])
                         }
                     }).autocomplete("instance")._renderItem = function(e, t) {
                         return $("<li>").append($(n.autocompleteAddressBook({
                             item: t
                         }))).appendTo(e)
                     }
                         ,
                         this.$("input").unbind("input")
                 }
             })
         }),
         define("views/order/innerViews/nearbyAddress", ["backbone", "templates", "helper", "sflayer", "jquery-ui"], function(e, t, n, i) {
             return e.View.extend({
                 initialize: function() {
                     this.loadMapJs(),
                         this.mapJsAlreadyLoad = !1
                 },
                 loadMapJs: function() {
                     if (this.$(".network-err").hide(),
                             this.mapJsAlreadyLoad)
                         this.getLatitudeAndLongitude();
                     else {
                         var e = this;
                         sfAjax.getScript({
                             url: "http://webapi.amap.com/maps?v=1.4.3&key=14e9ee810854c40f5ae9414f2a62c8cc",
                             success: function() {
                                 e.mapJsAlreadyLoad = !0,
                                     e.getLatitudeAndLongitude()
                             },
                             error: function() {
                                 e.networkErr()
                             }
                         })
                     }
                 },
                 getLatitudeAndLongitude: function() {
                     var t = this;
                     AMap.plugin("AMap.Geolocation", function() {
                         var e = new AMap.Geolocation({
                             enableHighAccuracy: !0,
                             timeout: 1e4
                         });
                         e.getCurrentPosition(),
                             AMap.event.addListener(e, "complete", t.locateSucc.bind(t)),
                             AMap.event.addListener(e, "error", t.locateErr.bind(t))
                     })
                 },
                 locateErr: function() {
                     i.msg(_l("暂无附近地址可供选择"))
                 },
                 networkErr: function() {
                     this.$(".network-err").show()
                 },
                 locateSucc: function(e) {
                     var i = this;
                     sfAjax.getNearbyAddress({
                         data: {
                             x: e.position.M,
                             y: e.position.O,
                             cc: "1",
                             ak: "14e9ee810854c40f5ae9414f2a62c8cc"
                         },
                         success: function(e) {
                             if (0 == e.status) {
                                 var t = _.reject(e.result.pois, function(e) {
                                     return n.isHK_MC_TW(e.regcode) || n.isInternational(e.regcode) || !e.regcode
                                 });
                                 0 < t.length ? i.fillPoisToDropdown(t) : i.locateErr()
                             } else
                                 i.locateErr()
                         },
                         error: function() {
                             i.networkErr()
                         }
                     })
                 },
                 fillPoisToDropdown: function(e) {
                     var i = this;
                     this.$("#sender-address").autocomplete({
                         minLength: 0,
                         source: e,
                         select: function(e, t) {
                             return e.stopPropagation(),
                                 i.queryAddrDistIdByName(t.item),
                                 !1
                         }
                     }).autocomplete("instance")._renderItem = function(e, t) {
                         return $("<li>").append(t.name + " <span>" + t.province + t.city + t.district + "</span>").appendTo(e)
                     }
                         ,
                         this.$("#sender-address").autocomplete("search", "").focus()
                 },
                 queryAddrDistIdByName: function(t) {
                     var i = this;
                     sfAjax.getAddrDistIdByName({
                         data: {
                             provinceName: t.province,
                             cityName: t.city,
                             districtName: t.district
                         },
                         success: function(e) {
                             e ? (i.options.senderLocation.setLocation(e),
                                 i.options.detailAdd.val(t.name)) : i.networkErr()
                         },
                         error: function() {
                             i.networkErr()
                         }
                     })
                 }
             })
         }),
         define("views/order/innerViews/priceAndTime", ["baseView", "templates", "event"], function(e, f, t) {
             return e.extend({
                 init: function(e) {
                     this.listenTo(this.collection, "sync", this.renderProductTypeList),
                         this.listenTo(this.collection, "showDefault", this.renderProductTypeDefault),
                         this.choosedProductType = []
                 },
                 render: function() {},
                 events: {
                     "click a": "chooseProductType"
                 },
                 fetchTimeAndRate: function(e) {
                     this.bookingTime = e.time,
                         t.trigger(t.RateSearch, e)
                 },
                 renderProductTypeList: function() {
                     1 == this.options.type ? this.renderNormalProductTypeList() : 2 == this.options.type && this.renderHeavyCargoProductTypeList(),
                         $(".product-type-content").slideDown()
                 },
                 renderNormalProductTypeList: function() {
                     if (0 != this.collection.toJSON().length) {
                         var e = this.collection.toJSON();
                         _.each(e, function(e) {
                             e.closedTime && (e.closedTime = moment(e.closedTime, "HHmm").format("HH:mm")),
                             e.deliverTime && "Invalid date" != moment(e.deliverTime).format() && (e.deliverTime = _l("预计") + " " + moment(e.deliverTime).format("ddd HH:mm") + " " + _l("前"))
                         });
                         var t, i = _.groupBy(e, "limitTypeCode"), n = _.first(i.T1 || i.T104), a = _.first(i.T8 || i.T801), r = _.first(i.T4), s = _.first(i.T6), o = moment(this.bookingTime).clone();
                         if (this.options.orderModel.get("firstPickedEndDateTime")) {
                             var l = this.options.orderModel.get("firstPickedEndDateTime").clone()
                                 , d = this.options.orderModel.get("secondPickedEndDateTime").clone()
                                 , c = this.options.orderModel.get("thirdPickedEndDateTime").clone();
                             t = _.find([l, d, c], function(e) {
                                 return o.get("date") === e.get("date")
                             })
                         }
                         t && (n && n.closedTime && moment(t.format("YYYY-MM-DD") + " " + n.closedTime, "YYYY-MM-DD HH:mm").isAfter(t) && (n.closedTime = t.format("HH:mm")),
                         a && a.closedTime && moment(t.format("YYYY-MM-DD") + " " + a.closedTime, "YYYY-MM-DD HH:mm").isAfter(t) && (a.closedTime = t.format("HH:mm")),
                         r && (r.closedTime = t.format("HH:mm")),
                         s && (s.closedTime = t.format("HH:mm")));
                         var u = {
                             t1: n,
                             t8: a,
                             t4: r,
                             t6: s,
                             sendTime: o
                         }
                             , h = this.filterProductType(u);
                         if (0 < h.length) {
                             this.choosedProductType = h;
                             var p = _.max(h, function(e) {
                                 return e.totalPrice
                             });
                             p = p || h[0],
                                 this.options.callback(p),
                                 this.$el.html(f.orderProductTypeList({
                                     data: h,
                                     defaultProduct: p
                                 }))
                         } else
                             this.collection.renderErr()
                     } else
                         this.collection.renderErr()
                 },
                 renderHeavyCargoProductTypeList: function() {
                     if (0 != this.collection.toJSON().length) {
                         var e = this.collection.toJSON()[0];
                         e.closedTime && (e.closedTime = moment(e.closedTime, "HHmm").format("HH:mm")),
                         e.deliverTime && "Invalid date" != moment(e.deliverTime).format() && (e.deliverTime = _l("预计") + " " + moment(e.deliverTime).format("ddd HH:mm") + " " + _l("前"));
                         var t = moment(this.bookingTime).clone();
                         if (this.options.orderModel.get("firstPickedEndDateTime"))
                             var i = this.options.orderModel.get("firstPickedEndDateTime").clone()
                                 , n = this.options.orderModel.get("secondPickedEndDateTime").clone()
                                 , a = this.options.orderModel.get("thirdPickedEndDateTime").clone()
                                 , r = _.find([i, n, a], function(e) {
                                 return t.get("date") === e.get("date")
                             });
                         r && (e.closedTime = r.format("HH:mm")),
                             this.choosedProductType = [e],
                             this.$el.html(f.orderHeavyProductTypeList({
                                 heavyCargo: e
                             })),
                             this.options.callback(e)
                     } else
                         this.collection.renderErr()
                 },
                 filterProductType: function(e) {
                     var t = [];
                     return !_.isUndefined(e.t1) && e.t1.closedTime && e.sendTime.isBefore(moment(e.t1.closedTime, "HH:mm")) && t.push(e.t1),
                     !_.isUndefined(e.t8) && e.t8.closedTime && e.sendTime.isBefore(moment(e.t8.closedTime, "HH:mm")) && t.push(e.t8),
                     _.isUndefined(e.t4) || "1" === e.t4.destView && "1" === e.t4.orgionView && !e.t4.deliverTime || t.push(e.t4),
                     _.isUndefined(e.t6) || t.push(e.t6),
                         t
                 },
                 renderProductTypeDefault: function(e) {
                     this.choosedProductType = [e],
                         e.showErr = !0,
                         1 == this.options.type ? this.$el.html(f.orderProductTypeList({
                             data: e
                         })) : 2 == this.options.type && this.$el.html(f.orderHeavyProductTypeList({
                             heavyCargo: e
                         })),
                         $(".product-type-content").slideDown(),
                         this.options.callback(e)
                 },
                 chooseProductType: function(e) {
                     var t = this.$(e.currentTarget);
                     this.$("a").removeClass("aicon-right"),
                         t.addClass("aicon-right");
                     var i = t.data("value")
                         , n = _.find(this.choosedProductType, function(e) {
                         return e.limitTypeCode == i
                     });
                     this.options.callback(n)
                 }
             })
         }),
         define("views/billOptions/payType", ["baseView", "templates", "sflayer"], function(e, t, n) {
             var i = [_l("寄付现结"), _l("到付"), _l("第三方付"), _l("寄付月结"), _l("到付月结")];
             return e.extend({
                 template: t.payTypeToggle,
                 init: function(e) {
                     this.payType = e.defaultPayType || 1,
                         this.payTypeList = e.payTypeList || [1, 2, 4],
                         this.mounthAccount = e.mounthAccount || ""
                 },
                 render: function() {
                     this.$el.html(this.template({
                         payType: this.payType,
                         payTypeList: this.payTypeList,
                         payTypeNameList: i,
                         mounthAccount: this.mounthAccount
                     }))
                 },
                 events: {
                     "click .dropdown-menu a": "changePayType"
                 },
                 changePayType: function(e) {
                     this.payType = this.$(e.currentTarget).data("value"),
                         this.$(".dropdown-toggle .text").text(this.$(e.currentTarget).text()),
                         4 == this.payType || 5 == this.payType ? this.$(".mounth-account").show() : this.$(".mounth-account").hide()
                 },
                 validateMounthAccount: function() {
                     this.mounthAccount = "";
                     var t = this.$(".mounth-account").val();
                     if ("" == t)
                         n.msg(_l("未填写月结账号"));
                     else if (/^\d{10}$/.test(t)) {
                         var i = this;
                         sfAjax.checkMounthAccount({
                             data: {
                                 account: t
                             },
                             success: function(e) {
                                 e.code && 654 == e.code ? n.msg(_l("月结账号无效")) : i.mounthAccount = t
                             },
                             error: function() {
                                 n.msg(_l("网络错误"))
                             }
                         })
                     } else
                         n.msg(_l("月结账号无效"))
                 },
                 getPayTypeAndMounthAccount: function() {
                     return {
                         payType: this.payType,
                         mounthAccount: this.mounthAccount
                     }
                 },
                 validatePayType: function() {
                     return 4 != this.payType && 5 != this.payType || (this.validateMounthAccount(),
                     "" != this.mounthAccount)
                 }
             })
         }),
         define("views/billOptions/weight", ["baseView", "templates", "event", "numberpicker"], function(e, t, i) {
             return e.extend({
                 template: t.weightToggle,
                 init: function(e) {
                     this.min = e.min || .5,
                         this.max = e.max || 999,
                         this.weight = this.start = e.start || 1,
                         this.step = e.step || .5,
                         this.noWarn = e.noWarn || !1
                 },
                 render: function() {
                     this.$el.html(this.template()),
                         this.initWeightUnit()
                 },
                 initWeightUnit: function() {
                     var t = this;
                     dpUI.numberPicker(".dpui-numberPicker", {
                         start: this.start,
                         min: this.min,
                         max: this.max,
                         step: this.step,
                         format: "#.#",
                         formatter: function(e) {
                             return e
                         },
                         beforeChange: function() {
                             var e = t.$(".dpui-numberPicker-input").val();
                             Number(e) || t.$(".dpui-numberPicker-input").val(this.start)
                         },
                         afterChange: function() {
                             var e = t.$(".dpui-numberPicker-input").val();
                             if (!t.noWarn) {
                                 if (t.$(".over-weight").hide(),
                                     Number(e) > Number(t.$(".over-weight-forbidden-tip").attr("weight-valve")))
                                     return void t.$(".over-weight-forbidden-tip").show();
                                 Number(e) > Number(t.$(".addition-rate-because-over-weight").attr("weight-valve")) ? t.$(".addition-rate-because-over-weight").show() : t.$(".over-weight").hide()
                             }
                             t.weight = Number(e),
                                 i.trigger(i.weightChange)
                         }
                     })
                 },
                 getWeight: function() {
                     return this.weight
                 }
             })
         }),
         define("views/billOptions/supportVal", ["baseView", "templates", "helper"], function(e, t, n) {
             return e.extend({
                 template: t.supportVal,
                 init: function(e) {
                     this.times = e.times || 7,
                         this.supportVal = e.supportVal || ""
                 },
                 render: function() {
                     this.$el.html(this.template({
                         notSelectTip: "温馨提示：您当前未选择保价服务，若在寄递过程中发生丢损，您最高可获得${times}倍运费的赔偿。"._p({
                             times: this.times
                         })
                     }));
                     var e = this;
                     setTimeout(function() {
                         $(".support-input").val(e.supportVal).trigger("input")
                     })
                 },
                 events: {
                     "input .support-input": "inputSupportVal"
                 },
                 inputSupportVal: function(e) {
                     var t = this.$(e.currentTarget).val();
                     (!/^\d+\.?(\d{1,2})?$/.test(t) || 5e5 < t) && (this.$(e.currentTarget).val(t.substring(0, t.length - 1)),
                     "" != this.$(e.currentTarget).val() && this.$(e.currentTarget).trigger("input"));
                     var i = this.$(e.currentTarget).val();
                     this.supportPrise = this.calcSupportPrise(i),
                         "" == this.supportPrise ? (this.$(".selected").hide(),
                             this.$(".not-selecte").show()) : (this.$(".selected").show(),
                             this.$(".not-selecte").hide(),
                             this.$(".support-value .number").text(this.supportPrise),
                             this.$(".support-prise .number").text("sc" == n.getSiteLanguage() ? i + "元" : "RMB" + i)),
                         5e5 < t ? (this.$(".too-more").show(),
                             this.$(".not-selecte.error").hide()) : this.$(".too-more").hide(),
                         this.options.inputCallBack(this.supportPrise)
                 },
                 calcSupportPrise: function(e) {
                     return 1e3 < e && e <= 5e5 ? n.toFixed(.005 * e, 0) : 500 < e && e <= 1e3 ? 2 : 0 < e && e <= 500 ? 1 : ""
                 }
             })
         }),
         define("views/billOptions/additionalService", ["baseView", "templates"], function(e, t) {
             var i = ["1", "2", "3", "4"]
                 , n = [_l("签名"), _l("盖章"), _l("登记身份证"), _l("身份证复印件")]
                 , a = ["sign", "stamp", "id-card", "save"];
             return e.extend({
                 layerOpts: {
                     title: _l("添加增值服务"),
                     area: "800px"
                 },
                 template: t.additionalService,
                 init: function(e) {
                     this.signedBackBillIndex = e.signedBackBillIndex.split(","),
                         this.saveCallBack = e.callBack
                 },
                 render: function() {
                     this.$el.html(this.template({
                         signedBackSop: i,
                         signedBackName: n,
                         iconName: a,
                         signedBackBillIndex: this.signedBackBillIndex
                     }))
                 },
                 events: {
                     "click .list a": "choosesignedBack",
                     "click .save": "saveSignedBack"
                 },
                 choosesignedBack: function(e) {
                     this.$(e.currentTarget).toggleClass("aicon-check")
                 },
                 saveSignedBack: function() {
                     this.saveCallBack(this.getSignedBackBillIndex(), this.getSignedBackBillName())
                 },
                 getSignedBackBillIndex: function() {
                     var e = [];
                     return this.$(".list li a").each(function() {
                         $(this).hasClass("aicon-check") && e.push($(this).data("sop"))
                     }),
                         e
                 },
                 getSignedBackBillName: function() {
                     var t = []
                         , e = this.getSignedBackBillIndex();
                     return _.each(e, function(e) {
                         t.push(n[e - 1])
                     }),
                         t
                 }
             })
         }),
         define("views/billOptions/leaveMsg", ["baseView", "templates", "sflayer"], function(e, t, i) {
             var n = [_l("带文件封"), _l("带包装袋"), _l("带纸箱"), _l("要爬楼"), _l("上门前请先联系")];
             return e.extend({
                 layerOpts: {
                     title: _l("捎话给快递员"),
                     area: "800px"
                 },
                 template: t.leaveMsg,
                 init: function(i) {
                     this.initMsgs = i.initMsgsIndex ? _.filter(n, function(e, t) {
                         return _.contains(i.initMsgsIndex, t)
                     }) : n,
                         this.choosedMsg = i.choosedMsg || ""
                 },
                 render: function() {
                     var e = _.compact(this.choosedMsg.split(","))
                         , t = _.difference(_.union(e, this.initMsgs), this.initMsgs).join();
                     this.$el.html(this.template({
                         msgs: this.initMsgs,
                         choosedMsgArr: e,
                         otherMsg: t
                     }))
                 },
                 events: {
                     "click .list a": "chooseMsg",
                     "click .save": "saveMsg"
                 },
                 chooseMsg: function(e) {
                     var t = this.$(e.currentTarget);
                     if (3 == this.$(".list a.active").length) {
                         if (!t.hasClass("active"))
                             return void i.msg(_l("最多可选择三项"));
                         t.removeClass("active")
                     } else
                         t.toggleClass("active")
                 },
                 saveMsg: function() {
                     20 < this.$(".other-msg").val().length ? i.msg(_l("其他捎话最多可输入20个字符")) : this.options.callBack(this.getLeaveMsg())
                 },
                 getLeaveMsg: function() {
                     var e = [];
                     return this.$(".list a").each(function() {
                         $(this).hasClass("active") && e.push($(this).text())
                     }),
                         e.push(this.$(".other-msg").val()),
                         _.compact(e).join()
                 }
             })
         }),
         define("views/billOptions/receiverItem", ["baseView", "templates", "sflayer"], function(e, t, i) {
             var a = [_l("文件"), _l("数码产品"), _l("日用品"), _l("服饰"), _l("食品"), _l("医药类产品"), _l("医药卫生"), _l("汽配"), _l("快消品"), _l("机具仪器"), _l("化工橡塑"), _l("服装鞋帽"), _l("电子产品"), _l("家电"), _l("家具"), _l("其他")];
             return e.extend({
                 template: t.receiverItemToggle,
                 init: function(e) {
                     this.billCargoType = e.billCargoType;
                     var i = 1 == this.billCargoType ? [0, 1, 2, 3, 4, 5, 15] : [6, 7, 8, 9, 10, 11, 12, 13, 14, 15];
                     this.medciName = 1 == this.billCargoType ? a[5] : a[6],
                         this.initItems = _.filter(a, function(e, t) {
                             return _.contains(i, t)
                         }),
                         this.choosedItem = e.choosedItem || "",
                         this.choosedMedci = e.choosedMedci || "",
                         this.maxItem = 1 == this.billCargoType ? 7 : 3,
                         "" != this.choosedMedci ? this.medciSelect = !0 : _.contains(this.choosedItem.split(","), this.medciName) ? this.medciSelect = !0 : this.medciSelect = !1
                 },
                 render: function() {
                     var t = _.compact(this.choosedItem.split(","));
                     this.choosedMedci && (t.push(this.medciName),
                         t = _.uniq(t));
                     var e = _.difference(_.union(t, this.initItems), this.initItems).join();
                     "" != e && (t.push(a[15]),
                         t = _.uniq(t));
                     var i, n = _.filter(this.initItems, function(e) {
                         return _.contains(t, e)
                     });
                     i = 1 < n.length ? _.without(n, a[15]).join() : 1 == n.length ? n.join() : _l("请选择寄托物"),
                         this.$el.html(this.template({
                             items: this.initItems,
                             choosedItemArr: t,
                             otherItem: e,
                             choosedMedci: this.choosedMedci,
                             buttonText: i
                         }))
                 },
                 events: {
                     "click .btn-group a": "chooseItem",
                     "click .cancle": "cancleItem"
                 },
                 chooseItem: function(e) {
                     e.stopPropagation();
                     var t = this.$(e.currentTarget);
                     this.$(".btn-group").find(".aicon-check").length == this.maxItem ? t.hasClass("aicon-check") && (t.removeClass("aicon-check").addClass("aicon-uncheck"),
                         this.fillReceiverItem(t)) : (t.hasClass("aicon-check") ? t.removeClass("aicon-check").addClass("aicon-uncheck") : t.removeClass("aicon-uncheck").addClass("aicon-check"),
                         this.fillReceiverItem(t))
                 },
                 fillReceiverItem: function(e) {
                     e.text() == this.medciName && (e.hasClass("aicon-check") ? (this.$(".medci-input").show(),
                         this.$(".medci-select").show(),
                         this.medciSelect = !0) : (this.$(".medci-input").val("").hide(),
                         this.$(".medci-select").hide(),
                         this.medciSelect = !1)),
                     e.text() == a[15] && (e.hasClass("aicon-check") ? this.$(".other-input").attr("data-parsley-required", !0).show() : this.$(".other-input").attr("data-parsley-required", !1).val("").hide());
                     var t = []
                         , i = this;
                     this.$(".btn-group").find(".aicon-check").each(function() {
                         $(this).text() != a[15] ? t.push($(this).text()) : 1 == i.$(".btn-group").find(".aicon-check").length && t.push($(this).text())
                     }),
                         0 == t.length ? (this.choosedItem = "",
                             this.$(".receiver-item-not-select").show(),
                             this.$(".dropdown-toggle .text").text(_l("请选择寄托物"))) : (this.$(".receiver-item-not-select").hide(),
                             this.choosedItem = t.join(","),
                             this.$(".dropdown-toggle .text").text(this.choosedItem))
                 },
                 cancleItem: function(e) {
                     0 < this.$(".btn-group").find(".aicon-check").length && e.stopPropagation(),
                         this.$(".dropdown-toggle .text").text(_l("请选择寄托物")),
                         this.$(".btn-group a").removeClass("aicon-check").addClass("aicon-uncheck"),
                         this.$(".medci-input").hide(),
                         this.$(".medci-select").hide(),
                         this.$(".other-input").attr("data-parsley-required", !1).val("").hide(),
                         this.choosedItem = "",
                         this.$(".receiver-item-not-select").show(),
                         this.medciSelect = !1
                 },
                 validateReceiverItems: function() {
                     return this.$(".receiver-item-not-select").hide(),
                         "" == this.choosedItem ? (this.$(".receiver-item-not-select").show(),
                             !1) : !!this.$(".receiver-item-form").parsley().validate()
                 },
                 getReceiverItemsAndMedci: function() {
                     return {
                         receiverItems: this.choosedItem,
                         medci: this.$(".medci-input").val()
                     }
                 },
                 isMedciSelect: function() {
                     return this.medciSelect
                 }
             })
         }),
         define("views/billOptions/modifyReceiver", ["baseView", "templates", "views/detailedLocationPicker/picker", "views/detailedLocationPicker/amapPicker", "sflayer", "views/order/addIntellectFill"], function(e, t, i, n, a, r) {
             return e.extend({
                 layerOpts: {
                     title: _l("修改收件人"),
                     area: "700px"
                 },
                 template: t.addressBookEdit,
                 render: function() {
                     var e = {
                         contactName: this.options.receiver.contact,
                         contactTel: this.options.receiver.mobile,
                         contactPhone: this.options.receiver.phone,
                         province: this.options.receiver.addrInfo.province,
                         city: this.options.receiver.addrInfo.city,
                         county: this.options.receiver.addrInfo.county,
                         address: this.options.receiver.addrInfo.address,
                         customerId: "",
                         addressId: ""
                     };
                     this.$el.html(this.template({
                         addressBook: e,
                         hasCustomerId: !1,
                         hideHkmctw: !0,
                         hasCompany: !1
                     })),
                         this.location = new i({
                             el: this.$(".detail-location-input")
                         }),
                         this.amapPicker = new n({
                             el: this.$("#add-detailaddress").parent(),
                             location: this.location
                         }),
                         this.add_location = {
                             province: this.options.receiver.addrInfo.province,
                             provinceCode: this.options.receiver.addrInfo.provinceCode,
                             city: this.options.receiver.addrInfo.city,
                             cityCode: this.options.receiver.addrInfo.cityCode,
                             county: this.options.receiver.addrInfo.county,
                             countyCode: this.options.receiver.addrInfo.countyCode,
                             locationCode: this.options.receiver.addrInfo.locationCode
                         }
                 },
                 events: {
                     "regionModelUpdate .detail-location-input": "regionModelUpdate",
                     "click .save-address": "saveAddress",
                     "click .addIntellectFill": "showAddIntellectFillContent"
                 },
                 showAddIntellectFillContent: function() {
                     new r({
                         fillInput: this.fillOrderItemInfo.bind(this),
                         location: this.location
                     })
                 },
                 fillOrderItemInfo: function(e) {
                     $("#add-name").val(e.personalName),
                         $("#add-detailaddress").val(e.site),
                         $("#add-company").val(""),
                         e.mobile || e.telephone ? ($("#add-phone").val(e.telephone),
                             $("#add-mobile").val(e.mobile)) : ($("#add-phone").val(""),
                             $("#add-mobile").val(""))
                 },
                 regionModelUpdate: function() {
                     this.add_location = this.location.getLocationData()
                 },
                 saveAddress: function() {
                     if (this.$(".address-form").parsley().validate()) {
                         var e = {
                             phone: this.$("#add-phone").val(),
                             contact: this.$("#add-name").val(),
                             mobile: this.$("#add-mobile").val(),
                             addrInfo: {
                                 addrId: this.options.receiver.addrInfo.addrId,
                                 locationCode: this.add_location.locationCode,
                                 country: "中国",
                                 province: this.add_location.province,
                                 provinceCode: this.add_location.provinceCode,
                                 city: this.add_location.city,
                                 cityCode: this.add_location.cityCode,
                                 county: this.add_location.county,
                                 countyCode: this.add_location.countyCode,
                                 postalCode: this.options.receiver.addrInfo.postalCode,
                                 longitude: this.options.receiver.addrInfo.longitude,
                                 latitude: this.options.receiver.addrInfo.latitude,
                                 address: this.$("#add-detailaddress").val()
                             }
                         };
                         this.options.callback(e)
                     }
                 }
             })
         }),
         define("views/order/addressBook/addressBookEdit", ["sflayer", "templates", "views/detailedLocationPicker/picker", "views/detailedLocationPicker/amapPicker", "helper", "sflayer", "views/order/addIntellectFill"], function(s, e, t, i, o, s, n) {
             var a = [_l("请填写正确的台湾个人身份证号"), _l("请填写正确的台湾公司营业执照号")];
             return Backbone.View.extend({
                 initialize: function() {
                     this.$(".detail-location-input").data("max-A000710000", 5).data("max-886", 5).data("max-A000810000", 5).data("max-852", 5),
                         this.location = new t({
                             el: this.$(".detail-location-input")
                         }),
                         this.amapPicker = new i({
                             el: this.$("#add-detailaddress").parent(),
                             location: this.location
                         }),
                         this.hasCustomerId = this.options.hasCustomerId;
                     setTimeout(function() {
                         $("#add-company").trigger("blur")
                     }),
                     this.options.addressBook && (this.add_location = this.options.addressBook)
                 },
                 events: {
                     "blur #add-company": "onReceiverCompanyChanged",
                     "regionModelUpdate .detail-location-input": "regionModelUpdate",
                     "click .save-address": "saveAddress",
                     "click .addIntellectFill": "showAddIntellectFillContent"
                 },
                 showAddIntellectFillContent: function() {
                     new n({
                         fillInput: this.fillOrderItemInfo.bind(this),
                         location: this.location
                     })
                 },
                 fillOrderItemInfo: function(e) {
                     $("#add-name").val(e.personalName),
                         $("#add-detailaddress").val(e.site),
                         $("#add-company").val(""),
                         e.mobile || e.telephone ? ($("#add-phone").val(e.telephone),
                             $("#add-mobile").val(e.mobile)) : ($("#add-phone").val(""),
                             $("#add-mobile").val(""))
                 },
                 onReceiverCompanyChanged: function(e) {
                     this.hasCustomerId && ("" == $.trim(this.$(e.currentTarget).val()) ? this.$(".TWlicenseInput input").attr("data-parsley-pattern", "^[a-zA-Z0-9]{10}$").attr("data-parsley-pattern-message", a[0]) : this.$(".TWlicenseInput input").attr("data-parsley-pattern", "^[a-zA-Z0-9]{8}$").attr("data-parsley-pattern-message", a[1]))
                 },
                 regionModelUpdate: function() {
                     this.add_location = this.location.getLocationData(),
                         this.hasCustomerId = "886" == this.add_location.locationCode,
                         this.hasCustomerId ? (this.$(".TWlicenseInput").show(),
                             this.$(".TWlicenseInput input").attr("data-parsley-required", "true"),
                             this.$("#add-company").trigger("blur")) : (this.$(".TWlicenseInput").hide(),
                             this.$(".TWlicenseInput input").val("").removeAttr("data-parsley-required"))
                 },
                 saveAddress: function(e) {
                     if (this.$el.parsley().validate()) {
                         var t, i;
                         if (this.addressId = e ? this.$(e.currentTarget).data("addressid") : this.addressId,
                                 this.addressId) {
                             var n = _.findWhere(this.model.get("addressBooks"), {
                                 addressId: this.addressId
                             })
                                 , a = this.add_location.locationCode;
                             if ((o.isHK_MC_TW(a) || o.isInternational(a)) && "1" == n.isDefault)
                                 return void s.msg(_l("港澳台地址不支持默认地址设置"), {
                                     time: 2e3
                                 });
                             t = n.isDefault,
                                 i = n.memType
                         } else
                             t = 0,
                                 i = 2;
                         var r = this;
                         sfAjax.saveToAddressBook({
                             data: {
                                 address: this.$("#add-detailaddress").val(),
                                 customerId: this.$("#TWlicense").val(),
                                 city: this.add_location.city,
                                 cityCode: this.add_location.cityCode,
                                 companyName: this.$("#add-company").val(),
                                 contactName: this.$("#add-name").val(),
                                 contactPhone: this.$("#add-phone").val(),
                                 contactTel: this.$("#add-mobile").val(),
                                 country: "中国",
                                 countryCode: "A000086000",
                                 county: this.add_location.county,
                                 countyCode: this.add_location.countyCode,
                                 locationCode: this.add_location.locationCode,
                                 province: this.add_location.province,
                                 provinceCode: this.add_location.provinceCode,
                                 addressId: this.addressId || "",
                                 isDefault: t,
                                 memType: i,
                                 latitude: "",
                                 longitude: ""
                             },
                             success: function(e) {
                                 if (e && 0 == e.code)
                                     var t = s.confirm(_l("保存成功"), {
                                         noStop: !0,
                                         btn: _l("确定"),
                                         yes: function() {
                                             s.close(t),
                                                 r.options.saveSuccCallBack()
                                         }
                                     });
                                 else
                                     r.saveErr()
                             },
                             error: function() {
                                 r.saveErr()
                             },
                             login: {
                                 succCallback: this.saveAddress.bind(this),
                                 cancelCallback: this.saveErr.bind(this)
                             }
                         })
                     }
                 },
                 saveErr: function() {
                     s.msg(_l("保存失败，请重试"))
                 }
             })
         }),
         function(h) {
             "use strict";
             var o = function(e, t) {
                 this.init(e, t)
             };
             o.prototype = {
                 init: function(e, t) {
                     this.$element = h(e);
                     var i = t && t.bootstrapMajorVersion ? t.bootstrapMajorVersion : h.fn.bootstrapPaginator.defaults.bootstrapMajorVersion;
                     this.$element.attr("id");
                     if (2 === i && !this.$element.is("div"))
                         throw "in Bootstrap version 2 the pagination must be a div element. Or if you are using Bootstrap pagination 3. Please specify it in bootstrapMajorVersion in the option";
                     if (2 < i && !this.$element.is("ul"))
                         throw "in Bootstrap version 3 the pagination root item must be an ul element.";
                     this.currentPage = 1,
                         this.lastPage = 1,
                         this.setOptions(t),
                         this.initialized = !0
                 },
                 setOptions: function(e) {
                     this.options = h.extend({}, this.options || h.fn.bootstrapPaginator.defaults, e),
                         this.totalPages = parseInt(this.options.totalPages, 10),
                         this.numberOfPages = parseInt(this.options.numberOfPages, 10),
                     e && void 0 !== e.currentPage && this.setCurrentPage(e.currentPage),
                         this.listen(),
                         this.render(),
                     this.initialized || this.lastPage === this.currentPage || this.$element.trigger("page-changed", [this.lastPage, this.currentPage])
                 },
                 listen: function() {
                     this.$element.off("page-clicked"),
                         this.$element.off("page-changed"),
                     "function" == typeof this.options.onPageClicked && this.$element.bind("page-clicked", this.options.onPageClicked),
                     "function" == typeof this.options.onPageChanged && this.$element.on("page-changed", this.options.onPageChanged),
                         this.$element.bind("page-clicked", this.onPageClicked)
                 },
                 destroy: function() {
                     this.$element.off("page-clicked"),
                         this.$element.off("page-changed"),
                         this.$element.removeData("bootstrapPaginator"),
                         this.$element.empty()
                 },
                 show: function(e) {
                     this.setCurrentPage(e),
                         this.render(),
                     this.lastPage !== this.currentPage && this.$element.trigger("page-changed", [this.lastPage, this.currentPage])
                 },
                 showNext: function() {
                     var e = this.getPages();
                     e.next && this.show(e.next)
                 },
                 showPrevious: function() {
                     var e = this.getPages();
                     e.prev && this.show(e.prev)
                 },
                 showFirst: function() {
                     var e = this.getPages();
                     e.first && this.show(e.first)
                 },
                 showLast: function() {
                     var e = this.getPages();
                     e.last && this.show(e.last)
                 },
                 onPageItemClicked: function(e) {
                     var t = e.data.type
                         , i = e.data.page;
                     this.$element.trigger("page-clicked", [e, t, i])
                 },
                 onPageClicked: function(e, t, i, n) {
                     var a = h(e.currentTarget);
                     switch (i) {
                         case "first":
                             a.bootstrapPaginator("showFirst");
                             break;
                         case "prev":
                             a.bootstrapPaginator("showPrevious");
                             break;
                         case "next":
                             a.bootstrapPaginator("showNext");
                             break;
                         case "last":
                             a.bootstrapPaginator("showLast");
                             break;
                         case "page":
                             a.bootstrapPaginator("show", n)
                     }
                 },
                 render: function() {
                     var e = this.getValueFromOption(this.options.containerClass, this.$element)
                         , t = this.options.size || "normal"
                         , i = this.options.alignment || "left"
                         , n = this.getPages()
                         , a = 2 === this.options.bootstrapMajorVersion ? h("<ul></ul>") : this.$element
                         , r = 2 === this.options.bootstrapMajorVersion ? this.getValueFromOption(this.options.listContainerClass, a) : null
                         , s = null
                         , o = null
                         , l = null
                         , d = null
                         , c = null
                         , u = 0;
                     switch (this.$element.prop("class", ""),
                         this.$element.addClass("pagination"),
                         t.toLowerCase()) {
                         case "large":
                         case "small":
                         case "mini":
                             this.$element.addClass(h.fn.bootstrapPaginator.sizeArray[this.options.bootstrapMajorVersion][t.toLowerCase()])
                     }
                     if (2 === this.options.bootstrapMajorVersion)
                         switch (i.toLowerCase()) {
                             case "center":
                                 this.$element.addClass("pagination-centered");
                                 break;
                             case "right":
                                 this.$element.addClass("pagination-right")
                         }
                     for (this.$element.addClass(e),
                              this.$element.empty(),
                          2 === this.options.bootstrapMajorVersion && (this.$element.append(a),
                              a.addClass(r)),
                              this.pageRef = [],
                          n.first && (s = this.buildPageItem("first", n.first)) && a.append(s),
                          n.prev && (o = this.buildPageItem("prev", n.prev)) && a.append(o),
                              u = 0; u < n.length; u += 1)
                         (c = this.buildPageItem("page", n[u])) && a.append(c);
                     n.next && (l = this.buildPageItem("next", n.next)) && a.append(l),
                     n.last && (d = this.buildPageItem("last", n.last)) && a.append(d)
                 },
                 buildPageItem: function(e, t) {
                     var i = h("<li></li>")
                         , n = h("<a></a>")
                         , a = ""
                         , r = ""
                         , s = this.options.itemContainerClass(e, t, this.currentPage)
                         , o = this.getValueFromOption(this.options.itemContentClass, e, t, this.currentPage)
                         , l = null;
                     switch (e) {
                         case "first":
                         case "last":
                         case "prev":
                         case "next":
                         case "page":
                             if (!this.getValueFromOption(this.options.shouldShowPage, e, t, this.currentPage))
                                 return;
                             a = this.options.itemTexts(e, t, this.currentPage),
                                 r = this.options.tooltipTitles(e, t, this.currentPage)
                     }
                     return i.addClass(s).append(n),
                         n.addClass(o).html(a).on("click", null, {
                             type: e,
                             page: t
                         }, h.proxy(this.onPageItemClicked, this)),
                     this.options.pageUrl && n.attr("href", this.getValueFromOption(this.options.pageUrl, e, t, this.currentPage)),
                         this.options.useBootstrapTooltip ? (l = h.extend({}, this.options.bootstrapTooltipOptions, {
                             title: r
                         }),
                             n.tooltip(l)) : n.attr("title", r),
                         i
                 },
                 setCurrentPage: function(e) {
                     if (e > this.totalPages || e < 1)
                         throw "Page out of range";
                     this.lastPage = this.currentPage,
                         this.currentPage = parseInt(e, 10)
                 },
                 getPages: function() {
                     var e = this.totalPages
                         , t = this.currentPage % this.numberOfPages == 0 ? (parseInt(this.currentPage / this.numberOfPages, 10) - 1) * this.numberOfPages + 1 : parseInt(this.currentPage / this.numberOfPages, 10) * this.numberOfPages + 1
                         , i = []
                         , n = 0
                         , a = 0;
                     for (n = t = t < 1 ? 1 : t,
                              a = 0; a < this.numberOfPages && n <= e; n += 1,
                              a += 1)
                         i.push(n);
                     return (i.first = 1) < this.currentPage ? i.prev = this.currentPage - 1 : i.prev = 1,
                         this.currentPage < e ? i.next = this.currentPage + 1 : i.next = e,
                         i.last = e,
                         i.current = this.currentPage,
                         i.total = e,
                         i.numberOfPages = this.options.numberOfPages,
                         i
                 },
                 getValueFromOption: function(e) {
                     var t = Array.prototype.slice.call(arguments, 1);
                     return "function" == typeof e ? e.apply(this, t) : e
                 }
             },
                 h.fn.bootstrapPaginator,
                 h.fn.bootstrapPaginator = function(a) {
                     var r = arguments
                         , s = null;
                     return h(this).each(function(e, t) {
                         var i = h(t)
                             , n = i.data("bootstrapPaginator");
                         if (!n)
                             return n = new o(this,"object" != typeof a ? null : a),
                                 void (i = h(n.$element)).data("bootstrapPaginator", n);
                         if ("string" == typeof a) {
                             if (!n[a])
                                 throw "Method " + a + " does not exist";
                             s = n[a].apply(n, Array.prototype.slice.call(r, 1))
                         } else
                             s = n.setOptions(a)
                     }),
                         s
                 }
                 ,
                 h.fn.bootstrapPaginator.sizeArray = {
                     2: {
                         large: "pagination-large",
                         small: "pagination-small",
                         mini: "pagination-mini"
                     },
                     3: {
                         large: "pagination-lg",
                         small: "pagination-sm",
                         mini: ""
                     }
                 },
                 h.fn.bootstrapPaginator.defaults = {
                     containerClass: "",
                     size: "normal",
                     alignment: "left",
                     bootstrapMajorVersion: 2,
                     listContainerClass: "",
                     itemContainerClass: function(e, t, i) {
                         return t === i ? "active" : ""
                     },
                     itemContentClass: function(e, t, i) {
                         return ""
                     },
                     currentPage: 1,
                     numberOfPages: 5,
                     totalPages: 1,
                     pageUrl: function(e, t, i) {
                         return null
                     },
                     onPageClicked: null,
                     onPageChanged: null,
                     useBootstrapTooltip: !1,
                     shouldShowPage: function(e, t, i) {
                         var n = !0;
                         switch (e) {
                             case "first":
                             case "prev":
                                 n = 1 !== i;
                                 break;
                             case "next":
                             case "last":
                                 n = i !== this.totalPages;
                                 break;
                             case "page":
                                 n = !0
                         }
                         return n
                     },
                     itemTexts: function(e, t, i) {
                         switch (e) {
                             case "first":
                                 return "&lt;&lt;";
                             case "prev":
                                 return "&lt;";
                             case "next":
                                 return "&gt;";
                             case "last":
                                 return "&gt;&gt;";
                             case "page":
                                 return t
                         }
                     },
                     tooltipTitles: function(e, t, i) {
                         switch (e) {
                             case "first":
                                 return "Go to first page";
                             case "prev":
                                 return "Go to previous page";
                             case "next":
                                 return "Go to next page";
                             case "last":
                                 return "Go to last page";
                             case "page":
                                 return t === i ? "Current page is " + t : "Go to page " + t
                         }
                     },
                     bootstrapTooltipOptions: {
                         animation: !0,
                         html: !0,
                         placement: "top",
                         selector: !1,
                         title: "",
                         container: !1
                     }
                 },
                 h.fn.bootstrapPaginator.Constructor = o
         }(window.jQuery),
         define("bootstrapPagination", function() {}),
         define("others/bootstrapPagination", ["backbone", "bootstrapPagination"], function(e) {
             return e.View.extend({
                 initialize: function() {
                     this.currentPage = this.options.currentPage,
                         this.numberOfPages = this.options.numberOfPages,
                         this.totalPages = this.options.totalPages,
                         this.initPagination()
                 },
                 initPagination: function() {
                     var a = this;
                     this.$(".pagination").bootstrapPaginator({
                         currentPage: a.currentPage,
                         numberOfPages: a.numberOfPages,
                         totalPages: a.totalPages,
                         size: "normal",
                         bootstrapMajorVersion: 3,
                         alignment: "center",
                         itemTexts: function(e, t, i) {
                             switch (e) {
                                 case "first":
                                     return _l("首页");
                                 case "prev":
                                     return _l("上一页");
                                 case "next":
                                     return _l("下一页");
                                 case "last":
                                     return _l("末页");
                                 case "page":
                                     return t
                             }
                         },
                         itemContainerClass: function(e, t, i) {
                             return t === i ? "active" : "pointer-cursor"
                         },
                         onPageClicked: function(e, t, i, n) {
                             n != a.currentPage && a.$el.trigger("pageClicked", n)
                         }
                     })
                 }
             })
         }),
         function(d, e) {
             "use strict";
             d.ajaxPrefilter(function(e, t, i) {
                 if (e.iframe)
                     return "iframe"
             }),
                 d.ajaxTransport("iframe", function(e, t, i) {
                     var n = null
                         , a = null
                         , r = "iframe-" + d.now()
                         , s = d(e.files).filter(":file:enabled")
                         , o = null;
                     function l() {
                         o.replaceWith(function(e) {
                             return s.get(e)
                         }),
                             n.remove(),
                             a.attr("src", "javascript:false;").remove()
                     }
                     if (e.dataTypes.shift(),
                             s.length)
                         return n = d("<form enctype='multipart/form-data' method='post'></form>").hide().attr({
                             action: e.url,
                             target: r
                         }),
                         "string" == typeof e.data && 0 < e.data.length && d.error("data must not be serialized"),
                             d.each(e.data || {}, function(e, t) {
                                 d.isPlainObject(t) && (e = t.name,
                                     t = t.value),
                                     d("<input type='hidden'>").attr({
                                         name: e,
                                         value: t
                                     }).appendTo(n)
                             }),
                             d("<input type='hidden' value='IFrame' name='X-Requested-With'>").appendTo(n),
                             o = s.after(function(e) {
                                 return d(this).clone().prop("disabled", !0)
                             }).next(),
                             s.appendTo(n),
                             {
                                 send: function(e, o) {
                                     (a = d("<iframe src='javascript:false;' name='" + r + "' style='display:none'></iframe>")).on("load", function() {
                                         a.off("load").on("load", function() {
                                             var e, t = this.contentWindow ? this.contentWindow.document : this.contentDocument ? this.contentDocument : this.document, i = t.documentElement ? t.documentElement : t.body, n = i.getElementsByTagName("textarea")[0], a = n ? n.getAttribute("data-type") : null, r = {
                                                 html: i.innerHTML,
                                                 text: a ? n.value : i ? i.textContent || i.innerText : null
                                             }, s = 200;
                                             l();
                                             try {
                                                 s = (e = JSON.parse(r.text)).error || 200,
                                                     delete e.error,
                                                     r.text = JSON.stringify(e)
                                             } catch (e) {}
                                             o(s, 200 == s ? "success" : "error", r, a ? "Content-Type: " + a : null)
                                         }),
                                             n[0].submit()
                                     }),
                                         d("body").append(n, a)
                                 },
                                 abort: function() {
                                     null !== a && (a.off("load").attr("src", "javascript:false;"),
                                         l())
                                 }
                             }
                 })
         }(jQuery),
         define("jquery.iframe-transport", function() {}),
         define("views/order/addressBook/upDownTemplate", ["sflayer", "templates", "helper", "jquery.iframe-transport"], function(i, e, t) {
             return Backbone.View.extend({
                 initialize: function() {
                     this.$(".download").attr("href", t.getResourceURL("file/Address-Template-sc.xlsx"))
                 },
                 events: {
                     "click #fileupload": "clearVal",
                     "change #fileupload": "uploadAdd"
                 },
                 clearVal: function(e) {
                     this.$(e.currentTarget).val("")
                 },
                 uploadAdd: function(e) {
                     if (this.fileName = e ? this.$(e.currentTarget).val() : this.fileName,
                         "" != this.fileName)
                         if ("xlsx" != this.fileName.substring(this.fileName.lastIndexOf(".") + 1, this.fileName.length).toLowerCase())
                             i.msg(_l("请选择正确格式的模版文件"));
                         else {
                             var t = this;
                             sfAjax.uploadAddressBook({
                                 files: this.$("#fileupload").val(),
                                 iframe: !0,
                                 processData: !1,
                                 success: function(e) {
                                     e && 0 == e.code && (1 == e.result.success ? (i.msg(_l("上传成功")),
                                         t.options.uploadAddSuccCallBack()) : 0 == e.result.success && (e.result.errors ? t.uploadErrByCode(e.result.errors) : t.uploadErrByCode()))
                                 },
                                 error: function(e) {
                                     -1 < e.responseText.indexOf("413") ? t.uploadErrByCode("OWF-0008") : t.uploadErrByCode("OWF-0009")
                                 },
                                 login: {
                                     succCallback: this.uploadAdd.bind(this),
                                     cancelCallback: function() {
                                         i.msg(_l("取消上传"))
                                     }
                                 }
                             })
                         }
                 },
                 uploadErrByCode: function(e) {
                     "OWF-0006" == e || null == e ? i.msg(_l("您上传的模版有误，请点击下载模版，填写完成后重新上传")) : "OWF-0001" == e || "OWF-0005" == e ? i.msg(_l("模版中含未填写必填字段，请核对后再上传")) : "OWF-0002" == e ? i.msg(_l("您上传的模版中地址簿个数多于100条，请删减后重新上传")) : "OWF-0003" == e ? i.msg(_l("模板中地址数据格式输入有误，请核对后再上传")) : "OWF-0004" == e ? i.msg(_l("模板中手机/电话号码格式输入有误，请核对后再上传")) : "OWF-0008" == e ? i.msg(_l("您上传的模版太大，请删减后重新上传")) : i.msg(_l("上传失败"))
                 }
             })
         }),
         define("views/order/addressBook/addressBookContent", ["baseView", "templates", "helper", "views/order/addressBook/addressBookEdit", "others/bootstrapPagination", "views/order/addressBook/upDownTemplate", "event", "sflayer"], function(e, n, a, r, i, t, s, o) {
             return e.extend({
                 events: {
                     "submit .search-form": "submitForm",
                     "click .address_success tr": "selectAdd",
                     "dblclick .address_success tr": "preDblclickToConform",
                     "click .try-again": "fetchAddressBookAgain",
                     "click .select-confirm": "confirmAddress",
                     "click .add": "addOneAddress",
                     "click .bulkAdd": "bulkAddAddress",
                     "mouseenter .modify": "showModifyTip",
                     "mouseleave .modify": "hideModifyTip",
                     "click .modify": "modifyAddress",
                     "mouseenter .set-default": "showSetDefaultTip",
                     "mouseleave .set-default": "hideSetDefaultTip",
                     "click .set-default": "setDefault",
                     "mouseenter .delete": "showDeleteTip",
                     "mouseleave .delete": "hideDeleteTip",
                     "click .delete": "deleteAddress",
                     "pageClicked .bootstrap-pagination": "jumpPage"
                 },
                 template: n.addressBook,
                 layerOpts: {
                     title: _l("从地址簿选择"),
                     area: "960px",
                     offset: "77px",
                     skin: "address-content"
                 },
                 render: function() {
                     this.$el.html(this.template({
                         loadingImg: a.getResourceURL("images/order/loading.gif")
                     })),
                         this.activeEV = "init",
                         this.page = this.options.page,
                         this.totalPage = this.options.totalPage,
                         this.renderAddBooKList();
                     var t = this;
                     $("body").on("click", function(e) {
                         0 == $(e.target).closest(".up-down-template").length && (o.close(t.upDownTemplateTip),
                             t.upDownTemplateTip = null)
                     }),
                         $(window).scroll(function() {
                             o.close(t.upDownTemplateTip),
                                 t.upDownTemplateTip = null,
                                 o.close(t.modifyTip),
                                 o.close(t.setDefaultTip),
                                 o.close(t.deleteTip)
                         }),
                         this.hideTipsOnScroll(),
                         $(window).resize(function() {
                             t.$(".height-scroll").css("height", $(this).height() - 464),
                                 $(this).scroll()
                         }),
                         $(window).resize()
                 },
                 renderAddBooKList: function() {
                     var e = this.model.get("addressBooks");
                     if (this.$(".add").toggleClass("disabled", !1),
                             this.$(".address_success").remove(),
                             this.$("dl").hide(),
                         e && 0 < e.length) {
                         var t = n.addressSuccessBody({
                             addressBookList: e
                         });
                         this.$(".height-scroll").append(t);
                         new i({
                             el: this.$(".bootstrap-pagination"),
                             totalPages: this.totalPage,
                             currentPage: this.page,
                             numberOfPages: 3
                         });
                         this.$(".address_success p").each(function() {
                             $(this).attr("title", $(this).text())
                         }),
                             this.$(".hide-in-loading").show()
                     } else
                         1 < this.page ? (this.page -= 1,
                             this.getAddBooKList()) : "init" == this.activeEV ? this.$(".address_fetch_null").show() : this.$(".address_search_null").show()
                 },
                 getAddBooKList: function(e) {
                     this.page = e || this.page;
                     var t = this;
                     sfAjax.fetchAddressBookList({
                         data: {
                             condition: encodeURI(this.searchParm || ""),
                             pageNo: this.page
                         },
                         success: function(e) {
                             e && 0 == e.code ? (t.model.set("addressBooks", e.result.content),
                                 t.page = e.result.pageNo,
                                 t.totalPage = e.result.totalPage,
                                 t.renderAddBooKList()) : t.showNetworkError()
                         },
                         error: function() {
                             t.showNetworkError()
                         },
                         login: {
                             succCallback: this.getAddBooKList.bind(this),
                             cancelCallback: this.showNetworkError.bind(this)
                         }
                     })
                 },
                 hideTipsOnScroll: function() {
                     var e = this;
                     this.$(".height-scroll").scroll(function() {
                         o.close(e.modifyTip),
                             o.close(e.setDefaultTip),
                             o.close(e.deleteTip)
                     })
                 },
                 submitForm: function(e) {
                     if (e.preventDefault(),
                             this.activeEV = "search",
                             this.$(e.currentTarget).parsley().validate()) {
                         this.showLoading();
                         var t = $.trim(this.$(".search-input").val());
                         this.searchParm = t,
                             this.getAddBooKList(1)
                     }
                 },
                 jumpPage: function(e, t) {
                     this.showLoading(),
                         this.getAddBooKList(t)
                 },
                 showNetworkError: function() {
                     this.$(".add").toggleClass("disabled", !0),
                         this.$("dl").hide(),
                         this.$(".address_networkErr").show()
                 },
                 showLoading: function() {
                     this.$(".hide-in-loading").hide(),
                         this.$("dl").hide(),
                         this.$(".address_loading").show()
                 },
                 selectAdd: function(e) {
                     this.$(e.target).hasClass("address-check") ? (this.$(".address-check").removeClass("aicon-check").addClass("aicon-uncheck"),
                         this.$(e.target).removeClass("aicon-uncheck").addClass("aicon-check"),
                         e.stopPropagation()) : this.$(e.currentTarget).find(".address-check").trigger("click")
                 },
                 confirmAddress: function() {
                     1 == this.$(".address-check.aicon-check").length ? this.dblclickToConform() : o.msg(_l("请选择其中的一条数据"))
                 },
                 preDblclickToConform: function(e) {
                     0 < this.$(e.target).closest(".modify,.set-default,.delete").length || this.dblclickToConform()
                 },
                 dblclickToConform: function() {
                     var i = this
                         , e = this.$(".address-check.aicon-check").closest("tr").data("addid");
                     sfAjax.getAddressById({
                         data: {
                             id: e
                         },
                         success: function(e) {
                             if (e && 0 == e.code && e.result) {
                                 var t = e.result.locationCode;
                                 if (a.isInternational(t))
                                     return void i.locationNotSupport();
                                 if (a.isHK_MC_TW(t) && "receiver" == i.options.fillOption && "heavyCargo" == i.options.viewOption)
                                     return void i.locationNotSupport();
                                 if (a.isHK_MC_TW(t) && "sender" == i.options.fillOption)
                                     return void i.locationNotSupport();
                                 i.model.trigger("oneAddGot", e.result)
                             }
                         },
                         error: function() {
                             o.msg(_l("网络错误"))
                         },
                         login: {
                             succCallback: this.dblclickToConform.bind(this),
                             cancelCallback: null
                         }
                     })
                 },
                 locationNotSupport: function() {
                     o.msg(_l("暂不支持该地区下单"))
                 },
                 fetchAddressBookAgain: function() {
                     this.showLoading(),
                         this.getAddBooKList()
                 },
                 addOneAddress: function() {
                     this.addressBookAddLayer = o.open({
                         title: _l("新增联系人"),
                         area: "700px",
                         fixed: !1,
                         content: n.addressBookEdit({
                             addressBook: null,
                             hasCustomerId: !1,
                             hideHkmctw: !1,
                             hasCompany: !0
                         })
                     }),
                         new r({
                             el: ".address-form",
                             model: this.model,
                             hasCustomerId: !1,
                             addressBook: null,
                             saveSuccCallBack: this.newAddressBookSucc.bind(this)
                         })
                 },
                 newAddressBookSucc: function() {
                     o.close(this.addressBookAddLayer),
                         this.getAddBooKList()
                 },
                 bulkAddAddress: function(e) {
                     return this.upDownTemplateTip ? (o.close(this.upDownTemplateTip),
                         this.upDownTemplateTip = null) : (this.upDownTemplateTip = o.tips(n.upDownTemplate(), e.currentTarget, {
                         tips: [3, "#eb1d21"],
                         skin: "up-down-template sf-tip",
                         time: !1,
                         isOutAnim: !1
                     }),
                         new t({
                             el: ".up-down-template",
                             uploadAddSuccCallBack: this.uploadAddSucc.bind(this)
                         })),
                         !1
                 },
                 uploadAddSucc: function() {
                     o.close(this.upDownTemplateTip),
                         this.upDownTemplateTip = null,
                         this.getAddBooKList()
                 },
                 showModifyTip: function(e) {
                     this.modifyTip = o.tips(_l("修改"), e.currentTarget, {
                         tips: [1, "#333"],
                         time: !1
                     })
                 },
                 hideModifyTip: function() {
                     o.close(this.modifyTip)
                 },
                 modifyAddress: function(e) {
                     e && e.stopPropagation(),
                         this.modifyAddressId = e ? this.$(e.currentTarget).closest("tr").data("addid") : this.modifyAddressId;
                     var i = this;
                     if (e) {
                         if (this.$(e.currentTarget).hasClass("disabled"))
                             return;
                         this.$(e.currentTarget).toggleClass("disabled", !0)
                     }
                     sfAjax.getAddressById({
                         data: {
                             id: this.modifyAddressId
                         },
                         success: function(e) {
                             if (e && 0 == e.code && e.result) {
                                 var t = "886" == e.result.locationCode || !1;
                                 i.addressBookModLayer = o.open({
                                     title: _l("修改联系人"),
                                     area: "700px",
                                     fixed: !1,
                                     content: n.addressBookEdit({
                                         addressBook: e.result,
                                         hasCustomerId: t,
                                         hideHkmctw: !1,
                                         hasCompany: !0
                                     })
                                 }),
                                     new r({
                                         el: ".address-form",
                                         model: i.model,
                                         hasCustomerId: t,
                                         addressBook: e.result,
                                         saveSuccCallBack: i.modAddressBookSucc.bind(i)
                                     })
                             }
                         },
                         complete: function() {
                             e && i.$(e.currentTarget).toggleClass("disabled", !1)
                         },
                         error: function() {
                             o.msg(_l("网络错误"))
                         },
                         login: {
                             succCallback: this.modifyAddress.bind(this),
                             cancelCallback: null
                         }
                     })
                 },
                 modAddressBookSucc: function() {
                     o.close(this.addressBookModLayer),
                         this.getAddBooKList()
                 },
                 showSetDefaultTip: function(e) {
                     var t = this.$(e.currentTarget).hasClass("active") ? _l("已为默认地址") : _l("设为默认地址");
                     this.setDefaultTip = o.tips(t, e.currentTarget, {
                         tips: [1, "#333"],
                         time: !1
                     })
                 },
                 hideSetDefaultTip: function() {
                     o.close(this.setDefaultTip)
                 },
                 setDefault: function(e) {
                     if (e && e.stopPropagation(),
                             this.hideSetDefaultTip(),
                             this.setDefaultTarget = e ? this.$(e.currentTarget) : this.setDefaultTarget,
                             !this.setDefaultTarget.hasClass("active")) {
                         var t = this.setDefaultTarget.closest("tr").data("addid")
                             , i = _.findWhere(this.model.get("addressBooks"), {
                             addressId: t
                         }).locationCode;
                         if (a.isHK_MC_TW(i) || a.isInternational(i))
                             o.msg(_l("港澳台及国际地址不支持默认地址设置，请重新选择"), {
                                 time: 2e3
                             });
                         else {
                             if (this.setDefaultTarget.hasClass("disabled"))
                                 return;
                             this.setDefaultTarget.toggleClass("disabled", !0);
                             var n = this;
                             sfAjax.setDefaultAddress({
                                 data: {
                                     addressId: t,
                                     isDefault: 1
                                 },
                                 success: function(e) {
                                     e && 0 == e.code && e.result ? n.setDefaultAddressSuccess(n.setDefaultTarget) : n.setDefaultAddressFail()
                                 },
                                 error: function() {
                                     n.setDefaultAddressFail()
                                 },
                                 complete: function() {
                                     n.setDefaultTarget.toggleClass("disabled", !1)
                                 },
                                 login: {
                                     succCallback: this.setDefault.bind(this),
                                     cancelCallback: this.setDefaultAddressFail.bind(this)
                                 }
                             })
                         }
                     }
                 },
                 setDefaultAddressSuccess: function(t) {
                     o.msg(_l("已设为默认寄件地址"));
                     var e = this.$(".default-tip");
                     this.$(".default-tip").remove(),
                         t.closest("tr").find("td").first().append(e),
                         this.$(".set-default").removeClass("active"),
                         t.addClass("active"),
                         _.each(this.model.get("addressBooks"), function(e) {
                             "1" == e.isDefault && (e.isDefault = "0"),
                             e.addressId == t.closest("tr").data("addid") && (e.isDefault = "1")
                         })
                 },
                 setDefaultAddressFail: function() {
                     o.msg(_l("设置默认寄件地址失败"))
                 },
                 showDeleteTip: function(e) {
                     this.deleteTip = o.tips(_l("删除"), e.currentTarget, {
                         tips: [1, "#333"],
                         time: !1
                     })
                 },
                 hideDeleteTip: function() {
                     o.close(this.deleteTip)
                 },
                 deleteAddress: function(e) {
                     e.stopPropagation(),
                         this.deleteAddressId = this.$(e.target).closest("tr").data("addid");
                     var t = _.findWhere(this.model.get("addressBooks"), {
                         addressId: this.deleteAddressId
                     })
                         , i = _l("您真的要删除") + (t.contactTel || t.contactPhone) + "(" + t.contactName + ")" + _l("这个地址吗") + "？"
                         , n = this
                         , a = o.confirm(i, {
                         noStop: !0,
                         btn: [_l("确定"), _l("取消")]
                     }, function() {
                         o.close(a),
                             n.confirmDelete()
                     }, function() {
                         o.close(a)
                     })
                 },
                 confirmDelete: function() {
                     var e = this;
                     sfAjax.deleteOneAddress({
                         data: {
                             id: this.deleteAddressId
                         },
                         success: function() {
                             o.msg(_l("删除成功")),
                                 e.getAddBooKList()
                         },
                         error: function() {
                             o.msg(_l("删除失败"))
                         },
                         login: {
                             succCallback: this.confirmDelete.bind(this),
                             cancelCallback: function() {
                                 o.msg(_l("删除失败"))
                             }
                         }
                     })
                 }
             })
         }),
         define("views/waybill/changeAppointBill", ["baseView", "templates", "views/billOptions/payType", "views/billOptions/weight", "views/billOptions/supportVal", "views/billOptions/additionalService", "views/billOptions/leaveMsg", "views/billOptions/receiverItem", "views/billOptions/modifyReceiver", "sflayer", "views/order/addressBook/addressBookContent"], function(e, n, t, i, a, r, s, o, l, d, c) {
             var u = ["T1", "T104", "T8", "T801", "T4", "T6"]
                 , h = ["SE0100", "SE0101"];
             return e.extend({
                 layerOpts: {
                     title: _l("设置快件信息"),
                     area: "800px",
                     fixed: !1,
                     offset: "100px"
                 },
                 template: n.changeAppointBill,
                 init: function(e) {
                     this.billInfo = e.billInfo,
                         this.signedBackBillIndex = this.billInfo.signedBackDetail.signedBackSop,
                         this.signedBackBillName = this.billInfo.signedBackDetail.signedBackName,
                         this.choosedMsg = this.billInfo.remark,
                         this.choosedItem = this.billInfo.cargoInfo.cargo,
                         this.choosedMedci = this.billInfo.cargoInfo.cargoDesc,
                         this.paymethod = this.billInfo.freightFee.paymethod,
                         this.mounthAccount = this.billInfo.freightFee.custid,
                         -1 < u.indexOf(this.billInfo.productInfo.code) ? this.billCargoType = 1 : -1 < h.indexOf(this.billInfo.productInfo.code) && (this.billCargoType = 2),
                         this.getInitReceiver(this.billInfo),
                         this.model = new Backbone.Model,
                         this.listenTo(this.model, "oneAddGot", this.fillAddressBookAdd)
                 },
                 render: function() {
                     this.$el.html(this.template({
                         sender: this.billInfo.appointmentOriginDetail
                     })),
                         this.$(".receiver-info").html(n.changeAppointBillReceiver({
                             receiver: this.billInfo.appointmentDestDetail
                         })),
                         this.payType = new t({
                             el: this.$(".pay-type"),
                             payTypeList: [1, 2, 4],
                             defaultPayType: this.paymethod,
                             mounthAccount: this.mounthAccount
                         }),
                         this.weight = new i({
                             el: this.$(".weight"),
                             min: 1 == this.billCargoType ? 1 : 20,
                             start: this.billInfo.metaWeight,
                             noWarn: 1 != this.billCargoType
                         }),
                         this.supportVal = new a({
                             el: this.$(".support-val"),
                             times: 1 == this.billCargoType ? 7 : 5,
                             supportVal: this.billInfo.declaredValue,
                             inputCallBack: function() {}
                         }),
                         this.receiverItem = new o({
                             el: this.$(".receiver-item"),
                             choosedItem: this.choosedItem,
                             choosedMedci: this.choosedMedci,
                             billCargoType: this.billCargoType
                         }),
                         this.showAdditionalService(),
                         this.showLeaveMsg()
                 },
                 events: {
                     "click .additional": "addAdditionalService",
                     "click .leave": "chooseLeaveMsg",
                     "click .receiver-modify": "modifyReceiver",
                     "click .confirm-change": "submitChange",
                     "click .self-pick-toggle": "selfPickToggle",
                     "click .address-book": "showAddressBookContent"
                 },
                 getInitReceiver: function(e) {
                     var t = e.appointmentDestDetail;
                     this.destinationInfo = {
                         phone: t.contactPhone,
                         contact: t.contactName,
                         mobile: t.contactTel,
                         addrInfo: {
                             addrId: t.addressId,
                             locationCode: t.locationCode,
                             country: t.country,
                             province: t.province,
                             provinceCode: t.provinceCode,
                             city: t.city,
                             cityCode: t.cityCode,
                             county: t.county,
                             countyCode: t.countyCode,
                             postalCode: t.postalCode,
                             longitude: t.longitude,
                             latitude: t.latitude,
                             address: t.address
                         }
                     };
                     var i = t.province + t.city + t.county + t.address;
                     this.queryAppointment(i, !0)
                 },
                 addAdditionalService: function() {
                     this.additionalService = new r({
                         signedBackBillIndex: this.signedBackBillIndex,
                         callBack: this.fillBackAdditionalService.bind(this)
                     })
                 },
                 fillBackAdditionalService: function(e, t) {
                     this.additionalService.close(),
                         this.signedBackBillIndex = e.join(),
                         this.signedBackBillName = t.join(),
                         this.showAdditionalService()
                 },
                 showAdditionalService: function() {
                     "" != this.signedBackBillName ? (this.$(".service .second").show().find(".content").html("[" + this.signedBackBillName.split(",").join("] [") + "]"),
                         this.$(".bill-back-tip").show()) : (this.$(".service .second").hide(),
                         this.$(".bill-back-tip").hide())
                 },
                 chooseLeaveMsg: function() {
                     this.leaveMsg = new s({
                         choosedMsg: this.choosedMsg,
                         callBack: this.fillBackLeaveMsg.bind(this)
                     })
                 },
                 fillBackLeaveMsg: function(e) {
                     this.leaveMsg.close(),
                         this.choosedMsg = e,
                         this.showLeaveMsg()
                 },
                 showLeaveMsg: function() {
                     "" != this.choosedMsg ? this.$(".leave-msg .second").show().find(".content").html(this.choosedMsg) : this.$(".leave-msg .second").hide()
                 },
                 modifyReceiver: function() {
                     this.modifyReceiver = new l({
                         receiver: this.destinationInfo,
                         callback: this.fillBackReceiver.bind(this)
                     })
                 },
                 fillBackReceiver: function(e) {
                     this.modifyReceiver.close();
                     var t = {
                         contactName: (this.destinationInfo = e).contact,
                         contactTel: e.mobile,
                         contactPhone: e.phone,
                         province: e.addrInfo.province,
                         city: e.addrInfo.city,
                         county: e.addrInfo.county,
                         address: e.addrInfo.address
                     };
                     this.$(".receiver-info").html(n.changeAppointBillReceiver({
                         receiver: t
                     }));
                     var i = t.province + t.city + t.county + t.address;
                     this.queryAppointment(i, !1)
                 },
                 queryAppointment: function(e, t) {
                     var i = this;
                     sfAjax.queryAppointment({
                         data: {
                             address: e,
                             dataType: "r01"
                         },
                         success: function(e) {
                             e && 0 == e.code ? i.appointmentSuccess() : (i.$(".error-receiver-address-detail").show(),
                                 i.isReceiverAddressSuccess = !1,
                                 i.$(".self-pick-toggle").show(),
                             t && (i.selfPick = !0,
                                 i.$(".self-pick-toggle").removeClass("aicon-uncheck").addClass("aicon-check")))
                         },
                         error: function() {
                             i.appointmentSuccess()
                         }
                     })
                 },
                 appointmentSuccess: function() {
                     this.$(".error-receiver-address-detail").hide(),
                         this.isReceiverAddressSuccess = !0,
                         this.selfPick = !1,
                         this.$(".self-pick-toggle").hide().removeClass("aicon-check").addClass("aicon-uncheck")
                 },
                 selfPickToggle: function(e) {
                     this.$(e.currentTarget).toggleClass("aicon-check aicon-uncheck"),
                         this.$(e.currentTarget).hasClass("aicon-check") ? this.selfPick = !0 : this.selfPick = !1
                 },
                 getProductTypeName: function() {
                     var e = this.billInfo.productInfo.code;
                     return "T1" == e || "T104" == e ? "F35即日" : "T8" == e || "T801" == e ? "F35次晨" : "T4" == e ? "F35标快" : "T6" == e ? "F35特惠" : "SE0100" == e ? "重货包裹" : "SE0101" == e ? "小票零担" : ""
                 },
                 getCargoName: function() {
                     return this.receiverItem.getReceiverItemsAndMedci().receiverItems.substring(0, 10)
                 },
                 validateSubmit: function() {
                     var e = !0
                         , t = this.isReceiverAddressSuccess || this.selfPick;
                     return this.receiverItem.isMedciSelect() && this.selfPick && (d.msg(_l("医药类产品不能选择自取服务")),
                         e = !1),
                     e && t && this.receiverItem.validateReceiverItems() && this.payType.validatePayType()
                 },
                 submitChange: function(e) {
                     if (this.validateSubmit()) {
                         var t = [{
                             name: this.getCargoName(),
                             uom: "",
                             desc: this.receiverItem.getReceiverItemsAndMedci().medci,
                             price: "0"
                         }]
                             , i = {
                             mediaCode: "PC.OWF",
                             pickupType: this.billInfo.pickupType,
                             appointmentNo: this.billInfo.appointmentNo,
                             appointmentTime: this.billInfo.appointmentTime,
                             remark: this.choosedMsg,
                             appointmentList: [{
                                 destinationInfo: this.destinationInfo,
                                 levelOfService: {
                                     provider: "SF",
                                     product: {
                                         code: this.billInfo.productInfo.code,
                                         name: this.getProductTypeName()
                                     }
                                 },
                                 metaWeight: this.weight.getWeight(),
                                 metaPrice: this.billInfo.metaPrice,
                                 cargoList: t,
                                 cargoInfo: t,
                                 freightFee: {
                                     code: this.billInfo.freightFee.code,
                                     amt: this.billInfo.freightFee.amt,
                                     paymethod: this.payType.getPayTypeAndMounthAccount().payType,
                                     custid: this.payType.getPayTypeAndMounthAccount().mounthAccount
                                 },
                                 serviceList: {
                                     service: [{
                                         code: "IN02",
                                         attr1: this.$(".support-input").val(),
                                         attr2: "",
                                         attr3: "",
                                         attr4: "",
                                         attr5: "",
                                         feeList: {
                                             fee: [{
                                                 code: "3",
                                                 amt: this.$(".support-value .number").text(),
                                                 paymethod: this.payType.getPayTypeAndMounthAccount().payType,
                                                 custid: this.payType.getPayTypeAndMounthAccount().mounthAccount
                                             }]
                                         }
                                     }]
                                 },
                                 signedBack: {
                                     signedBackFlg: "" == this.signedBackBillIndex ? 0 : 1,
                                     signedBackName: this.signedBackBillName,
                                     signedBackSop: this.signedBackBillIndex
                                 }
                             }]
                         }
                             , n = this;
                         if (e) {
                             if (this.$(e.currentTarget).hasClass("disabled"))
                                 return;
                             this.$(e.currentTarget).toggleClass("disabled", !0)
                         }
                         sfAjax.updateAppointOrder({
                             data: i,
                             success: function(e) {
                                 e && 0 == e.code ? (d.msg(_l("修改成功")),
                                     n.options.callback()) : d.msg(_l("修改失败"))
                             },
                             error: function() {
                                 d.msg(_l("修改失败"))
                             },
                             complete: function() {
                                 e && n.$(e.currentTarget).toggleClass("disabled", !1)
                             },
                             login: {
                                 succCallback: this.submitChange.bind(this),
                                 cancelCallback: function() {
                                     d.msg(_l("修改失败"))
                                 }
                             }
                         })
                     }
                 },
                 showAddressBookContent: function(e) {
                     e.preventDefault(),
                         this.addressBookFillOption = "receiver",
                         $.cookie("loginUser") ? this.showAddressBook(e) : Event.trigger(Event.Needlogin, {
                             succCallback: this.showAddressBook.bind(this),
                             cancelCallback: null
                         })
                 },
                 showAddressBook: function(e) {
                     if (e) {
                         if (this.$(e.currentTarget).hasClass("disabled"))
                             return;
                         this.$(e.currentTarget).toggleClass("disabled", !0)
                     }
                     var t = this;
                     sfAjax.fetchAddressBookList({
                         success: function(e) {
                             e && 0 == e.code ? (t.model.set("addressBooks", e.result.content),
                                 t.addressBookView = new c({
                                     model: t.model,
                                     fillOption: "receiver",
                                     viewOption: "",
                                     totalPage: e.result.totalPage,
                                     page: e.result.pageNo
                                 })) : d.msg(_l("网络错误"))
                         },
                         error: function() {
                             d.msg(_l("网络错误"))
                         },
                         complete: function() {
                             e && t.$(e.currentTarget).toggleClass("disabled", !1)
                         },
                         login: {
                             succCallback: this.showAddressBook.bind(this),
                             cancelCallback: null
                         }
                     })
                 },
                 fillAddressBookAdd: function(e) {
                     this.addressBookView.close(),
                         this.destinationInfo = {
                             phone: e.contactPhone,
                             contact: e.contactName,
                             mobile: e.contactTel,
                             addrInfo: {
                                 locationCode: e.locationCode,
                                 province: e.province,
                                 provinceCode: e.provinceCode,
                                 city: e.city,
                                 cityCode: e.cityCode,
                                 county: e.county,
                                 countyCode: e.countyCode,
                                 address: e.address
                             }
                         },
                         this.$(".receiver-info").html(n.changeAppointBillReceiver({
                             receiver: e
                         }))
                 }
             })
         }),
         define("views/order/orderSuccess", ["baseView", "templates", "utils/time", "helper", "sflayer", "views/waybill/changeAppointBill"], function(e, t, i, n, a, r) {
             return e.extend({
                 template: t.orderSuccess,
                 init: function() {},
                 render: function() {
                     var i = this;
                     sfAjax.changeAppointBill({
                         data: {
                             appointmentNo: this.options.appointmentNo
                         },
                         success: function(e) {
                             if (e && 0 == e.code && e.result) {
                                 i.pickupType = e.result.pickupType;
                                 var t = i.getOutDoorTime(e.result);
                                 i.$el.html(i.template({
                                     data: e.result,
                                     relativeDate: i.getRelativeDate(t),
                                     relativeHour: t.format("HH:mm"),
                                     sender: e.result.appointmentOriginDetail,
                                     receiver: e.result.appointmentDestDetail,
                                     payType: n.getPayType(e.result.freightFee.paymethod),
                                     waybillUrl: n.getDynamicURLWithContext("/waybill/"),
                                     pickupType: i.pickupType,
                                     waybillNo: i.options.waybillNo,
                                     isReceiverHK_MC_TW: n.isHK_MC_TW(e.result.appointmentDestDetail.locationCode)
                                 }))
                             } else
                                 i.queryChangeAppointBillFail()
                         },
                         error: function() {
                             i.queryChangeAppointBillFail()
                         },
                         login: {
                             succCallback: this.render.bind(this),
                             cancelCallback: this.queryChangeAppointBillFail.bind(this)
                         }
                     }),
                         this.$el.show()
                 },
                 events: {
                     "click .cancel": "cancelOrder",
                     "click .fill-bill": "fillBill",
                     "click .order-again": "orderAgain"
                 },
                 queryChangeAppointBillFail: function() {
                     this.$el.html(this.template({
                         data: null,
                         imgUrl: n.getResourceURL("images/order/box-happy.png"),
                         waybillNo: this.options.waybillNo,
                         waybillUrl: n.getDynamicURLWithContext("/waybill/")
                     }))
                 },
                 getOutDoorTime: function(e) {
                     var t;
                     return t = e.expectStartTm ? e.expectStartTm : e.appointmentTime,
                         moment(t, "YYYY-MM-DD HH:mm:ss").add("hour", 1)
                 },
                 getRelativeDate: function(e) {
                     return i.relativeDate(e, this.options.synServerTim)
                 },
                 cancelOrder: function() {
                     var e = this;
                     a.confirm(_l("是否取消订单？"), {
                         btn: [_l("是"), _l("否")]
                     }, function() {
                         sfAjax.cancelAppointmentBill({
                             data: {
                                 appointmentNo: e.options.appointmentNo,
                                 pickupType: e.pickupType
                             },
                             success: function(e) {
                                 0 === e.code ? (a.msg(_l("取消成功")),
                                     window.location.reload()) : a.msg(_l("取消失败"))
                             },
                             error: function() {
                                 a.msg(_l("取消失败"))
                             }
                         })
                     })
                 },
                 fillBill: function() {
                     var e = this.$(".fill-bill");
                     if (!e.hasClass("disabled")) {
                         e.toggleClass("disabled", !0);
                         var t = this;
                         sfAjax.changeAppointBill({
                             data: {
                                 appointmentNo: this.options.appointmentNo
                             },
                             success: function(e) {
                                 e && 0 == e.code && e.result ? n.isHK_MC_TW(e.result.appointmentDestDetail.locationCode) ? layer.msg(_l("该预约单暂不支持修改")) : t.changeAppointBill = new r({
                                     billInfo: e.result,
                                     callback: t.fillBillSucc.bind(t)
                                 }) : layer.msg(_l("该预约单暂不支持修改"))
                             },
                             error: function() {
                                 layer.msg(_l("网络错误"))
                             },
                             complete: function() {
                                 e.toggleClass("disabled", !1)
                             },
                             login: {
                                 succCallback: this.fillBill.bind(this),
                                 cancelCallback: function() {
                                     layer.msg(_l("修改失败"))
                                 }
                             }
                         })
                     }
                 },
                 fillBillSucc: function() {
                     this.changeAppointBill.close(),
                         this.render(),
                         window.scrollTo(0, 0)
                 },
                 orderAgain: function() {
                     window.location.reload()
                 }
             })
         }),
         define("views/order/order", ["backbone", "helper", "views/detailedLocationPicker/picker", "views/detailDateTimePicker/pickupTimePicker", "views/detailedLocationPicker/amapPicker", "models/orderUcmp", "event", "templates", "views/order/addIntellectFill", "numberpicker", "sflayer", "views/order/innerViews/autoAddPicker", "views/order/innerViews/nearbyAddress", "views/order/innerViews/priceAndTime", "views/order/orderSuccess"], function(e, n, t, i, a, r, s, o, l, d, p, c, u, h, f) {
             var m = "latest_sender_address_";
             return e.View.extend({
                 initialize: function() {
                     window.ParsleyValidator.setLocale(n.getSiteLanguage()),
                         this.sender_location = new t({
                             el: this.$(".sender-location .detail-location-input")
                         }),
                         this.senderAmapPicker = new a({
                             el: this.$("#sender-address-detail").parent(),
                             location: this.sender_location
                         }),
                         this.receiver_location = new t({
                             el: this.$(".receiver-location .detail-location-input")
                         }),
                         this.receiverAmapPicker = new a({
                             el: this.$("#receiver-address-detail").parent(),
                             location: this.receiver_location
                         });
                     var e = this;
                     this.$(".senderAutoAddPicker").each(function() {
                         new c({
                             el: this,
                             paramData: e.getSenderNameComMobile.bind(e),
                             addressBookFillOption: "sender",
                             callback: e.autoAddFillAddress.bind(e)
                         })
                     }),
                         this.$(".receiverAutoAddPicker").each(function() {
                             new c({
                                 el: this,
                                 paramData: e.getReceiverNameComMobile.bind(e),
                                 addressBookFillOption: "receiver",
                                 callback: e.autoAddFillAddress.bind(e)
                             })
                         }),
                         this.model = new r,
                         this.model.getSynServerTim(),
                         this.pickupTimePicker = new i({
                             el: this.$(".pickup-time")
                         }),
                         this.priceAndTime = new h({
                             el: this.$(".product-type-wrapper"),
                             collection: this.options.priceCollections,
                             orderModel: this.model,
                             callback: this.resetDefaultProduct.bind(this),
                             type: this.priceAndTimeType
                         }),
                         this.listenTo(this.model, "oneAddGot", this.fillAddressBookAdd),
                         this.listenTo(s, s.weightChange, this.recalcFetchPriceAndTimes),
                         this.resetPeakControlInfo(),
                         this.initSenderDefaultAddressItem(),
                         this.selfPick = !1,
                         $(window).resize(function() {
                             $("iframe").css("height", $(this).height() - 200)
                         })
                 },
                 events: {
                     "change .sender-location input": "onSenderLocationChanged",
                     "change .receiver-location input": "onReceiverLocationChanged",
                     "blur #receiver-company": "onReceiverCompanyChanged",
                     "click .submit-order": "submitOrderOutModal",
                     "click .dropdown-menu a": "onDropDownChange",
                     "locationChanged .sender-location .detail-location-input": "senderRegionModelUpdate",
                     "locationChanged .receiver-location .detail-location-input": "receiverRegionModelUpdate",
                     "change #sender-mobile": "queryPeakControl",
                     "blur #receiver-mobile, #receiver-phone": "onReceiverMobilePhoneChange",
                     "change #sender-address-detail": "querySenderAppointment",
                     "change #receiver-address-detail": "queryReceiverAppointment",
                     "change #date": "onSelectDateChange",
                     "click .address-book": "showAddressBookContent",
                     "input .measurement": "formattingVOLinput",
                     "blur .measurement": "toFixedVOLinput",
                     "click .addIntellectFill": "showAddIntellectFillContent",
                     "click .save-address-check": "toggleSaveAddress",
                     "click .getNearbyAddress": "showNearbyAddressDropdown",
                     "click .self-pick-toggle": "selfPickToggle",
                     "click #agree-term-content": "agreeTermToggle",
                     "click .term": "showTerm"
                 },
                 getSenderNameComMobile: function() {
                     return {
                         name: $.trim(this.$("#sender-name").val()),
                         company: $.trim(this.$("#sender-company").val()),
                         mobile: $.trim(this.$("#sender-mobile").val())
                     }
                 },
                 getReceiverNameComMobile: function() {
                     return {
                         name: $.trim(this.$("#receiver-name").val()),
                         company: $.trim(this.$("#receiver-company").val()),
                         mobile: $.trim(this.$("#receiver-mobile").val())
                     }
                 },
                 recalcFetchPriceAndTimes: function() {
                     this.model.has("senderLocationCityCode") && this.model.has("receiverLocationCityCode") && this.fetchPriceAndTimes()
                 },
                 agreeTermToggle: function(e) {
                     this.$(e.currentTarget).toggleClass("active")
                 },
                 showTerm: function(t) {
                     var e = n.getURLWithContext("other/modal/order_terms.html")
                         , i = this;
                     p.open({
                         title: _l("电子运单契约条款"),
                         type: 2,
                         area: ["960px"],
                         offset: "40px",
                         content: [e, "no"],
                         btn: _l("我已阅读该条款，同意遵守"),
                         yes: function(e) {
                             i.$("#agree-term-content").addClass("active"),
                             t || i.checkToOrder(),
                                 p.close(e)
                         }
                     }),
                         $(window).resize()
                 },
                 onReceiverMobilePhoneChange: function() {
                     this.$("#receiver-mobile").val() || this.$("#receiver-phone").val() ? this.$(".receiver-both-phone-mobile").hide() : this.$(".receiver-both-phone-mobile").show()
                 },
                 onDropDownChange: function(e) {
                     e.preventDefault();
                     var t = $(e.target);
                     0 == t.parents(".receiver-item").length && t.parents(".btn-group").find("button").html(t.text() + '<span class="caret"></span>')
                 },
                 senderRegionModelUpdate: function(e, t) {
                     this.senderLocation = t
                 },
                 receiverRegionModelUpdate: function(e, t) {
                     this.receiverLocation = t
                 },
                 getBookingTime: function() {
                     var e = this.pickupTimePicker.getDateTime();
                     return e && e.start ? e.start : this.model.get("synServerTim").format()
                 },
                 getProductTypeValue: function(e) {
                     return ""
                 },
                 resetDefaultProduct: function(e) {
                     this.model.set("cargoTypeCode", e.cargoTypeCode),
                         this.model.set("expressTypeCode", e.expressTypeCode),
                         this.model.set("productName", e.limitTypeName),
                         this.model.set("limitTypeCode", this.getProductTypeValue(e.cargoTypeCode) ? this.getProductTypeValue(e.cargoTypeCode) : e.limitTypeCode),
                         this.queryPeakControl(),
                         this.$(".submit-order").toggleClass("disabled", !1),
                     this.additionalView && this.additionalView.rateChange(e.totalFreight)
                 },
                 updatePickupTime: function() {
                     this.pickupTimePicker.setServerTime(this.model.get("synServerTim")).setDateTimes(this.model.get("dateTimes")).render()
                 },
                 onSenderLocationChanged: function() {
                     var e = this.$(".sender-location input").data("rate-code");
                     this.model.set("senderLocationCityCode", e),
                         this.updatePickupTime(),
                         this.showProductTypeView(),
                         this.querySenderAppointment()
                 },
                 querySenderAppointment: function() {
                     var e = this.$("#sender-address").val()
                         , t = this.$("#sender-address-detail").val();
                     this.queryAppointment(e, t, "s01")
                 },
                 queryReceiverAppointment: function() {
                     var e = this.$("#receiver-address").val()
                         , t = this.$("#receiver-address-detail").val();
                     this.queryAppointment(e, t, "r01")
                 },
                 queryAppointment: function(e, t, i) {
                     e && (e = e.replace(/-/g, "")),
                     t || (t = "");
                     var n = this;
                     sfAjax.queryAppointment({
                         data: {
                             address: e + t,
                             dataType: i
                         },
                         success: function(e) {
                             e && 0 == e.code ? n.appointmentSuccess(i) : "s01" == i ? (n.$(".error-sender-address-detail").show(),
                                 n.isSenderAddressSuccess = !1) : "r01" == i && (n.$(".error-receiver-address-detail").show(),
                                 n.isReceiverAddressSuccess = !1,
                                 n.$(".self-pick-service").show())
                         },
                         error: function() {
                             n.appointmentSuccess(i)
                         }
                     })
                 },
                 appointmentSuccess: function(e) {
                     "s01" == e ? (this.$(".error-sender-address-detail").hide(),
                         this.isSenderAddressSuccess = !0) : "r01" == e && (this.$(".error-receiver-address-detail").hide(),
                         this.isReceiverAddressSuccess = !0,
                         this.selfPick = !1,
                         this.$(".self-pick-service").hide().find("a").removeClass("aicon-check").addClass("aicon-uncheck"))
                 },
                 selfPickToggle: function(e) {
                     this.$(e.currentTarget).toggleClass("aicon-check aicon-uncheck"),
                         this.$(e.currentTarget).hasClass("aicon-check") ? this.selfPick = !0 : this.selfPick = !1
                 },
                 isFormsValidated: function() {
                     var e, t, i, n = !0, a = !0, r = !0, s = !0, o = !0, l = !0, d = !0, c = !0, u = this.isSenderAddressSuccess, h = this.isReceiverAddressSuccess || this.selfPick;
                     return t = this.$(".receiver-form").parsley().validate(),
                         e = this.$(".sender-form").parsley().validate(),
                         i = this.$(".date-form").parsley().validate(),
                         "" === this.$("#receiver-mobile").val() && "" === this.$("#receiver-phone").val() ? (this.$(".receiver-both-phone-mobile").show(),
                             !1) : (this.$(".receiver-both-phone-mobile").hide(),
                         "" !== this.senderLocation.provinceCode && "" !== this.senderLocation.province && "" !== this.senderLocation.cityCode && null != this.senderLocation.provinceCode && null != this.senderLocation.province && null != this.senderLocation.cityCode || (n = !1,
                             this.$(".errorgroup .invalid-input").show()),
                             this.isML ? (this.additionalView.receiverItem.isMedciSelect() && this.selfPick && (p.msg(_l("医药类产品不能选择自取服务")),
                                 o = !1),
                                 a = this.additionalView.receiverItem.validateReceiverItems(),
                                 r = this.additionalView.payType.validatePayType()) : (0 == this.HKcustomsClearanceView.getfinalDeclareGoodsLists().length && (c = !1,
                                 this.$(".item-not-enough").show()),
                             "4" == this.$(".pay-type.fee").data("value") && (r = this.HKcustomsClearanceView.isFeeMonthAccountValidated),
                             this.isTW && "4" == this.$(".pay-type.tax").data("value") && (s = this.HKcustomsClearanceView.isTaxMonthAccountValidated),
                                 l = !this.HKcustomsClearanceView.valuationMoreClearance,
                                 d = this.HKcustomsClearanceView.iscurrencySame),
                         e && t && i && n && a && u && h && o && r && s && l && d && c)
                 },
                 getCargoName: function() {
                     return this.isML ? this.additionalView.receiverItem.getReceiverItemsAndMedci().receiverItems.substring(0, 10) : ""
                 },
                 getMedicineMark: function() {
                     return this.isML && this.additionalView.receiverItem.getReceiverItemsAndMedci().medci,
                         ""
                 },
                 getOrderMsgRemark: function() {
                     return this.isML ? this.additionalView.choosedMsg : ""
                 },
                 getSubmitPostData: function() {
                     var e = ""
                         , t = ""
                         , i = ""
                         , n = {}
                         , a = ""
                         , r = ""
                         , s = ""
                         , o = ""
                         , l = ""
                         , d = this.pickupTimePicker.getDateTime();
                     this.isML ? (a = this.additionalView.payType.getPayTypeAndMounthAccount().payType,
                         e = this.additionalView.payType.getPayTypeAndMounthAccount().mounthAccount,
                         i = [{
                             name: this.getCargoName(),
                             uom: "",
                             desc: this.getMedicineMark(),
                             price: "0"
                         }],
                         o = this.$(".support-input").val(),
                         l = this.$(".support-value .number").text()) : ("4" == (a = this.$(".pay-type.fee").data("value")) && (e = this.$("#fee-monthAccount").val()),
                     this.isTW && (t = this.$("#TWlicense").val(),
                         s = "4" == (r = this.$(".pay-type.tax").data("value")) ? this.$("#tax-monthAccount").val() : ""),
                         n = {
                             versionNo: 0,
                             currency: this.HKcustomsClearanceView.originCurrency,
                             weight: this.getMetaWeight(),
                             declareType: this.HKcustomsClearanceView.clearanceType,
                             paymethod: r,
                             settlementCode: s,
                             declareValue: this.HKcustomsClearanceView.originTotalPrise
                         },
                         i = this.HKcustomsClearanceView.getfinalDeclareGoodsLists(),
                         o = this.$("#valuation-service").val(),
                         l = this.$("#valuation-service-prise").data("prise") || "");
                     var c = {
                         expectStartTm: d.start && moment(d.start).format("YYYY-MM-DD HH:mm:ss"),
                         expectFinishTm: d.finish && moment(d.finish).format("YYYY-MM-DD HH:mm:ss"),
                         originateAddress: {
                             contactName: this.$("#sender-name").val(),
                             contactPhone: this.$("#sender-phone").val(),
                             contactTel: this.$("#sender-mobile").val(),
                             addressId: "",
                             locationCode: this.senderLocation.locationCode,
                             country: "中国",
                             province: this.senderLocation.province,
                             provinceCode: this.senderLocation.provinceCode,
                             city: this.senderLocation.city,
                             county: this.senderLocation.county,
                             countyCode: this.senderLocation.countyCode,
                             postalCode: "",
                             longitude: "",
                             latitude: "",
                             address: this.$("#sender-address-detail").val(),
                             companyName: this.$("#receiver-company").val()
                         },
                         destinationInfo: [{
                             destinationAddress: {
                                 contactName: this.$("#receiver-name").val(),
                                 contactPhone: this.$("#receiver-phone").val(),
                                 contactTel: this.$("#receiver-mobile").val(),
                                 addressId: "",
                                 locationCode: this.receiverLocation.locationCode,
                                 country: "中国",
                                 province: this.receiverLocation.province,
                                 provinceCode: this.receiverLocation.provinceCode,
                                 city: this.receiverLocation.city,
                                 county: this.receiverLocation.county,
                                 countyCode: this.receiverLocation.countyCode,
                                 postalCode: "",
                                 longitude: "",
                                 latitude: "",
                                 address: this.$("#receiver-address-detail").val(),
                                 customerId: t,
                                 companyName: this.$("#receiver-company").val()
                             },
                             remark: this.getOrderMsgRemark(),
                             productCode: this.model.get("limitTypeCode"),
                             productName: this.model.get("productName").substring(0, 20),
                             metaWeight: this.getMetaWeight(),
                             cargoList: i,
                             custom: n,
                             paymethod: a,
                             custid: e,
                             supportValue: o,
                             premium: l,
                             controlStrategy: this.controlStrategy,
                             notificationMsg: this.notificationMsg,
                             selfPickUpFlag: this.selfPick
                         }]
                     };
                     return this.isML && _.extend(c.destinationInfo[0], {
                         signedBackFlg: "" == this.additionalView.signedBackBillIndex ? "0" : "1",
                         signedBackSop: this.additionalView.signedBackBillIndex,
                         signedBackName: this.additionalView.signedBackBillName
                     }),
                     null != this.options.waybillNo && this.dealQrCodeData(c),
                         c
                 },
                 submitOrderOutModal: function() {
                     this.$("#agree-term-content").hasClass("active") ? this.checkToOrder() : this.showTerm()
                 },
                 checkToOrder: function() {
                     if (this.$(".errorgroup").children().find("div").hide(),
                             !this.canOrder)
                         return p.alert(this.notificationMsg);
                     this.isFormsValidated() ? $.cookie("loginUser") ? this.onSubmitOrder() : s.trigger(s.Needlogin, {
                         succCallback: this.onSubmitOrder.bind(this),
                         cancelCallback: null
                     }) : this.$(".errorgroup .must-input-check").show()
                 },
                 onSubmitOrder: function() {
                     this.submitBtn = this.$(".submit-order"),
                         this.submitBtn.toggleClass("disabled", !0);
                     var i = this
                         , e = {
                         data: this.getSubmitPostData(),
                         success: function(e) {
                             if (e && 0 == e.code) {
                                 var t = e.result;
                                 i.renderSuccess(t)
                             } else
                                 i.renderFail(e)
                         },
                         error: function(e) {
                             i.renderError(e)
                         },
                         login: {
                             succCallback: this.onSubmitOrder.bind(this),
                             cancelCallback: null
                         },
                         complete: function() {
                             i.submitBtn.toggleClass("disabled", !1)
                         }
                     };
                     null == this.options.waybillNo ? sfAjax.submitNewOrder(e) : sfAjax.submitQrNewOrder(e)
                 },
                 renderSuccess: function(e) {
                     this.autoSaveAddressBook(),
                         $(".order-service").hide(),
                         window.scrollTo(0, 0),
                         new f({
                             el: $(".order-success"),
                             appointmentNo: e,
                             synServerTim: this.model.get("synServerTim"),
                             waybillNo: this.options.waybillNo
                         })
                 },
                 renderFail: function(e) {
                     654 == e.code ? p.msg(_l("月结账号无效")) : 651 == e.code ? this.$(".errorgroup .out-of-service-time").show() : 652 == e.code ? this.$(".errorgroup .delivery-services-not-available").show() : 653 == e.code ? this.$(".errorgroup .abnormal-account").show() : this.$(".errorgroup .invalid-input").show()
                 },
                 renderError: function(e) {
                     if ("403" == e.status) {
                         var t = JSON.parse(e.responseText);
                         "003" === t.code ? this.$(".errorgroup .verification-code-expired").show() : "004" === t.code ? this.$(".errorgroup .verification-code-invalid").show() : this.$(".errorgroup .invalid-input").show()
                     } else
                         this.$(".errorgroup .invalid-input").show()
                 },
                 showProductTypeView: function() {
                     this.model.has("senderLocationCityCode") && this.model.has("receiverLocationCityCode") && this.fetchPriceAndTimes()
                 },
                 onSelectDateChange: function() {
                     this.model.has("receiverLocationCityCode") && (this.fetchPriceAndTimes(),
                         this.queryPeakControl())
                 },
                 showAddressBookContent: function(e) {
                     e.preventDefault(),
                         this.addressBookFillOption = this.$(e.target).data("option");
                     var t = $(".toggle-tab.checked").data("tab")
                         , i = this.addressBookFillOption;
                     $.cookie("loginUser") ? this.showAddressBook(e) : s.trigger(s.Needlogin, {
                         succCallback: this.showAddressBook.bind(this),
                         cancelCallback: null
                     }),
                         "mainland" == t && "sender" == i ? sfgather.trackClicks("点击寄件人信息使用地址簿", "112002") : "mainland" == t && "receiver" == i ? sfgather.trackClicks("点击收件人信息使用地址簿", "112003") : "heavyCargo" == t && "sender" == i ? sfgather.trackClicks("点击寄件人信息使用地址簿", "113004") : "heavyCargo" == t && "receiver" == i && sfgather.trackClicks("点击收件人信息使用地址簿", "113005")
                 },
                 showAddressBook: function(e) {
                     if (e) {
                         if (this.$(e.currentTarget).hasClass("disabled"))
                             return;
                         this.$(e.currentTarget).toggleClass("disabled", !0)
                     }
                     var t = this;
                     sfAjax.fetchAddressBookList({
                         success: function(e) {
                             e && 0 == e.code ? (t.model.set("addressBooks", e.result.content),
                                 t.newAddressBookView(e)) : p.msg(_l("网络错误"))
                         },
                         error: function() {
                             p.msg(_l("网络错误"))
                         },
                         complete: function() {
                             e && t.$(e.currentTarget).toggleClass("disabled", !1)
                         },
                         login: {
                             succCallback: this.showAddressBook.bind(this),
                             cancelCallback: null
                         }
                     })
                 },
                 autoAddFillAddress: function(e, t) {
                     this.addressBookFillOption = e,
                         this.fillAddress(t)
                 },
                 fillAddressBookAdd: function(e) {
                     this.addressBookView.close(),
                         this.fillAddress(e)
                 },
                 fillAddress: function(e) {
                     "sender" == this.addressBookFillOption ? this.fillSendOrRecInfo("sender", e) : (this.fillSendOrRecInfo("receiver", e),
                         "886" == this.receiverLocation.locationCode ? this.$("#TWlicense").val(e.customerId) : this.$("#TWlicense").val(""))
                 },
                 fillSendOrRecInfo: function(e, t) {
                     this.$("#" + e + "-name").val(t.contactName),
                         this.$("#" + e + "-company").val(t.companyName),
                         this.$("#" + e + "-address").data("code", t.countyCode).data("rate-code", t.locationCode).data("parent-code", t.cityCode),
                         "sender" == e ? (this.addressBookSenderData = t,
                             this.sender_location.setLocationData(t)) : (this.addressBookReceiverData = t,
                             this.receiver_location.setLocationData(t)),
                         this.$("#" + e + "-address-detail").val(t.address),
                         this.$("#" + e + "-mobile").val(t.contactTel),
                         this.$("#" + e + "-phone").val(t.contactPhone),
                         "sender" == e ? this.querySenderAppointment() : this.queryReceiverAppointment()
                 },
                 resetPeakControlInfo: function() {
                     this.canOrder = !0,
                         this.notificationMsg = "",
                         this.controlStrategy = void 0
                 },
                 validPeakControlInput: function() {
                     return /^1\d{10}$/.test($("#sender-mobile").val()) && this.senderLocation && this.senderLocation.locationCode && this.receiverLocation && this.receiverLocation.locationCode && this.pickupTimePicker.getDateTime() && this.model.get("limitTypeCode") && this.model.get("cargoTypeCode") && this.model.get("expressTypeCode")
                 },
                 queryPeakControl: function() {
                     var t = this;
                     this.resetPeakControlInfo(),
                     _webConfig.openPeakControl && this.validPeakControlInput() && sfAjax.queryCustomerControlStrategy({
                         data: {
                             customerType: 1,
                             customerCode: $("#sender-mobile").val(),
                             channelCode: "PC.OWF",
                             srcZoneCode: this.senderLocation.locationCode,
                             destZoneCode: this.receiverLocation.locationCode,
                             limitTypeCode: this.model.get("limitTypeCode"),
                             cargoTypeCode: this.model.get("cargoTypeCode"),
                             expressTypeCode: this.model.get("expressTypeCode"),
                             consignedTm: this.pickupTimePicker.getDateTime().start ? moment(this.pickupTimePicker.getDateTime().start).format("YYYY-MM-DD HH:mm:ss") : moment(this.model.get("synServerTim")).format("YYYY-MM-DD HH:mm:ss")
                         },
                         success: function(e) {
                             if (e && 0 === e.code && e.result)
                                 switch (t.controlStrategy = e.result.controlStrategy,
                                     e.result.controlStrategy) {
                                     case 0:
                                         break;
                                     case 1:
                                         t.canOrder = !1;
                                     case 2:
                                     case 3:
                                         t.notificationMsg = e.result.notificationMsg,
                                             p.alert(e.result.notificationMsg)
                                 }
                         }
                     })
                 },
                 showAddIntellectFillContent: function(e) {
                     var i = this
                         , t = this.$(e.target).data("option");
                     new l({
                         target: this.$(e.currentTarget).data("option"),
                         location: "sender" === t ? this.sender_location : this.receiver_location,
                         fillInput: function(e, t) {
                             i.fillOrderItemInfo(e, t),
                                 i.showIntellectReminder(t),
                                 "sender" == t ? i.querySenderAppointment() : i.queryReceiverAppointment()
                         }
                     }),
                         "sender" == t ? sfgather.trackClicks("点击寄件人智能地址填写", "111004") : "receiver" == t && sfgather.trackClicks("点击收件人智能地址填写", "111006")
                 },
                 fillOrderItemInfo: function(e, t) {
                     $("#" + t + "-name").val(e.personalName),
                         $("#" + t + "-address-detail").val(e.site),
                         $("#" + t + "-company").val(""),
                         e.mobile || e.telephone ? ($("#" + t + "-phone").val(e.telephone),
                             $("#" + t + "-mobile").val(e.mobile)) : ($("#" + t + "-phone").val(""),
                             $("#" + t + "-mobile").val(""))
                 },
                 showEmptyProvinceCityCountyPrompt: function(e, t) {
                     var i, n = this;
                     if (1 == e.hmtareaType ? i = _l("地址拆分功能暂不支持港澳台及国际地区。") : 1 == e.splitType ? i = _l("未找到对应的省份，请您手动进行选择哦！") : 2 == e.splitType ? i = _l("未找到对应的城市，请您手动进行选择哦！") : 3 == e.splitType && (i = _l("未找到对应的行政区，请您手动进行选择哦！")),
                             i)
                         var a = p.confirm(i, {
                             title: _l("温馨提示!"),
                             btn: [_l("我知道了")]
                         }, function() {
                             p.close(a),
                                 n.fillLocation(e, t)
                         })
                 },
                 showIntellectReminder: function(e) {
                     "sender" == e ? this.$(".sender-intellect-addr-reminder").show() : "receiver" == e && this.$(".receiver-intellect-addr-reminder").show()
                 },
                 autoSaveAddressBook: function() {
                     var e = this.senderLocation
                         , t = this.receiverLocation
                         , i = {
                         contactName: this.$("#sender-name").val(),
                         companyName: this.$("#sender-company").val(),
                         contactPhone: this.$("#sender-phone").val(),
                         contactTel: this.$("#sender-mobile").val(),
                         address: this.$("#sender-address-detail").val(),
                         customerId: this.addressBookSenderData && this.addressBookSenderData.customerId,
                         province: e && e.province || "",
                         provinceCode: e && e.provinceCode || "",
                         city: e && e.city || "",
                         cityCode: e && e.cityCode || "",
                         county: e && e.county || "",
                         countyCode: e && e.countyCode || "",
                         locationCode: e && e.locationCode,
                         memType: 0,
                         isDefault: 0,
                         country: "中国",
                         countryCode: "A000086000",
                         latitude: "",
                         longitude: ""
                     };
                     if (this.savaOrUpdate(i, this.addressBookSenderData),
                             this.setAddressToStore(i),
                             $(".save-address-check").hasClass("checked")) {
                         var n = {
                             contactName: this.$("#receiver-name").val(),
                             companyName: this.$("#receiver-company").val(),
                             contactPhone: this.$("#receiver-phone").val(),
                             contactTel: this.$("#receiver-mobile").val(),
                             address: this.$("#receiver-address-detail").val(),
                             customerId: this.$("#TWlicense").val(),
                             province: t && t.province || "",
                             provinceCode: t && t.provinceCode || "",
                             city: t && t.city || "",
                             cityCode: t && t.cityCode || "",
                             county: t && t.county || "",
                             countyCode: t && t.countyCode || "",
                             locationCode: e && t.locationCode,
                             memType: 1,
                             isDefault: 0,
                             country: "中国",
                             countryCode: "A000086000",
                             latitude: "",
                             longitude: ""
                         };
                         this.savaOrUpdate(n, this.addressBookReceiverData)
                     }
                 },
                 savaOrUpdate: function(e, t) {
                     if (!t)
                         return sfAjax.saveOrUpdateAddress({
                             data: e
                         });
                     this.compareAddress(e, t) || (e.addressId = t.addressId,
                         sfAjax.saveOrUpdateAddress({
                             data: e
                         }))
                 },
                 compareAddress: function(e, t) {
                     return !(!e || !t) && (e.contactName == t.contactName && e.companyName == t.companyName && e.contactPhone == t.contactPhone && e.contactTel == t.contactTel && e.address == t.address && e.provinceCode == t.provinceCode && e.cityCode == t.cityCode && e.countyCode == t.countyCode && e.locationCode == t.locationCode && e.customerId == t.customerId)
                 },
                 toggleSaveAddress: function(e) {
                     $(e.currentTarget).toggleClass("checked")
                 },
                 initSenderDefaultAddressItem: function(e) {
                     var t = this;
                     if ($.cookie("loginUser")) {
                         var i = this.getAddressFromStore();
                         if (i)
                             return void setTimeout(function() {
                                 t.fillSendOrRecInfo("sender", i)
                             });
                         sfAjax.fetchDefaultAndFirstAddress({
                             success: function(e) {
                                 e && "0" == e.code && (t.addressBookFillOption = "sender",
                                 _.isEmpty(e.result) || t.fillSendOrRecInfo("sender", e.result))
                             }
                         })
                     }
                 },
                 showNearbyAddressDropdown: function() {
                     this.sender_nearby_address ? this.sender_nearby_address.loadMapJs() : this.sender_nearby_address = new u({
                         el: this.$(".nearbyAddressWrapper"),
                         senderLocation: this.sender_location,
                         detailAdd: this.$("#sender-address-detail")
                     })
                 },
                 getAddressFromStore: function() {
                     var t = localStorage.getItem(m + $.cookie("loginUser"));
                     try {
                         t = JSON.parse(t)
                     } catch (e) {
                         t = null
                     }
                     return t
                 },
                 setAddressToStore: function(e) {
                     null == e && (e = ""),
                         e = JSON.stringify(e),
                         localStorage.setItem(m + $.cookie("loginUser"), e)
                 }
             })
         }),
         define("views/order/innerViews/additionalView", ["backbone", "helper", "templates", "views/billOptions/supportVal", "views/billOptions/receiverItem", "views/billOptions/payType", "views/billOptions/weight", "views/billOptions/additionalService", "views/billOptions/leaveMsg"], function(e, t, i, n, a, r, s, o, l) {
             return e.View.extend({
                 showAdditionalContent: function() {
                     this.$el.html(i.additionalView({
                         viewFrom: this.options.from,
                         qr: this.options.qr
                     })),
                         this.signedBackBillIndex = "",
                         this.signedBackBillName = "",
                         this.choosedMsg = "",
                         this.supportVal = new n({
                             el: this.$(".support-val"),
                             times: "mainland" == this.options.from ? 7 : 5,
                             supportVal: "",
                             inputCallBack: this.supportValInput.bind(this)
                         }),
                         this.receiverItem = new a({
                             el: this.$(".receiver-item"),
                             choosedItem: "mainland" == this.options.from ? _l("文件") : "",
                             choosedMedci: "",
                             billCargoType: "mainland" == this.options.from ? 1 : 2
                         }),
                         this.payType = new r({
                             el: this.$(".pay-type"),
                             payTypeList: [1, 2, 4],
                             defaultPayType: 1,
                             mounthAccount: ""
                         }),
                     "mainland" == this.options.from && (this.weight = new s({
                         el: this.$(".weight"),
                         min: 1,
                         noWarn: !1
                     })),
                     ("heavyCargo" == this.options.from || this.options.qr) && (this.$(".other-info-toggle").find("span").attr("class", "aicon-chevron-double-up"),
                         this.$(".other-info-content").show())
                 },
                 events: {
                     "click .other-info-toggle": "toggleOtherInfoContent",
                     "click .additional": "addAdditionalService",
                     "click .leave": "chooseLeaveMsg"
                 },
                 toggleOtherInfoContent: function(e) {
                     this.$(".other-info-content").slideToggle();
                     var t = this.$(e.currentTarget);
                     t.find("span").hasClass("aicon-chevron-double-up") ? t.find("span").removeClass("aicon-chevron-double-up").addClass("aicon-chevron-double-down") : t.find("span").removeClass("aicon-chevron-double-down").addClass("aicon-chevron-double-up")
                 },
                 addAdditionalService: function() {
                     this.additionalService = new o({
                         signedBackBillIndex: this.signedBackBillIndex,
                         callBack: this.fillBackAdditionalService.bind(this)
                     })
                 },
                 fillBackAdditionalService: function(e, t) {
                     this.additionalService.close(),
                         this.signedBackBillIndex = e.join(),
                         this.signedBackBillName = t.join(),
                         this.showAdditionalService(),
                         this.changePredictPrice()
                 },
                 showAdditionalService: function() {
                     "" != this.signedBackBillName ? (this.$(".additional .second").show().find(".content").html("[" + this.signedBackBillName.split(",").join("] [") + "]"),
                         this.$(".bill-back-tip").show()) : (this.$(".additional .second").hide(),
                         this.$(".bill-back-tip").hide())
                 },
                 chooseLeaveMsg: function() {
                     this.leaveMsg = new l({
                         choosedMsg: this.choosedMsg,
                         callBack: this.fillBackLeaveMsg.bind(this)
                     })
                 },
                 fillBackLeaveMsg: function(e) {
                     this.leaveMsg.close(),
                         this.choosedMsg = e,
                         this.showLeaveMsg()
                 },
                 showLeaveMsg: function() {
                     "" != this.choosedMsg ? this.$(".leave-msg .second").show().find(".content").html(this.choosedMsg) : this.$(".leave-msg .second").hide()
                 },
                 rateChange: function(e) {
                     this.totalFreight = e,
                         this.changePredictPrice()
                 },
                 supportValInput: function(e) {
                     this.supportPrise = e,
                         this.changePredictPrice()
                 },
                 changePredictPrice: function() {
                     var e, t = isNaN(parseFloat(this.supportPrise)) ? 0 : parseFloat(this.supportPrise), i = "" == this.signedBackBillIndex ? 0 : 5;
                     e = isNaN(parseFloat(this.totalFreight)) ? "--" : parseFloat(this.totalFreight) + t + i,
                         this.$(".predict-price .price").text(e)
                 }
             })
         }),
         define("views/order/innerViews/addDeclareGoodsView", ["backbone", "templates", "helper", "moment"], function(e, i, t) {
             return e.View.extend({
                 initialize: function() {
                     this.lang = t.getSiteLanguage().toUpperCase(),
                         this.other = "OTHER",
                         this.isGoodsNameLegal = !1,
                         this.isUnitLegal = !1,
                         this.goodsName = ""
                 },
                 events: {
                     "change .itemType": "itemTypeChangeEvent",
                     "keyup .goodsName": "goodsNameKeyupEvent",
                     "blur .goodsName": "goodsNameBlurEvent",
                     "mousedown .clearance-item-form": "clearanceItemFormClickEvent",
                     "change .unit": "unitChangeEvent",
                     "blur .otherUnit": "otherUnitBlurEvent",
                     "click .clearanceItemSubmitBtn": "clearanceItemSubmitEvent"
                 },
                 initDeclareGoodsContent: function() {
                     this.$el.html(i.clearanceItemForm({
                         data: {},
                         fromAcs: this.options.fromAcsOrder
                     })),
                         this.fillViewData(),
                         this.$(".goods-input-required").show()
                 },
                 showViewModal: function(e) {
                     this.$el.html(i.modal({
                         title: _l("新增申报物品"),
                         id: "addDeclareGoods",
                         body: i.clearanceItemForm({
                             data: e || {},
                             fromAcs: this.options.fromAcsOrder
                         }),
                         fade: !0,
                         width: !1
                     })),
                         this.$("#addDeclareGoods").modal("show"),
                         this.fillViewData(e)
                 },
                 fillViewData: function(e) {
                     this.$(".currency").html(i.dropdownSelectTemplate({
                         itemList: this.getCurrencyList()
                     })),
                     this.options.fromAcsOrder && this.$(".currency").val("HKD"),
                         this.$(".unit").html(i.dropdownSelectTemplate({
                             itemList: this.getUnitList()
                         })),
                         e ? (this.selectedID = e.id,
                             this.itemTypeChangeEvent(),
                             this.$(".currency").val(e.currency),
                             this.$(".goodsQuantity").val(e.quantity),
                             this.checkUnit(e.uom) ? this.$(".unit").val(e.uom) : (this.$(".unit").val(this.other),
                                 this.unitChangeEvent(),
                                 this.$(".otherUnit").val(e.uom))) : this.selectedID = null
                 },
                 getCurrencyList: function() {
                     return "SC" == this.lang ? [{
                         value: "CNY",
                         txt: "人民币"
                     }, {
                         value: "USD",
                         txt: "美元"
                     }, {
                         value: "MOP",
                         txt: "澳门元"
                     }, {
                         value: "SGD",
                         txt: "新元"
                     }, {
                         value: "JPY",
                         txt: "日元"
                     }, {
                         value: "KRW",
                         txt: "韩元"
                     }, {
                         value: "MYR",
                         txt: "马币"
                     }, {
                         value: "NTD",
                         txt: "新台币"
                     }, {
                         value: "HKD",
                         txt: "港币"
                     }] : [{
                         value: "CNY",
                         txt: "CNY"
                     }, {
                         value: "USD",
                         txt: "USD"
                     }, {
                         value: "MOP",
                         txt: "MOP"
                     }, {
                         value: "SGD",
                         txt: "SGD"
                     }, {
                         value: "JPY",
                         txt: "JPY"
                     }, {
                         value: "KRW",
                         txt: "KRW"
                     }, {
                         value: "MYR",
                         txt: "MYR"
                     }, {
                         value: "NTD",
                         txt: "NTD"
                     }, {
                         value: "HKD",
                         txt: "HKD"
                     }]
                 },
                 getUnitList: function() {
                     return "SC" == this.lang ? [{
                         value: "个",
                         txt: "个"
                     }, {
                         value: "份",
                         txt: "份"
                     }, {
                         value: "件",
                         txt: "件"
                     }, {
                         value: "条",
                         txt: "条"
                     }, {
                         value: "只",
                         txt: "只"
                     }, {
                         value: "双",
                         txt: "双"
                     }, {
                         value: "台",
                         txt: "台"
                     }, {
                         value: "张",
                         txt: "张"
                     }, {
                         value: "盒",
                         txt: "盒"
                     }, {
                         value: "OTHER",
                         txt: "其他"
                     }] : [{
                         value: "PCS",
                         txt: "PCS"
                     }, {
                         value: "BOX",
                         txt: "BOX"
                     }, {
                         value: "ROLL",
                         txt: "ROLL"
                     }, {
                         value: "METER",
                         txt: "METER"
                     }, {
                         value: "PAIR",
                         txt: "PAIR"
                     }, {
                         value: "KG",
                         txt: "KG"
                     }, {
                         value: "SETB",
                         txt: "SETB"
                     }, {
                         value: "UNCH",
                         txt: "UNCH"
                     }, {
                         value: "CAN",
                         txt: "CAN"
                     }, {
                         value: "OTHER",
                         txt: "OTHER"
                     }]
                 },
                 checkUnit: function(t) {
                     var e = "SC" == this.lang ? ["个", "份", "件", "条", "只", "双", "台", "张", "盒"] : ["PCS", "BOX", "ROLL", "METER", "PAIR", "KG", "SETB", "UNCH", "CAN"]
                         , i = !1;
                     return _.forEach(e, function(e) {
                         t == e && (i = !0)
                     }),
                         i
                 },
                 checkAllUnit: function(t) {
                     var e = "SC" == this.lang ? ["个", "份", "件", "条", "只", "双", "台", "张", "盒", "千克", "支", "座", "辆", "艘", "架", "套", "头", "枝", "根", "把", "块", "卷", "副", "片", "组", "幅", "对", "棵", "株", "井", "米", "盘", "平方米", "立方米", "筒", "克", "盆", "万个", "具", "百副", "百支", "百把", "百个", "百片", "刀", "疋", "公担", "扇", "百枝", "千只", "千块", "千盒", "千枝", "千个", "亿支", "亿个", "万套", "千张", "万张", "千伏安", "千瓦", "千瓦时", "千升", "英尺", "吨", "长吨", "短吨", "司马担", "司马斤", "斤", "磅", "担", "英担", "短担", "两", "市担", "盎司", "克拉", "市尺", "码", "英寸", "寸", "升", "毫升", "英加仑", "美加仑", "立方英尺", "立方尺", "平方码", "平方英尺", "平方尺", "英制马力", "公制马力", "令", "箱", "批", "罐", "桶", "扎", "包", "箩", "打", "筐", "罗", "匹", "册", "本", "发", "枚", "捆", "袋", "粒", "合", "瓶", "千支", "万双", "万粒", "千粒", "千米", "千英尺", "百万贝可", "部", "封", "KG", "公斤"] : ["PCS", "BOX", "ROLL", "METER", "PAIR", "KG", "SETB", "UNCH", "CAN", "BOTTLE", "BAG", "YARD"]
                         , i = !1;
                     return _.forEach(e, function(e) {
                         t == e && (i = !0)
                     }),
                         i
                 },
                 formCheck: function() {
                     return "file" == (this.options.fromAcsOrder ? "goods" : this.$(".itemType:checked").val()) || (this.goodsNameCheck(),
                         this.otherUnitBlurCheck(),
                     this.$(".clearance-item-form").parsley().validate() && this.isGoodsNameLegal && this.isUnitLegal)
                 },
                 itemTypeChangeEvent: function() {
                     var e = this.options.fromAcsOrder ? "goods" : this.$(".itemType:checked").val();
                     "file" == e ? this.$(".goods-input-required").hide() : "goods" == e && this.$(".goods-input-required").show()
                 },
                 goodsNameKeyupEvent: function() {
                     var e = this.$(".goodsName").val()
                         , a = this.lang
                         , t = {
                         goodsName: e
                     };
                     sfAjax.goodsNameAssociate({
                         data: t,
                         success: function(e) {
                             var t = e.result
                                 , n = [];
                             _.each(t, function(e) {
                                 var t = "SC" == a ? e.matchUnit : e.englishUnit
                                     , i = t && t.split(",")[0];
                                 n.push({
                                     value: e.matchName,
                                     txt: e.matchName,
                                     unit: i,
                                     enTxt: e.englishName,
                                     selectable: "Y" != e.isBlackList,
                                     lang: a
                                 })
                             }),
                             n.length && (this.$(".goodsName-hint").html(i.promptDialogTemplate({
                                 itemList: n
                             })),
                                 this.$(".goodsName-hint").show())
                         },
                         error: function() {
                             this.$(".goodsName-hint").hide()
                         }
                     })
                 },
                 goodsNameCheck: function() {
                     var i = this
                         , e = {
                         goodsName: this.$(".goodsName").val()
                     };
                     sfAjax.goodsNameCheck({
                         data: e,
                         success: function(e) {
                             var t = e.code;
                             700 == t ? (i.$(".goodsName-fuzzy").show(),
                                 i.$(".goodsName-contraband").hide(),
                                 i.isGoodsNameLegal = !1) : 701 == t ? (i.$(".goodsName-contraband").show(),
                                 i.$(".goodsName-fuzzy").hide(),
                                 i.isGoodsNameLegal = !1) : 0 == t && (i.$(".goodsName-fuzzy").hide(),
                                 i.$(".goodsName-contraband").hide(),
                                 i.isGoodsNameLegal = !0)
                         },
                         error: function() {
                             this.$(".goodsName-fuzzy").hide(),
                                 this.$(".goodsName-contraband").hide()
                         }
                     })
                 },
                 goodsNameHintClickEvent: function(e) {
                     if ($(e.target).data("selectable")) {
                         var t = $(e.target).data("sc")
                             , i = $(e.target).data("en")
                             , n = "SC" == this.lang ? t : i
                             , a = $(e.target).data("unit");
                         n && (this.$(".goodsName").val(n),
                             this.goodsName = n,
                             this.$(".goodsName").data("sc", t),
                             this.$(".goodsName").data("en", i),
                             this.checkUnit(a) ? (this.$(".unit").val(a),
                                 this.unitChangeEvent()) : (this.$(".unit").val(this.other),
                                 this.unitChangeEvent(),
                                 this.$(".otherUnit").val(a)),
                             this.$(".goodsName-hint").hide())
                     }
                 },
                 unitChangeEvent: function() {
                     this.$(".unit").find("option:selected").val() == this.other ? (this.$(".otherUnit").val(""),
                         this.$(".otherUnit").show()) : this.$(".otherUnit").hide()
                 },
                 goodsNameBlurEvent: function() {
                     var e = this.$(".goodsName").val();
                     this.goodsName != e && this.$(".goodsName").data("en", "")
                 },
                 clearanceItemFormClickEvent: function(e) {
                     this.$(".goodsName-hint").find(e.target).length ? (this.goodsNameHintClickEvent(e),
                         this.goodsNameCheck()) : "goodsName" != this.$(e.target).attr("name") && (this.$(".clearance-item-form").find(".goodsName-hint").hide(),
                         this.goodsNameCheck()),
                     "unit" != this.$(e.target).attr("name") && "otherUnit" != this.$(e.target).attr("name") && this.otherUnitBlurCheck()
                 },
                 otherUnitBlurCheck: function() {
                     var e = this.$(".unit").val()
                         , t = this.$(".otherUnit").val()
                         , i = e == this.other ? t : e;
                     this.checkAllUnit(i) ? (this.$(".unit-error").hide(),
                         this.isUnitLegal = !0) : (this.$(".unit-error").show(),
                         this.isUnitLegal = !1)
                 },
                 getData: function() {
                     var e = this.options.fromAcsOrder ? "goods" : this.$(".itemType:checked").val()
                         , t = this.$(".goodsName").val() || this.$(".goodsName").data("sc")
                         , i = this.$(".goodsName").data("en")
                         , n = this.$(".price").val()
                         , a = this.$(".currency").find("option:selected").val()
                         , r = this.$(".currency").find("option:selected").html()
                         , s = this.$(".goodsQuantity").val()
                         , o = this.$(".unit").val()
                         , l = this.$(".otherUnit").val()
                         , d = o == this.other ? l : o;
                     return {
                         id: this.selectedID,
                         name: t,
                         uom: d,
                         quantity: s,
                         price: n,
                         englishName: i || "",
                         currency: a,
                         currencyCn: r,
                         declareType: e
                     }
                 },
                 clearanceItemSubmitEvent: function(e) {
                     e.preventDefault(),
                     this.formCheck() && (this.options.callbackFun(this.getData()),
                         this.$("#addDeclareGoods").modal("hide"))
                 }
             })
         }),
         define("views/order/innerViews/HKcustomsClearance", ["backbone", "templates", "views/order/innerViews/addDeclareGoodsView", "sflayer", "views/billOptions/weight"], function(a, i, e, r, t) {
             return a.View.extend({
                 events: {
                     "click .add-one-item": "showAddDeclareGoodsView",
                     "click .pay-type a": "onPayTypeChange",
                     "keyup .monthAccount": "onMonthAccountInput",
                     "change #is-valuation-service": "onValuationServiceChanged",
                     "input #valuation-service": "onValuationServicePriseChanged",
                     "click .clearance li": "chooseClearance",
                     "click .delete": "deleteGoods",
                     "click .edit": "editGoods"
                 },
                 showCustomsClearanceContent: function(e) {
                     this.$el.html(i.customsClearanceContent({
                         isTW: e,
                         acceptUrl: Helper.getDynamicURLWithContext("/accept/")
                     })),
                         this.addGoodView = null,
                         this.$(".pay-type.fee").data("value", "1"),
                         this.isFeeMonthAccountValidated = !1,
                         this.isTaxMonthAccountValidated = !1,
                         this.valuationMoreClearance = !1,
                         this.iscurrencySame = !0,
                         this.declareGoodsLists = [],
                         this.clearanceType = "0",
                         this.canChangeclearanceType = !0,
                         this.totalCNY = 0,
                         this.originCurrency = "",
                         this.originTotalPrise = "",
                     e && this.$(".pay-type.tax").data("value", "2"),
                         this.weight = new t({
                             el: this.$(".weight"),
                             min: 1,
                             noWarn: !1
                         }),
                         this.$(".official-clearance-tip .main-text").html($(".official-clearance-content").html())
                 },
                 getfinalDeclareGoodsLists: function() {
                     return _.map(this.declareGoodsLists, function(e) {
                         return _.omit(e, "id", "currency", "declareType", "currencyCn")
                     })
                 },
                 showAddDeclareGoodsView: function() {
                     if (10 == this.declareGoodsLists.length)
                         this.$(".item-too-more").show();
                     else {
                         if (!this.addGoodView) {
                             this.addGoodView = new e({
                                 el: this.$(".add-goods-content-wrapper"),
                                 fromAcsOrder: !1,
                                 callbackFun: this.fillGoods.bind(this)
                             })
                         }
                         this.addGoodView.showViewModal()
                     }
                 },
                 onPayTypeChange: function(e) {
                     e.preventDefault();
                     var t = this.$(e.currentTarget).closest(".pay-type");
                     t.data("value", this.$(e.currentTarget).data("value")),
                         "4" == this.$(e.currentTarget).data("value") ? t.hasClass("fee") ? this.$("#fee-monthAccount").val("").show().trigger("keyup") : this.$("#tax-monthAccount").val("").show().trigger("keyup") : t.hasClass("fee") ? (this.$("#fee-monthAccount").hide(),
                             this.$(".fee-month-account-err").hide(),
                             this.$(".fee-month-account-empty").hide(),
                             this.isFeeMonthAccountValidated = !0) : (this.$("#tax-monthAccount").hide(),
                             this.$(".tax-month-account-err").hide(),
                             this.$(".tax-month-account-empty").hide(),
                             this.isTaxMonthAccountValidated = !0)
                 },
                 checkMonthAccount: function(e, t) {
                     return "" == e ? ("fee" == t ? (this.$(".fee-month-account-err").hide(),
                         this.$(".fee-month-account-empty").show()) : (this.$(".tax-month-account-err").hide(),
                         this.$(".tax-month-account-empty").show()),
                         !1) : !!/^\d{10}$/.test(e) || ("fee" == t ? (this.$(".fee-month-account-empty").hide(),
                         this.$(".fee-month-account-err").show()) : (this.$(".tax-month-account-empty").hide(),
                         this.$(".tax-month-account-err").show()),
                         !1)
                 },
                 onMonthAccountInput: function(e) {
                     var t, i = $.trim(this.$(e.currentTarget).val());
                     t = "fee-monthAccount" == this.$(e.currentTarget).attr("id") ? "fee" : "tax";
                     var n = this;
                     this.checkMonthAccount(i, t) ? a.ajax({
                         type: "POST",
                         url: Helper.getRESTfulDomain("cx/" + i + "/isCustomerCard"),
                         error: function() {
                             "fee" == t ? (n.$(".fee-month-account-empty").hide(),
                                 n.$(".fee-month-account-err").show(),
                                 n.isFeeMonthAccountValidated = !1) : (n.$(".tax-month-account-empty").hide(),
                                 n.$(".tax-month-account-err").show(),
                                 n.isTaxMonthAccountValidated = !1)
                         },
                         success: function(e) {
                             e.code && 654 == e.code ? "fee" == t ? (n.$(".fee-month-account-empty").hide(),
                                 n.$(".fee-month-account-err").show(),
                                 n.isFeeMonthAccountValidated = !1) : (n.$(".tax-month-account-empty").hide(),
                                 n.$(".tax-month-account-err").show(),
                                 n.isTaxMonthAccountValidated = !1) : "fee" == t ? (n.$(".fee-month-account-empty").hide(),
                                 n.$(".fee-month-account-err").hide(),
                                 n.isFeeMonthAccountValidated = !0) : (n.$(".tax-month-account-empty").hide(),
                                 n.$(".tax-month-account-err").hide(),
                                 n.isTaxMonthAccountValidated = !0)
                         }
                     }) : "fee" == t ? n.isFeeMonthAccountValidated = !1 : n.isTaxMonthAccountValidated = !1
                 },
                 onValuationServiceChanged: function(e) {
                     this.$(e.currentTarget).prop("checked") ? (this.$(".valuation-service-content").show(),
                         this.$("#valuation-service").trigger("input"),
                         this.$(".valuation-service-selected").show(),
                         this.$(".valuation-service-content input").attr("data-parsley-required", "true")) : (this.$(".valuation-service-content").hide(),
                         this.$(".valuation-service-selected").hide(),
                         this.$(".valuation-service-too-big").hide(),
                         this.$(".valuation-more-clearance").hide(),
                         this.$(".valuation-service-content input").val("").removeAttr("data-parsley-required"),
                         this.valuationMoreClearance = !1)
                 },
                 onValuationServicePriseChanged: function(e) {
                     var t;
                     $(e.target).val($(e.target).val().replace(/[^0-9.]/g, "")),
                         isNaN($(e.target).val()) ? this.$("#valuation-service-prise").data("prise", "").html("") : 0 == $(e.target).val() || "" == $(e.target).val() ? t = 0 : 0 < $(e.target).val() && $(e.target).val() <= 1600 ? t = 8 : 1600 < $(e.target).val() && $(e.target).val() <= 5e5 && (t = Math.round(.005 * $(e.target).val())),
                         5e5 < $(e.target).val() ? ($(e.target).val($(e.target).val().substring(0, $(e.target).val().length - 1)),
                             this.$(".valuation-service-too-big").show()) : this.$(".valuation-service-too-big").hide(),
                         $(e.target).val() > this.totalCNY ? (this.valuationMoreClearance = !0,
                             this.$(".valuation-more-clearance").show().find(".number").text("sc" == Helper.getSiteLanguage() ? this.totalCNY + " 元" : "RMB " + this.totalCNY)) : (this.valuationMoreClearance = !1,
                             this.$(".valuation-more-clearance").hide()),
                     (t || 0 == t) && this.$("#valuation-service-prise").data("prise", t).html("￥" + t)
                 },
                 chooseClearance: function(e) {
                     this.canChangeclearanceType && (this.$(e.currentTarget).addClass("active").siblings().removeClass("active"),
                         this.clearanceType = this.$(e.currentTarget).data("type"),
                         "1" == this.clearanceType ? this.$(".official-clearance-tip").show() : this.$(".official-clearance-tip").hide())
                 },
                 adjustClearance: function() {
                     this.$(".clearance li").removeClass("active"),
                         this.$(".clearance").find('[data-type="' + this.clearanceType + '"]').addClass("active"),
                         "1" == this.clearanceType ? this.$(".official-clearance-tip").show() : this.$(".official-clearance-tip").hide()
                 },
                 deleteGoods: function(e) {
                     this.$(".item-too-more").hide();
                     var t = this.$(e.currentTarget).closest("ul").data("id");
                     this.declareGoodsLists = _.reject(this.declareGoodsLists, function(e) {
                         return e.id == t
                     }),
                     0 == this.declareGoodsLists.length && this.$(".item-not-enough").show(),
                         this.fillDeclareGoods()
                 },
                 editGoods: function(e) {
                     var t = this.$(e.currentTarget).closest("ul").data("id")
                         , i = _.find(this.declareGoodsLists, function(e) {
                         return e.id == t
                     });
                     this.addGoodView.showViewModal(i)
                 },
                 fillGoods: function(t) {
                     t.id ? this.declareGoodsLists = _.reject(this.declareGoodsLists, function(e) {
                         return e.id == t.id
                     }) : t.id = (new Date).getTime(),
                     "file" == t.declareType && (t.name = "文件",
                         t.uom = "个",
                         t.quantity = "1",
                         t.price = "0",
                         t.englishName = "document"),
                         this.declareGoodsLists.push(t),
                         this.$(".item-not-enough").hide(),
                         this.fillDeclareGoods()
                 },
                 fillDeclareGoods: function() {
                     if (this.originCurrency = "",
                             this.originTotalPrise = "",
                             this.$(".totalPrise").hide(),
                         0 < this.declareGoodsLists.length) {
                         this.$(".item-list").html(i.clearanceItem({
                             data: this.declareGoodsLists
                         })).show();
                         var e = _.filter(this.declareGoodsLists, function(e) {
                             return "goods" == e.declareType
                         });
                         if (0 < e.length)
                             if (this.$("#is-valuation-service").prop("disabled", !1).removeAttr("title"),
                                 1 < _.union(_.pluck(e, "currency")).length)
                                 this.iscurrencySame = !1,
                                     this.$(".currency-not-same").show();
                             else {
                                 this.$(".currency-not-same").hide(),
                                     this.iscurrencySame = !0;
                                 var t, n = 0;
                                 _.each(e, function(e) {
                                     n += parseInt(e.quantity) * e.price
                                 }),
                                     this.originCurrency = _.union(_.pluck(e, "currency"))[0],
                                     this.originTotalPrise = n,
                                     t = "sc" == Helper.getSiteLanguage() ? _.union(_.pluck(e, "currencyCn"))[0] : this.originCurrency,
                                     this.$(".totalPrise").show().find(".number").text(this.originTotalPrise + " " + t);
                                 var a = this;
                                 sfAjax.getexrate({
                                     data: {
                                         time: encodeURIComponent(moment().format()),
                                         originCode: a.originCurrency,
                                         destCode: "CNY"
                                     },
                                     success: function(e) {
                                         if (a.totalCNY = parseFloat((n * e).toFixed(3)),
                                             a.$("#is-valuation-service").prop("checked") && a.$("#valuation-service").trigger("input"),
                                             5e3 < a.totalCNY) {
                                             if (a.canChangeclearanceType) {
                                                 a.canChangeclearanceType = !1,
                                                     a.clearanceType = "1",
                                                     a.adjustClearance();
                                                 var t = _l("申报价值超过5000元人民币的物品，需要正式报关")
                                                     , i = r.confirm(t, {
                                                     title: _l("温馨提示"),
                                                     btn: [_l("正式报关"), _l("修改申报物品")]
                                                 }, function() {
                                                     r.close(i)
                                                 }, function() {
                                                     r.close(i)
                                                 })
                                             }
                                         } else
                                             a.canChangeclearanceType = !0
                                     },
                                     error: function() {
                                         r.msg(_l("获取失败"))
                                     }
                                 })
                             }
                         else
                             this.originCurrency = "en" == Helper.getSiteLanguage() ? this.declareGoodsLists[0].currency : this.declareGoodsLists[0].currencyCn,
                                 this.$("#is-valuation-service").prop("checked", !1).trigger("change").prop("disabled", !0).attr("title", _l("当前物品不支持保价"))
                     } else
                         this.$(".item-list").html("").hide()
                 }
             })
         }),
         define("views/order/sub/toMainland", ["views/order/order", "views/order/addressBook/addressBookContent", "views/order/innerViews/additionalView", "views/order/innerViews/HKcustomsClearance", "templates", "event", "sflayer"], function(e, t, i, n, a, r, s) {
             var o = [_l("请填写正确的台湾个人身份证号"), _l("请填写正确的台湾公司营业执照号")];
             return e.extend({
                 initialize: function() {
                     this.$(".hide-in-mainland").remove(),
                         this.$(".receiver-location .detail-location-input").attr("data-hide-hkmctw", "false").data("max-A000710000", 5).data("max-886", 5).data("max-A000810000", 5).data("max-852", 5),
                         this.priceAndTimeType = 1,
                         e.prototype.initialize.apply(this, arguments),
                         this.useTimeQuantum = !0,
                         this.HKcustomsClearanceView = null,
                         this.additionalView = null,
                         this.isML = !0,
                         this.isHK = !1,
                         this.isMACAO = !1,
                         this.isTW = !1,
                     null != this.options.waybillNo && (this.$(".qr-show").show(),
                         this.$(".qr-hide").hide(),
                         this.$(".qr-waybill-no").text(this.options.waybillNo))
                 },
                 onReceiverCompanyChanged: function(e) {
                     this.isTW && ("" == $.trim(this.$(e.currentTarget).val()) ? this.$(".TWlicenseInput input").attr("data-parsley-pattern", "^[a-zA-Z0-9]{10}$").attr("data-parsley-pattern-message", o[0]) : this.$(".TWlicenseInput input").attr("data-parsley-pattern", "^[a-zA-Z0-9]{8}$").attr("data-parsley-pattern-message", o[1]))
                 },
                 adjustViewFromLocationCode: function(e) {
                     null != this.options.waybillNo && this.$(".qr-other-info-title").show(),
                         "852" == e ? (this.isML = !1,
                             this.isTW = !1,
                             this.isHK = !0,
                             this.isMACAO = !1) : "886" == e ? (this.isML = !1,
                             this.isTW = !0,
                             this.isHK = !1,
                             this.isMACAO = !1) : "853" == e ? (this.isML = !1,
                             this.isTW = !1,
                             this.isHK = !1,
                             this.isMACAO = !0) : (this.isML = !0,
                             this.isTW = !1,
                             this.isHK = !1,
                             this.isMACAO = !1),
                         this.isML ? (this.additionalView || (this.additionalView = new i({
                             el: this.$(".subViewWrapper"),
                             from: "mainland",
                             qr: null != this.options.waybillNo
                         })),
                             this.additionalView.showAdditionalContent()) : (this.HKcustomsClearanceView || (this.HKcustomsClearanceView = new n({
                             el: this.$(".subViewWrapper")
                         })),
                             this.HKcustomsClearanceView.showCustomsClearanceContent(this.isTW)),
                         this.isTW ? (this.$(".TWlicenseInput").show(),
                             this.$(".TWlicenseInput input").attr("data-parsley-required", "true"),
                             this.$("#receiver-company").trigger("blur")) : (this.$(".TWlicenseInput").hide(),
                             this.$(".TWlicenseInput input").val("").removeAttr("data-parsley-required"))
                 },
                 onReceiverLocationChanged: function() {
                     var e = this.$(".receiver-location input").data("rate-code");
                     this.adjustViewFromLocationCode(e),
                         this.model.set("receiverLocationCityCode", e),
                         this.showProductTypeView(),
                         this.queryReceiverAppointment()
                 },
                 newAddressBookView: function(e) {
                     this.addressBookView = new t({
                         model: this.model,
                         fillOption: this.addressBookFillOption,
                         viewOption: "mainland",
                         totalPage: e.result.totalPage,
                         page: e.result.pageNo
                     })
                 },
                 fetchPriceAndTimes: function() {
                     var e = this.$(".receiver-location input")
                         , t = "852" == e.data("rateCode") || "886" == e.data("rateCode") ? e.data("parentCode") : e.data("code")
                         , i = {
                         originCode: this.$(".sender-location input").data("code"),
                         destCode: t,
                         time: this.getBookingTime(),
                         weight: this.getMetaWeight(),
                         queryType: this.isML ? "2" : "3",
                         rateType: "toMainland"
                     };
                     this.priceAndTime.fetchTimeAndRate(i)
                 },
                 getMetaWeight: function() {
                     return this.isML ? this.additionalView.weight.getWeight() : this.HKcustomsClearanceView.weight.getWeight()
                 },
                 dealQrCodeData: function(e) {
                     e.waybillNo = this.options.waybillNo,
                         e.appointFlow = this.getAppointFlow()
                 },
                 getAppointFlow: function() {
                     return this.isML ? "CN_CN" : this.isHK ? "CN_HK" : this.isMACAO ? "CN_MAC" : this.isTW ? "CN_TW" : ""
                 }
             })
         }),
         define("views/order/sub/heavyCargo", ["views/order/addressBook/addressBookContent", "views/order/order", "views/order/innerViews/additionalView", "templates", "event", "views/billOptions/weight"], function(t, e, i, n, a, r) {
             return e.extend({
                 initialize: function() {
                     this.$(".hide-in-heavyCargo").remove(),
                         this.$(".receiver-location .detail-location-input").attr("data-hide-hkmctw", "true"),
                         this.priceAndTimeType = 2,
                         e.prototype.initialize.apply(this, arguments),
                         this.handleVolTipModal(),
                         this.useTimeQuantum = !0,
                         this.weight = new r({
                             el: this.$(".weight"),
                             min: 20,
                             start: 20,
                             noWarn: !0
                         }),
                         this.additionalView = new i({
                             el: this.$(".subViewWrapper"),
                             from: "heavyCargo",
                             qr: !1
                         }),
                         this.additionalView.showAdditionalContent(),
                         this.isML = !0,
                         this.isHK = !1,
                         this.isMACAO = !1,
                         this.isTW = !1
                 },
                 onReceiverCompanyChanged: function() {},
                 onReceiverLocationChanged: function() {
                     var e = this.$(".receiver-location input").data("rate-code");
                     this.model.set("receiverLocationCityCode", e),
                         this.showProductTypeView(),
                         this.queryReceiverAppointment()
                 },
                 newAddressBookView: function(e) {
                     this.addressBookView = new t({
                         model: this.model,
                         fillOption: this.addressBookFillOption,
                         viewOption: "heavyCargo",
                         totalPage: e.result.totalPage,
                         page: e.result.pageNo
                     })
                 },
                 getProductTypeValue: function(e) {
                     var t = "SE0100";
                     return "SP636" == e ? t = "SE0101" : "SP635" == e && (t = "SE0100"),
                         t
                 },
                 handleVolTipModal: function() {
                     var e = n.modal({
                         title: _l("温馨提示"),
                         id: "vol-tip-modal",
                         body: this.$(".vol-tip").html(),
                         fade: !0,
                         width: 388
                     });
                     this.$(".vol-tip").html(e).show()
                 },
                 fetchPriceAndTimes: function() {
                     var e = {
                         originCode: this.$(".sender-location input").data("code"),
                         destCode: this.$(".receiver-location input").data("code"),
                         time: this.getBookingTime(),
                         weight: this.weight.getWeight(),
                         volume: 1e6 * this.$(".measurement").val(),
                         queryType: "2",
                         rateType: "heavyCargo"
                     };
                     this.priceAndTime.fetchTimeAndRate(e)
                 },
                 handleMonthAccount: function(e) {
                     e && (this.$(".pay-type").data("value", "4"),
                         this.$(".pay-type").parents(".btn-group").find("button").html(this.$(".pay-type").find('a[data-value="4"]').text() + '<span class="caret"></span>'),
                         this.$("#monthAccount").val(e),
                         this.$(".monthAccount-content").show())
                 },
                 formattingVOLinput: function(e) {
                     var t = this.$(e.target).val();
                     (!/^\d+\.?(\d{1,2})?$/.test(t) || 999 < t) && (this.$(e.target).val(t.substring(0, t.length - 1)),
                     "" != this.$(e.target).val() && this.$(e.target).trigger("input"))
                 },
                 toFixedVOLinput: function(e) {
                     var t = this.$(e.target).val();
                     "" != t && this.$(e.target).val(parseFloat(t)),
                         this.showProductTypeView()
                 },
                 getMetaWeight: function() {
                     return this.weight.getWeight()
                 }
             })
         }),
         define("models/payFee", ["backbone", "helper", "utils/time", "initialSetups", "collections/detailRegions"], function(e, t, i, n, r) {
             var a = ["A000001000", "A000092000", "A000063000", "A000066000", "A000061000", "A000007000", "A000052000", "A000011000", "A000095000", "A000049000", "A000033000", "A000043000", "A000032000", "A000359000", "A000385000", "A000045000", "A000034000", "A000372000", "A000030000", "A000036000", "A000353000", "A000039000", "A000358000", "A000371000", "A000370000", "A000352000", "A000031000", "A000048000", "A000351000", "A000420000", "A000040000", "A000044000", "A000421000", "A000386000", "A000046000", "A000356000", "A000357000", "A000055000", "A000673000", "A000971000", "A000164000", "A000062000", "A000091000", "A000855000", "A000880000", "A000094000", "A000056000"]
                 , s = ["#EF7D00", "#E30413", "#FFED00", "#009440"];
             return e.Model.extend({
                 defaults: {
                     link: "#",
                     isPromotion: !1
                 },
                 notContainIntro: function() {
                     var e = this.get("intro");
                     return !e || 0 === e.length || 1 === e.length && "" === e[0]
                 }
             }, {
                 parse: function(e, t, i) {
                     return this.replaceCurrencyName(e),
                         this.appendAddtionalPayFee(e, t, i),
                         this.appendShouldShowCargoType(e, t, i),
                         this.roundPayFeeWeight(e),
                         this.deliverDate(e),
                         this.setColor(e),
                         this.filterPrice(e, i),
                         this.mergeRemoteDataWithOpenCMS(e)
                 },
                 deliverDate: function(e) {
                     return e.deliverTime && !e.internet && (e.deliverDate = i.relativeDate(moment(e.deliverTime)),
                         e.deliverMomentTime = moment(e.deliverTime).format("HH:mm")),
                         this
                 },
                 setColor: function(e) {
                     return e.limitTypeCode && (e.serTextColor = "white",
                         "T104" == e.limitTypeCode ? e.serviceColor = s[0] : "T801" == e.limitTypeCode ? e.serviceColor = s[1] : "T4" == e.limitTypeCode ? (e.serviceColor = s[2],
                             e.serTextColor = "black") : "T6" == e.limitTypeCode && (e.serviceColor = s[3])),
                         this
                 },
                 roundPayFeeWeight: function(e) {
                     e.weight = Math.max(e.weight, .1)
                 },
                 additionalPayFeeAvailableAtLocation: function(e, t, i) {
                     var n = 0 <= _.indexOf(e.originLocations.split(","), t)
                         , a = 0 <= _.indexOf(e.destsLocations.split(","), i);
                     return e.bothRequired ? n && a : n || a
                 },
                 appendAddtionalPayFee: function(t, i, n) {
                     var a = this;
                     t.additionalPayFees = _.filter(window.additionalServiceList, function(e) {
                         return !!a.additionalPayFeeAvailableAtLocation(e, i, n) && ("overdue-refund" === e.code ? -1 !== _.indexOf(e.availableService, t.limitTypeCode) : "earlier-shipping-lower-price" === e.code && 0 != t.regionFreight)
                     })
                 },
                 mergeRemoteDataWithOpenCMS: function(t) {
                     if ("SP636" == t.cargoTypeCode || "SP635" == t.cargoTypeCode)
                         return t;
                     var e = _.filter(window.serviceList, function(e) {
                         return e.limitTypeCode == t.limitTypeCode && e.limitTypeName == t.limitTypeName
                     });
                     return _.extend(t, 0 == e.length ? {} : e[0])
                 },
                 replaceCurrencyName: function(e) {
                     return e.totalPrice = e.totalFreight,
                         "人民币" === e.currencyName ? (e.currencyName = "",
                             e.freight = Number(e.freight + e.fuelCost) + "元",
                             e.totalFreight = e.totalFreight + "元",
                             e.pickupFreight = e.pickupFreight + "元",
                             e.transportFreight = e.transportFreight + "元",
                             e.distributionFreight = e.distributionFreight + "元") : e.freight = Number(e.freight + e.fuelCost),
                         "人民币" === e.destCurrencyName ? (e.destCurrencyName = "",
                             e.destFreight = Number(e.destFreight + e.destFuelCost) + "元",
                             e.destPickupFreight = e.destPickupFreight + "元",
                             e.destTransportFreight = e.destTransportFreight + "元",
                             e.destDistributionFreight = e.destDistributionFreight + "元") : e.destFreight = Number(e.destFreight + e.destFuelCost),
                         this
                 },
                 appendShouldShowCargoType: function(e, t, i) {
                     return e.shouldShowCargoType = this.shouldShowCargoType(e, t, i),
                         this
                 },
                 filterPrice: function(e, t) {
                     return -1 !== _.indexOf(a, t) && (e.destFreight = "",
                         e.destCurrencyName = _l("暂未开通")),
                         this
                 },
                 shouldShowCargoType: function(e, t, i) {
                     var n = r.isChinaMainland(t)
                         , a = r.isNotAboard(i);
                     return !(n && a)
                 }
             })
         }),
         define("collections/payFee", ["backbone", "underscore", "event", "helper", "models/payFee"], function(e, i, t, n, a) {
             var r = 1;
             return e.Collection.extend({
                 model: a,
                 comparator: "order",
                 url: function() {
                     if ("heavyCargo" == this.rateType) {
                         var e = "queryType=" + this.queryType + "&origin=" + this.originCode + "&dest=" + this.destCode + "&time=" + encodeURIComponent(this.time) + "&weight=" + this.weight + "&volume=" + this.volume;
                         return n.getRESTfulDomain("rate/ratesByHeavyCargo?" + e)
                     }
                     if ("coldChain" == this.rateType) {
                         e = "queryType=1&originCountyId=" + this.originCode + "&destCountyId=" + this.destCode + "&consignTime=" + encodeURIComponent(this.time) + "&weight=" + this.weight + "&volume=" + this.volume;
                         return n.getRESTfulDomain("rate/ratesByColdTransport?" + e)
                     }
                     if ("toMainland" == this.rateType) {
                         e = "origin=" + this.originCode + "&dest=" + this.destCode + "&weight=" + this.weight + "&time=" + encodeURIComponent(this.time) + "&queryType=" + this.queryType;
                         return n.getRESTfulDomain("rate?" + e)
                     }
                     e = "origin=" + this.originCode + "&dest=" + this.destCode + "&parentOrigin=" + this.originCode + "&parentDest=" + this.destCode + "&weight=" + this.weight + "&time=" + encodeURIComponent(this.time) + "&volume=" + this.volume;
                     return i.isBlank(this.queryType) || 0 == this.queryType || (e += "&queryType=" + this.queryType),
                         n.getRESTfulDomain("rate/newRates?" + e)
                 },
                 initialize: function(e) {
                     this.rateType = "normal",
                         this.initialPayFees = i(e),
                         this.listenTo(t, t.RateSearch, this.rateSearch)
                 },
                 withoutOutskirts: function() {
                     return this.filter(function(e) {
                         return "R10202" !== e.get("distanceTypeCode")
                     })
                 },
                 withOutskirts: function() {
                     return this.where({
                         distanceTypeCode: "R10202"
                     })
                 },
                 withPromotion: function() {
                     return this.filter(function(e) {
                         return e.has("promotionMessage") && "" !== e.get("promotionMessage")
                     })
                 },
                 isChinaRegion: function(e) {
                     return "A000086000" === e || "A000820000" === e || "A000810000" === e || "A000710000" === e
                 },
                 rateSearch: function(e) {
                     if (this.rateType = e.rateType ? e.rateType : this.rateType,
                             this.originCountryCode = e.originCountryCode || this.originCountryCode,
                             this.destsCountryCode = e.destsCountryCode || this.destsCountryCode,
                             this.originCode = e.originCode ? e.originCode : this.originCode,
                             this.destCode = e.destCode ? e.destCode : this.destCode,
                             this.time = e.time ? e.time : i.isBlank(this.time) ? moment(new Date).format() : this.time,
                             this.queryType = e.queryType ? e.queryType : this.queryType,
                             this.flag = !!e.flag && e.flag,
                         this.originCode && this.destCode && this.time) {
                         r = this.isChinaRegion(this.originCountryCode) && this.isChinaRegion(this.destsCountryCode) ? "1.0" : "0.5";
                         var t = $("input.weight").val();
                         this.flag ? this.weight = "" != t && null != t ? t : r : this.weight = isNaN(Number(e.weight)) ? r : Number(e.weight),
                             this.volume = e.volume ? e.volume : e.height && e.length && e.width ? e.height * e.length * e.width : 0,
                             this.checkCondition(e),
                             this.fetchPayfee()
                     }
                 },
                 fetchPayfee: function() {
                     var i = this;
                     this.fetch({
                         beforeSend: function() {
                             if (null != i.checkResult && !i.checkResult.canSearch)
                                 return i.trigger("outOfRange"),
                                     !1
                         },
                         error: function(e, t) {
                             i.renderErr(t)
                         }
                     })
                 },
                 parse: function(e) {
                     var t = this;
                     return e = i.map(e, function(e) {
                         return a.parse(e, t.originCountryCode, t.destsCountryCode)
                     }),
                         t.uniqueSevices(e)
                 },
                 renderErr: function() {
                     this.trigger("showDefault", {
                         limitTypeName: "heavyCargo" == this.rateType ? _l("重货包裹") : _l("F35标快"),
                         deliverTime: _l("约2-4天"),
                         totalFreight: _l("以收派员巴枪价格为准"),
                         limitTypeCode: "heavyCargo" == this.rateType ? "T6" : "T4",
                         cargoTypeCode: "heavyCargo" == this.rateType ? "SP635" : "C201",
                         expressTypeCode: "heavyCargo" == this.rateType ? "B2" : "B1",
                         closedTime: null
                     })
                 },
                 uniqueSevices: function(e) {
                     return i.uniq(e, function(e) {
                         return e.cargoTypeCode + e.limitTypeCode + e.distanceTypeCode
                     })
                 },
                 availableAdditionalServices: function() {
                     return i.chain(this.pluck("additionalPayFees")).flatten().union().compact().value()
                 },
                 checkCondition: function(e) {
                     var t = new Object;
                     if (t.canSearch = !0,
                             t.errs = [],
                         "A" != e.destCode.substr(0, 1) && "A" != e.originCode.substr(0, 1)) {
                         var i = isNaN(Number(e.weight)) ? 1 : Number(e.weight)
                             , n = isNaN(Number(e.height)) ? 0 : Number(e.height)
                             , a = isNaN(Number(e.width)) ? 0 : Number(e.width)
                             , r = isNaN(Number(e.length)) ? 0 : Number(e.length);
                         80 < i && (t.canSearch = !1,
                             t.errs.push("0")),
                         300 < r + a + n && (t.canSearch = !1,
                             t.errs.push("1")),
                         r + a + n <= 300 && (160 < r || 160 < a || 160 < n) && i <= 80 && t.errs.push("2"),
                             this.checkResult = t
                     } else
                         this.checkResult = t
                 }
             }, {
                 setupOrderSymbol: function(e) {
                     i.each(e, function(e, t) {
                         e.set("orderSymbol", window.ORDER_SYMBOLS[t])
                     })
                 }
             })
         }),
         define("views/order/sub/qrCodeOrder", ["baseView", "templates", "helper", "sflayer", "views/order/sub/toMainland", "jquery-validate"], function(e, t, i, n, a) {
             return e.extend({
                 template: t.qrCodeOrder,
                 init: function() {},
                 render: function() {
                     this.$el.html(this.template({
                         imgUrl: i.getResourceURL("images/order/qr-paper-bill.png")
                     }))
                 },
                 events: {
                     "click .paper-bill": "showPaperBill",
                     "submit form": "submitToOrder"
                 },
                 showPaperBill: function() {
                     n.open({
                         title: " ",
                         area: ["516px", "590px"],
                         skin: "qr-order-paper",
                         content: this.$(".qr-order-img")
                     })
                 },
                 submitToOrder: function(e) {
                     e.preventDefault();
                     this.$("form").validate({
                         onfocusout: !1,
                         onkeyup: !1,
                         focusInvalid: !0,
                         rules: {
                             billNumber: {
                                 required: !0,
                                 digits: !0,
                                 minlength: 12,
                                 maxlength: 12
                             }
                         },
                         messages: {
                             billNumber: _l("请输入12位数字组成的运单号")
                         },
                         showErrors: function(e, t) {
                             0 < t.length && n.tips(t[0].message, t[0].element, {
                                 tips: 1
                             })
                         }
                     });
                     if (this.$("form").validate().form()) {
                         this.waybillNo = this.$("input").val();
                         var t = this;
                         sfAjax.validAcsBillNo({
                             data: {
                                 waybillNo: t.waybillNo
                             },
                             success: function(e) {
                                 e && 0 === e.code ? sfAjax.submitAcsBillNo({
                                     data: {
                                         waybillNo: t.waybillNo
                                     },
                                     success: function(e) {
                                         e ? 0 === e.code ? t.fillOrder() : 610 === e.code ? n.msg(_l("运单号已使用")) : t.showNetworkErr() : t.showNetworkErr()
                                     },
                                     error: function() {
                                         t.showNetworkErr()
                                     }
                                 }) : 611 === e.code ? n.msg(_l("运单号无效")) : t.showNetworkErr()
                             },
                             error: function() {
                                 t.showNetworkErr()
                             }
                         })
                     }
                 },
                 showNetworkErr: function() {
                     n.msg(_l("网络故障，请稍后重试。"))
                 },
                 fillOrder: function() {
                     this.$el.parent().empty().html(this.options.viewContentWrapper),
                         this.mainlandSubView = new a({
                             el: $(".order-service-content"),
                             priceCollections: this.options.priceCollections,
                             waybillNo: this.waybillNo
                         })
                 }
             })
         }),
         define("views/order/masterController", ["views/order/sub/toMainland", "views/order/sub/heavyCargo", "collections/payFee", "views/order/sub/qrCodeOrder"], function(n, a, e, r) {
             return Backbone.View.extend({
                 el: $(".order-service"),
                 events: {
                     "click .receiver-areas a": "tabToggle",
                     "keydown .receiver-areas a": "tabToggleByEnter"
                 },
                 initialize: function() {
                     this.$('[class^="hide-in-"],[class*=" hide-in-"]').show(),
                         this.viewContentWrapper = this.$(".order-service-content-wrapper").html(),
                         this.priceCollections = new e
                 },
                 initTab: function(e, t) {
                     var i = !0;
                     (!e || "mainland" !== e && "heavyCargo" !== e && "qrCode" !== e) && (i = !1,
                         e = "mainland"),
                         this.$(".receiver-areas a").removeClass("checked").attr("aria-checked", !1),
                         this.$(".receiver-areas a[data-tab='" + e + "']").addClass("checked").attr("aria-checked", !0),
                     this.mainlandSubView && (this.mainlandSubView.remove(),
                         this.mainlandSubView = null),
                     this.heavyCargoSubView && (this.heavyCargoSubView.remove(),
                         this.heavyCargoSubView = null),
                     this.qrCodeSubView && (this.qrCodeSubView.remove(),
                         this.qrCodeSubView = null),
                         this.$(".order-service-content-wrapper").html(this.viewContentWrapper),
                         "mainland" === e ? (this.mainlandSubView = new n({
                             el: $(".order-service-content"),
                             priceCollections: this.priceCollections,
                             waybillNo: null
                         }),
                         i && sfgather.trackClicks("点击寄快递", "111001")) : "heavyCargo" === e ? (this.heavyCargoSubView = new a({
                             el: $(".order-service-content"),
                             priceCollections: this.priceCollections
                         }),
                         t && this.heavyCargoSubView.handleMonthAccount(t),
                             sfgather.trackClicks("点击寄大件", "111002")) : "qrCode" === e && (this.qrCodeOrderSubView = new r({
                             el: $(".order-service-content"),
                             priceCollections: this.priceCollections,
                             viewContentWrapper: this.viewContentWrapper
                         }))
                 },
                 tabToggle: function(e) {
                     e.preventDefault(),
                         Backbone.history.navigate($(e.target).data("tab"), {
                             trigger: !0,
                             replace: !1
                         })
                 },
                 tabToggleByEnter: function(e) {
                     13 == e.which && $(e.target).siblings("a").attr("aria-checked", !1).end().attr("aria-checked", !0).trigger("click")
                 }
             })
         }),
         define("routers/orderDetailRouter", ["backbone", "views/order/masterController"], function(e, t) {
             return e.Router.extend({
                 initialize: function() {
                     this.orderMasterController = new t
                 },
                 routes: {
                     ":targetTab": "initOrderWrapper",
                     ":targetTab/": "initOrderWrapper",
                     ":targetTab/monthAccount": "initOrderWrapper",
                     ":targetTab/monthAccount/": "initOrderWrapper",
                     ":targetTab/monthAccount/:monthAccount": "initOrderWrapper",
                     "*path": "initOrderWrapper"
                 },
                 initOrderWrapper: function(e, t) {
                     this.orderMasterController.initTab(e, t)
                 }
             })
         }),
         define("models/acsOrder", ["backbone"], function(e) {
             return e.Model.extend({
                 defaults: {
                     acsBillNo: null
                 }
             })
         }),
         define("views/order/acsOrder/billInput", ["backbone", "templates", "models/acsOrder"], function(n, e, t) {
             return n.View.extend({
                 events: {
                     "click .submit-acs": "checkAcsBillNo",
                     "input .billInput": "inputChanged",
                     "click .toggleChecked": "toggleChecked"
                 },
                 initialize: function() {
                     this.$el.html(e.acsBillInput())
                 },
                 isAcsBillNo: function(e) {
                     var t = this
                         , i = !1;
                     return sfAjax.validAcsBillNo({
                         data: {
                             waybillNo: e
                         },
                         success: function(e) {
                             e && 0 === e.code ? i = !0 : (611 === e.code ? t.$(".error[data-error=billno-invalid]").show() : t.$(".error[data-error=network]").show(),
                                 i = !1)
                         },
                         error: function() {
                             t.$(".error[data-error=network]").show(),
                                 t.isValid = !1
                         }
                     }),
                         i
                 },
                 checkAcsBillNo: function() {
                     var t = this.$("#acsBillNo").val();
                     if (this.hideValidationBnoTip(),
                         this.$(".billInput").parsley().validate() && this.isAcsBillNo(t)) {
                         var i = this;
                         sfAjax.submitAcsBillNo({
                             data: {
                                 waybillNo: t
                             },
                             success: function(e) {
                                 e ? 0 === e.code ? (i.model.set("acsBillNo", t),
                                     n.history.navigate("billInfoFill", {
                                         trigger: !0,
                                         replace: !1
                                     })) : 610 === e.code ? i.$(".error[data-error=billno-used]").show() : i.$(".error[data-error=network]").show() : i.$(".error[data-error=network]").show()
                             },
                             error: function() {
                                 i.$(".error[data-error=network]").show()
                             }
                         })
                     }
                 },
                 hideValidationBnoTip: function() {
                     this.$(".error[data-error=billno-invalid]").hide(),
                         this.$(".error[data-error=billno-used]").hide(),
                         this.$(".error[data-error=network]").hide()
                 },
                 inputChanged: function() {
                     this.$(".submit-acs").toggleClass("disabled", !(this.$(".billInput").parsley().validate() && this.$(".toggleChecked").hasClass("checked")))
                 },
                 toggleChecked: function(e) {
                     this.$(e.currentTarget).toggleClass("checked"),
                         this.inputChanged()
                 }
             })
         }),
         define("views/detailedLocationPicker/pricePicker", ["views/detailedLocationPicker/picker"], function(e) {
             return e.extend({
                 availableRegions: function() {
                     if ("international" === this.getSelectedArea()) {
                         var e = this.regions.fetchingRegionLevel;
                         return e && 0 < e ? this.regions.where({
                             level: e + 1
                         }) : this.regions.models
                     }
                     return this.regions.filter(function(e) {
                         return e.get("available") || e.get("availableAsOrigin") && e.get("availableAsDestination")
                     })
                 },
                 unavailableRegions: function() {
                     return this.regions.filter(function(e) {
                         return !e.get("availableAsOrigin") && !e.get("availableAsDestination") && e.get("opening")
                     })
                 }
             })
         }),
         define("views/order/acsOrder/billConfirm", ["templates", "sflayer"], function(e, i) {
             return Backbone.View.extend({
                 events: {
                     "click .go-back": "orderRefill",
                     "click .pay-type a": "selectPayType",
                     "click .submit-order": "submitOrder"
                 },
                 initView: function() {
                     this.$el.html(e.acsBillConfirm({
                         sender: this.model.get("orderData").appointmentList[0].originateInfo,
                         receiver: this.model.get("orderData").appointmentList[0].destinationInfo,
                         isReceiverHK: this.model.get("isReceiverHK"),
                         isReceiverHKorMACAO: this.model.get("isReceiverHKorMACAO"),
                         receiverCountry: this.model.get("isReceiverGlobal") ? this.model.get("orderData").appointmentList[0].destinationInfo.addrInfo.country : "",
                         cargoList: this.model.get("orderData").appointmentList[0].cargoList[0],
                         freightFee: this.model.get("orderData").appointmentList[0].freightFee.amt,
                         acsBillNo: this.model.get("acsBillNo")
                     })).show(),
                         window.scrollTo(0, 0),
                         this.payType = 1
                 },
                 orderRefill: function() {
                     this.$el.trigger("orderRefill")
                 },
                 selectPayType: function(e) {
                     this.$(".pay-type a").removeClass("aicon-checked").addClass("aicon-check-Unseleted-x"),
                         this.$(e.currentTarget).addClass("aicon-checked").removeClass("aicon-check-Unseleted-x"),
                         this.payType = this.$(e.currentTarget).data("type")
                 },
                 preprocessingData: function() {
                     var e = this.model.get("orderData");
                     this.model.get("isReceiverHK") || (e.appointmentList[0].cargoList[0] = _.omit(e.appointmentList[0].cargoList[0], "id", "currency", "currencyCn", "declareType"),
                         e.appointmentList[0].customList[0].paymethod = this.payType),
                     this.model.get("isReceiverHKorMACAO") && (e.appointmentList[0].freightFee.paymethod = this.payType),
                         this.model.set("orderData", e)
                 },
                 submitOrder: function() {
                     this.preprocessingData();
                     var t = this;
                     sfAjax.subACSOrder({
                         data: this.model.get("orderData"),
                         success: function(e) {
                             e && 0 == e.code ? (1 == t.payType ? e.result.payUrl ? (window.localStorage.setItem("acsPayUrl", e.result.payUrl),
                                 window.location.href = e.result.payUrl) : i.msg(_l("下单失败")) : 2 == t.payType && Backbone.history.navigate("billState?backType=1", {
                                 trigger: !0,
                                 replace: !1
                             }),
                                 t.model.set("acsBillNo", null)) : i.msg(_l("下单失败"))
                         },
                         error: function() {
                             i.msg(_l("下单失败"))
                         }
                     })
                 }
             })
         }),
         define("views/order/acsOrder/billInfoFill", ["templates", "views/detailedLocationPicker/pricePicker", "views/order/innerViews/addDeclareGoodsView", "views/order/acsOrder/billConfirm", "sflayer", "helper"], function(i, e, a, t, r, n) {
             return Backbone.View.extend({
                 events: {
                     "click .confirm-order": "confirmOrder",
                     "click .receiver-item-menu a": "selectReceiverItem",
                     "regionModelUpdate .sender-location .detail-location-input": "senderRegionModelUpdate",
                     "regionModelUpdate .receiver-location .detail-location-input": "receiverRegionModelUpdate",
                     "change #recommendCountrys": "changeCountry",
                     "blur .orther-contry input": "validCountry",
                     "orderRefill .confirmWrapper": "refillOrder"
                 },
                 initialize: function() {
                     this.model.get("acsBillNo") || Backbone.history.navigate("billInput", {
                         trigger: !0,
                         replace: !1
                     }),
                         this.$el.html(i.acsBillInfoFill({
                             acsBillNo: this.model.get("acsBillNo")
                         })),
                         this.originlocaltion = this.$(".sender-location .detail-location-input"),
                         this.destlocaltion = this.$(".receiver-location .detail-location-input"),
                         this.sender_location = new e({
                             el: this.originlocaltion
                         }),
                         this.receiver_location = new e({
                             el: this.destlocaltion
                         }),
                         this.isRightOtherCountry = !0,
                         this.model.set("hkRecommendCountries", null),
                         this.model.set("hkInternationalPrices", null)
                 },
                 LoadHKRecommendCountry: function() {
                     if (!this.model.has("hkRecommendCountries")) {
                         var t = this;
                         sfAjax.getJson({
                             url: n.getResourceURL("data/hk-recommend-country.json"),
                             success: function(e) {
                                 e && 0 < e.length ? (t.$("#recommendCountrys").append(i.dropdownRecommendCountrys({
                                     dropdownItems: e
                                 })),
                                     t.model.set("hkRecommendCountries", e)) : r.msg("json文件数据不正确！")
                             },
                             error: function() {
                                 r.msg("json文件不存在！")
                             }
                         })
                     }
                 },
                 changeCountry: function(e) {
                     var t = this.$(e.currentTarget);
                     "ORTHERS" == t.val() ? (this.$(".orther-contry input").val("").trigger("blur"),
                         this.$(".orther-contry").show()) : (this.isRightOtherCountry = !0,
                         this.$(".orther-contry").hide(),
                         this.$(".countryOfOrigin .error").hide(),
                         this.declareCountryName = t.find("option:selected").text())
                 },
                 validCountry: function(e) {
                     this.isRightOtherCountry = !1,
                         this.$(".countryOfOrigin .error").hide();
                     var t = $.trim(this.$(e.currentTarget).val());
                     if ("" == t)
                         this.$(".country-empty").show();
                     else {
                         var i = this;
                         sfAjax.validACSCountry({
                             data: {
                                 country: t
                             },
                             success: function(e) {
                                 0 == e.code && 1 == e.result ? (i.isRightOtherCountry = !0,
                                     i.declareCountryName = t) : i.$(".country-err").show()
                             },
                             error: function() {
                                 i.$(".network-err").show()
                             }
                         })
                     }
                 },
                 selectReceiverItem: function(e) {
                     this.$(".receiver-item-menu a").removeClass("aicon-checked").addClass("aicon-check-Unseleted-x"),
                         this.$(e.currentTarget).addClass("aicon-checked").removeClass("aicon-check-Unseleted-x"),
                         this.$(e.currentTarget).hasClass("others-item") ? this.$(".other-item-input").css("display", "inline-block") : this.$(".other-item-input").hide()
                 },
                 regionModelUpdate: function(e, t) {
                     var i = this.$(e.currentTarget)
                         , n = "GLOBAL" === t.regionTabs[0].parentRegion.code
                         , a = "HKMCTW" === t.regionTabs[0].parentRegion.code;
                     i.data("max-level", n ? 2 : a ? 5 : 4)
                 },
                 senderRegionModelUpdate: function(e, t) {
                     this.regionModelUpdate(e, t),
                         this.inputChanged()
                 },
                 receiverRegionModelUpdate: function(e, t) {
                     this.regionModelUpdate(e, t);
                     var i = this.receiver_location.getLocationData()
                         , n = i.locationCode;
                     3 == i.regionType || "886" == n ? (this.$("#receiver-postcode").val(""),
                         this.$(".receiver-postcode").show()) : this.$(".receiver-postcode").hide(),
                         "852" == n ? (this.model.set("isReceiverHK", !0),
                             this.$(".receiver-item").show(),
                             this.$(".declare").hide()) : (this.model.set("isReceiverHK", !1),
                         this.addGoodView || (this.addGoodView = new a({
                             el: this.$(".declare-content"),
                             fromAcsOrder: !0
                         })),
                             this.addGoodView.initDeclareGoodsContent(),
                             this.$(".receiver-item").hide(),
                             this.$(".declare").show(),
                             this.LoadHKRecommendCountry(),
                             this.$("#recommendCountrys").trigger("change")),
                         "852" == n || "853" == n ? this.model.set("isReceiverHKorMACAO", !0) : this.model.set("isReceiverHKorMACAO", !1),
                         3 == i.regionType ? this.model.set("isReceiverGlobal", !0) : this.model.set("isReceiverGlobal", !1),
                         this.freightFee = "",
                         this.getInternationalFreightFee(i)
                 },
                 getCargoList: function() {
                     if (this.model.get("isReceiverHK"))
                         return [{
                             name: this.receiverItem,
                             uom: "",
                             desc: "",
                             price: "0"
                         }];
                     var e = this.addGoodView.getData();
                     return e.origin = this.declareCountryName,
                         [e]
                 },
                 getCustomList: function() {
                     if (this.model.get("isReceiverHK"))
                         return [];
                     var e = this.addGoodView.getData();
                     return [{
                         currency: e.currency,
                         weight: "1",
                         declareType: "0",
                         paymethod: "1",
                         settlementCode: "",
                         declareValue: e.price
                     }]
                 },
                 getInternationalFreightFee: function(t) {
                     if (this.model.has("hkInternationalPrices"))
                         this.showFreightFee(t);
                     else {
                         var i = this;
                         sfAjax.getJson({
                             url: n.getResourceURL("data/hk-international-price.json"),
                             success: function(e) {
                                 e && 0 < e.length ? (i.model.set("hkInternationalPrices", e),
                                     i.showFreightFee(t)) : r.msg("json文件数据不正确！")
                             },
                             error: function() {
                                 r.msg("json文件不存在！")
                             }
                         })
                     }
                 },
                 showFreightFee: function(e) {
                     var t;
                     t = 3 == e.regionType ? e.countryRateCode : "852" == e.locationCode ? "HK" : "853" == e.locationCode ? "MO" : "886" == e.locationCode ? "TW" : "CN";
                     var i = _.findWhere(this.model.get("hkInternationalPrices"), {
                         code: t
                     });
                     if (i) {
                         var n = i.price;
                         this.$(".freightFee").text(n + "HKD"),
                             this.$(".freightFeeWrapper").show(),
                             this.freightFee = n
                     } else
                         this.$(".freightFeeWrapper").hide()
                 },
                 formValidate: function() {
                     var e = this.$(".sender-form").parsley().validate()
                         , t = this.$(".receiver-form").parsley().validate()
                         , i = !0
                         , n = !0;
                     return this.model.get("isReceiverHK") ? this.$(".others-item").hasClass("aicon-checked") ? "" == $.trim(this.$(".other-item-input").val()) ? (r.msg(_l("托寄物不能为空")),
                         this.$(".other-item-input").focus(),
                         i = !1) : this.receiverItem = $.trim(this.$(".other-item-input").val()) : this.receiverItem = this.$(".receiver-item-menu .aicon-checked").html() : n = this.addGoodView.formCheck(),
                         "" == this.freightFee ? (r.msg(_l("暂无所选择国家的运费信息")),
                             !1) : e && t && i && n && this.isRightOtherCountry
                 },
                 getSenderAddressInfo: function() {
                     return _.extend({
                         address: this.$("#sender-address-detail").val(),
                         country: "中国"
                     }, this.sender_location.getLocationData())
                 },
                 getReceiverAddressInfo: function() {
                     return _.extend({
                         address: this.$("#receiver-address-detail").val(),
                         country: "中国"
                     }, this.receiver_location.getLocationData())
                 },
                 confirmOrder: function() {
                     if (this.formValidate()) {
                         var e = {
                             sysCode: "PC.OWF",
                             waybillNo: this.model.get("acsBillNo"),
                             memberId: this.$("#sender-mobile").val(),
                             appointmentTime: "",
                             appointmentInfo: {
                                 contact: this.$("#sender-name").val(),
                                 phone: "",
                                 mobile: this.$("#sender-mobile").val(),
                                 email: this.$("#sender-mail").val(),
                                 addressInfo: this.getSenderAddressInfo()
                             },
                             appointmentList: [{
                                 originateInfo: {
                                     contact: this.$("#sender-name").val(),
                                     phone: "",
                                     mobile: this.$("#sender-mobile").val(),
                                     email: this.$("#sender-mail").val(),
                                     addrInfo: this.getSenderAddressInfo()
                                 },
                                 destinationInfo: {
                                     contact: this.$("#receiver-name").val(),
                                     mobile: this.$("#receiver-mobile").val(),
                                     email: this.$("#receiver-mail").val(),
                                     addrInfo: this.getReceiverAddressInfo()
                                 },
                                 freightFee: {
                                     amt: this.freightFee,
                                     paymethod: "1"
                                 },
                                 cargoList: this.getCargoList(),
                                 customList: this.getCustomList(),
                                 metaWeight: "1",
                                 metaPrice: this.freightFee
                             }]
                         };
                         this.model.set("orderData", e),
                             this.$(".billInfoFill").hide(),
                         this.billConfirmView || (this.billConfirmView = new t({
                             model: this.model,
                             el: this.$(".confirmWrapper")
                         })),
                             this.billConfirmView.initView()
                     }
                 },
                 refillOrder: function() {
                     this.$(".billInfoFill").show(),
                         this.$(".confirmWrapper").hide()
                 },
                 inputChanged: function() {
                     var e = this.originlocaltion.find("input").data("code")
                         , t = this.originlocaltion.find("input").data("country-code");
                     if (this.destlocaltion.find("input").attr("disabled", !e),
                             this.destlocaltion.find("input").data("origin-country-code", t),
                             e) {
                         var i = _.sprintf(n.urls.subregionDest, {
                             parentCode: "%s",
                             originCode: e,
                             level: "%s"
                         });
                         this.destlocaltion.data("custom-url", i)
                     }
                 }
             })
         }),
         define("views/order/acsOrder/billState", ["templates", "helper"], function(e, t) {
             return Backbone.View.extend({
                 initialize: function() {
                     this.type = this.QueryString("backType"),
                     (!this.type || 1 != this.type && 2 != this.type && 3 != this.type) && Backbone.history.navigate("billInput", {
                         trigger: !0,
                         replace: !1
                     }),
                         this.$el.html(e.acsBillState({
                             type: this.type,
                             imgUrl: this.getImgUrl()
                         }))
                 },
                 events: {
                     "click .pay-again": "payAgain"
                 },
                 QueryString: function(e) {
                     var t = window.location.href
                         , i = new RegExp(e + "=([^&?]*)","ig");
                     return t.match(i) ? t.match(i)[0].substr(e.length + 1) : null
                 },
                 getImgUrl: function() {
                     return "1" == this.type ? t.getResourceURL("images/order/box-happy.png") : t.getResourceURL("images/order/box-sad.png")
                 },
                 payAgain: function() {
                     window.location.href = window.localStorage.getItem("acsPayUrl")
                 }
             })
         }),
         define("views/order/acsOrder/masterController", ["models/acsOrder", "views/order/acsOrder/billInput", "views/order/acsOrder/billInfoFill", "views/order/acsOrder/billState"], function(e, t, i, n) {
             return Backbone.View.extend({
                 el: $(".acs-order-page").parent(),
                 initialize: function() {
                     this.hmtOrder = new e,
                         this.initInnerHtml = this.$el.html()
                 },
                 initOrderStatus: function(e) {
                     this.billInputView = null,
                         this.billInfoFillView = null,
                         this.billStateView = null,
                         this.$el.empty().html(this.initInnerHtml),
                     (!e || "billInput" != e && "billInfoFill" != e && -1 == e.indexOf("billState")) && (e = "billInput"),
                         "billInput" == e ? this.billInputView = new t({
                             model: this.hmtOrder,
                             el: this.$(".acs-order-page")
                         }) : "billInfoFill" == e ? this.billInfoFillView = new i({
                             model: this.hmtOrder,
                             el: this.$(".acs-order-page")
                         }) : -1 < e.indexOf("billState") && (this.billStateView = new n({
                             model: this.hmtOrder,
                             el: this.$(".acs-order-page")
                         }))
                 }
             })
         }),
         define("routers/acsOrderDetailRouter", ["views/order/acsOrder/masterController"], function(e) {
             return Backbone.Router.extend({
                 initialize: function() {
                     this.acsOrderMasterController = new e
                 },
                 routes: {
                     ":targetTab": "initOrderStatus",
                     ":targetTab/": "initOrderStatus",
                     "*path": "initOrderStatus"
                 },
                 initOrderStatus: function(e) {
                     this.acsOrderMasterController.initOrderStatus(e)
                 }
             })
         }),
         define("models/waybill", ["backbone", "helper"], function(t, i) {
             return t.Model.extend({
                 electronicStub: function(e) {
                     return t.ajax({
                         type: "get",
                         url: i.getRESTfulDomain(_p("memberBills/%(id)s/getBillEleStub?lang=%(lang)s&region=%(region)s", {
                             id: e,
                             lang: "sc",
                             region: i.getSiteLocation()
                         }))
                     })
                 },
                 requestsignFigureHead: function(e) {
                     return t.ajax({
                         type: "GET",
                         url: e
                     })
                 },
                 signFigure: function(e) {
                     var t;
                     return t = "th" == i.getSiteLanguage() || "ru" == i.getSiteLanguage() || "vi" == i.getSiteLanguage() || "ge" == i.getSiteLanguage() || "fr" == i.getSiteLanguage() ? "en" : i.getSiteLanguage(),
                         i.getRESTfulDomain(_p("memberBills/%(id)s/image?lang=%(lang)s&region=%(region)s", {
                             id: e,
                             lang: t,
                             region: i.getSiteLocation()
                         }))
                 },
                 hasRegistMember: function(e) {
                     return t.ajax({
                         type: "POST",
                         url: i.getRESTfulDomain(_p("member/%(phone)s/exists?lang=%(lang)s&region=%(region)s", {
                             phone: e,
                             lang: i.getSiteLanguage(),
                             region: i.getSiteLocation()
                         }))
                     })
                 },
                 registMember: function(e) {
                     return t.ajax({
                         type: "POST",
                         url: i.getRESTfulDomain(_p("member/regist?" + e + "&lang=%(lang)s&region=%(region)s", {
                             lang: i.getSiteLanguage(),
                             region: i.getSiteLocation()
                         }))
                     })
                 }
             }, {
                 fetchUserIpByNullUrl: function(e) {
                     return t.ajax({
                         type: "HEAD",
                         url: "/log?billnumber=" + e.join(",")
                     })
                 },
                 parse: function(e) {
                     if (!e)
                         return null;
                     var t = !1;
                     return e.routes = _.filter(e.routes, function(e) {
                         return "sc" === i.getSiteLanguage() ? (0 <= e.remark.indexOf("运单资料&签收图") && (t = !0),
                         e.remark.indexOf("运单资料&签收图") < 0) : "tc" === i.getSiteLanguage() ? (0 <= e.remark.indexOf("運單資料&簽收圖") && (t = !0),
                         e.remark.indexOf("運單資料&簽收圖") < 0) : (0 <= e.remark.indexOf("運單資料&簽收圖") && (t = !0),
                         e.remark.indexOf("AWB Info & POD") < 0)
                     }),
                     t && (e.signed = t),
                         0 == e.routes.length ? null : (e.routes = _.sortBy(e.routes, function(e) {
                             return e.scanDateTime
                         }).reverse(),
                             e.routes = this.appendPreviousScanTime(e.routes),
                             e)
                 },
                 appendPreviousScanTime: function(e) {
                     var t;
                     return _.each(e, function(e) {
                         t && (e.lastRouteScanDateTime = t.scanDateTime),
                             t = e
                     }),
                         e
                 },
                 validateBillNumber: function(e) {
                     return /^\d{12}$/.test(e.trim())
                 },
                 validateBillNumbers: function(e) {
                     var t = !0
                         , i = this;
                     return _.each(e, function(e) {
                         e.length && !i.validateBillNumber(e) && (t = !1)
                     }),
                         t
                 }
             })
         }),
         define("collections/waybills", ["backbone", "models/waybill", "underscore", "helper"], function(e, t, i, a) {
             return e.Collection.extend({
                 model: t,
                 initialize: function() {
                     this.billNumbers = [],
                         this.ValidationCodeQueryType = null
                 },
                 parse: function(e) {
                     return e = i.map(e, function(e) {
                         return t.parse(e)
                     }),
                         i.filter(e, function(e) {
                             return null !== e
                         })
                 },
                 findWaybillById: function(e) {
                     return this.findWhere({
                         id: e
                     })
                 },
                 judgeGrayscaleUser: function() {
                     return !0
                 },
                 refreshValidationCode: function(e, t, i) {
                     if (e.find("input").val(""),
                         i || t != this.ValidationCodeQueryType) {
                         var n = a.getRESTfulDomain("captcha/bill?force=true&time=" + (new Date).getTime());
                         e.find("img").attr("src", n),
                             this.ValidationCodeQueryType = t
                     }
                 }
             })
         }),
         define("views/waybill/detail/routes", ["backbone", "templates", "helper"], function(e, n, a) {
             return e.View.extend({
                 events: {
                     showTabDetail: "render",
                     'click  div[data-toggle="status-toggle"] .status-update-tab': "showRoutesByDate",
                     'click  div[data-toggle="status-toggle"] .arrow': "showRoutesByDate"
                 },
                 initialize: function() {
                     this.tab = $(n.waybillDetailRouteTab()),
                         this.$el = $('<li data-detail="waybill-status" class="status-updates"></li>')
                 },
                 render: function() {
                     var e = this.model.toJSON()
                         , t = _.groupBy(e.routes, function(e) {
                         return moment(e.scanDateTime).format("YYYY-MM-DD")
                     })
                         , i = n.waybillDetailRoute({
                         results: _.pairs(t),
                         dateDescriptionForRoute: this.dateDescriptionForRoute,
                         toLocalDate: this.toLocalDate,
                         toLocalTime: this.toLocalTime,
                         limitCodes: e.limitTypeCode,
                         T13_virtualAddressCodeList: a.getT13_virtualAddressCodeList(),
                         T14_virtualAddressCodeList: a.getT14_virtualAddressCodeList()
                     });
                     this.$el.html(i)
                 },
                 dateDescriptionForRoute: function(e) {
                     var t = "YYYY-MM-DD HH:mm:ss";
                     e.lastRouteScanDateTime && (moment(e.scanDateTime).isSame(e.lastRouteScanDateTime, "day") && (t = "HH:mm:ss"));
                     return moment(e.scanDateTime).format(t)
                 },
                 toLocalDate: function(e) {
                     return moment(e).format("YYYY-MM-DD dddd")
                 },
                 toLocalTime: function(e) {
                     return moment(e).format("HH:mm:ss")
                 },
                 showRoutesByDate: function(e) {
                     e.stopPropagation(),
                         $(e.target).parents(".status-update-box").toggleClass("open")
                 }
             })
         }),
         define("views/waybill/childItem", ["templates", "moment", "helper", "views/waybill/detail/routes", "collections/waybills", "event", "jquery-placeholder"], function(t, e, i, n, a, r) {
             return Backbone.View.extend({
                 initialize: function() {
                     this.childRouteNO = "",
                         r.trigger(r.RegisterLoginCallback, function() {
                             $("#queryBill").trigger("click")
                         }),
                     "0" == this.model.get("billType") && $(".quickLogout .logout").trigger("click")
                 },
                 detailViews: function() {
                     var e = [];
                     return e.push(new n({
                         model: this.model
                     })),
                         e
                 },
                 render: function() {
                     var e = this.detailViews();
                     this.$el.html(t.waybillResult({
                         result: this.model.toJSON(),
                         detailViewsLength: e.length,
                         expressState: this.getExpressState(this.model),
                         certifiedShippingImgUrl: null,
                         T13_virtualAddressCodeList: i.getT13_virtualAddressCodeList(),
                         T14_virtualAddressCodeList: i.getT14_virtualAddressCodeList(),
                         isCNlocation: "cn" == i.getSiteLocation(),
                         isRootMenu: !1
                     })),
                         this.$(".delivery-detail .tab-details").append(e[0].$el),
                         this.$("input").placeholder(),
                         this.showRoutes()
                 },
                 showRoutes: function() {
                     this.$(".tab-details>li[data-detail=waybill-status]").trigger("showTabDetail").show(),
                         this.$(".tab-details").slideDown(300)
                 },
                 getExpressState: function(e) {
                     return _.findWhere([{
                         state: "2",
                         className: "sfi-cancelled",
                         txt: "已作废"
                     }, {
                         state: "3",
                         className: "sfi-turnto",
                         txt: "已转寄"
                     }, {
                         state: "4",
                         className: "sfi-sendBack",
                         txt: "已退回"
                     }, {
                         state: "5",
                         className: "sfi-fastener",
                         txt: "已扣件"
                     }, {
                         state: "6",
                         className: "sfi-lost",
                         txt: "已遗失"
                     }], {
                         state: e.get("expressState")
                     })
                 }
             })
         }),
         define("tencentCaptcha", ["helper"], function(i) {
             return {
                 initCap: function() {
                     return i.getRESTfulDomain("captcha/getJsUrl")
                 },
                 show: function(e) {
                     var t = {
                         callback: e,
                         showHeader: !0,
                         lang: "sc" == i.getSiteLanguage() ? 2052 : "tc" == i.getSiteLanguage() ? 1028 : 1033,
                         pos: "fixed",
                         themeColor: "000000",
                         type: "popup",
                         end: function() {
                             $("#modal_captcha").hide()
                         }
                     };
                     $("#modal_captcha").show(),
                         capInit(document.getElementById("TCaptcha"), t)
                 },
                 refresh: function(e) {
                     capDestroy(),
                         this.show(e)
                 },
                 captcha: function(t, i) {
                     var n = this;
                     "function" != typeof capDestroy ? Backbone.ajax({
                         type: "GET",
                         url: this.initCap(),
                         success: function(e) {
                             sfAjax.getScript({
                                 url: e,
                                 success: function() {
                                     n.capScriptAjaxsuccess(t)
                                 },
                                 error: i,
                                 complete: function(e, t) {}
                             })
                         },
                         error: i
                     }) : n.capScriptAjaxsuccess(t)
                 },
                 capScriptAjaxsuccess: function(t) {
                     this.refresh(function(e) {
                         0 == e.ret && t(e)
                     })
                 }
             }
         }),
         define("views/waybill/detail/childRoute", ["backbone", "helper", "views/detailedLocationPicker/picker", "templates", "views/waybill/childItem", "collections/waybills", "tencentCaptcha", "sflayer", "parsleyjs"], function(e, n, t, i, a, r, s, o) {
             return e.View.extend({
                 collection: new r,
                 initialize: function() {
                     this.isGrayscaleUser = _webConfig.isGrayscaleUser,
                         this.tab = $(i.waybillChildRouteTab()),
                         this.$el = $('<li data-detail="waybill-childRoute" class="childRoute-update"></li>'),
                         this.firstRenderQuery = 0,
                         this.childBillNumbers = this.model.get("childSet")
                 },
                 events: {
                     "click .primary-button": "fetchChildRoutes",
                     "keyup .verification-code input": "inputChanged",
                     "focus .verification-code input": "refreshValidationCode",
                     "click .verification-code img": "refreshValidationCode",
                     showTabDetail: "renderChildRoutes"
                 },
                 renderChildRoutes: function() {
                     var t = this;
                     if (0 < t.$(".deliveries").length)
                         return !1;
                     this.isGrayscaleUser ? "function" != typeof capDestroy ? e.ajax({
                         type: "GET",
                         url: s.initCap(),
                         success: function(e) {
                             sfAjax.getScript({
                                 url: e,
                                 success: function() {
                                     s.refresh(function(e) {
                                         0 == e.ret && t.fetchChildRoutesWidthTicket(e.ticket)
                                     })
                                 },
                                 error: function() {
                                     o.msg(_l("获取失败"))
                                 },
                                 complete: function(e, t) {
                                     "timeout" == t && o.msg("get tencentCaptcha js time out!")
                                 }
                             })
                         },
                         error: function() {
                             o.msg(_l("获取失败"))
                         }
                     }) : s.refresh(function(e) {
                         0 == e.ret && t.fetchChildRoutesWidthTicket(e.ticket)
                     }) : t.needValidationCode()
                 },
                 fetchChildRoutesWidthTicket: function(e) {
                     this.$(".error").hide(),
                         this.billNumbers = this.childBillNumbers,
                         this.collection.url = n.getRESTfulDomain("bills/" + this.billNumbers.join(",") + "/routes?app=bill") + "&ticket=" + e;
                     var i = this;
                     i.collection.fetch({
                         reset: !0,
                         success: function() {
                             i.render()
                         },
                         error: function(e, t) {
                             404 === t.status ? (i.collection.models = [],
                                 i.render()) : 422 == t.status ? i.showTicketLimitError() : i.showTicketNetworkError()
                         }
                     })
                 },
                 showTicketLimitError: function() {
                     this.$(".deliveries").append('<div class="error" >_l("查单数量超过上限")</div>')
                 },
                 showTicketNetworkError: function() {
                     this.$(".deliveries").append('<div class="error" >_l("服务器暂不可用，请稍后再试")</div>')
                 },
                 showLimitError: function() {
                     this.$(".error[data-error=to-limit]").show()
                 },
                 fetchChildRoutes: function() {
                     this.$(".error").hide(),
                         i.billNumbers = this.childBillNumbers;
                     var e = this.$(".verification-code input").val();
                     this.collection.url = n.getRESTfulDomain("bills/" + this.billNumbers.join(",") + "/routes?app=bill") + "&answer=" + e;
                     var t = this.$(".primary-button");
                     t.button("loading");
                     var i = this;
                     i.collection.fetch({
                         reset: !0,
                         success: function() {
                             i.render()
                         },
                         error: function(e, t) {
                             404 === t.status ? (i.collection.models = [],
                                 i.render()) : 403 == t.status ? i.showValidationCodeError() : 422 == t.status ? i.showLimitError() : i.showNetworkError()
                         },
                         complete: function(e) {
                             t.button("reset")
                         }
                     })
                 },
                 render: function() {
                     this.$el.slideDown(),
                         this.renderBasic();
                     var i = this;
                     _.each(i.billNumbers, function(e) {
                         var t = i.collection.findWaybillById(e);
                         t ? i.renderItem(t) : i.renderNotFoundItem(e)
                     })
                 },
                 renderBasic: function() {
                     this.$deliveries = $('<div class="deliveries"></div>'),
                         this.$el.html(this.$deliveries)
                 },
                 renderItem: function(e) {
                     var t = this.$deliveries
                         , i = $('<div class="delivery"></div>');
                     t.append(i),
                         new a({
                             el: i,
                             model: e
                         }).render()
                 },
                 renderNotFoundItem: function(e) {
                     this.$(".deliveries").append(i.waybillNotFound({
                         billNumber: e
                     }))
                 },
                 showValidationCodeError: function() {
                     this.$(".validation-code-error").show()
                 },
                 showNetworkError: function() {
                     this.$(".error[data-error=server-network]").show()
                 },
                 refreshValidationCode: function(e, t) {
                     var i = !1;
                     (t && "querySuccess" == t || e && "IMG" == e.target.nodeName) && (i = !0);
                     var n = this.$(".verification-code");
                     this.collection.refreshValidationCode(n, this.cid, i),
                         this.inputChanged()
                 },
                 inputChanged: function() {
                     var e = 5 === this.$(".verification-code input").val().length;
                     this.$(".primary-button").toggleClass("disabled", !e)
                 },
                 needValidationCode: function() {
                     this.$deliveries = $('<div class="deliveries"></div>'),
                         this.$deliveries.append(i.waybillChildQuery()),
                         this.$el.html(this.$deliveries),
                         this.refreshValidationCode()
                 }
             })
         }),
         jQuery.fn.rotate = function(e, t) {
             var i = this.get(0);
             if (i.angle = t ? e : ((null == i.angle ? 0 : i.angle) + e) % 360,
                 0 <= i.angle)
                 var n = Math.PI * i.angle / 180;
             else
                 n = Math.PI * (360 + i.angle) / 180;
             var a = Math.round(1e3 * Math.cos(n)) / 1e3
                 , r = Math.round(1e3 * Math.sin(n)) / 1e3;
             if (document.all && !window.opera) {
                 (s = document.createElement("img")).src = i.src,
                     s.height = i.height,
                     s.width = i.width,
                     s.style.filter = "progid:DXImageTransform.Microsoft.Matrix(M11=" + a + ",M12=" + -r + ",M21=" + r + ",M22=" + a + ",SizingMethod='auto expand')"
             } else {
                 var s = document.createElement("canvas");
                 i.oImage ? s.oImage = i.oImage : (s.oImage = new Image,
                     s.oImage.src = i.src),
                     s.style.width = s.width = Math.abs(a * s.oImage.width) + Math.abs(r * s.oImage.height),
                     s.style.height = s.height = Math.abs(a * s.oImage.height) + Math.abs(r * s.oImage.width);
                 var o = s.getContext("2d");
                 o.save(),
                     n <= Math.PI / 2 ? o.translate(r * s.oImage.height, 0) : n <= Math.PI ? o.translate(s.width, -a * s.oImage.height) : n <= 1.5 * Math.PI ? o.translate(-a * s.oImage.width, s.height) : o.translate(0, -r * s.oImage.width),
                     o.rotate(n),
                     o.drawImage(s.oImage, 0, 0, s.oImage.width, s.oImage.height),
                     o.restore()
             }
             s.id = i.id,
                 s.angle = i.angle,
                 i.parentNode.replaceChild(s, i)
         }
         ,
         jQuery.fn.rotateRight = function(e) {
             this.rotate(null == e ? 90 : e)
         }
         ,
         jQuery.fn.rotateLeft = function(e) {
             this.rotate(null == e ? -90 : -e)
         }
         ,
         define("JqueryRotate", function() {}),
         function(i) {
             function n(e) {
                 if (a[e])
                     return a[e].exports;
                 var t = a[e] = {
                     i: e,
                     l: !1,
                     exports: {}
                 };
                 return i[e].call(t.exports, t, t.exports, n),
                     t.l = !0,
                     t.exports
             }
             var a = {};
             n.m = i,
                 n.c = a,
                 n.i = function(e) {
                     return e
                 }
                 ,
                 n.d = function(e, t, i) {
                     n.o(e, t) || Object.defineProperty(e, t, {
                         configurable: !1,
                         enumerable: !0,
                         get: i
                     })
                 }
                 ,
                 n.n = function(e) {
                     var t = e && e.__esModule ? function() {
                             return e.default
                         }
                         : function() {
                             return e
                         }
                     ;
                     return n.d(t, "a", t),
                         t
                 }
                 ,
                 n.o = function(e, t) {
                     return Object.prototype.hasOwnProperty.call(e, t)
                 }
                 ,
                 n.p = "",
                 n(n.s = 19)
         }([function(e, t, i) {
             "use strict";
             Object.defineProperty(t, "__esModule", {
                 value: !0
             });
             t.default = function e(t, i) {
                 (function(e, t) {
                         if (!(e instanceof t))
                             throw new TypeError("Cannot call a class as a function")
                     }
                 )(this, e),
                     this.data = t,
                     this.text = i.text || t,
                     this.options = i
             }
         }
             , function(e, t, i) {
                 "use strict";
                 function n(e, t, i) {
                     return t in e ? Object.defineProperty(e, t, {
                         value: i,
                         enumerable: !0,
                         configurable: !0,
                         writable: !0
                     }) : e[t] = i,
                         e
                 }
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var a, r = t.SET_A = 0, s = t.SET_B = 1, o = t.SET_C = 2, l = (t.SHIFT = 98,
                     t.START_A = 103), d = t.START_B = 104, c = t.START_C = 105;
                 t.MODULO = 103,
                     t.STOP = 106,
                     t.FNC1 = 207,
                     t.SET_BY_CODE = (n(a = {}, l, r),
                         n(a, d, s),
                         n(a, c, o),
                         a),
                     t.SWAP = {
                         101: r,
                         100: s,
                         99: o
                     },
                     t.A_START_CHAR = String.fromCharCode(208),
                     t.B_START_CHAR = String.fromCharCode(209),
                     t.C_START_CHAR = String.fromCharCode(210),
                     t.A_CHARS = "[\0-_È-Ï]",
                     t.B_CHARS = "[ -È-Ï]",
                     t.C_CHARS = "(Ï*[0-9]{2}Ï*)",
                     t.BARS = [11011001100, 11001101100, 11001100110, 10010011e3, 10010001100, 10001001100, 10011001e3, 10011000100, 10001100100, 11001001e3, 11001000100, 11000100100, 10110011100, 10011011100, 10011001110, 10111001100, 10011101100, 10011100110, 11001110010, 11001011100, 11001001110, 11011100100, 11001110100, 11101101110, 11101001100, 11100101100, 11100100110, 11101100100, 11100110100, 11100110010, 11011011e3, 11011000110, 11000110110, 10100011e3, 10001011e3, 10001000110, 10110001e3, 10001101e3, 10001100010, 11010001e3, 11000101e3, 11000100010, 10110111e3, 10110001110, 10001101110, 10111011e3, 10111000110, 10001110110, 11101110110, 11010001110, 11000101110, 11011101e3, 11011100010, 11011101110, 11101011e3, 11101000110, 11100010110, 11101101e3, 11101100010, 11100011010, 11101111010, 11001000010, 11110001010, 1010011e4, 10100001100, 1001011e4, 10010000110, 10000101100, 10000100110, 1011001e4, 10110000100, 1001101e4, 10011000010, 10000110100, 10000110010, 11000010010, 1100101e4, 11110111010, 11000010100, 10001111010, 10100111100, 10010111100, 10010011110, 10111100100, 10011110100, 10011110010, 11110100100, 11110010100, 11110010010, 11011011110, 11011110110, 11110110110, 10101111e3, 10100011110, 10001011110, 10111101e3, 10111100010, 11110101e3, 11110100010, 10111011110, 10111101110, 11101011110, 11110101110, 11010000100, 1101001e4, 11010011100, 1100011101011]
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 }),
                     t.SIDE_BIN = "101",
                     t.MIDDLE_BIN = "01010",
                     t.BINARIES = {
                         L: ["0001101", "0011001", "0010011", "0111101", "0100011", "0110001", "0101111", "0111011", "0110111", "0001011"],
                         G: ["0100111", "0110011", "0011011", "0100001", "0011101", "0111001", "0000101", "0010001", "0001001", "0010111"],
                         R: ["1110010", "1100110", "1101100", "1000010", "1011100", "1001110", "1010000", "1000100", "1001000", "1110100"],
                         O: ["0001101", "0011001", "0010011", "0111101", "0100011", "0110001", "0101111", "0111011", "0110111", "0001011"],
                         E: ["0100111", "0110011", "0011011", "0100001", "0011101", "0111001", "0000101", "0010001", "0001001", "0010111"]
                     },
                     t.EAN2_STRUCTURE = ["LL", "LG", "GL", "GG"],
                     t.EAN5_STRUCTURE = ["GGLLL", "GLGLL", "GLLGL", "GLLLG", "LGGLL", "LLGGL", "LLLGG", "LGLGL", "LGLLG", "LLGLG"],
                     t.EAN13_STRUCTURE = ["LLLLLL", "LLGLGG", "LLGGLG", "LLGGGL", "LGLLGG", "LGGLLG", "LGGGLL", "LGLGLG", "LGLGGL", "LGGLGL"]
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var s = i(2);
                 t.default = function(i, n, a) {
                     var e = i.split("").map(function(e, t) {
                         return s.BINARIES[n[t]]
                     }).map(function(e, t) {
                         return e ? e[i[t]] : ""
                     });
                     if (a) {
                         var r = i.length - 1;
                         e = e.map(function(e, t) {
                             return t < r ? e + a : e
                         })
                     }
                     return e.join("")
                 }
             }
             , function(e, t, i) {
                 "use strict";
                 function a(e, t) {
                     for (var i = 0; i < t; i++)
                         e = "0" + e;
                     return e
                 }
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var n, r = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }(), s = i(0), o = (n = s) && n.__esModule ? n : {
                     default: n
                 }, l = function(e) {
                     function i(e, t) {
                         return function(e, t) {
                             if (!(e instanceof t))
                                 throw new TypeError("Cannot call a class as a function")
                         }(this, i),
                             function(e, t) {
                                 if (!e)
                                     throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                 return !t || "object" != typeof t && "function" != typeof t ? e : t
                             }(this, (i.__proto__ || Object.getPrototypeOf(i)).call(this, e, t))
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(i, o.default),
                         r(i, [{
                             key: "encode",
                             value: function() {
                                 for (var e = "110", t = 0; t < this.data.length; t++) {
                                     var i = parseInt(this.data[t]).toString(2);
                                     i = a(i, 4 - i.length);
                                     for (var n = 0; n < i.length; n++)
                                         e += "0" == i[n] ? "100" : "110"
                                 }
                                 return {
                                     data: e += "1001",
                                     text: this.text
                                 }
                             }
                         }, {
                             key: "valid",
                             value: function() {
                                 return -1 !== this.data.search(/^[0-9]+$/)
                             }
                         }]),
                         i
                 }();
                 t.default = l
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var n = Object.assign || function(e) {
                         for (var t = 1; t < arguments.length; t++) {
                             var i = arguments[t];
                             for (var n in i)
                                 Object.prototype.hasOwnProperty.call(i, n) && (e[n] = i[n])
                         }
                         return e
                     }
                 ;
                 t.default = function(e, t) {
                     return n({}, e, t)
                 }
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var n, a = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }(), r = i(0), s = (n = r) && n.__esModule ? n : {
                     default: n
                 }, l = i(1), o = function(e) {
                     function o(e, t) {
                         !function(e, t) {
                             if (!(e instanceof t))
                                 throw new TypeError("Cannot call a class as a function")
                         }(this, o);
                         var i = function(e, t) {
                             if (!e)
                                 throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                             return !t || "object" != typeof t && "function" != typeof t ? e : t
                         }(this, (o.__proto__ || Object.getPrototypeOf(o)).call(this, e.substring(1), t));
                         return i.bytes = e.split("").map(function(e) {
                             return e.charCodeAt(0)
                         }),
                             i
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(o, s.default),
                         a(o, [{
                             key: "valid",
                             value: function() {
                                 return /^[\x00-\x7F\xC8-\xD3]+$/.test(this.data)
                             }
                         }, {
                             key: "encode",
                             value: function() {
                                 var e = this.bytes
                                     , t = e.shift() - 105
                                     , i = l.SET_BY_CODE[t];
                                 if (void 0 === i)
                                     throw new RangeError("The encoding does not start with a start character.");
                                 !0 === this.shouldEncodeAsEan128() && e.unshift(l.FNC1);
                                 var n = o.next(e, 1, i);
                                 return {
                                     text: this.text === this.data ? this.text.replace(/[^\x20-\x7E]/g, "") : this.text,
                                     data: o.getBar(t) + n.result + o.getBar((n.checksum + t) % l.MODULO) + o.getBar(l.STOP)
                                 }
                             }
                         }, {
                             key: "shouldEncodeAsEan128",
                             value: function() {
                                 var e = this.options.ean128 || !1;
                                 return "string" == typeof e && (e = "true" === e.toLowerCase()),
                                     e
                             }
                         }], [{
                             key: "getBar",
                             value: function(e) {
                                 return l.BARS[e] ? l.BARS[e].toString() : ""
                             }
                         }, {
                             key: "correctIndex",
                             value: function(e, t) {
                                 if (t === l.SET_A) {
                                     var i = e.shift();
                                     return i < 32 ? i + 64 : i - 32
                                 }
                                 return t === l.SET_B ? e.shift() - 32 : 10 * (e.shift() - 48) + e.shift() - 48
                             }
                         }, {
                             key: "next",
                             value: function(e, t, i) {
                                 if (!e.length)
                                     return {
                                         result: "",
                                         checksum: 0
                                     };
                                 var n = void 0
                                     , a = void 0;
                                 if (200 <= e[0]) {
                                     a = e.shift() - 105;
                                     var r = l.SWAP[a];
                                     void 0 !== r ? n = o.next(e, t + 1, r) : (i !== l.SET_A && i !== l.SET_B || a !== l.SHIFT || (e[0] = i === l.SET_A ? 95 < e[0] ? e[0] - 96 : e[0] : e[0] < 32 ? e[0] + 96 : e[0]),
                                         n = o.next(e, t + 1, i))
                                 } else
                                     a = o.correctIndex(e, i),
                                         n = o.next(e, t + 1, i);
                                 var s = a * t;
                                 return {
                                     result: o.getBar(a) + n.result,
                                     checksum: s + n.checksum
                                 }
                             }
                         }]),
                         o
                 }();
                 t.default = o
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 }),
                     t.mod10 = function(e) {
                         for (var t = 0, i = 0; i < e.length; i++) {
                             var n = parseInt(e[i]);
                             (i + e.length) % 2 == 0 ? t += n : t += 2 * n % 10 + Math.floor(2 * n / 10)
                         }
                         return (10 - t % 10) % 10
                     }
                     ,
                     t.mod11 = function(e) {
                         for (var t = 0, i = [2, 3, 4, 5, 6, 7], n = 0; n < e.length; n++)
                             t += i[n % i.length] * parseInt(e[e.length - 1 - n]);
                         return (11 - t % 11) % 11
                     }
             }
             , function(e, t, i) {
                 "use strict";
                 function a(e, t) {
                     if (!(e instanceof t))
                         throw new TypeError("Cannot call a class as a function")
                 }
                 function r(e, t) {
                     if (!e)
                         throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                     return !t || "object" != typeof t && "function" != typeof t ? e : t
                 }
                 function s(e, t) {
                     if ("function" != typeof t && null !== t)
                         throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                     e.prototype = Object.create(t && t.prototype, {
                         constructor: {
                             value: e,
                             enumerable: !1,
                             writable: !0,
                             configurable: !0
                         }
                     }),
                     t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                 }
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var n = function(e) {
                     function n(e, t) {
                         a(this, n);
                         var i = r(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this));
                         return i.name = "InvalidInputException",
                             i.symbology = e,
                             i.input = t,
                             i.message = '"' + i.input + '" is not a valid input for ' + i.symbology,
                             i
                     }
                     return s(n, Error),
                         n
                 }()
                     , o = function(e) {
                     function t() {
                         a(this, t);
                         var e = r(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                         return e.name = "InvalidElementException",
                             e.message = "Not supported type to render on",
                             e
                     }
                     return s(t, Error),
                         t
                 }()
                     , l = function(e) {
                     function t() {
                         a(this, t);
                         var e = r(this, (t.__proto__ || Object.getPrototypeOf(t)).call(this));
                         return e.name = "NoElementException",
                             e.message = "No element to render on.",
                             e
                     }
                     return s(t, Error),
                         t
                 }();
                 t.InvalidInputException = n,
                     t.InvalidElementException = o,
                     t.NoElementException = l
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 }),
                     t.default = function(e) {
                         var t = ["width", "height", "textMargin", "fontSize", "margin", "marginTop", "marginBottom", "marginLeft", "marginRight"];
                         for (var i in t)
                             t.hasOwnProperty(i) && "string" == typeof e[i = t[i]] && (e[i] = parseInt(e[i], 10));
                         return "string" == typeof e.displayValue && (e.displayValue = "false" != e.displayValue),
                             e
                     }
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 t.default = {
                     width: 2,
                     height: 100,
                     format: "auto",
                     displayValue: !0,
                     fontOptions: "",
                     font: "monospace",
                     text: void 0,
                     textAlign: "center",
                     textPosition: "bottom",
                     textMargin: 2,
                     fontSize: 20,
                     background: "#ffffff",
                     lineColor: "#000000",
                     margin: 10,
                     marginTop: void 0,
                     marginBottom: void 0,
                     marginLeft: void 0,
                     marginRight: void 0,
                     valid: function() {}
                 }
             }
             , function(e, t, i) {
                 "use strict";
                 function n(e) {
                     return e && e.__esModule ? e : {
                         default: e
                     }
                 }
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var a = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }()
                     , r = i(2)
                     , s = n(i(3))
                     , o = n(i(0))
                     , l = function(e) {
                     function n(e, t) {
                         !function(e, t) {
                             if (!(e instanceof t))
                                 throw new TypeError("Cannot call a class as a function")
                         }(this, n);
                         var i = function(e, t) {
                             if (!e)
                                 throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                             return !t || "object" != typeof t && "function" != typeof t ? e : t
                         }(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, e, t));
                         return i.fontSize = !t.flat && t.fontSize > 10 * t.width ? 10 * t.width : t.fontSize,
                             i.guardHeight = t.height + i.fontSize / 2 + t.textMargin,
                             i
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(n, o.default),
                         a(n, [{
                             key: "encode",
                             value: function() {
                                 return this.options.flat ? this.encodeFlat() : this.encodeGuarded()
                             }
                         }, {
                             key: "leftText",
                             value: function(e, t) {
                                 return this.text.substr(e, t)
                             }
                         }, {
                             key: "leftEncode",
                             value: function(e, t) {
                                 return (0,
                                     s.default)(e, t)
                             }
                         }, {
                             key: "rightText",
                             value: function(e, t) {
                                 return this.text.substr(e, t)
                             }
                         }, {
                             key: "rightEncode",
                             value: function(e, t) {
                                 return (0,
                                     s.default)(e, t)
                             }
                         }, {
                             key: "encodeGuarded",
                             value: function() {
                                 var e = {
                                     fontSize: this.fontSize
                                 }
                                     , t = {
                                     height: this.guardHeight
                                 };
                                 return [{
                                     data: r.SIDE_BIN,
                                     options: t
                                 }, {
                                     data: this.leftEncode(),
                                     text: this.leftText(),
                                     options: e
                                 }, {
                                     data: r.MIDDLE_BIN,
                                     options: t
                                 }, {
                                     data: this.rightEncode(),
                                     text: this.rightText(),
                                     options: e
                                 }, {
                                     data: r.SIDE_BIN,
                                     options: t
                                 }]
                             }
                         }, {
                             key: "encodeFlat",
                             value: function() {
                                 return {
                                     data: [r.SIDE_BIN, this.leftEncode(), r.MIDDLE_BIN, this.rightEncode(), r.SIDE_BIN].join(""),
                                     text: this.text
                                 }
                             }
                         }]),
                         n
                 }();
                 t.default = l
             }
             , function(e, t, i) {
                 "use strict";
                 function n(e) {
                     return e && e.__esModule ? e : {
                         default: e
                     }
                 }
                 function a(e) {
                     var t, i = 0;
                     for (t = 1; t < 11; t += 2)
                         i += parseInt(e[t]);
                     for (t = 0; t < 11; t += 2)
                         i += 3 * parseInt(e[t]);
                     return (10 - i % 10) % 10
                 }
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var r = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }();
                 t.checksum = a;
                 var s = n(i(3))
                     , o = n(i(0))
                     , l = function(e) {
                     function n(e, t) {
                         (function(e, t) {
                                 if (!(e instanceof t))
                                     throw new TypeError("Cannot call a class as a function")
                             }
                         )(this, n),
                         -1 !== e.search(/^[0-9]{11}$/) && (e += a(e));
                         var i = function(e, t) {
                             if (!e)
                                 throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                             return !t || "object" != typeof t && "function" != typeof t ? e : t
                         }(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, e, t));
                         return i.displayValue = t.displayValue,
                             t.fontSize > 10 * t.width ? i.fontSize = 10 * t.width : i.fontSize = t.fontSize,
                             i.guardHeight = t.height + i.fontSize / 2 + t.textMargin,
                             i
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(n, o.default),
                         r(n, [{
                             key: "valid",
                             value: function() {
                                 return -1 !== this.data.search(/^[0-9]{12}$/) && this.data[11] == a(this.data)
                             }
                         }, {
                             key: "encode",
                             value: function() {
                                 return this.options.flat ? this.flatEncoding() : this.guardedEncoding()
                             }
                         }, {
                             key: "flatEncoding",
                             value: function() {
                                 var e = "";
                                 return e += "101",
                                     e += (0,
                                         s.default)(this.data.substr(0, 6), "LLLLLL"),
                                     e += "01010",
                                     e += (0,
                                         s.default)(this.data.substr(6, 6), "RRRRRR"),
                                     {
                                         data: e += "101",
                                         text: this.text
                                     }
                             }
                         }, {
                             key: "guardedEncoding",
                             value: function() {
                                 var e = [];
                                 return this.displayValue && e.push({
                                     data: "00000000",
                                     text: this.text.substr(0, 1),
                                     options: {
                                         textAlign: "left",
                                         fontSize: this.fontSize
                                     }
                                 }),
                                     e.push({
                                         data: "101" + (0,
                                             s.default)(this.data[0], "L"),
                                         options: {
                                             height: this.guardHeight
                                         }
                                     }),
                                     e.push({
                                         data: (0,
                                             s.default)(this.data.substr(1, 5), "LLLLL"),
                                         text: this.text.substr(1, 5),
                                         options: {
                                             fontSize: this.fontSize
                                         }
                                     }),
                                     e.push({
                                         data: "01010",
                                         options: {
                                             height: this.guardHeight
                                         }
                                     }),
                                     e.push({
                                         data: (0,
                                             s.default)(this.data.substr(6, 5), "RRRRR"),
                                         text: this.text.substr(6, 5),
                                         options: {
                                             fontSize: this.fontSize
                                         }
                                     }),
                                     e.push({
                                         data: (0,
                                             s.default)(this.data[11], "R") + "101",
                                         options: {
                                             height: this.guardHeight
                                         }
                                     }),
                                 this.displayValue && e.push({
                                     data: "00000000",
                                     text: this.text.substr(11, 1),
                                     options: {
                                         textAlign: "right",
                                         fontSize: this.fontSize
                                     }
                                 }),
                                     e
                             }
                         }]),
                         n
                 }();
                 t.default = l
             }
             , function(e, t, i) {
                 "use strict";
                 function l(e, t) {
                     return t.height + (t.displayValue && 0 < e.text.length ? t.fontSize + t.textMargin : 0) + t.marginTop + t.marginBottom
                 }
                 function d(e, t, i) {
                     if (i.displayValue && t < e) {
                         if ("center" == i.textAlign)
                             return Math.floor((e - t) / 2);
                         if ("left" == i.textAlign)
                             return 0;
                         if ("right" == i.textAlign)
                             return Math.floor(e - t)
                     }
                     return 0
                 }
                 function c(e, t, i) {
                     var n;
                     if (i)
                         n = i;
                     else {
                         if ("undefined" == typeof document)
                             return 0;
                         n = document.createElement("canvas").getContext("2d")
                     }
                     return n.font = t.fontOptions + " " + t.fontSize + "px " + t.font,
                         n.measureText(e).width
                 }
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 }),
                     t.getTotalWidthOfEncodings = t.calculateEncodingAttributes = t.getBarcodePadding = t.getEncodingHeight = t.getMaximumHeightOfEncodings = void 0;
                 var n, a = i(5), u = (n = a) && n.__esModule ? n : {
                     default: n
                 };
                 t.getMaximumHeightOfEncodings = function(e) {
                     for (var t = 0, i = 0; i < e.length; i++)
                         e[i].height > t && (t = e[i].height);
                     return t
                 }
                     ,
                     t.getEncodingHeight = l,
                     t.getBarcodePadding = d,
                     t.calculateEncodingAttributes = function(e, t, i) {
                         for (var n = 0; n < e.length; n++) {
                             var a, r = e[n], s = (0,
                                 u.default)(t, r.options);
                             a = s.displayValue ? c(r.text, s, i) : 0;
                             var o = r.data.length * s.width;
                             r.width = Math.ceil(Math.max(a, o)),
                                 r.height = l(r, s),
                                 r.barcodePadding = d(a, o, s)
                         }
                     }
                     ,
                     t.getTotalWidthOfEncodings = function(e) {
                         for (var t = 0, i = 0; i < e.length; i++)
                             t += e[i].width;
                         return t
                     }
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var n = i(26)
                     , a = i(25)
                     , r = i(32)
                     , s = i(35)
                     , o = i(34)
                     , l = i(40)
                     , d = i(42)
                     , c = i(41)
                     , u = i(33);
                 t.default = {
                     CODE39: n.CODE39,
                     CODE128: a.CODE128,
                     CODE128A: a.CODE128A,
                     CODE128B: a.CODE128B,
                     CODE128C: a.CODE128C,
                     EAN13: r.EAN13,
                     EAN8: r.EAN8,
                     EAN5: r.EAN5,
                     EAN2: r.EAN2,
                     UPC: r.UPC,
                     UPCE: r.UPCE,
                     ITF14: s.ITF14,
                     ITF: o.ITF,
                     MSI: l.MSI,
                     MSI10: l.MSI10,
                     MSI11: l.MSI11,
                     MSI1010: l.MSI1010,
                     MSI1110: l.MSI1110,
                     pharmacode: d.pharmacode,
                     codabar: c.codabar,
                     GenericBarcode: u.GenericBarcode
                 }
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var n = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }()
                     , a = function() {
                     function t(e) {
                         (function(e, t) {
                                 if (!(e instanceof t))
                                     throw new TypeError("Cannot call a class as a function")
                             }
                         )(this, t),
                             this.api = e
                     }
                     return n(t, [{
                         key: "handleCatch",
                         value: function(e) {
                             if ("InvalidInputException" !== e.name)
                                 throw e;
                             if (this.api._options.valid === this.api._defaults.valid)
                                 throw e.message;
                             this.api._options.valid(!1),
                                 this.api.render = function() {}
                         }
                     }, {
                         key: "wrapBarcodeCall",
                         value: function(e) {
                             try {
                                 var t = e.apply(void 0, arguments);
                                 return this.api._options.valid(!0),
                                     t
                             } catch (e) {
                                 return this.handleCatch(e),
                                     this.api
                             }
                         }
                     }]),
                         t
                 }();
                 t.default = a
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 }),
                     t.default = function(e) {
                         return e.marginTop = e.marginTop || e.margin,
                             e.marginBottom = e.marginBottom || e.margin,
                             e.marginRight = e.marginRight || e.margin,
                             e.marginLeft = e.marginLeft || e.margin,
                             e
                     }
             }
             , function(e, t, i) {
                 "use strict";
                 function n(e) {
                     return e && e.__esModule ? e : {
                         default: e
                     }
                 }
                 function r(e) {
                     if ("string" == typeof e)
                         return function(e) {
                             var t = document.querySelectorAll(e);
                             if (0 !== t.length) {
                                 for (var i = [], n = 0; n < t.length; n++)
                                     i.push(r(t[n]));
                                 return i
                             }
                         }(e);
                     if (Array.isArray(e)) {
                         for (var t = [], i = 0; i < e.length; i++)
                             t.push(r(e[i]));
                         return t
                     }
                     if ("undefined" != typeof HTMLCanvasElement && e instanceof HTMLImageElement)
                         return n = e,
                             {
                                 element: a = document.createElement("canvas"),
                                 options: (0,
                                     o.default)(n),
                                 renderer: l.default.CanvasRenderer,
                                 afterRender: function() {
                                     n.setAttribute("src", a.toDataURL())
                                 }
                             };
                     var n, a;
                     if (e && "svg" === e.nodeName || "undefined" != typeof SVGElement && e instanceof SVGElement)
                         return {
                             element: e,
                             options: (0,
                                 o.default)(e),
                             renderer: l.default.SVGRenderer
                         };
                     if ("undefined" != typeof HTMLCanvasElement && e instanceof HTMLCanvasElement)
                         return {
                             element: e,
                             options: (0,
                                 o.default)(e),
                             renderer: l.default.CanvasRenderer
                         };
                     if (e && e.getContext)
                         return {
                             element: e,
                             renderer: l.default.CanvasRenderer
                         };
                     if (e && "object" === (void 0 === e ? "undefined" : s(e)) && !e.nodeName)
                         return {
                             element: e,
                             renderer: l.default.ObjectRenderer
                         };
                     throw new d.InvalidElementException
                 }
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var s = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function(e) {
                         return typeof e
                     }
                     : function(e) {
                         return e && "function" == typeof Symbol && e.constructor === Symbol && e !== Symbol.prototype ? "symbol" : typeof e
                     }
                     , o = n(i(43))
                     , l = n(i(45))
                     , d = i(8);
                 t.default = r
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 }),
                     t.default = function(e) {
                         var n = [];
                         return function e(t) {
                             if (Array.isArray(t))
                                 for (var i = 0; i < t.length; i++)
                                     e(t[i]);
                             else
                                 t.text = t.text || "",
                                     t.data = t.data || "",
                                     n.push(t)
                         }(e),
                             n
                     }
             }
             , function(e, t, i) {
                 "use strict";
                 function n(e) {
                     return e && e.__esModule ? e : {
                         default: e
                     }
                 }
                 function l(e, t, i) {
                     var n = new t(e = "" + e,i);
                     if (!n.valid())
                         throw new f.InvalidInputException(n.constructor.name,e);
                     var a = n.encode();
                     a = (0,
                         o.default)(a);
                     for (var r = 0; r < a.length; r++)
                         a[r].options = (0,
                             d.default)(i, a[r].options);
                     return a
                 }
                 function a() {
                     return s.default.CODE128 ? "CODE128" : Object.keys(s.default)[0]
                 }
                 function r(e, t, i) {
                     t = (0,
                         o.default)(t);
                     for (var n = 0; n < t.length; n++)
                         t[n].options = (0,
                             d.default)(i, t[n].options),
                             (0,
                                 c.default)(t[n].options);
                     (0,
                         c.default)(i),
                         new e.renderer(e.element,t,i).render(),
                     e.afterRender && e.afterRender()
                 }
                 var s = n(i(14))
                     , d = n(i(5))
                     , o = n(i(18))
                     , c = n(i(16))
                     , u = n(i(17))
                     , h = n(i(9))
                     , p = n(i(15))
                     , f = i(8)
                     , _ = n(i(10))
                     , m = function() {}
                     , g = function(e, t, i) {
                     var n = new m;
                     if (void 0 === e)
                         throw Error("No element to render on was provided.");
                     return n._renderProperties = (0,
                         u.default)(e),
                         n._encodings = [],
                         n._options = _.default,
                         n._errorHandler = new p.default(n),
                     void 0 !== t && ((i = i || {}).format || (i.format = a()),
                         n.options(i)[i.format](t, i).render()),
                         n
                 };
                 for (var v in g.getModule = function(e) {
                     return s.default[e]
                 }
                     ,
                     s.default)
                     s.default.hasOwnProperty(v) && function(s, o) {
                         m.prototype[o] = m.prototype[o.toUpperCase()] = m.prototype[o.toLowerCase()] = function(n, a) {
                             var r = this;
                             return r._errorHandler.wrapBarcodeCall(function() {
                                 a.text = void 0 === a.text ? void 0 : "" + a.text;
                                 var e = (0,
                                     d.default)(r._options, a);
                                 e = (0,
                                     h.default)(e);
                                 var t = s[o]
                                     , i = l(n, t, e);
                                 return r._encodings.push(i),
                                     r
                             })
                         }
                     }(s.default, v);
                 m.prototype.options = function(e) {
                     return this._options = (0,
                         d.default)(this._options, e),
                         this
                 }
                     ,
                     m.prototype.blank = function(e) {
                         var t = new Array(e + 1).join("0");
                         return this._encodings.push({
                             data: t
                         }),
                             this
                     }
                     ,
                     m.prototype.init = function() {
                         var t;
                         if (this._renderProperties)
                             for (var e in Array.isArray(this._renderProperties) || (this._renderProperties = [this._renderProperties]),
                                 this._renderProperties) {
                                 t = this._renderProperties[e];
                                 var i = (0,
                                     d.default)(this._options, t.options);
                                 "auto" == i.format && (i.format = a()),
                                     this._errorHandler.wrapBarcodeCall(function() {
                                         var e = l(i.value, s.default[i.format.toUpperCase()], i);
                                         r(t, e, i)
                                     })
                             }
                     }
                     ,
                     m.prototype.render = function() {
                         if (!this._renderProperties)
                             throw new f.NoElementException;
                         if (Array.isArray(this._renderProperties))
                             for (var e = 0; e < this._renderProperties.length; e++)
                                 r(this._renderProperties[e], this._encodings, this._options);
                         else
                             r(this._renderProperties, this._encodings, this._options);
                         return this
                     }
                     ,
                     m.prototype._defaults = _.default,
                 "undefined" != typeof window && (window.JsBarcode = g),
                 "undefined" != typeof jQuery && (jQuery.fn.JsBarcode = function(e, t) {
                         var i = [];
                         return jQuery(this).each(function() {
                             i.push(this)
                         }),
                             g(i, e, t)
                     }
                 ),
                     e.exports = g
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var n, a = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }(), r = i(6), s = (n = r) && n.__esModule ? n : {
                     default: n
                 }, o = i(1), l = function(e) {
                     function i(e, t) {
                         return function(e, t) {
                             if (!(e instanceof t))
                                 throw new TypeError("Cannot call a class as a function")
                         }(this, i),
                             function(e, t) {
                                 if (!e)
                                     throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                 return !t || "object" != typeof t && "function" != typeof t ? e : t
                             }(this, (i.__proto__ || Object.getPrototypeOf(i)).call(this, o.A_START_CHAR + e, t))
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(i, s.default),
                         a(i, [{
                             key: "valid",
                             value: function() {
                                 return new RegExp("^" + o.A_CHARS + "+$").test(this.data)
                             }
                         }]),
                         i
                 }();
                 t.default = l
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var n, a = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }(), r = i(6), s = (n = r) && n.__esModule ? n : {
                     default: n
                 }, o = i(1), l = function(e) {
                     function i(e, t) {
                         return function(e, t) {
                             if (!(e instanceof t))
                                 throw new TypeError("Cannot call a class as a function")
                         }(this, i),
                             function(e, t) {
                                 if (!e)
                                     throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                 return !t || "object" != typeof t && "function" != typeof t ? e : t
                             }(this, (i.__proto__ || Object.getPrototypeOf(i)).call(this, o.B_START_CHAR + e, t))
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(i, s.default),
                         a(i, [{
                             key: "valid",
                             value: function() {
                                 return new RegExp("^" + o.B_CHARS + "+$").test(this.data)
                             }
                         }]),
                         i
                 }();
                 t.default = l
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var n, a = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }(), r = i(6), s = (n = r) && n.__esModule ? n : {
                     default: n
                 }, o = i(1), l = function(e) {
                     function i(e, t) {
                         return function(e, t) {
                             if (!(e instanceof t))
                                 throw new TypeError("Cannot call a class as a function")
                         }(this, i),
                             function(e, t) {
                                 if (!e)
                                     throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                 return !t || "object" != typeof t && "function" != typeof t ? e : t
                             }(this, (i.__proto__ || Object.getPrototypeOf(i)).call(this, o.C_START_CHAR + e, t))
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(i, s.default),
                         a(i, [{
                             key: "valid",
                             value: function() {
                                 return new RegExp("^" + o.C_CHARS + "+$").test(this.data)
                             }
                         }]),
                         i
                 }();
                 t.default = l
             }
             , function(e, t, i) {
                 "use strict";
                 function n(e) {
                     return e && e.__esModule ? e : {
                         default: e
                     }
                 }
                 function a(e, t) {
                     if (!e)
                         throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                     return !t || "object" != typeof t && "function" != typeof t ? e : t
                 }
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var r = n(i(6))
                     , s = n(i(24))
                     , o = function(e) {
                     function n(e, t) {
                         if (function(e, t) {
                                 if (!(e instanceof t))
                                     throw new TypeError("Cannot call a class as a function")
                             }(this, n),
                                 /^[\x00-\x7F\xC8-\xD3]+$/.test(e))
                             var i = a(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, (0,
                                 s.default)(e), t));
                         else
                             i = a(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, e, t));
                         return a(i)
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(n, r.default),
                         n
                 }();
                 t.default = o
             }
             , function(e, t, i) {
                 "use strict";
                 function r(e, t) {
                     var i = t ? o.A_CHARS : o.B_CHARS
                         , n = e.match(new RegExp("^(" + i + "+?)(([0-9]{2}){2,})([^0-9]|$)"));
                     if (n)
                         return n[1] + String.fromCharCode(204) + s(e.substring(n[1].length));
                     var a = e.match(new RegExp("^" + i + "+"))[0];
                     return a.length === e.length ? e : a + String.fromCharCode(t ? 205 : 206) + r(e.substring(a.length), !t)
                 }
                 function s(e) {
                     var t = d(e)
                         , i = t.length;
                     if (i === e.length)
                         return e;
                     e = e.substring(i);
                     var n = a(e) >= l(e);
                     return t + String.fromCharCode(n ? 206 : 205) + r(e, n)
                 }
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var o = i(1)
                     , a = function(e) {
                     return e.match(new RegExp("^" + o.A_CHARS + "*"))[0].length
                 }
                     , l = function(e) {
                     return e.match(new RegExp("^" + o.B_CHARS + "*"))[0].length
                 }
                     , d = function(e) {
                     return e.match(new RegExp("^" + o.C_CHARS + "*"))[0]
                 };
                 t.default = function(e) {
                     var t = void 0;
                     if (2 <= d(e).length)
                         t = o.C_START_CHAR + s(e);
                     else {
                         var i = a(e) > l(e);
                         t = (i ? o.A_START_CHAR : o.B_START_CHAR) + r(e, i)
                     }
                     return t.replace(/[\xCD\xCE]([^])[\xCD\xCE]/, function(e, t) {
                         return String.fromCharCode(203) + t
                     })
                 }
             }
             , function(e, t, i) {
                 "use strict";
                 function n(e) {
                     return e && e.__esModule ? e : {
                         default: e
                     }
                 }
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 }),
                     t.CODE128C = t.CODE128B = t.CODE128A = t.CODE128 = void 0;
                 var a = n(i(23))
                     , r = n(i(20))
                     , s = n(i(21))
                     , o = n(i(22));
                 t.CODE128 = a.default,
                     t.CODE128A = r.default,
                     t.CODE128B = s.default,
                     t.CODE128C = o.default
             }
             , function(e, t, i) {
                 "use strict";
                 function a(e) {
                     return t = r(e),
                         u[t].toString(2);
                     var t
                 }
                 function r(e) {
                     return c.indexOf(e)
                 }
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 }),
                     t.CODE39 = void 0;
                 var n, s = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }(), o = i(0), l = (n = o) && n.__esModule ? n : {
                     default: n
                 }, d = function(e) {
                     function n(e, t) {
                         return function(e, t) {
                             if (!(e instanceof t))
                                 throw new TypeError("Cannot call a class as a function")
                         }(this, n),
                             e = e.toUpperCase(),
                         t.mod43 && (e += (i = function(e) {
                             for (var t = 0, i = 0; i < e.length; i++)
                                 t += r(e[i]);
                             return t % 43
                         }(e),
                             c[i])),
                             function(e, t) {
                                 if (!e)
                                     throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                 return !t || "object" != typeof t && "function" != typeof t ? e : t
                             }(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, e, t));
                         var i
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(n, l.default),
                         s(n, [{
                             key: "encode",
                             value: function() {
                                 for (var e = a("*"), t = 0; t < this.data.length; t++)
                                     e += a(this.data[t]) + "0";
                                 return {
                                     data: e += a("*"),
                                     text: this.text
                                 }
                             }
                         }, {
                             key: "valid",
                             value: function() {
                                 return -1 !== this.data.search(/^[0-9A-Z\-\.\ \$\/\+\%]+$/)
                             }
                         }]),
                         n
                 }(), c = ["0", "1", "2", "3", "4", "5", "6", "7", "8", "9", "A", "B", "C", "D", "E", "F", "G", "H", "I", "J", "K", "L", "M", "N", "O", "P", "Q", "R", "S", "T", "U", "V", "W", "X", "Y", "Z", "-", ".", " ", "$", "/", "+", "%", "*"], u = [20957, 29783, 23639, 30485, 20951, 29813, 23669, 20855, 29789, 23645, 29975, 23831, 30533, 22295, 30149, 24005, 21623, 29981, 23837, 22301, 30023, 23879, 30545, 22343, 30161, 24017, 21959, 30065, 23921, 22385, 29015, 18263, 29141, 17879, 29045, 18293, 17783, 29021, 18269, 17477, 17489, 17681, 20753, 35770];
                 t.CODE39 = d
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var n, a = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }(), r = function e(t, i, n) {
                     null === t && (t = Function.prototype);
                     var a = Object.getOwnPropertyDescriptor(t, i);
                     if (void 0 === a) {
                         var r = Object.getPrototypeOf(t);
                         return null === r ? void 0 : e(r, i, n)
                     }
                     if ("value"in a)
                         return a.value;
                     var s = a.get;
                     return void 0 !== s ? s.call(n) : void 0
                 }, s = i(2), o = i(11), l = (n = o) && n.__esModule ? n : {
                     default: n
                 }, d = function(e) {
                     return (10 - e.substr(0, 12).split("").map(function(e) {
                         return +e
                     }).reduce(function(e, t, i) {
                         return i % 2 ? e + 3 * t : e + t
                     }, 0) % 10) % 10
                 }, c = function(e) {
                     function n(e, t) {
                         (function(e, t) {
                                 if (!(e instanceof t))
                                     throw new TypeError("Cannot call a class as a function")
                             }
                         )(this, n),
                         -1 !== e.search(/^[0-9]{12}$/) && (e += d(e));
                         var i = function(e, t) {
                             if (!e)
                                 throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                             return !t || "object" != typeof t && "function" != typeof t ? e : t
                         }(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, e, t));
                         return i.lastChar = t.lastChar,
                             i
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(n, l.default),
                         a(n, [{
                             key: "valid",
                             value: function() {
                                 return -1 !== this.data.search(/^[0-9]{13}$/) && +this.data[12] === d(this.data)
                             }
                         }, {
                             key: "leftText",
                             value: function() {
                                 return r(n.prototype.__proto__ || Object.getPrototypeOf(n.prototype), "leftText", this).call(this, 1, 6)
                             }
                         }, {
                             key: "leftEncode",
                             value: function() {
                                 var e = this.data.substr(1, 6)
                                     , t = s.EAN13_STRUCTURE[this.data[0]];
                                 return r(n.prototype.__proto__ || Object.getPrototypeOf(n.prototype), "leftEncode", this).call(this, e, t)
                             }
                         }, {
                             key: "rightText",
                             value: function() {
                                 return r(n.prototype.__proto__ || Object.getPrototypeOf(n.prototype), "rightText", this).call(this, 7, 6)
                             }
                         }, {
                             key: "rightEncode",
                             value: function() {
                                 var e = this.data.substr(7, 6);
                                 return r(n.prototype.__proto__ || Object.getPrototypeOf(n.prototype), "rightEncode", this).call(this, e, "RRRRRR")
                             }
                         }, {
                             key: "encodeGuarded",
                             value: function() {
                                 var e = r(n.prototype.__proto__ || Object.getPrototypeOf(n.prototype), "encodeGuarded", this).call(this);
                                 return this.options.displayValue && (e.unshift({
                                     data: "000000000000",
                                     text: this.text.substr(0, 1),
                                     options: {
                                         textAlign: "left",
                                         fontSize: this.fontSize
                                     }
                                 }),
                                 this.options.lastChar && (e.push({
                                     data: "00"
                                 }),
                                     e.push({
                                         data: "00000",
                                         text: this.options.lastChar,
                                         options: {
                                             fontSize: this.fontSize
                                         }
                                     }))),
                                     e
                             }
                         }]),
                         n
                 }();
                 t.default = c
             }
             , function(e, t, i) {
                 "use strict";
                 function n(e) {
                     return e && e.__esModule ? e : {
                         default: e
                     }
                 }
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var a = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }()
                     , r = i(2)
                     , s = n(i(3))
                     , o = n(i(0))
                     , l = function(e) {
                     function i(e, t) {
                         return function(e, t) {
                             if (!(e instanceof t))
                                 throw new TypeError("Cannot call a class as a function")
                         }(this, i),
                             function(e, t) {
                                 if (!e)
                                     throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                 return !t || "object" != typeof t && "function" != typeof t ? e : t
                             }(this, (i.__proto__ || Object.getPrototypeOf(i)).call(this, e, t))
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(i, o.default),
                         a(i, [{
                             key: "valid",
                             value: function() {
                                 return -1 !== this.data.search(/^[0-9]{2}$/)
                             }
                         }, {
                             key: "encode",
                             value: function() {
                                 var e = r.EAN2_STRUCTURE[parseInt(this.data) % 4];
                                 return {
                                     data: "1011" + (0,
                                         s.default)(this.data, e, "01"),
                                     text: this.text
                                 }
                             }
                         }]),
                         i
                 }();
                 t.default = l
             }
             , function(e, t, i) {
                 "use strict";
                 function n(e) {
                     return e && e.__esModule ? e : {
                         default: e
                     }
                 }
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var a = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }()
                     , r = i(2)
                     , s = n(i(3))
                     , o = n(i(0))
                     , l = function(e) {
                     function i(e, t) {
                         return function(e, t) {
                             if (!(e instanceof t))
                                 throw new TypeError("Cannot call a class as a function")
                         }(this, i),
                             function(e, t) {
                                 if (!e)
                                     throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                 return !t || "object" != typeof t && "function" != typeof t ? e : t
                             }(this, (i.__proto__ || Object.getPrototypeOf(i)).call(this, e, t))
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(i, o.default),
                         a(i, [{
                             key: "valid",
                             value: function() {
                                 return -1 !== this.data.search(/^[0-9]{5}$/)
                             }
                         }, {
                             key: "encode",
                             value: function() {
                                 var e, t = r.EAN5_STRUCTURE[(e = this.data,
                                 e.split("").map(function(e) {
                                     return +e
                                 }).reduce(function(e, t, i) {
                                     return i % 2 ? e + 9 * t : e + 3 * t
                                 }, 0) % 10)];
                                 return {
                                     data: "1011" + (0,
                                         s.default)(this.data, t, "01"),
                                     text: this.text
                                 }
                             }
                         }]),
                         i
                 }();
                 t.default = l
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var n, a = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }(), r = function e(t, i, n) {
                     null === t && (t = Function.prototype);
                     var a = Object.getOwnPropertyDescriptor(t, i);
                     if (void 0 === a) {
                         var r = Object.getPrototypeOf(t);
                         return null === r ? void 0 : e(r, i, n)
                     }
                     if ("value"in a)
                         return a.value;
                     var s = a.get;
                     return void 0 !== s ? s.call(n) : void 0
                 }, s = i(11), o = (n = s) && n.__esModule ? n : {
                     default: n
                 }, l = function(e) {
                     return (10 - e.substr(0, 7).split("").map(function(e) {
                         return +e
                     }).reduce(function(e, t, i) {
                         return i % 2 ? e + t : e + 3 * t
                     }, 0) % 10) % 10
                 }, d = function(e) {
                     function i(e, t) {
                         return function(e, t) {
                             if (!(e instanceof t))
                                 throw new TypeError("Cannot call a class as a function")
                         }(this, i),
                         -1 !== e.search(/^[0-9]{7}$/) && (e += l(e)),
                             function(e, t) {
                                 if (!e)
                                     throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                 return !t || "object" != typeof t && "function" != typeof t ? e : t
                             }(this, (i.__proto__ || Object.getPrototypeOf(i)).call(this, e, t))
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(i, o.default),
                         a(i, [{
                             key: "valid",
                             value: function() {
                                 return -1 !== this.data.search(/^[0-9]{8}$/) && +this.data[7] === l(this.data)
                             }
                         }, {
                             key: "leftText",
                             value: function() {
                                 return r(i.prototype.__proto__ || Object.getPrototypeOf(i.prototype), "leftText", this).call(this, 0, 4)
                             }
                         }, {
                             key: "leftEncode",
                             value: function() {
                                 var e = this.data.substr(0, 4);
                                 return r(i.prototype.__proto__ || Object.getPrototypeOf(i.prototype), "leftEncode", this).call(this, e, "LLLL")
                             }
                         }, {
                             key: "rightText",
                             value: function() {
                                 return r(i.prototype.__proto__ || Object.getPrototypeOf(i.prototype), "rightText", this).call(this, 4, 4)
                             }
                         }, {
                             key: "rightEncode",
                             value: function() {
                                 var e = this.data.substr(4, 4);
                                 return r(i.prototype.__proto__ || Object.getPrototypeOf(i.prototype), "rightEncode", this).call(this, e, "RRRR")
                             }
                         }]),
                         i
                 }();
                 t.default = d
             }
             , function(e, t, i) {
                 "use strict";
                 function n(e) {
                     return e && e.__esModule ? e : {
                         default: e
                     }
                 }
                 function a(e, t) {
                     if (!e)
                         throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                     return !t || "object" != typeof t && "function" != typeof t ? e : t
                 }
                 function r(e, t) {
                     for (var i = parseInt(e[e.length - 1]), n = c[i], a = "", r = 0, s = 0; s < n.length; s++) {
                         var o = n[s];
                         a += "X" === o ? e[r++] : o
                     }
                     return (a = "" + t + a) + (0,
                         d.checksum)(a)
                 }
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var s = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }()
                     , o = n(i(3))
                     , l = n(i(0))
                     , d = i(12)
                     , c = ["XX00000XXX", "XX10000XXX", "XX20000XXX", "XXX00000XX", "XXXX00000X", "XXXXX00005", "XXXXX00006", "XXXXX00007", "XXXXX00008", "XXXXX00009"]
                     , u = [["EEEOOO", "OOOEEE"], ["EEOEOO", "OOEOEE"], ["EEOOEO", "OOEEOE"], ["EEOOOE", "OOEEEO"], ["EOEEOO", "OEOOEE"], ["EOOEEO", "OEEOOE"], ["EOOOEE", "OEEEOO"], ["EOEOEO", "OEOEOE"], ["EOEOOE", "OEOEEO"], ["EOOEOE", "OEEOEO"]]
                     , h = function(e) {
                     function n(e, t) {
                         !function(e, t) {
                             if (!(e instanceof t))
                                 throw new TypeError("Cannot call a class as a function")
                         }(this, n);
                         var i = a(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, e, t));
                         if (i.isValid = !1,
                             -1 !== e.search(/^[0-9]{6}$/))
                             i.middleDigits = e,
                                 i.upcA = r(e, "0"),
                                 i.text = t.text || "" + i.upcA[0] + e + i.upcA[i.upcA.length - 1],
                                 i.isValid = !0;
                         else {
                             if (-1 === e.search(/^[01][0-9]{7}$/))
                                 return a(i);
                             if (i.middleDigits = e.substring(1, e.length - 1),
                                     i.upcA = r(i.middleDigits, e[0]),
                                 i.upcA[i.upcA.length - 1] !== e[e.length - 1])
                                 return a(i);
                             i.isValid = !0
                         }
                         return i.displayValue = t.displayValue,
                             t.fontSize > 10 * t.width ? i.fontSize = 10 * t.width : i.fontSize = t.fontSize,
                             i.guardHeight = t.height + i.fontSize / 2 + t.textMargin,
                             i
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(n, l.default),
                         s(n, [{
                             key: "valid",
                             value: function() {
                                 return this.isValid
                             }
                         }, {
                             key: "encode",
                             value: function() {
                                 return this.options.flat ? this.flatEncoding() : this.guardedEncoding()
                             }
                         }, {
                             key: "flatEncoding",
                             value: function() {
                                 var e = "";
                                 return e += "101",
                                     e += this.encodeMiddleDigits(),
                                     {
                                         data: e += "010101",
                                         text: this.text
                                     }
                             }
                         }, {
                             key: "guardedEncoding",
                             value: function() {
                                 var e = [];
                                 return this.displayValue && e.push({
                                     data: "00000000",
                                     text: this.text[0],
                                     options: {
                                         textAlign: "left",
                                         fontSize: this.fontSize
                                     }
                                 }),
                                     e.push({
                                         data: "101",
                                         options: {
                                             height: this.guardHeight
                                         }
                                     }),
                                     e.push({
                                         data: this.encodeMiddleDigits(),
                                         text: this.text.substring(1, 7),
                                         options: {
                                             fontSize: this.fontSize
                                         }
                                     }),
                                     e.push({
                                         data: "010101",
                                         options: {
                                             height: this.guardHeight
                                         }
                                     }),
                                 this.displayValue && e.push({
                                     data: "00000000",
                                     text: this.text[7],
                                     options: {
                                         textAlign: "right",
                                         fontSize: this.fontSize
                                     }
                                 }),
                                     e
                             }
                         }, {
                             key: "encodeMiddleDigits",
                             value: function() {
                                 var e = this.upcA[0]
                                     , t = this.upcA[this.upcA.length - 1]
                                     , i = u[parseInt(t)][parseInt(e)];
                                 return (0,
                                     o.default)(this.middleDigits, i)
                             }
                         }]),
                         n
                 }();
                 t.default = h
             }
             , function(e, t, i) {
                 "use strict";
                 function n(e) {
                     return e && e.__esModule ? e : {
                         default: e
                     }
                 }
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 }),
                     t.UPCE = t.UPC = t.EAN2 = t.EAN5 = t.EAN8 = t.EAN13 = void 0;
                 var a = n(i(27))
                     , r = n(i(30))
                     , s = n(i(29))
                     , o = n(i(28))
                     , l = n(i(12))
                     , d = n(i(31));
                 t.EAN13 = a.default,
                     t.EAN8 = r.default,
                     t.EAN5 = s.default,
                     t.EAN2 = o.default,
                     t.UPC = l.default,
                     t.UPCE = d.default
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 }),
                     t.GenericBarcode = void 0;
                 var n, a = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }(), r = i(0), s = (n = r) && n.__esModule ? n : {
                     default: n
                 }, o = function(e) {
                     function i(e, t) {
                         return function(e, t) {
                             if (!(e instanceof t))
                                 throw new TypeError("Cannot call a class as a function")
                         }(this, i),
                             function(e, t) {
                                 if (!e)
                                     throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                 return !t || "object" != typeof t && "function" != typeof t ? e : t
                             }(this, (i.__proto__ || Object.getPrototypeOf(i)).call(this, e, t))
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(i, s.default),
                         a(i, [{
                             key: "encode",
                             value: function() {
                                 return {
                                     data: "10101010101010101010101010101010101010101",
                                     text: this.text
                                 }
                             }
                         }, {
                             key: "valid",
                             value: function() {
                                 return !0
                             }
                         }]),
                         i
                 }();
                 t.GenericBarcode = o
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 }),
                     t.ITF = void 0;
                 var n, a = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }(), r = i(0), s = (n = r) && n.__esModule ? n : {
                     default: n
                 }, o = function(e) {
                     function n(e, t) {
                         !function(e, t) {
                             if (!(e instanceof t))
                                 throw new TypeError("Cannot call a class as a function")
                         }(this, n);
                         var i = function(e, t) {
                             if (!e)
                                 throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                             return !t || "object" != typeof t && "function" != typeof t ? e : t
                         }(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, e, t));
                         return i.binaryRepresentation = {
                             0: "00110",
                             1: "10001",
                             2: "01001",
                             3: "11000",
                             4: "00101",
                             5: "10100",
                             6: "01100",
                             7: "00011",
                             8: "10010",
                             9: "01010"
                         },
                             i
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(n, s.default),
                         a(n, [{
                             key: "valid",
                             value: function() {
                                 return -1 !== this.data.search(/^([0-9]{2})+$/)
                             }
                         }, {
                             key: "encode",
                             value: function() {
                                 for (var e = "1010", t = 0; t < this.data.length; t += 2)
                                     e += this.calculatePair(this.data.substr(t, 2));
                                 return {
                                     data: e += "11101",
                                     text: this.text
                                 }
                             }
                         }, {
                             key: "calculatePair",
                             value: function(e) {
                                 for (var t = "", i = this.binaryRepresentation[e[0]], n = this.binaryRepresentation[e[1]], a = 0; a < 5; a++)
                                     t += "1" == i[a] ? "111" : "1",
                                         t += "1" == n[a] ? "000" : "0";
                                 return t
                             }
                         }]),
                         n
                 }();
                 t.ITF = o
             }
             , function(e, t, i) {
                 "use strict";
                 function a(e) {
                     for (var t = 0, i = 0; i < 13; i++)
                         t += parseInt(e[i]) * (3 - i % 2 * 2);
                     return 10 * Math.ceil(t / 10) - t
                 }
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 }),
                     t.ITF14 = void 0;
                 var n, r = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }(), s = i(0), o = (n = s) && n.__esModule ? n : {
                     default: n
                 }, l = function(e) {
                     function n(e, t) {
                         (function(e, t) {
                                 if (!(e instanceof t))
                                     throw new TypeError("Cannot call a class as a function")
                             }
                         )(this, n),
                         -1 !== e.search(/^[0-9]{13}$/) && (e += a(e));
                         var i = function(e, t) {
                             if (!e)
                                 throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                             return !t || "object" != typeof t && "function" != typeof t ? e : t
                         }(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, e, t));
                         return i.binaryRepresentation = {
                             0: "00110",
                             1: "10001",
                             2: "01001",
                             3: "11000",
                             4: "00101",
                             5: "10100",
                             6: "01100",
                             7: "00011",
                             8: "10010",
                             9: "01010"
                         },
                             i
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(n, o.default),
                         r(n, [{
                             key: "valid",
                             value: function() {
                                 return -1 !== this.data.search(/^[0-9]{14}$/) && this.data[13] == a(this.data)
                             }
                         }, {
                             key: "encode",
                             value: function() {
                                 for (var e = "1010", t = 0; t < 14; t += 2)
                                     e += this.calculatePair(this.data.substr(t, 2));
                                 return {
                                     data: e += "11101",
                                     text: this.text
                                 }
                             }
                         }, {
                             key: "calculatePair",
                             value: function(e) {
                                 for (var t = "", i = this.binaryRepresentation[e[0]], n = this.binaryRepresentation[e[1]], a = 0; a < 5; a++)
                                     t += "1" == i[a] ? "111" : "1",
                                         t += "1" == n[a] ? "000" : "0";
                                 return t
                             }
                         }]),
                         n
                 }();
                 t.ITF14 = l
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var n, a = i(4), r = (n = a) && n.__esModule ? n : {
                     default: n
                 }, s = i(7), o = function(e) {
                     function i(e, t) {
                         return function(e, t) {
                             if (!(e instanceof t))
                                 throw new TypeError("Cannot call a class as a function")
                         }(this, i),
                             function(e, t) {
                                 if (!e)
                                     throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                 return !t || "object" != typeof t && "function" != typeof t ? e : t
                             }(this, (i.__proto__ || Object.getPrototypeOf(i)).call(this, e + (0,
                                 s.mod10)(e), t))
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(i, r.default),
                         i
                 }();
                 t.default = o
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var n, a = i(4), r = (n = a) && n.__esModule ? n : {
                     default: n
                 }, s = i(7), o = function(e) {
                     function i(e, t) {
                         return function(e, t) {
                             if (!(e instanceof t))
                                 throw new TypeError("Cannot call a class as a function")
                         }(this, i),
                             e += (0,
                                 s.mod10)(e),
                             e += (0,
                                 s.mod10)(e),
                             function(e, t) {
                                 if (!e)
                                     throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                 return !t || "object" != typeof t && "function" != typeof t ? e : t
                             }(this, (i.__proto__ || Object.getPrototypeOf(i)).call(this, e, t))
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(i, r.default),
                         i
                 }();
                 t.default = o
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var n, a = i(4), r = (n = a) && n.__esModule ? n : {
                     default: n
                 }, s = i(7), o = function(e) {
                     function i(e, t) {
                         return function(e, t) {
                             if (!(e instanceof t))
                                 throw new TypeError("Cannot call a class as a function")
                         }(this, i),
                             function(e, t) {
                                 if (!e)
                                     throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                 return !t || "object" != typeof t && "function" != typeof t ? e : t
                             }(this, (i.__proto__ || Object.getPrototypeOf(i)).call(this, e + (0,
                                 s.mod11)(e), t))
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(i, r.default),
                         i
                 }();
                 t.default = o
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var n, a = i(4), r = (n = a) && n.__esModule ? n : {
                     default: n
                 }, s = i(7), o = function(e) {
                     function i(e, t) {
                         return function(e, t) {
                             if (!(e instanceof t))
                                 throw new TypeError("Cannot call a class as a function")
                         }(this, i),
                             e += (0,
                                 s.mod11)(e),
                             e += (0,
                                 s.mod10)(e),
                             function(e, t) {
                                 if (!e)
                                     throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                                 return !t || "object" != typeof t && "function" != typeof t ? e : t
                             }(this, (i.__proto__ || Object.getPrototypeOf(i)).call(this, e, t))
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(i, r.default),
                         i
                 }();
                 t.default = o
             }
             , function(e, t, i) {
                 "use strict";
                 function n(e) {
                     return e && e.__esModule ? e : {
                         default: e
                     }
                 }
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 }),
                     t.MSI1110 = t.MSI1010 = t.MSI11 = t.MSI10 = t.MSI = void 0;
                 var a = n(i(4))
                     , r = n(i(36))
                     , s = n(i(38))
                     , o = n(i(37))
                     , l = n(i(39));
                 t.MSI = a.default,
                     t.MSI10 = r.default,
                     t.MSI11 = s.default,
                     t.MSI1010 = o.default,
                     t.MSI1110 = l.default
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 }),
                     t.codabar = void 0;
                 var n, a = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }(), r = i(0), s = (n = r) && n.__esModule ? n : {
                     default: n
                 }, o = function(e) {
                     function n(e, t) {
                         (function(e, t) {
                                 if (!(e instanceof t))
                                     throw new TypeError("Cannot call a class as a function")
                             }
                         )(this, n),
                         0 === e.search(/^[0-9\-\$\:\.\+\/]+$/) && (e = "A" + e + "A");
                         var i = function(e, t) {
                             if (!e)
                                 throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                             return !t || "object" != typeof t && "function" != typeof t ? e : t
                         }(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, e.toUpperCase(), t));
                         return i.text = i.options.text || i.text.replace(/[A-D]/g, ""),
                             i
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(n, s.default),
                         a(n, [{
                             key: "valid",
                             value: function() {
                                 return -1 !== this.data.search(/^[A-D][0-9\-\$\:\.\+\/]+[A-D]$/)
                             }
                         }, {
                             key: "encode",
                             value: function() {
                                 for (var e = [], t = this.getEncodings(), i = 0; i < this.data.length; i++)
                                     e.push(t[this.data.charAt(i)]),
                                     i !== this.data.length - 1 && e.push("0");
                                 return {
                                     text: this.text,
                                     data: e.join("")
                                 }
                             }
                         }, {
                             key: "getEncodings",
                             value: function() {
                                 return {
                                     0: "101010011",
                                     1: "101011001",
                                     2: "101001011",
                                     3: "110010101",
                                     4: "101101001",
                                     5: "110101001",
                                     6: "100101011",
                                     7: "100101101",
                                     8: "100110101",
                                     9: "110100101",
                                     "-": "101001101",
                                     $: "101100101",
                                     ":": "1101011011",
                                     "/": "1101101011",
                                     ".": "1101101101",
                                     "+": "101100110011",
                                     A: "1011001001",
                                     B: "1001001011",
                                     C: "1010010011",
                                     D: "1010011001"
                                 }
                             }
                         }]),
                         n
                 }();
                 t.codabar = o
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 }),
                     t.pharmacode = void 0;
                 var n, a = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }(), r = i(0), s = (n = r) && n.__esModule ? n : {
                     default: n
                 }, o = function(e) {
                     function n(e, t) {
                         !function(e, t) {
                             if (!(e instanceof t))
                                 throw new TypeError("Cannot call a class as a function")
                         }(this, n);
                         var i = function(e, t) {
                             if (!e)
                                 throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
                             return !t || "object" != typeof t && "function" != typeof t ? e : t
                         }(this, (n.__proto__ || Object.getPrototypeOf(n)).call(this, e, t));
                         return i.number = parseInt(e, 10),
                             i
                     }
                     return function(e, t) {
                         if ("function" != typeof t && null !== t)
                             throw new TypeError("Super expression must either be null or a function, not " + typeof t);
                         e.prototype = Object.create(t && t.prototype, {
                             constructor: {
                                 value: e,
                                 enumerable: !1,
                                 writable: !0,
                                 configurable: !0
                             }
                         }),
                         t && (Object.setPrototypeOf ? Object.setPrototypeOf(e, t) : e.__proto__ = t)
                     }(n, s.default),
                         a(n, [{
                             key: "encode",
                             value: function() {
                                 for (var e = this.number, t = ""; !isNaN(e) && 0 != e; )
                                     e % 2 == 0 ? (t = "11100" + t,
                                         e = (e - 2) / 2) : (t = "100" + t,
                                         e = (e - 1) / 2);
                                 return {
                                     data: t = t.slice(0, -2),
                                     text: this.text
                                 }
                             }
                         }, {
                             key: "valid",
                             value: function() {
                                 return 3 <= this.number && this.number <= 131070
                             }
                         }]),
                         n
                 }();
                 t.pharmacode = o
             }
             , function(e, t, i) {
                 "use strict";
                 function n(e) {
                     return e && e.__esModule ? e : {
                         default: e
                     }
                 }
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var a = n(i(9))
                     , r = n(i(10));
                 t.default = function(e) {
                     var t = {};
                     for (var i in r.default)
                         r.default.hasOwnProperty(i) && (e.hasAttribute("jsbarcode-" + i.toLowerCase()) && (t[i] = e.getAttribute("jsbarcode-" + i.toLowerCase())),
                         e.hasAttribute("data-" + i.toLowerCase()) && (t[i] = e.getAttribute("data-" + i.toLowerCase())));
                     return t.value = e.getAttribute("jsbarcode-value") || e.getAttribute("data-value"),
                         (0,
                             a.default)(t)
                 }
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var n, a = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }(), r = i(5), s = (n = r) && n.__esModule ? n : {
                     default: n
                 }, o = i(13), l = function() {
                     function n(e, t, i) {
                         (function(e, t) {
                                 if (!(e instanceof t))
                                     throw new TypeError("Cannot call a class as a function")
                             }
                         )(this, n),
                             this.canvas = e,
                             this.encodings = t,
                             this.options = i
                     }
                     return a(n, [{
                         key: "render",
                         value: function() {
                             if (!this.canvas.getContext)
                                 throw new Error("The browser does not support canvas.");
                             this.prepareCanvas();
                             for (var e = 0; e < this.encodings.length; e++) {
                                 var t = (0,
                                     s.default)(this.options, this.encodings[e].options);
                                 this.drawCanvasBarcode(t, this.encodings[e]),
                                     this.drawCanvasText(t, this.encodings[e]),
                                     this.moveCanvasDrawing(this.encodings[e])
                             }
                             this.restoreCanvas()
                         }
                     }, {
                         key: "prepareCanvas",
                         value: function() {
                             var e = this.canvas.getContext("2d");
                             e.save(),
                                 (0,
                                     o.calculateEncodingAttributes)(this.encodings, this.options, e);
                             var t = (0,
                                 o.getTotalWidthOfEncodings)(this.encodings)
                                 , i = (0,
                                 o.getMaximumHeightOfEncodings)(this.encodings);
                             this.canvas.width = t + this.options.marginLeft + this.options.marginRight,
                                 this.canvas.height = i,
                                 e.clearRect(0, 0, this.canvas.width, this.canvas.height),
                             this.options.background && (e.fillStyle = this.options.background,
                                 e.fillRect(0, 0, this.canvas.width, this.canvas.height)),
                                 e.translate(this.options.marginLeft, 0)
                         }
                     }, {
                         key: "drawCanvasBarcode",
                         value: function(e, t) {
                             var i, n = this.canvas.getContext("2d"), a = t.data;
                             i = "top" == e.textPosition ? e.marginTop + e.fontSize + e.textMargin : e.marginTop,
                                 n.fillStyle = e.lineColor;
                             for (var r = 0; r < a.length; r++) {
                                 var s = r * e.width + t.barcodePadding;
                                 "1" === a[r] ? n.fillRect(s, i, e.width, e.height) : a[r] && n.fillRect(s, i, e.width, e.height * a[r])
                             }
                         }
                     }, {
                         key: "drawCanvasText",
                         value: function(e, t) {
                             var i, n, a = this.canvas.getContext("2d"), r = e.fontOptions + " " + e.fontSize + "px " + e.font;
                             e.displayValue && (n = "top" == e.textPosition ? e.marginTop + e.fontSize - e.textMargin : e.height + e.textMargin + e.marginTop + e.fontSize,
                                 a.font = r,
                                 "left" == e.textAlign || 0 < t.barcodePadding ? (i = 0,
                                     a.textAlign = "left") : "right" == e.textAlign ? (i = t.width - 1,
                                     a.textAlign = "right") : (i = t.width / 2,
                                     a.textAlign = "center"),
                                 a.fillText(t.text, i, n))
                         }
                     }, {
                         key: "moveCanvasDrawing",
                         value: function(e) {
                             this.canvas.getContext("2d").translate(e.width, 0)
                         }
                     }, {
                         key: "restoreCanvas",
                         value: function() {
                             this.canvas.getContext("2d").restore()
                         }
                     }]),
                         n
                 }();
                 t.default = l
             }
             , function(e, t, i) {
                 "use strict";
                 function n(e) {
                     return e && e.__esModule ? e : {
                         default: e
                     }
                 }
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var a = n(i(44))
                     , r = n(i(47))
                     , s = n(i(46));
                 t.default = {
                     CanvasRenderer: a.default,
                     SVGRenderer: r.default,
                     ObjectRenderer: s.default
                 }
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var a = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }()
                     , n = function() {
                     function n(e, t, i) {
                         (function(e, t) {
                                 if (!(e instanceof t))
                                     throw new TypeError("Cannot call a class as a function")
                             }
                         )(this, n),
                             this.object = e,
                             this.encodings = t,
                             this.options = i
                     }
                     return a(n, [{
                         key: "render",
                         value: function() {
                             this.object.encodings = this.encodings
                         }
                     }]),
                         n
                 }();
                 t.default = n
             }
             , function(e, t, i) {
                 "use strict";
                 Object.defineProperty(t, "__esModule", {
                     value: !0
                 });
                 var n, a = function() {
                     function n(e, t) {
                         for (var i = 0; i < t.length; i++) {
                             var n = t[i];
                             n.enumerable = n.enumerable || !1,
                                 n.configurable = !0,
                             "value"in n && (n.writable = !0),
                                 Object.defineProperty(e, n.key, n)
                         }
                     }
                     return function(e, t, i) {
                         return t && n(e.prototype, t),
                         i && n(e, i),
                             e
                     }
                 }(), r = i(5), s = (n = r) && n.__esModule ? n : {
                     default: n
                 }, o = i(13), l = "http://www.w3.org/2000/svg", d = function() {
                     function n(e, t, i) {
                         (function(e, t) {
                                 if (!(e instanceof t))
                                     throw new TypeError("Cannot call a class as a function")
                             }
                         )(this, n),
                             this.svg = e,
                             this.encodings = t,
                             this.options = i,
                             this.document = i.xmlDocument || document
                     }
                     return a(n, [{
                         key: "render",
                         value: function() {
                             var e = this.options.marginLeft;
                             this.prepareSVG();
                             for (var t = 0; t < this.encodings.length; t++) {
                                 var i = this.encodings[t]
                                     , n = (0,
                                     s.default)(this.options, i.options)
                                     , a = this.createGroup(e, n.marginTop, this.svg);
                                 this.setGroupOptions(a, n),
                                     this.drawSvgBarcode(a, n, i),
                                     this.drawSVGText(a, n, i),
                                     e += i.width
                             }
                         }
                     }, {
                         key: "prepareSVG",
                         value: function() {
                             for (; this.svg.firstChild; )
                                 this.svg.removeChild(this.svg.firstChild);
                             (0,
                                 o.calculateEncodingAttributes)(this.encodings, this.options);
                             var e = (0,
                                 o.getTotalWidthOfEncodings)(this.encodings)
                                 , t = (0,
                                 o.getMaximumHeightOfEncodings)(this.encodings)
                                 , i = e + this.options.marginLeft + this.options.marginRight;
                             this.setSvgAttributes(i, t),
                             this.options.background && this.drawRect(0, 0, i, t, this.svg).setAttribute("style", "fill:" + this.options.background + ";")
                         }
                     }, {
                         key: "drawSvgBarcode",
                         value: function(e, t, i) {
                             var n, a = i.data;
                             n = "top" == t.textPosition ? t.fontSize + t.textMargin : 0;
                             for (var r = 0, s = 0, o = 0; o < a.length; o++)
                                 s = o * t.width + i.barcodePadding,
                                     "1" === a[o] ? r++ : 0 < r && (this.drawRect(s - t.width * r, n, t.width * r, t.height, e),
                                         r = 0);
                             0 < r && this.drawRect(s - t.width * (r - 1), n, t.width * r, t.height, e)
                         }
                     }, {
                         key: "drawSVGText",
                         value: function(e, t, i) {
                             var n, a, r = this.document.createElementNS(l, "text");
                             t.displayValue && (r.setAttribute("style", "font:" + t.fontOptions + " " + t.fontSize + "px " + t.font),
                                 a = "top" == t.textPosition ? t.fontSize - t.textMargin : t.height + t.textMargin + t.fontSize,
                                 "left" == t.textAlign || 0 < i.barcodePadding ? (n = 0,
                                     r.setAttribute("text-anchor", "start")) : "right" == t.textAlign ? (n = i.width - 1,
                                     r.setAttribute("text-anchor", "end")) : (n = i.width / 2,
                                     r.setAttribute("text-anchor", "middle")),
                                 r.setAttribute("x", n),
                                 r.setAttribute("y", a),
                                 r.appendChild(this.document.createTextNode(i.text)),
                                 e.appendChild(r))
                         }
                     }, {
                         key: "setSvgAttributes",
                         value: function(e, t) {
                             var i = this.svg;
                             i.setAttribute("width", e + "px"),
                                 i.setAttribute("height", t + "px"),
                                 i.setAttribute("x", "0px"),
                                 i.setAttribute("y", "0px"),
                                 i.setAttribute("viewBox", "0 0 " + e + " " + t),
                                 i.setAttribute("xmlns", l),
                                 i.setAttribute("version", "1.1"),
                                 i.setAttribute("style", "transform: translate(0,0)")
                         }
                     }, {
                         key: "createGroup",
                         value: function(e, t, i) {
                             var n = this.document.createElementNS(l, "g");
                             return n.setAttribute("transform", "translate(" + e + ", " + t + ")"),
                                 i.appendChild(n),
                                 n
                         }
                     }, {
                         key: "setGroupOptions",
                         value: function(e, t) {
                             e.setAttribute("style", "fill:" + t.lineColor + ";")
                         }
                     }, {
                         key: "drawRect",
                         value: function(e, t, i, n, a) {
                             var r = this.document.createElementNS(l, "rect");
                             return r.setAttribute("x", e),
                                 r.setAttribute("y", t),
                                 r.setAttribute("width", i),
                                 r.setAttribute("height", n),
                                 a.appendChild(r),
                                 r
                         }
                     }]),
                         n
                 }();
                 t.default = d
             }
         ]),
         define("JsBarcode", function() {}),
     void 0 === jQuery.migrateMute && (jQuery.migrateMute = !0),
         function(d, i, c) {
             function u(e) {
                 var t = i.console;
                 n[e] || (n[e] = !0,
                     d.migrateWarnings.push(e),
                 t && t.warn && !d.migrateMute && (t.warn("JQMIGRATE: " + e),
                 d.migrateTrace && t.trace && t.trace()))
             }
             function e(e, t, i, n) {
                 if (Object.defineProperty)
                     try {
                         return Object.defineProperty(e, t, {
                             configurable: !0,
                             enumerable: !0,
                             get: function() {
                                 return u(n),
                                     i
                             },
                             set: function(e) {
                                 u(n),
                                     i = e
                             }
                         }),
                             c
                     } catch (e) {}
                 d._definePropertyBroken = !0,
                     e[t] = i
             }
             var n = {};
             d.migrateWarnings = [],
             !d.migrateMute && i.console && i.console.log && i.console.log("JQMIGRATE: Logging is active"),
             d.migrateTrace === c && (d.migrateTrace = !0),
                 d.migrateReset = function() {
                     n = {},
                         d.migrateWarnings.length = 0
                 }
                 ,
             "BackCompat" === document.compatMode && u("jQuery is not compatible with Quirks Mode");
             var s = d("<input/>", {
                 size: 1
             }).attr("size") && d.attrFn
                 , o = d.attr
                 , a = d.attrHooks.value && d.attrHooks.value.get || function() {
                 return null
             }
                 , r = d.attrHooks.value && d.attrHooks.value.set || function() {
                 return c
             }
                 , l = /^(?:input|button)$/i
                 , h = /^[238]$/
                 , p = /^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i
                 , f = /^(?:checked|selected)$/i;
             e(d, "attrFn", s || {}, "jQuery.attrFn is deprecated"),
                 d.attr = function(e, t, i, n) {
                     var a = t.toLowerCase()
                         , r = e && e.nodeType;
                     return n && (o.length < 4 && u("jQuery.fn.attr( props, pass ) is deprecated"),
                     e && !h.test(r) && (s ? t in s : d.isFunction(d.fn[t]))) ? d(e)[t](i) : ("type" === t && i !== c && l.test(e.nodeName) && e.parentNode && u("Can't change the 'type' of an input or button in IE 6/7/8"),
                     !d.attrHooks[a] && p.test(a) && (d.attrHooks[a] = {
                         get: function(e, t) {
                             var i, n = d.prop(e, t);
                             return !0 === n || "boolean" != typeof n && (i = e.getAttributeNode(t)) && !1 !== i.nodeValue ? t.toLowerCase() : c
                         },
                         set: function(e, t, i) {
                             var n;
                             return !1 === t ? d.removeAttr(e, i) : ((n = d.propFix[i] || i)in e && (e[n] = !0),
                                 e.setAttribute(i, i.toLowerCase())),
                                 i
                         }
                     },
                     f.test(a) && u("jQuery.fn.attr('" + a + "') may use property instead of attribute")),
                         o.call(d, e, t, i))
                 }
                 ,
                 d.attrHooks.value = {
                     get: function(e, t) {
                         var i = (e.nodeName || "").toLowerCase();
                         return "button" === i ? a.apply(this, arguments) : ("input" !== i && "option" !== i && u("jQuery.fn.attr('value') no longer gets properties"),
                             t in e ? e.value : null)
                     },
                     set: function(e, t) {
                         var i = (e.nodeName || "").toLowerCase();
                         return "button" === i ? r.apply(this, arguments) : ("input" !== i && "option" !== i && u("jQuery.fn.attr('value', val) no longer sets properties"),
                             e.value = t,
                             c)
                     }
                 };
             var t, _, m = d.fn.init, g = d.parseJSON, v = /^([^<]*)(<[\w\W]+>)([^>]*)$/;
             d.fn.init = function(e, t, i) {
                 var n;
                 return e && "string" == typeof e && !d.isPlainObject(t) && (n = v.exec(d.trim(e))) && n[0] && ("<" !== e.charAt(0) && u("$(html) HTML strings must start with '<' character"),
                 n[3] && u("$(html) HTML text after last tag is ignored"),
                 "#" === n[0].charAt(0) && (u("HTML string cannot start with a '#' character"),
                     d.error("JQMIGRATE: Invalid selector string (XSS)")),
                 t && t.context && (t = t.context),
                     d.parseHTML) ? m.call(this, d.parseHTML(n[2], t, !0), t, i) : m.apply(this, arguments)
             }
                 ,
                 d.fn.init.prototype = d.fn,
                 d.parseJSON = function(e) {
                     return e || null === e ? g.apply(this, arguments) : (u("jQuery.parseJSON requires a valid JSON string"),
                         null)
                 }
                 ,
                 d.uaMatch = function(e) {
                     e = e.toLowerCase();
                     var t = /(chrome)[ \/]([\w.]+)/.exec(e) || /(webkit)[ \/]([\w.]+)/.exec(e) || /(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e) || /(msie) ([\w.]+)/.exec(e) || e.indexOf("compatible") < 0 && /(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e) || [];
                     return {
                         browser: t[1] || "",
                         version: t[2] || "0"
                     }
                 }
                 ,
             d.browser || (_ = {},
             (t = d.uaMatch(navigator.userAgent)).browser && (_[t.browser] = !0,
                 _.version = t.version),
                 _.chrome ? _.webkit = !0 : _.webkit && (_.safari = !0),
                 d.browser = _),
                 e(d, "browser", d.browser, "jQuery.browser is deprecated"),
                 d.sub = function() {
                     function i(e, t) {
                         return new i.fn.init(e,t)
                     }
                     d.extend(!0, i, this),
                         i.superclass = this,
                         ((i.fn = i.prototype = this()).constructor = i).sub = this.sub,
                         i.fn.init = function(e, t) {
                             return t && t instanceof d && !(t instanceof i) && (t = i(t)),
                                 d.fn.init.call(this, e, t, n)
                         }
                         ,
                         i.fn.init.prototype = i.fn;
                     var n = i(document);
                     return u("jQuery.sub() is deprecated"),
                         i
                 }
                 ,
                 d.ajaxSetup({
                     converters: {
                         "text json": d.parseJSON
                     }
                 });
             var y = d.fn.data;
             d.fn.data = function(e) {
                 var t, i, n = this[0];
                 return !n || "events" !== e || 1 !== arguments.length || (t = d.data(n, e),
                     i = d._data(n, e),
                 t !== c && t !== i || i === c) ? y.apply(this, arguments) : (u("Use of jQuery.fn.data('events') is deprecated"),
                     i)
             }
             ;
             var b = /\/(java|ecma)script/i
                 , w = d.fn.andSelf || d.fn.addBack;
             d.fn.andSelf = function() {
                 return u("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),
                     w.apply(this, arguments)
             }
                 ,
             d.clean || (d.clean = function(e, t, i, n) {
                     t = (t = !(t = t || document).nodeType && t[0] || t).ownerDocument || t,
                         u("jQuery.clean() is deprecated");
                     var a, r, s, o, l = [];
                     if (d.merge(l, d.buildFragment(e, t).childNodes),
                             i)
                         for (s = function(e) {
                             return !e.type || b.test(e.type) ? n ? n.push(e.parentNode ? e.parentNode.removeChild(e) : e) : i.appendChild(e) : c
                         }
                                  ,
                                  a = 0; null != (r = l[a]); a++)
                             d.nodeName(r, "script") && s(r) || (i.appendChild(r),
                             r.getElementsByTagName !== c && (o = d.grep(d.merge([], r.getElementsByTagName("script")), s),
                                 l.splice.apply(l, [a + 1, 0].concat(o)),
                                 a += o.length));
                     return l
                 }
             );
             var C = d.event.add
                 , k = d.event.remove
                 , T = d.event.trigger
                 , x = d.fn.toggle
                 , $ = d.fn.live
                 , S = d.fn.die
                 , D = "ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess"
                 , M = RegExp("\\b(?:" + D + ")\\b")
                 , A = /(?:^|\s)hover(\.\S+|)\b/
                 , P = function(e) {
                 return "string" != typeof e || d.event.special.hover ? e : (A.test(e) && u("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),
                 e && e.replace(A, "mouseenter$1 mouseleave$1"))
             };
             d.event.props && "attrChange" !== d.event.props[0] && d.event.props.unshift("attrChange", "attrName", "relatedNode", "srcElement"),
             d.event.dispatch && e(d.event, "handle", d.event.dispatch, "jQuery.event.handle is undocumented and deprecated"),
                 d.event.add = function(e, t, i, n, a) {
                     e !== document && M.test(t) && u("AJAX events should be attached to document: " + t),
                         C.call(this, e, P(t || ""), i, n, a)
                 }
                 ,
                 d.event.remove = function(e, t, i, n, a) {
                     k.call(this, e, P(t) || "", i, n, a)
                 }
                 ,
                 d.fn.error = function() {
                     var e = Array.prototype.slice.call(arguments, 0);
                     return u("jQuery.fn.error() is deprecated"),
                         e.splice(0, 0, "error"),
                         arguments.length ? this.bind.apply(this, e) : (this.triggerHandler.apply(this, e),
                             this)
                 }
                 ,
                 d.fn.toggle = function(i, e) {
                     if (!d.isFunction(i) || !d.isFunction(e))
                         return x.apply(this, arguments);
                     u("jQuery.fn.toggle(handler, handler...) is deprecated");
                     var n = arguments
                         , t = i.guid || d.guid++
                         , a = 0
                         , r = function(e) {
                         var t = (d._data(this, "lastToggle" + i.guid) || 0) % a;
                         return d._data(this, "lastToggle" + i.guid, t + 1),
                             e.preventDefault(),
                         n[t].apply(this, arguments) || !1
                     };
                     for (r.guid = t; n.length > a; )
                         n[a++].guid = t;
                     return this.click(r)
                 }
                 ,
                 d.fn.live = function(e, t, i) {
                     return u("jQuery.fn.live() is deprecated"),
                         $ ? $.apply(this, arguments) : (d(this.context).on(e, this.selector, t, i),
                             this)
                 }
                 ,
                 d.fn.die = function(e, t) {
                     return u("jQuery.fn.die() is deprecated"),
                         S ? S.apply(this, arguments) : (d(this.context).off(e, this.selector || "**", t),
                             this)
                 }
                 ,
                 d.event.trigger = function(e, t, i, n) {
                     return i || M.test(e) || u("Global events are undocumented and deprecated"),
                         T.call(this, e, t, i || document, n)
                 }
                 ,
                 d.each(D.split("|"), function(e, t) {
                     d.event.special[t] = {
                         setup: function() {
                             var e = this;
                             return e !== document && (d.event.add(document, t + "." + d.guid, function() {
                                 d.event.trigger(t, null, e, !0)
                             }),
                                 d._data(this, t, d.guid++)),
                                 !1
                         },
                         teardown: function() {
                             return this !== document && d.event.remove(document, t + "." + d._data(this, t)),
                                 !1
                         }
                     }
                 })
         }(jQuery, window),
         define("jquery-migrate", function() {}),
         function(r) {
             var s;
             r.fn.jqprint = function(e) {
                 s = r.extend({}, r.fn.jqprint.defaults, e);
                 var t = this instanceof jQuery ? this : r(this);
                 if (s.operaSupport && r.browser.opera) {
                     var i = window.open("", "jqPrint-preview");
                     i.document.open();
                     var n = i.document
                 } else {
                     var a = r("<iframe  />");
                     s.debug || a.css({
                         position: "absolute",
                         width: "0px",
                         height: "0px",
                         left: "-600px",
                         top: "-600px"
                     }),
                         a.appendTo("body");
                     n = a[0].contentWindow.document
                 }
                 s.importCSS && (0 < r("link[media=print]").length ? r("link[media=print]").each(function() {
                     n.write("<link type='text/css' rel='stylesheet' href='" + r(this).attr("href") + "' media='print' />")
                 }) : r("link").each(function() {
                     n.write("<link type='text/css' rel='stylesheet' href='" + r(this).attr("href") + "' />")
                 })),
                     s.printContainer ? n.write(t.outer()) : t.each(function() {
                         n.write(r(this).html())
                     }),
                     n.close(),
                     (s.operaSupport && r.browser.opera ? i : a[0].contentWindow).focus(),
                     setTimeout(function() {
                         (s.operaSupport && r.browser.opera ? i : a[0].contentWindow).print(),
                         i && i.close()
                     }, 1e3)
             }
                 ,
                 r.fn.jqprint.defaults = {
                     debug: !1,
                     importCSS: !0,
                     printContainer: !0,
                     operaSupport: !0
                 },
                 jQuery.fn.outer = function() {
                     return r(r("<div></div>").html(this.clone())).html()
                 }
         }(jQuery),
         define("jqprint", ["jquery-migrate"], function() {}),
         define("views/waybill/item", ["templates", "moment", "helper", "views/waybill/detail/routes", "views/waybill/detail/childRoute", "event", "sflayer", "JqueryRotate", "JsBarcode", "jqprint"], function(n, e, a, i, r, s, o) {
             return Backbone.View.extend({
                 events: {
                     "click .tabs li": "tabsToggle",
                     "click .a_link_login": "login",
                     "click  .product-name a": "openProductTypeLink",
                     "click .delivery-brief": "preshowBillInfo",
                     "click .signedBill": "fetchsignedBill",
                     "click .rotate": "rotatePic",
                     "click .print": "printPic"
                 },
                 initialize: function() {
                     this.childRouteNO = "",
                         s.trigger(s.RegisterLoginCallback, function() {
                             $("#queryBill").trigger("click")
                         }),
                     "0" == this.model.get("billType") && $(".quickLogout .logout").trigger("click")
                 },
                 detailViews: function() {
                     var e = [];
                     if (e.push(new i({
                             model: this.model
                         })),
                         this.model.get("childSet") && 0 < this.model.get("childSet").length) {
                         var t = this.model.get("childSet");
                         this.childRouteNO = t.join(","),
                             e.push(new r({
                                 model: this.model
                             }))
                     }
                     return e
                 },
                 render: function() {
                     var t = this.detailViews();
                     this.$el.html(n.waybillResult({
                         result: this.model.toJSON(),
                         detailViewsLength: t.length,
                         expressState: this.getExpressState(this.model),
                         certifiedShippingImgUrl: this.getCertifiedShippingImgUrl(this.model),
                         T13_virtualAddressCodeList: a.getT13_virtualAddressCodeList(),
                         T14_virtualAddressCodeList: a.getT14_virtualAddressCodeList(),
                         isCNlocation: "cn" == a.getSiteLocation(),
                         isRootMenu: !0
                     }));
                     var e = a.getArrayFromCookie("billNOs");
                     (e = _.without(e, this.model.toJSON().id)).unshift(this.model.toJSON().id),
                         a.setArrayToCookie("billNOs", e, 6),
                         s.trigger(s.nearlyBillCookied);
                     var i = this;
                     1 == t.length ? this.$(".delivery-detail .tab-details").append(t[0].$el) : _.each(t, function(e) {
                         e.tab.css("width", 100 / t.length + "%"),
                             i.$(".delivery-detail .tabs").append(e.tab),
                             i.$(".delivery-detail .tab-details").append(e.$el)
                     }),
                         this.$("input").placeholder(),
                         this.showRoutes()
                 },
                 showRoutes: function() {
                     this.$(".tabs-wrapper .tabs>li").addClass("accessible-click").attr("tabindex", "0").attr("role", "tab").attr("aria-expanded", "false"),
                         this.$(".tabs-wrapper .tabs>li[data-tab=waybill-status]").addClass("active").attr("aria-expanded", "true"),
                         this.$(".tab-details>li[data-detail=waybill-status]").trigger("showTabDetail").show(),
                         this.$(".tab-details").slideDown(300)
                 },
                 login: function() {
                     s.trigger(s.impNeedlogin, {
                         succCallback: function() {
                             $("#queryBill").trigger("click")
                         },
                         cancelCallback: null
                     })
                 },
                 tabsToggle: function(e) {
                     var t = $(e.currentTarget);
                     if (t.data("tab")) {
                         if (t.hasClass("active"))
                             return t.removeClass("active").attr("aria-expanded", "false"),
                                 void this.$(".tab-details").slideUp(300);
                         this.$(".tabs li").removeClass("active").attr("aria-expanded", "false"),
                             t.addClass("active").attr("aria-expanded", "true");
                         var i = t.data("tab");
                         this.$(".tab-details>li[data-detail=" + i + "]").siblings().hide().end().trigger("showTabDetail").show().parent().slideDown(300)
                     }
                 },
                 openProductTypeLink: function(e) {
                     e.stopPropagation();
                     var t = $(e.currentTarget).attr("title")
                         , i = _l(t);
                     window.open(i)
                 },
                 getExpressState: function(e) {
                     return _.findWhere([{
                         state: "2",
                         className: "sfi-cancelled",
                         txt: "已作废"
                     }, {
                         state: "3",
                         className: "sfi-turnto",
                         txt: "已转寄"
                     }, {
                         state: "4",
                         className: "sfi-sendBack",
                         txt: "已退回"
                     }, {
                         state: "5",
                         className: "sfi-fastener",
                         txt: "已扣件"
                     }, {
                         state: "6",
                         className: "sfi-lost",
                         txt: "已遗失"
                     }], {
                         state: e.get("expressState")
                     })
                 },
                 getCertifiedShippingImgUrl: function(e) {
                     e.toJSON();
                     var t = e.get("internationalExpressFlag");
                     return t ? a.getResourceURL("images/certified_shipping/" + t + ".png") : null
                 },
                 preshowBillInfo: function(e) {
                     this.$(e.currentTarget).hasClass("mybill") && (this.waybillId = this.$(e.currentTarget).attr("id").split("-")[1],
                         this.showBillInfo())
                 },
                 getBarCode: function(e) {
                     JsBarcode("#barcode", e, {
                         width: 2,
                         height: 50,
                         displayValue: !0,
                         text: e,
                         textAlign: "justify"
                     })
                 },
                 showBillInfo: function() {
                     this.refresh = !0,
                         this.picHasLoaded = !1;
                     var t = this
                         , e = o.load(0, {
                         shade: [.2, "#000"]
                     });
                     this.model.electronicStub(this.waybillId).success(function(e) {
                         "0" == e.code ? (0 < $("#billInfoModal").length && $("#billInfoModal").remove(),
                             t.$el.append($(n.modalNoHeader({
                                 fade: !0,
                                 id: "billInfoModal",
                                 backdrop: !0,
                                 width: null,
                                 body: n.billInfo()
                             }))),
                             e.result ? (t.$("#waybillDetail").html(n.billInfoWaybillDetail({
                                 result: t.model.toJSON(),
                                 data: e.result
                             })),
                                 t.$("#electronicStub").html(n.billInfoElectronicStub({
                                     payType: a.getPayType(e.result.payType),
                                     data: e.result,
                                     feeListWidthoutTotalFee: _.filter(e.result.feeList, function(e) {
                                         return "1" != e.feeCode
                                     })
                                 })),
                                 t.getBarCode(e.result.waybillNo)) : (t.$("#waybillDetail").html(n.billInfoNoData()),
                                 t.$("#electronicStub").html(n.billInfoNoData())),
                             t.$(".waybillDetail").trigger("click"),
                             t.$("#billInfoModal").modal("show")) : "121" == e.code ? s.trigger(s.impNeedlogin, {
                             succCallback: t.showBillInfo.bind(t),
                             cancelCallback: null
                         }) : (0 < $("#billInfoModal").length && $("#billInfoModal").remove(),
                             t.$el.append($(n.modalNoHeader({
                                 fade: !0,
                                 id: "billInfoModal",
                                 backdrop: !0,
                                 width: null,
                                 body: n.billInfo()
                             }))),
                             t.$("#waybillDetail").html(n.billInfoNoData()),
                             t.$("#electronicStub").html(n.billInfoNoData()),
                             t.$(".waybillDetail").trigger("click"),
                             t.$("#billInfoModal").modal("show"))
                     }).error(function() {
                         o.msg(_l("获取失败"))
                     }).complete(function() {
                         o.close(e)
                     })
                 },
                 fetchsignedBill: function() {
                     if (this.refresh) {
                         var e = o.load(0, {
                             shade: [.2, "#000"]
                         })
                             , t = this;
                         this.model.requestsignFigureHead(this.model.signFigure(this.waybillId) + "&head=true").success(function(e) {
                             null == e || "" == e ? t.$("#signedBill").html(n.billInfoNoData()) : e.code && "121" == e.code ? s.trigger(s.impNeedlogin, {
                                 succCallback: t.fetchsignedBill.bind(t),
                                 cancelCallback: null
                             }) : e.code && "0" != e.code ? t.$("#signedBill").html(n.billInfoNoData()) : (t.$("#signedBill").html(n.billInfoSignedBill({
                                 data: t.model.signFigure(t.waybillId)
                             })),
                                 t.judgepicLoad(),
                                 t.refresh = !1)
                         }).error(function() {
                             t.$("#signedBill").html(n.billInfoNoData())
                         }).complete(function() {
                             o.close(e)
                         })
                     }
                 },
                 rotatePic: function() {
                     this.picHasLoaded && (0 < this.$(".signBillPic").length ? this.$(".signBillPic").rotateRight() : this.$("canvas").rotateRight(),
                         this.$("canvas").css({
                             width: "100%"
                         }))
                 },
                 judgepicLoad: function() {
                     var e = this
                         , t = setInterval(function() {
                         "visible" == e.$(".signBillPic").css("visibility") && 0 != e.$(".signBillPic").css("width") && (e.picHasLoaded = !0,
                             e.signBillPic = e.$(".signBillPic").clone(),
                             clearInterval(t))
                     })
                 },
                 printPic: function() {
                     this.picHasLoaded && this.signBillPic.jqprint()
                 }
             })
         }),
         define("views/waybill/itemsManager", ["collections/waybills", "templates", "views/waybill/item"], function(e, t, n) {
             return Backbone.View.extend({
                 renderBasic: function() {
                     this.$deliveries = $('<div class="deliveries"></div>'),
                         this.$el.html(this.$deliveries)
                 },
                 renderItem: function(e) {
                     var t = this.$deliveries
                         , i = $('<div class="delivery"></div>');
                     t.append(i),
                         new n({
                             el: i,
                             model: e
                         }).render()
                 },
                 renderNotFoundItem: function(e) {
                     this.$(".deliveries").append(t.waybillNotFound({
                         billNumber: e
                     }))
                 }
             })
         }),
         define("views/waybill/billNumber/resultsManager", ["views/waybill/itemsManager", "helper", "sflayer", "models/waybill"], function(e, t, n, a) {
             return e.extend({
                 initialize: function() {
                     e.prototype.initialize.apply(this, arguments),
                         this.listenTo(this.collection, "fetchItemsWithBillNumbers", this.fetch),
                         this.listenTo(this.collection, "fetchItemsWithBillNumbersWithTicket", this.fetchWidthTicket),
                         this.listenTo(this.collection, "resetItemsWithEmptyInput", this.resetItemsWithEmptyInput),
                         this.listenTo(this.collection, "fetchItemWithBillNumber", this.fetchBillRoute),
                         this.listenTo(this.collection, "hide", this.hide),
                         this.listenTo(this.collection, "show", this.show)
                 },
                 resetItemsWithEmptyInput: function() {
                     this.collection.reset(),
                         this.billNumbers = [],
                         this.render()
                 },
                 fetch: function(i) {
                     this.$el.slideUp(),
                         this.billNumbers = i.billNumbers,
                         this.collection.url = t.getRESTfulDomain("bills/" + this.billNumbers.join(",") + "/routes?app=bill") + "&answer=" + i.validationCode;
                     var n = this;
                     this.collection.fetch({
                         reset: !0,
                         success: function() {
                             n.render(),
                                 i.refreshValidationCode()
                         },
                         error: function(e, t) {
                             404 === t.status ? (n.collection.models = [],
                                 n.render(),
                                 i.refreshValidationCode()) : 403 == t.status ? i.showValidationCodeError() : i.showNetworkError()
                         },
                         complete: function(e) {
                             i.searchComplete()
                         }
                     })
                 },
                 fetchWidthTicket: function(i) {
                     this.$el.slideUp(),
                         this.billNumbers = i.billNumbers,
                         this.collection.url = t.getRESTfulDomain("bills/" + this.billNumbers.join(",") + "/routes?app=bill") + "&ticket=" + i.ticket;
                     var n = this;
                     n.collection.fetch({
                         reset: !0,
                         success: function() {
                             n.render()
                         },
                         error: function(e, t) {
                             404 === t.status ? (n.collection.models = [],
                                 n.render()) : i.showNetworkError()
                         },
                         complete: function(e) {
                             i.searchComplete()
                         }
                     })
                 },
                 fetchBillRoute: function(t) {
                     var i = this;
                     this.billNumbers = [t.billNo];
                     var e = n.load(0, {
                         shade: [.2, "#000"]
                     });
                     sfAjax.getBillDetailByNum({
                         data: {
                             id: t.billNo
                         },
                         success: function(e) {
                             0 == e.code ? (i.collection.reset([e.result], {
                                 reset: !0,
                                 parse: a.parse
                             }),
                                 i.render(),
                                 t.success()) : 600 == e.code && (i.collection.models = [],
                                 i.render(),
                                 t.success())
                         },
                         error: function(e, t) {
                             n.msg(_l("获取失败"))
                         },
                         complete: function() {
                             n.close(e)
                         }
                     })
                 },
                 render: function() {
                     var i = this;
                     this.$el.slideDown(),
                         this.renderBasic(),
                         _.each(this.billNumbers, function(e) {
                             var t = i.collection.findWaybillById(e);
                             t ? i.renderItem(t) : i.renderNotFoundItem(e)
                         })
                 },
                 hide: function() {
                     this.$el.hide()
                 },
                 show: function() {
                     this.$el.show()
                 }
             })
         }),
         function(t) {
             "function" == typeof define && define.amd ? define("tokenfield", ["jquery"], t) : "object" == typeof exports ? module.exports = global.window && global.window.$ ? t(global.window.$) : function(e) {
                     if (!e.$ && !e.fn)
                         throw new Error("Tokenfield requires a window object with jQuery or a jQuery instance");
                     return t(e.$ || e)
                 }
                 : t(jQuery)
         }(function(g, v) {
             "use strict";
             var o = function(e, t) {
                 var i = this;
                 this.$element = g(e),
                     this.textDirection = this.$element.css("direction"),
                     this.options = g.extend(!0, {}, g.fn.tokenfield.defaults, {
                         tokens: this.$element.val()
                     }, this.$element.data(), t),
                     this._delimiters = "string" == typeof this.options.delimiter ? [this.options.delimiter] : this.options.delimiter,
                     this._triggerKeys = g.map(this._delimiters, function(e) {
                         return e.charCodeAt(0)
                     }),
                     this._firstDelimiter = this._delimiters[0];
                 var n = g.inArray(" ", this._delimiters)
                     , a = g.inArray("-", this._delimiters);
                 0 <= n && (this._delimiters[n] = "\\s"),
                 0 <= a && (delete this._delimiters[a],
                     this._delimiters.unshift("-"));
                 var r = ["\\", "$", "[", "{", "^", ".", "|", "?", "*", "+", "(", ")"];
                 g.each(this._delimiters, function(e, t) {
                     0 <= g.inArray(t, r) && (i._delimiters[e] = "\\" + t)
                 });
                 var s, o = v && "function" == typeof v.getMatchedCSSRules ? v.getMatchedCSSRules(e) : null, l = e.style.width, d = this.$element.width();
                 o && g.each(o, function(e, t) {
                     t.style.width && (s = t.style.width)
                 });
                 var c = "rtl" === g("body").css("direction") ? "right" : "left"
                     , u = {
                     position: this.$element.css("position")
                 };
                 u[c] = this.$element.css(c),
                     this.$element.data("original-styles", u).data("original-tabindex", this.$element.prop("tabindex")).css("position", "absolute").css(c, "-10000px").prop("tabindex", -1),
                     this.$wrapper = g('<div class="tokenfield form-control" />'),
                 this.$element.hasClass("input-lg") && this.$wrapper.addClass("input-lg"),
                 this.$element.hasClass("input-sm") && this.$wrapper.addClass("input-sm"),
                 "rtl" === this.textDirection && this.$wrapper.addClass("rtl");
                 var h = this.$element.prop("id") || (new Date).getTime() + "" + Math.floor(100 * (1 + Math.random()));
                 this.$input = g('<input type="text" class="token-input" autocomplete="off" />').appendTo(this.$wrapper).prop("placeholder", this.$element.prop("placeholder")).prop("id", h + "-tokenfield").prop("tabindex", this.$element.data("original-tabindex"));
                 var p = g('label[for="' + this.$element.prop("id") + '"]');
                 if (p.length && p.prop("for", this.$input.prop("id")),
                         this.$copyHelper = g('<input type="text" />').css("position", "absolute").css(c, "-10000px").prop("tabindex", -1).prependTo(this.$wrapper),
                         l ? this.$wrapper.css("width", l) : s ? this.$wrapper.css("width", s) : this.$element.parents(".form-inline").length && this.$wrapper.width(d),
                     (this.$element.prop("disabled") || this.$element.parents("fieldset[disabled]").length) && this.disable(),
                         this.$mirror = g('<span style="position:absolute; top:-999px; left:0; white-space:pre;"/>'),
                         this.$input.css("min-width", this.options.minWidth + "px"),
                         g.each(["fontFamily", "fontSize", "fontWeight", "fontStyle", "letterSpacing", "textTransform", "wordSpacing", "textIndent"], function(e, t) {
                             i.$mirror[0].style[t] = i.$input.css(t)
                         }),
                         this.$mirror.appendTo("body"),
                         this.$wrapper.insertBefore(this.$element),
                         this.$element.prependTo(this.$wrapper),
                         this.update(),
                         this.setTokens(this.options.tokens, !1, !1),
                         this.listen(),
                         !g.isEmptyObject(this.options.autocomplete)) {
                     var f = "rtl" === this.textDirection ? "right" : "left"
                         , _ = g.extend({
                         minLength: this.options.showAutocompleteOnFocus ? 0 : null,
                         position: {
                             my: f + " top",
                             at: f + " bottom",
                             of: this.$wrapper
                         }
                     }, this.options.autocomplete);
                     this.$input.autocomplete(_)
                 }
                 if (!g.isEmptyObject(this.options.typeahead)) {
                     var m = g.extend({
                         minLength: this.options.showAutocompleteOnFocus ? 0 : null
                     }, this.options.typeahead);
                     this.$input.typeahead(null, m),
                         this.typeahead = !0
                 }
                 this.$element.trigger("tokenfield:initialize")
             };
             o.prototype = {
                 constructor: o,
                 createToken: function(e, t) {
                     "string" == typeof e && (e = {
                         value: e,
                         label: e
                     }),
                     void 0 === t && (t = !0);
                     var i = this
                         , n = g.trim(e.value)
                         , a = e.label && e.label.length ? g.trim(e.label) : n;
                     if (n.length && a.length && !(n.length < this.options.minLength))
                         if (this.options.limit && this.getTokens().length >= this.options.limit)
                             this.options.leakCallback && this.options.leakCallback();
                         else {
                             var r = g.Event("tokenfield:preparetoken");
                             if (r.token = {
                                     value: n,
                                     label: a
                                 },
                                     this.$element.trigger(r),
                                     r.token) {
                                 if (n = r.token.value,
                                         a = r.token.label,
                                     !this.options.allowDuplicates && g.grep(this.getTokens(), function(e) {
                                         return e.value === n
                                     }).length) {
                                     var s = g.Event("tokenfield:preventduplicate");
                                     s.token = {
                                         value: n,
                                         label: a
                                     },
                                         this.$element.trigger(s);
                                     var o = this.$wrapper.find('.token[data-value="' + n + '"]').addClass("duplicate");
                                     return setTimeout(function() {
                                         o.removeClass("duplicate")
                                     }, 250),
                                         !1
                                 }
                                 var l = g('<div class="token" />').attr("data-value", n).append('<span class="token-label" />').append('<a href="#" class="close" tabindex="-1">&times;</a>');
                                 this.$input.hasClass("tt-input") ? this.$input.parent().before(l) : this.$input.before(l),
                                     this.$input.css("width", this.options.minWidth + "px");
                                 var d = l.find(".token-label")
                                     , c = l.find(".close");
                                 this.maxTokenWidth || (this.maxTokenWidth = this.$wrapper.width() - c.outerWidth() - parseInt(c.css("margin-left"), 10) - parseInt(c.css("margin-right"), 10) - parseInt(l.css("border-left-width"), 10) - parseInt(l.css("border-right-width"), 10) - parseInt(l.css("padding-left"), 10) - parseInt(l.css("padding-right"), 10),
                                     parseInt(d.css("border-left-width"), 10),
                                     parseInt(d.css("border-right-width"), 10),
                                     parseInt(d.css("padding-left"), 10),
                                     parseInt(d.css("padding-right"), 10),
                                     parseInt(d.css("margin-left"), 10),
                                     parseInt(d.css("margin-right"), 10)),
                                     d.text(a).css("max-width", this.maxTokenWidth - 5),
                                     l.on("mousedown", function(e) {
                                         if (i.disabled)
                                             return !1;
                                         i.preventDeactivation = !0
                                     }).on("click", function(e) {
                                         return !i.disabled && (i.preventDeactivation = !1,
                                             e.ctrlKey || e.metaKey ? (e.preventDefault(),
                                                 i.toggle(l)) : void i.activate(l, e.shiftKey, e.shiftKey))
                                     }).on("dblclick", function(e) {
                                         if (i.disabled || !i.options.allowEditing)
                                             return !1;
                                         i.edit(l)
                                     }),
                                     c.on("click", g.proxy(this.remove, this));
                                 var u = g.Event("tokenfield:createtoken");
                                 u.token = r.token,
                                     u.relatedTarget = l.get(0),
                                     this.$element.trigger(u);
                                 var h = g.Event("change");
                                 return h.initiator = "tokenfield",
                                 t && this.$element.val(this.getTokensList()).trigger(h),
                                     this.update(),
                                     this.$input.get(0)
                             }
                         }
                 },
                 setTokens: function(e, t, i) {
                     if (e) {
                         t || this.$wrapper.find(".token").remove(),
                         void 0 === i && (i = !0),
                         "string" == typeof e && (e = this._delimiters.length ? e.split(new RegExp("[" + this._delimiters.join("") + "]")) : [e]);
                         var n = this;
                         return g.each(e, function(e, t) {
                             n.createToken(t, i)
                         }),
                             this.$element.get(0)
                     }
                 },
                 getTokenData: function(e) {
                     var t = e.map(function() {
                         var e = g(this);
                         return {
                             value: e.attr("data-value"),
                             label: e.find(".token-label").text()
                         }
                     }).get();
                     return 1 == t.length && (t = t[0]),
                         t
                 },
                 getTokens: function(e) {
                     var t = this
                         , i = []
                         , n = e ? ".active" : "";
                     return this.$wrapper.find(".token" + n).each(function() {
                         i.push(t.getTokenData(g(this)))
                     }),
                         i
                 },
                 getTokensList: function(e, t, i) {
                     var n = (e = e || this._firstDelimiter) + ((t = null != t ? t : this.options.beautify) && " " !== e ? " " : "");
                     return g.map(this.getTokens(i), function(e) {
                         return e.value
                     }).join(n)
                 },
                 getInput: function() {
                     return this.$input.val()
                 },
                 listen: function() {
                     var n = this;
                     this.$element.on("change", g.proxy(this.change, this)),
                         this.$wrapper.on("mousedown", g.proxy(this.focusInput, this)),
                         this.$input.on("focus", g.proxy(this.focus, this)).on("blur", g.proxy(this.blur, this)).on("paste", g.proxy(this.paste, this)).on("keydown", g.proxy(this.keydown, this)).on("keypress", g.proxy(this.keypress, this)).on("keyup", g.proxy(this.keyup, this)),
                         this.$copyHelper.on("focus", g.proxy(this.focus, this)).on("blur", g.proxy(this.blur, this)).on("keydown", g.proxy(this.keydown, this)).on("keyup", g.proxy(this.keyup, this)),
                         this.$input.on("keypress", g.proxy(this.update, this)).on("keyup", g.proxy(this.update, this)),
                         this.$input.on("autocompletecreate", function() {
                             var e = g(this).data("ui-autocomplete").menu.element
                                 , t = n.$wrapper.outerWidth() - parseInt(e.css("border-left-width"), 10) - parseInt(e.css("border-right-width"), 10);
                             e.css("min-width", t + "px")
                         }).on("autocompleteselect", function(e, t) {
                             return n.createToken(t.item) && (n.$input.val(""),
                             n.$input.data("edit") && n.unedit(!0)),
                                 !1
                         }).on("typeahead:selected", function(e, t, i) {
                             n.createToken(t) && (n.$input.typeahead("val", ""),
                             n.$input.data("edit") && n.unedit(!0))
                         }).on("typeahead:autocompleted", function(e, t, i) {
                             n.createToken(n.$input.val()),
                                 n.$input.typeahead("val", ""),
                             n.$input.data("edit") && n.unedit(!0)
                         }),
                         g(v).on("resize", g.proxy(this.update, this))
                 },
                 keydown: function(a) {
                     if (this.focused) {
                         var r = this;
                         switch (a.keyCode) {
                             case 8:
                                 if (!this.$input.is(document.activeElement))
                                     break;
                                 this.lastInputValue = this.$input.val();
                                 break;
                             case 37:
                                 e("rtl" === this.textDirection ? "next" : "prev");
                                 break;
                             case 38:
                                 t("prev");
                                 break;
                             case 39:
                                 e("rtl" === this.textDirection ? "prev" : "next");
                                 break;
                             case 40:
                                 t("next");
                                 break;
                             case 65:
                                 if (0 < this.$input.val().length || !a.ctrlKey && !a.metaKey)
                                     break;
                                 this.activateAll(),
                                     a.preventDefault();
                                 break;
                             case 9:
                             case 13:
                                 if (this.$input.data("ui-autocomplete") && this.$input.data("ui-autocomplete").menu.element.find("li:has(a.ui-state-focus)").length)
                                     break;
                                 if (this.$input.hasClass("tt-input") && this.$wrapper.find(".tt-cursor").length)
                                     break;
                                 if (this.$input.hasClass("tt-input") && this.$wrapper.find(".tt-hint").val().length)
                                     break;
                                 if (this.$input.is(document.activeElement) && this.$input.val().length || this.$input.data("edit"))
                                     return this.createTokensFromInput(a, this.$input.data("edit"));
                                 if (13 === a.keyCode) {
                                     if (!this.$copyHelper.is(document.activeElement) || 1 !== this.$wrapper.find(".token.active").length)
                                         break;
                                     if (!r.options.allowEditing)
                                         break;
                                     this.edit(this.$wrapper.find(".token.active"))
                                 }
                         }
                         this.lastKeyDown = a.keyCode
                     }
                     function e(e) {
                         if (r.$input.is(document.activeElement)) {
                             if (0 < r.$input.val().length)
                                 return;
                             e += "All";
                             var t = r.$input.hasClass("tt-input") ? r.$input.parent()[e](".token:first") : r.$input[e](".token:first");
                             if (!t.length)
                                 return;
                             r.preventInputFocus = !0,
                                 r.preventDeactivation = !0,
                                 r.activate(t),
                                 a.preventDefault()
                         } else
                             r[e](a.shiftKey),
                                 a.preventDefault()
                     }
                     function t(e) {
                         if (a.shiftKey) {
                             if (r.$input.is(document.activeElement)) {
                                 if (0 < r.$input.val().length)
                                     return;
                                 var t = r.$input.hasClass("tt-input") ? r.$input.parent()[e + "All"](".token:first") : r.$input[e + "All"](".token:first");
                                 if (!t.length)
                                     return;
                                 r.activate(t)
                             }
                             var i = "prev" === e ? "next" : "prev"
                                 , n = "prev" === e ? "first" : "last";
                             r.firstActiveToken[i + "All"](".token").each(function() {
                                 r.deactivate(g(this))
                             }),
                                 r.activate(r.$wrapper.find(".token:" + n), !0, !0),
                                 a.preventDefault()
                         }
                     }
                 },
                 keypress: function(e) {
                     if (this.lastKeyPressCode = e.keyCode,
                             this.lastKeyPressCharCode = e.charCode,
                         -1 !== g.inArray(e.charCode, this._triggerKeys) && this.$input.is(document.activeElement))
                         return this.$input.val() && this.createTokensFromInput(e),
                             !1
                 },
                 keyup: function(e) {
                     if (this.preventInputFocus = !1,
                             this.focused) {
                         switch (e.keyCode) {
                             case 8:
                                 if (this.$input.is(document.activeElement)) {
                                     if (this.$input.val().length || this.lastInputValue.length && 8 === this.lastKeyDown)
                                         break;
                                     this.preventDeactivation = !0;
                                     var t = this.$input.hasClass("tt-input") ? this.$input.parent().prevAll(".token:first") : this.$input.prevAll(".token:first");
                                     if (!t.length)
                                         break;
                                     this.activate(t)
                                 } else
                                     this.remove(e);
                                 break;
                             case 46:
                                 this.remove(e, "next")
                         }
                         this.lastKeyUp = e.keyCode
                     }
                 },
                 focus: function(e) {
                     this.focused = !0,
                         this.$wrapper.addClass("focus"),
                     this.$input.is(document.activeElement) && (this.$wrapper.find(".active").removeClass("active"),
                         this.firstActiveToken = null,
                     this.options.showAutocompleteOnFocus && this.search())
                 },
                 blur: function(e) {
                     this.focused = !1,
                         this.$wrapper.removeClass("focus"),
                     this.preventDeactivation || this.$element.is(document.activeElement) || (this.$wrapper.find(".active").removeClass("active"),
                         this.firstActiveToken = null),
                     !this.preventCreateTokens && (this.$input.data("edit") && !this.$input.is(document.activeElement) || this.options.createTokensOnBlur) && this.createTokensFromInput(e),
                         this.preventDeactivation = !1,
                         this.preventCreateTokens = !1
                 },
                 paste: function(e) {
                     var t = this;
                     try {
                         if (clipboardData) {
                             var i = clipboardData.getData("Text");
                             /^\d/.test(i) && (e.clipData = i.replace(/^\s+|\s+$/g, "").replace(/(\r\n|\n|\r)/gm, " "))
                         }
                     } catch (e) {}
                     setTimeout(function() {
                         t.createTokensFromInput(e)
                     }, 1)
                 },
                 change: function(e) {
                     "tokenfield" !== e.initiator && this.setTokens(this.$element.val())
                 },
                 createTokensFromInput: function(e, t) {
                     if (e.clipData && this.$input.val(e.clipData),
                             !(this.$input.val().length < this.options.minLength)) {
                         var i = this.getTokensList();
                         return this.setTokens(this.$input.val(), !0),
                             i == this.getTokensList() && this.$input.val().length ? !1 : (this.$input.hasClass("tt-input") ? this.$input.typeahead("val", "") : this.$input.val(""),
                             this.$input.data("edit") && this.unedit(t),
                                 !1)
                     }
                 },
                 next: function(e) {
                     if (e) {
                         var t = this.$wrapper.find(".active:first");
                         if (!(!t || !this.firstActiveToken) && t.index() < this.firstActiveToken.index())
                             return this.deactivate(t)
                     }
                     var i = this.$wrapper.find(".active:last").nextAll(".token:first");
                     i.length ? this.activate(i, e) : this.$input.focus()
                 },
                 prev: function(e) {
                     if (e) {
                         var t = this.$wrapper.find(".active:last");
                         if (!(!t || !this.firstActiveToken) && t.index() > this.firstActiveToken.index())
                             return this.deactivate(t)
                     }
                     var i = this.$wrapper.find(".active:first").prevAll(".token:first");
                     i.length || (i = this.$wrapper.find(".token:first")),
                         i.length || e ? this.activate(i, e) : this.$input.focus()
                 },
                 activate: function(e, t, i, n) {
                     if (e) {
                         if (void 0 === n)
                             n = !0;
                         if (i)
                             t = !0;
                         if (this.$copyHelper.focus(),
                             t || (this.$wrapper.find(".active").removeClass("active"),
                                 n ? this.firstActiveToken = e : delete this.firstActiveToken),
                             i && this.firstActiveToken) {
                             var a = this.firstActiveToken.index() - 2
                                 , r = e.index() - 2
                                 , s = this;
                             this.$wrapper.find(".token").slice(Math.min(a, r) + 1, Math.max(a, r)).each(function() {
                                 s.activate(g(this), !0)
                             })
                         }
                         e.addClass("active"),
                             this.$copyHelper.val(this.getTokensList(null, null, !0)).select()
                     }
                 },
                 activateAll: function() {
                     var t = this;
                     this.$wrapper.find(".token").each(function(e) {
                         t.activate(g(this), 0 !== e, !1, !1)
                     })
                 },
                 deactivate: function(e) {
                     e && (e.removeClass("active"),
                         this.$copyHelper.val(this.getTokensList(null, null, !0)).select())
                 },
                 toggle: function(e) {
                     e && (e.toggleClass("active"),
                         this.$copyHelper.val(this.getTokensList(null, null, !0)).select())
                 },
                 edit: function(e) {
                     if (e) {
                         var t = e.data("value")
                             , i = e.find(".token-label").text()
                             , n = g.Event("tokenfield:edittoken");
                         if (n.token = {
                                 value: t,
                                 label: i
                             },
                                 n.relatedTarget = e.get(0),
                                 this.$element.trigger(n),
                                 n.token) {
                             t = n.token.value,
                                 i = n.token.label,
                                 e.find(".token-label").text(t);
                             var a = e.outerWidth()
                                 , r = this.$input.hasClass("tt-input") ? this.$input.parent() : this.$input;
                             e.replaceWith(r),
                                 this.preventCreateTokens = !0,
                                 this.$input.val(t).select().data("edit", !0).width(a),
                                 this.update()
                         }
                     }
                 },
                 unedit: function(e) {
                     if ((this.$input.hasClass("tt-input") ? this.$input.parent() : this.$input).appendTo(this.$wrapper),
                             this.$input.data("edit", !1),
                             this.$mirror.text(""),
                             this.update(),
                             e) {
                         var t = this;
                         setTimeout(function() {
                             t.$input.focus()
                         }, 1)
                     }
                 },
                 remove: function(e, t) {
                     if (!this.$input.is(document.activeElement) && !this.disabled) {
                         var i = "click" === e.type ? g(e.target).closest(".token") : this.$wrapper.find(".token.active");
                         if ("click" !== e.type) {
                             if (!t)
                                 t = "prev";
                             if (this[t](),
                                 "prev" === t)
                                 var n = 0 === i.first().prevAll(".token:first").length
                         }
                         var a = g.Event("tokenfield:removetoken");
                         a.token = this.getTokenData(i);
                         var r = g.Event("change");
                         r.initiator = "tokenfield",
                             i.remove(),
                             this.$element.val(this.getTokensList()).trigger(a).trigger(r),
                         this.$wrapper.find(".token").length && "click" !== e.type && !n || this.$input.focus(),
                             this.$input.css("width", this.options.minWidth + "px"),
                             this.update(),
                             e.preventDefault(),
                             e.stopPropagation()
                     }
                 },
                 update: function(e) {
                     var t = this.$input.val()
                         , i = parseInt(this.$input.css("padding-left"), 10) + parseInt(this.$input.css("padding-right"), 10);
                     if (this.$input.data("edit")) {
                         if (t || (t = this.$input.prop("placeholder")),
                             t === this.$mirror.text())
                             return;
                         this.$mirror.text(t);
                         var n = this.$mirror.width() + 10;
                         if (n > this.$wrapper.width())
                             return this.$input.width(this.$wrapper.width());
                         this.$input.width(n)
                     } else {
                         if (this.$input.css("width", this.options.minWidth + "px"),
                             "rtl" === this.textDirection)
                             return this.$input.width(this.$input.offset().left + this.$input.outerWidth() - this.$wrapper.offset().left - parseInt(this.$wrapper.css("padding-left"), 10) - i - 1);
                         this.$input.width(this.$wrapper.offset().left + this.$wrapper.width() + parseInt(this.$wrapper.css("padding-left"), 10) - this.$input.offset().left - i - 2)
                     }
                 },
                 focusInput: function(e) {
                     if (!g(e.target).closest(".token").length && !g(e.target).closest(".token-input").length) {
                         var t = this;
                         setTimeout(function() {
                             t.$input.focus()
                         }, 0)
                     }
                 },
                 search: function() {
                     this.$input.data("ui-autocomplete") && this.$input.autocomplete("search")
                 },
                 disable: function() {
                     this.disabled = !0,
                         this.$input.prop("disabled", !0),
                         this.$element.prop("disabled", !0),
                         this.$wrapper.addClass("disabled")
                 },
                 enable: function() {
                     this.disabled = !1,
                         this.$input.prop("disabled", !1),
                         this.$element.prop("disabled", !1),
                         this.$wrapper.removeClass("disabled")
                 },
                 destroy: function() {
                     this.$element.val(this.getTokensList()),
                         this.$element.css(this.$element.data("original-styles")),
                         this.$element.prop("tabindex", this.$element.data("original-tabindex"));
                     var e = g('label[for="' + this.$input.prop("id") + '"]');
                     return e.length && e.prop("for", this.$element.prop("id")),
                         this.$element.insertBefore(this.$wrapper),
                         this.$element.removeData("original-styles"),
                         this.$element.removeData("original-tabindex"),
                         this.$element.removeData("bs.tokenfield"),
                         this.$wrapper.remove(),
                         this.$element
                 }
             };
             var e = g.fn.tokenfield;
             return g.fn.tokenfield = function(n, a) {
                 var r, s = [];
                 Array.prototype.push.apply(s, arguments);
                 var e = this.each(function() {
                     var e = g(this)
                         , t = e.data("bs.tokenfield")
                         , i = "object" == typeof n && n;
                     "string" == typeof n && t && t[n] ? (s.shift(),
                         r = t[n].apply(t, s)) : t || "string" == typeof n || a || e.data("bs.tokenfield", t = new o(this,i))
                 });
                 return void 0 !== r ? r : e
             }
                 ,
                 g.fn.tokenfield.defaults = {
                     minWidth: 60,
                     minLength: 0,
                     allowDuplicates: !1,
                     allowEditing: !0,
                     limit: 0,
                     autocomplete: {},
                     typeahead: {},
                     showAutocompleteOnFocus: !1,
                     createTokensOnBlur: !1,
                     delimiter: ",",
                     beautify: !0
                 },
                 g.fn.tokenfield.Constructor = o,
                 g.fn.tokenfield.noConflict = function() {
                     return g.fn.tokenfield = e,
                         this
                 }
                 ,
                 o
         }),
         define("views/quicktools/waybill", ["backbone", "tokenfield", "helper", "models/waybill", "jquery-placeholder"], function(e, t, i, a) {
             return e.View.extend({
                 events: {
                     "mouseout .tokenfield.form-control": "stopPropagation",
                     "focusin input.token-input": "setInputToken",
                     "focusout input.token-input": "setInputToken",
                     "click .submit.primary-button": "queryBillNumbersandPhone",
                     "click .form-wrap .icon a": "setInputToken",
                     "click .phone .icon a": "queryBillNumbersByPhone",
                     "click .nearlyWaybillNO": "fillBillNOAndQuery",
                     "input .phone input": "validatePhoneNumInput",
                     "click .uploadAddBook .button": "linkToAddressBookPageEvent"
                 },
                 initialize: function() {
                     this.$el.addClass("inithack");
                     var e = this.$(".bill-numbers-input").attr("placeholder");
                     this.setupTokenField(this.$(".bill-numbers-input"), e),
                     this.$el.find(".tokenfield").find(".token")[0] && this.$el.find(".tokenfield").find(".token").remove(),
                         this.$el.removeClass("inithack")
                 },
                 setInputToken: function(e) {
                     var t = this;
                     "focusin" === e.type || "click" === e.type ? (this.$(e.target).data("input-status", !0),
                         this.$el.find(".bill-number").removeClass("folded"),
                     0 < i.getArrayFromCookie("billNOs").length && this.$el.find(".nearlyWaybill").find(".nearlyWaybillNO").data("bill", i.getArrayFromCookie("billNOs")[0]).html(i.getArrayFromCookie("billNOs")[0]).end().show()) : (this.$(e.target).data("input-status", !1),
                     this.$el.find(".token").length || this.$el.find(".token-input").val() || setTimeout(function() {
                         t.$el.find(".tokenfield.form-control").hasClass("focus") || (t.$el.find(".bill-number").addClass("folded"),
                             t.$el.find(".nearlyWaybill").hide())
                     }, 200))
                 },
                 fillBillNOAndQuery: function(e) {
                     window.location.href = i.getDynamicURLWithContext("/waybill/#search/bill-number/" + $(e.target).data("bill"))
                 },
                 linkToAddressBookPageEvent: function(e) {
                     sfgather.trackClicks("点击一键导入", "105001")
                 },
                 stopPropagation: function(e) {
                     e.stopPropagation()
                 },
                 placeHolderToggle: function() {
                     if (0 === this.inputedBillNumbers().length) {
                         var e = this.$(".tokenfield.form-control")
                             , t = this.$(".token-input")
                             , i = e.offset().left + e.width() + parseInt(e.css("padding-left"), 10) - t.offset().left - 1;
                         t.attr("placeholder", this.placeholder).width(i).placeholder()
                     } else
                         this.$(".token-input").attr("placeholder", "").removeClass("placeholder")
                 },
                 setupTokenField: function(e, t) {
                     this.placeholder = t;
                     var i = this;
                     this.$tokenfield = e;
                     var n = function() {
                         window.setTimeout(function() {
                             i.validateBillNumbersInput(),
                                 i.validatePhoneNumInput()
                         }, 0)
                     };
                     i.$tokenfield.attr("placeholder", t).on("tokenfield:removetoken", function() {
                         i.$(".error[data-error=limit-exceeded]").hide(),
                             i.placeHolderToggle(),
                         i.inputValidate() && i.$(".error[data-error=bill-number-format]").hide(),
                             i.validateBillNumbersInput()
                     }).on("tokenfield:createtoken", function(e) {
                         a.validateBillNumber(e.token.value) || $(e.relatedTarget).addClass("invalid"),
                             i.placeHolderToggle(),
                             n()
                     }).on("tokenfield:preventduplicate", function() {
                         window.setTimeout(function() {
                             i.$(".error[data-error=bill-number-format]").show()
                         }, 200)
                     }).on("tokenfield:edittoken", function() {
                         i.$(".token-input").on("blur", function() {
                             n()
                         }).on("keyup", function(e) {
                             e.currentTarget.value.length || (i.placeHolderToggle(),
                                 n())
                         })
                     }).tokenfield({
                         createTokensOnBlur: !0,
                         delimiter: [",", "\n", "\t", " ", "，"],
                         limit: 20,
                         minWidth: 90,
                         leakCallback: function() {
                             i.$(".token-input").val(""),
                                 i.$(".error[data-error=limit-exceeded]").show()
                         }
                     }),
                         i.$(".token-input").attr("placeholder", t).placeholder()
                 },
                 inputedBillNumbers: function() {
                     var t;
                     try {
                         t = this.$tokenfield.tokenfield("getTokensList").split(",")
                     } catch (e) {
                         t = this.$tokenfield.tokenfield("getTokensList").val().split(",")
                     }
                     return t = _.map(t, function(e) {
                         return e.trim()
                     }),
                         _.compact(t)
                 },
                 hasInputs: function() {
                     var t = !1;
                     return _.each(this.inputedBillNumbers(), function(e) {
                         e.length && (t = !0)
                     }),
                         t
                 },
                 hasPhoneNumInputs: function() {
                     var e = !1;
                     return "" != $(".quick-tool .phone input").val() && (e = !0),
                         e
                 },
                 inputValidate: function() {
                     return a.validateBillNumbers(this.inputedBillNumbers())
                 },
                 inputPhoneValidate: function() {
                     var e = $(".quick-tool .phone input").val();
                     return "" == e || i.isValidPhoneNumber(e)
                 },
                 validatePhoneNumInput: function() {
                     this.inputPhoneValidate() ? this.$(".error[data-error=phone-number-format]").hide() : this.$(".error[data-error=phone-number-format]").show(),
                         this.updateQueryButtonStatus()
                 },
                 validateBillNumbersInput: function() {
                     this.inputValidate() ? this.$(".error[data-error=bill-number-format]").hide() : this.$(".error[data-error=bill-number-format]").show(),
                         this.updateQueryButtonStatus()
                 },
                 updateQueryButtonStatus: function() {
                     null != $(".quick-tool .phone input").val() ? !this.inputValidate() && !this.hasPhoneNumInputs() || !this.inputValidate() && !this.inputPhoneValidate() || !this.hasInputs() && !this.inputPhoneValidate() ? this.$("button").addClass("disabled") : this.$("button").removeClass("disabled") : this.inputValidate() ? this.$("button").removeClass("disabled") : this.$("button").addClass("disabled")
                 },
                 queryBillNumbersandPhone: function() {
                     sfgather.trackClicks("点击查询", "116003");
                     var e = $(".quick-tool .phone input").val();
                     if (null != e) {
                         if (!this.inputValidate() && !this.hasPhoneNumInputs() || !this.inputValidate() && !this.inputPhoneValidate() || !this.hasInputs() && !this.inputPhoneValidate())
                             return;
                         !this.hasInputs() && this.inputPhoneValidate() && this.hasPhoneNumInputs() || !this.inputValidate() && this.inputPhoneValidate() && this.hasPhoneNumInputs() ? window.location.href = i.getDynamicURLWithContext("/waybill/#search/phone-number/" + e) : window.location.href = i.getDynamicURLWithContext("/waybill/#search/bill-number/" + this.inputedBillNumbers().join(","))
                     } else {
                         if (!this.inputValidate())
                             return;
                         window.location.href = i.getDynamicURLWithContext("/waybill/#search/bill-number/" + this.inputedBillNumbers().join(","))
                     }
                 },
                 queryBillNumbersByPhone: function() {
                     var e = $(".quick-tool .phone input").val();
                     this.inputPhoneValidate() && (window.location.href = i.getDynamicURLWithContext("/waybill/#search/phone-number/" + e))
                 }
             })
         }),
         define("views/waybill/userBillList", ["backbone", "templates", "sflayer", "moment", "views/waybill/changeAppointBill", "helper"], function(e, i, a, n, r, s) {
             var o = {
                 0: {
                     statusTxt: "等待取件",
                     timeTxt: "预约上门时间",
                     statusIcon: "progress0"
                 },
                 2: {
                     statusTxt: "运送中",
                     timeTxt: "预计送达时间",
                     statusIcon: "progress3"
                 },
                 3: {
                     statusTxt: "派送中",
                     timeTxt: "预计送达时间",
                     statusIcon: "progress5"
                 },
                 4: {
                     statusTxt: "已签收",
                     timeTxt: "签收时间",
                     statusIcon: "progress6"
                 },
                 5: {
                     statusTxt: "已作废",
                     timeTxt: "作废时间",
                     statusIcon: "progress0"
                 },
                 8: {
                     statusTxt: "已退回",
                     timeTxt: "退回时间",
                     statusIcon: "progress3"
                 },
                 9: {
                     statusTxt: "已转寄",
                     timeTxt: "转寄时间",
                     statusIcon: "progress3"
                 }
             }
                 , l = {
                 "0or1": [{
                     statusTxt: "等待取件",
                     timeTxt: "预约上门时间",
                     statusIcon: "progress0"
                 }, {
                     statusTxt: "等待上门",
                     timeTxt: "预约上门时间",
                     statusIcon: "progress0"
                 }],
                 5: {
                     statusTxt: "已揽件",
                     timeTxt: "揽件时间",
                     statusIcon: "progress1"
                 },
                 7: {
                     statusTxt: "已取消",
                     timeTxt: "取消时间",
                     statusIcon: "progress0"
                 },
                 10: {
                     statusTxt: "已取件",
                     timeTxt: "取件时间",
                     statusIcon: "progress1"
                 },
                 12: {
                     statusTxt: "已关闭",
                     timeTxt: "关闭时间",
                     statusIcon: "progress0"
                 }
             }
                 , d = {
                 7: {
                     statusTxt: "已取消",
                     timeTxt: "取消时间",
                     statusIcon: "progress0"
                 },
                 12: {
                     statusTxt: "已关闭",
                     timeTxt: "关闭时间",
                     statusIcon: "progress0"
                 },
                 40038: {
                     statusTxt: "等待上门",
                     timeTxt: "",
                     statusIcon: "progress0"
                 },
                 40039: {
                     statusTxt: "待支付",
                     timeTxt: "",
                     statusIcon: "progress0"
                 },
                 40040: {
                     statusTxt: "待退款",
                     timeTxt: "",
                     statusIcon: "progress0"
                 },
                 40041: {
                     statusTxt: "已退款",
                     timeTxt: "退款时间",
                     statusIcon: "progress0"
                 },
                 40042: {
                     statusTxt: "已取消",
                     timeTxt: "取消时间",
                     statusIcon: "progress0"
                 },
                 40043: {
                     statusTxt: "运送中",
                     timeTxt: "",
                     statusIcon: "progress3"
                 },
                 40044: {
                     statusTxt: "预约完成",
                     timeTxt: "完成时间",
                     statusIcon: "progress0"
                 },
                 40049: {
                     statusTxt: "已拒单",
                     timeTxt: "拒单时间",
                     statusIcon: "progress0"
                 },
                 40050: {
                     statusTxt: "可接单",
                     timeTxt: "",
                     statusIcon: "progress0"
                 }
             };
             return e.View.extend({
                 data: {
                     list: [],
                     sfReq: null,
                     selectItem: null,
                     pager: {
                         pageNo: 1,
                         pageRows: 10
                     }
                 },
                 events: {
                     "click .item.canSelect": "selectItem",
                     "click .cancel-img": "cancel",
                     "click .remove-img": "delete",
                     "click .modify-img": "modify",
                     "mouseenter .bill-btn": "showTips",
                     "mouseleave .bill-btn": "hideTips"
                 },
                 initialize: function(e, t) {
                     this.$el.off(),
                         this.data = _.extend({}, this.data, t),
                         this.doRequest()
                 },
                 cancel: function(e) {
                     var t = this;
                     sfgather.trackClicks("取消预约", "115007");
                     var i = $(e.currentTarget).parents(".item");
                     a.confirm(_l("是否取消订单？"), {
                         btn: [_l("是"), _l("否")]
                     }, function() {
                         sfAjax.cancelAppointmentBill({
                             data: {
                                 appointmentNo: i.data("appointmentno"),
                                 pickupType: i.data("pickup-type")
                             },
                             success: function(e) {
                                 0 === e.code ? (a.msg(_l("取消成功")),
                                     t.doRequest()) : a.msg(_l("取消失败"))
                             },
                             error: function() {
                                 a.msg(_l("取消失败"))
                             }
                         })
                     }),
                         e.stopPropagation()
                 },
                 delete: function(e) {
                     var i = this
                         , n = $(e.currentTarget).parents(".item");
                     a.confirm(_l("是否删除订单？"), {
                         btn: [_l("是"), _l("否")]
                     }, function() {
                         var e = n.hasClass("appointBill") ? "0" : $(".my-send").hasClass(".active") ? "1" : "2"
                             , t = n.hasClass("appointBill") ? n.data("appointmentno") : n.data("id");
                         sfAjax.deleteWayBill({
                             data: {
                                 abno: t,
                                 deleteType: e
                             },
                             success: function(e) {
                                 0 === e.code ? (a.msg(_l("删除成功")),
                                     i.doRequest()) : a.msg(_l("删除失败"))
                             },
                             error: function() {
                                 a.msg(_l("删除失败"))
                             }
                         })
                     }),
                         e.stopPropagation()
                 },
                 modify: function(e) {
                     e && e.stopPropagation();
                     var t = this;
                     if (this.appointmentNo = e ? this.$(e.currentTarget).closest(".appointBill").data("appointmentno") : this.appointmentNo,
                             e) {
                         if (this.$(e.currentTarget).hasClass("disabled"))
                             return;
                         this.$(e.currentTarget).toggleClass("disabled", !0)
                     }
                     sfAjax.changeAppointBill({
                         data: {
                             appointmentNo: this.appointmentNo
                         },
                         success: function(e) {
                             e && 0 == e.code && e.result ? s.isHK_MC_TW(e.result.appointmentDestDetail.locationCode) ? a.msg(_l("该预约单暂不支持修改")) : t.changeAppointBill = new r({
                                 billInfo: e.result,
                                 callback: function() {
                                     this.changeAppointBill.close(),
                                         this.doRequest()
                                 }
                                     .bind(t)
                             }) : a.msg(_l("该预约单暂不支持修改"))
                         },
                         error: function() {
                             a.msg(_l("网络错误"))
                         },
                         complete: function() {
                             e && t.$(e.currentTarget).toggleClass("disabled", !1)
                         },
                         login: {
                             succCallback: this.modify.bind(this),
                             cancelCallback: function() {
                                 a.msg(_l("修改失败"))
                             }
                         }
                     })
                 },
                 selectItem: function(e) {
                     var t = $(e.currentTarget);
                     this.data.selectItem && this.data.selectItem({
                         id: t.data("id") + "",
                         billType: t.data("billType")
                     })
                 },
                 doRequest: function(t) {
                     var i = this;
                     if (this.data.sfReq) {
                         var e = a.load(0, {
                             shade: [.2, "#000"]
                         });
                         this.data.sfReq({
                             data: {
                                 pageNo: this.data.pager.pageNo,
                                 pageRows: this.data.pager.pageRows
                             },
                             success: function(e) {
                                 0 == e.code && e.result && i.handlerData(e.result),
                                     i.render(),
                                 t && t()
                             },
                             complete: function() {
                                 a.close(e)
                             }
                         })
                     }
                 },
                 handlerData: function(e) {
                     if (e.content) {
                         var i = this;
                         e.content.forEach(function(e) {
                             var t;
                             10 != e.pickupType && 18 != e.pickupType ? "" == e.status ? (t = o[e.waybillStatus],
                                 2 == e.waybillStatus || 3 == e.waybillStatus ? e.time = e.expectedDeliveryTime : 0 == e.waybillStatus ? e.time = e.expectedTime || n(e.appointmentTime).add(1, "hours").format("YYYY-MM-DD HH:mm:ss") : e.time = e.endTime) : (t = l[e.appointmentStatue],
                                 0 == e.appointmentStatue || 1 == e.appointmentStatue ? (t = 3 == e.pickupType ? l["0or1"][0] : l["0or1"][1],
                                     e.time = e.expectedTime || n(e.appointmentTime).add(1, "hours").format("YYYY-MM-DD HH:mm:ss")) : e.time = e.endTime) : "" != e.appointmentStatue && (t = d[e.appointmentStatue],
                                 e.time = e.endTime),
                                 e.billNum = e.waybillno || (7 == e.appointmentStatue ? _l("无2") : _l("待定")),
                                 e.cancel = i.judgeIfCancel(e),
                                 e.delete = i.judgeIfDelete(e),
                                 e.modify = i.judgeIfModify(e),
                                 _.extend(e, t)
                         }),
                             this.data.list = e.content,
                             this.data.pager = {
                                 pageNo: e.pageNo,
                                 pageRows: e.pageRows,
                                 totalPage: e.totalPage
                             }
                     }
                 },
                 judgeIfCancel: function(e) {
                     if (e.waybillno && 10 != e.pickupType && 18 != e.pickupType && ("0" == e.appointmentStatue || 1 == e.appointmentStatue))
                         return !0;
                     if (!e.waybillno) {
                         if (10 == e.pickupType || 18 == e.pickupType)
                             return 40038 == e.appointmentStatue || 40039 == e.appointmentStatue;
                         if (7 != e.appointmentStatue && 12 != e.appointmentStatue)
                             return !0
                     }
                     return !1
                 },
                 judgeIfDelete: function(e) {
                     for (var t = e.waybillStatus || e.appointmentStatue, i = [4, 7, 12, 4001, 40042, 40044], n = 0; n < i.length; n++)
                         if (i[n] == t)
                             return !0
                 },
                 judgeIfModify: function(e) {
                     return "0" === e.appointmentStatue || "1" === e.appointmentStatue
                 },
                 showTips: function(e) {
                     var t = e.currentTarget;
                     this.modifyBotTip || (this.tipIndex = a.tips(_l($(t).data("tip")), e.target, {
                         tips: [1, "#333"],
                         time: !1,
                         tipsMore: !0,
                         isOutAnim: !1
                     }))
                 },
                 hideTips: function() {
                     this.tipIndex && a.close(this.tipIndex)
                 },
                 render: function() {
                     var a = this
                         , e = this.data.pager
                         , t = {
                         currentPage: e.pageNo,
                         totalPages: e.totalPage,
                         numberOfPages: e.pageRows,
                         bootstrapMajorVersion: 3,
                         alignment: "center",
                         itemTexts: function(e, t, i) {
                             switch (e) {
                                 case "first":
                                     return _l("首页2");
                                 case "prev":
                                     return _l("上一页");
                                 case "next":
                                     return _l("下一页");
                                 case "last":
                                     return _l("末页");
                                 case "page":
                                     return t
                             }
                         },
                         itemContainerClass: function(e, t, i) {
                             return t === i ? "active" : "pointer-cursor"
                         },
                         onPageClicked: function(e, t, i, n) {
                             a.data.pager.pageNo = n,
                                 a.doRequest(function() {
                                     $("html").scrollTop(290)
                                 })
                         }
                     };
                     this.$(".list-wrap").length || this.$el.html('<ul class="list-wrap"></ul><ul class="bootstrap-pagination"><ul class="pagination"></ul>'),
                         this.$(".list-wrap").html(i.userDeliveryList({
                             list: this.data.list
                         })),
                     e.totalPage && this.$(".pagination").bootstrapPaginator(t)
                 }
             })
         }),
         define("views/waybill/billNumber/subView", ["tokenfield", "backbone", "models/waybill", "views/quicktools/waybill", "helper", "tencentCaptcha", "templates", "views/waybill/userBillList", "event", "sflayer"], function(e, a, r, t, n, s, o, l, d, c) {
             return t.extend({
                 events: {
                     "click .primary-button": "query",
                     "click .clear-inputs": "clearInputs",
                     "click .verification-code .refresh": "refreshValidationCode",
                     "click .verification-code img": "refreshValidationCode",
                     "focus .verification-code input": "refreshValidationCode",
                     "keyup .verification-code input": "updateQueryButtonStatus",
                     "click .bill-number-list-content .bill": "fillInputToken",
                     "click .toggleWrapper": "toggleListContent",
                     "click .my-send": "showSendList",
                     "click .my-accept": "showAcceptList",
                     "click .login-btn": "doUpdate",
                     "click .bill-title .close": "closeRouteResult",
                     "click .nearly-records .remove": "deleteRecord"
                 },
                 initialize: function() {
                     var e = n.getSiteLocation()
                         , t = "cn" === e ? o.waybill : o.waybill_others;
                     this.$el.html(t({
                         region: e
                     }));
                     this.$(".primary-button");
                     var i = this.$(".tokenfield").attr("placeholder");
                     this.setupTokenField(this.$(".tokenfield"), i),
                         this.isGrayscaleUser = _webConfig.isGrayscaleUser,
                     this.isGrayscaleUser || this.showValidationCode(),
                         this.showNearlyBillNOList(),
                         this.listenTo(d, d.nearlyBillCookied, this.showNearlyBillNOList)
                 },
                 showNearlyBillNOList: function() {
                     var e = n.getArrayFromCookie("billNOs");
                     0 < e.length && this.$(".bill-number-list-content").html(o.nearlyBillNOList({
                         billArr: e
                     })).show()
                 },
                 showMySendList: function() {
                     this.$(".my-send").click()
                 },
                 fillInputToken: function(e) {
                     this.$tokenfield.tokenfield("createToken", $(e.target).data("bill").toString())
                 },
                 toggleListContent: function(e) {
                     var t = $(e.target).closest(".toggleWrapper").find(".arrow");
                     t.hasClass("up") ? (t.removeClass("up").addClass("down"),
                         this.$(".bill-number-list-content").find("ul").hide()) : (t.removeClass("down").addClass("up"),
                         this.$(".bill-number-list-content").find("ul").show())
                 },
                 updateBillNumbers: function(e) {
                     var t = e.indexOf("?");
                     -1 < t && (e = e.substring(0, t)),
                         this.$(".token-input").attr("placeholder", "").removeClass("placeholder"),
                         this.$tokenfield.tokenfield("setTokens", e.commaReplace().split(",")),
                         this.$(".token-input").val(""),
                     this.isGrayscaleUser && this.query()
                 },
                 query: function() {
                     if (!this.inputValidate() || !this.hasInputs())
                         return this.collection.trigger("resetItemsWithEmptyInput"),
                             void this.$(".error[data-error=bill-number-format]").show();
                     this.$(".error").hide(),
                         this.$(".token-input").val("");
                     var t = this.$tokenfield.tokenfield("getTokensList", ",").split(", ");
                     t = _.map(t, function(e) {
                         return e.trim()
                     });
                     var e = this.$(".primary-button");
                     r.fetchUserIpByNullUrl(t);
                     var i = this;
                     if (i.isGrayscaleUser)
                         "function" != typeof capDestroy ? a.ajax({
                             type: "GET",
                             url: s.initCap(),
                             success: function(e) {
                                 sfAjax.getScript({
                                     url: e,
                                     success: function() {
                                         i.capScriptAjaxsuccess(t)
                                     },
                                     error: function() {
                                         i.$(".error[data-error=server-network]").show()
                                     },
                                     complete: function(e, t) {
                                         "timeout" == t && c.msg("get tencentCaptcha js time out!")
                                     }
                                 })
                             },
                             error: function() {
                                 i.$(".error[data-error=server-network]").show()
                             }
                         }) : i.capScriptAjaxsuccess(t);
                     else {
                         e.button("loading");
                         var n = i.$(".verification-code input").val();
                         i.collection.trigger("fetchItemsWithBillNumbers", {
                             billNumbers: t,
                             validationCode: n,
                             refreshValidationCode: function() {
                                 i.refreshValidationCode("", "querySuccess")
                             },
                             showValidationCodeError: function() {
                                 i.showValidationCodeError()
                             },
                             showNetworkError: function() {
                                 i.$(".error[data-error=server-network]").show()
                             },
                             searchComplete: function() {
                                 e.button("reset")
                             }
                         })
                     }
                 },
                 capScriptAjaxsuccess: function(t) {
                     var i = this
                         , n = i.$(".primary-button");
                     s.refresh(function(e) {
                         0 == e.ret && (i.$(".route-result").show(),
                             i.$(".my-bills").hide(),
                             n.button("loading"),
                             i.collection.trigger("fetchItemsWithBillNumbersWithTicket", {
                                 billNumbers: t,
                                 ticket: e.ticket,
                                 showNetworkError: function() {
                                     i.$(".error[data-error=server-network]").show()
                                 },
                                 searchComplete: function() {
                                     n.button("reset")
                                 }
                             }))
                     })
                 },
                 validateValidationCode: function() {
                     return !!this.isGrayscaleUser || 5 == this.$(".verification-code input").val().length
                 },
                 updateQueryButtonStatus: function() {
                     var e = this.inputValidate() && this.hasInputs() && this.validateValidationCode()
                         , t = this.$("button");
                     e && t.text(t.data("resetText")),
                         t.toggleClass("disabled", !e)
                 },
                 showValidationCode: function() {
                     this.$(".verification-code").show(),
                         this.refreshValidationCode()
                 },
                 showValidationCodeError: function() {
                     this.$(".validation-code-error").show()
                 },
                 clearInputs: function() {
                     this.$(".token-input").val(""),
                         this.$tokenfield.tokenfield("setTokens", []),
                         this.$tokenfield.trigger("tokenfield:removetoken"),
                         this.$(".error").hide()
                 },
                 refreshValidationCode: function(e, t) {
                     var i = !1;
                     (t && "querySuccess" == t || e && ("IMG" == e.target.nodeName || "SPAN" == e.target.nodeName)) && (i = !0);
                     var n = this.$(".verification-code");
                     this.collection.refreshValidationCode(n, this.cid, i),
                         this.updateQueryButtonStatus()
                 },
                 showSendList: function(e) {
                     this.showBillList($(e.currentTarget), $(".send-list"), sfAjax.getMemberSendBillInfo)
                 },
                 showAcceptList: function(e) {
                     this.showBillList($(e.currentTarget), $(".accept-list"), sfAjax.getMemberRecBillInfo)
                 },
                 showBillList: function(e, t, i) {
                     var n = this;
                     d.trigger(d.RegisterLoginCallback, [function() {
                         e.click()
                     }
                         , function() {
                             n.$(".no-login-wrap").show(),
                                 n.$(".bill-list").hide()
                         }
                     ]),
                         e.addClass("active").siblings().removeClass("active"),
                         this.collection.trigger("hide"),
                         $(".no-login-wrap").hide(),
                         $(".bill-list").hide(),
                         $.cookie("loginUser") ? (t.show(),
                             new l({
                                 el: t
                             },{
                                 sfReq: i,
                                 selectItem: function(e) {
                                     n.collection.trigger("fetchItemWithBillNumber", {
                                         billNo: e.id,
                                         success: function() {
                                             n.$(".route-result").show(),
                                                 n.$(".my-bills").hide(),
                                                 $("html").scrollTop(100)
                                         }
                                     })
                                 }
                             })) : $(".no-login-wrap").show()
                 },
                 showLoginModal: function() {
                     var e = this;
                     d.trigger(d.Needlogin, {
                         succCallback: function() {
                             e.$(".bill-tab span.active").click()
                         }
                     })
                 },
                 closeRouteResult: function() {
                     this.$(".route-result").hide(),
                         this.$(".my-bills").show(),
                     $(".bill-tab .active").length || $(".bill-tab .my-send").click()
                 },
                 deleteRecord: function(e) {
                     var t = $(e.currentTarget);
                     n.delArrayItemFromCookie("billNOs", t.siblings(".bill").text()),
                         t.parent().remove()
                 }
             })
         }),
         define("utils/checkUtils", [], function() {
             return {
                 billNumber: function(e) {
                     return /^\d{12}$/.test(e.trim())
                 },
                 billNumbers: function(e) {
                     var t = this
                         , i = !0;
                     return _.each(e, function(e) {
                         e.length && !t.billNumber(e) && (i = !1)
                     }),
                         i
                 }
             }
         }),
         define("components/tokenInput", ["underscore", "baseView", "utils/checkUtils"], function(t, e, i) {
             return e.extend({
                 data: {
                     numbers: null,
                     limitCallback: null,
                     formatCallback: null
                 },
                 init: function(e) {
                     this.data.numbers = e.numbers,
                         this.data.limitCallback = e.limitCallback,
                         this.data.formatCallback = e.formatCallback,
                         this.setupTokenField()
                 },
                 setupTokenField: function() {
                     var t = this;
                     this.$el.on("tokenfield:removetoken", t.validate.bind(this)).on("tokenfield:createtoken", function(e) {
                         i.billNumber(e.token.value) || $(e.relatedTarget).addClass("invalid"),
                             t.validate()
                     }).on("tokenfield:preventduplicate", t.validate.bind(this, "duplicate")).tokenfield({
                         createTokensOnBlur: !0,
                         delimiter: [",", "\n", "\t", " ", "，"],
                         limit: 20,
                         minWidth: 90
                     }),
                         this.input = this.$el.parent().children(".token-input"),
                         this.placeholder = this.input.attr("placeholder")
                 },
                 validate: function(e) {
                     var t = this.getTokens();
                     return this.data.limitCallback(t.length < 20),
                         this.data.formatCallback("duplicate" !== e && i.billNumbers(t)),
                         this.placeHolderToggle(),
                     t.length < 20 && i.billNumbers(t)
                 },
                 getTokens: function() {
                     var e = this.$el.tokenfield("getTokens");
                     return t.map(e, function(e) {
                         return e.value
                     })
                 },
                 clear: function() {
                     this.$(".token-input").val(""),
                         this.$el.tokenfield("setTokens", []),
                         this.$el.trigger("tokenfield:removetoken")
                 },
                 createToken: function(e) {
                     this.$el.tokenfield("createToken", e)
                 },
                 placeHolderToggle: function() {
                     if (0 === this.getTokens().length) {
                         var e = this.$el.parent()
                             , t = e.offset().left + e.width() + parseInt(e.css("padding-left"), 10) - this.input.offset().left - 1;
                         this.input.attr("placeholder", this.placeholder).width(t)
                     } else
                         this.input.attr("placeholder", "")
                 }
             })
         }),
         define("views/waybill/billDetailItemMoreInfo", ["baseView", "templates", "jqprint", "JqueryRotate", "JsBarcode"], function(e, n) {
             return e.extend({
                 template: n.moreInfo,
                 layerOpts: {
                     title: "",
                     area: "580px",
                     closeBtn: !1
                 },
                 events: {
                     "click .rotate": "rotatePic",
                     "click .signedBill": "fetchsignedBill",
                     "click .print": "printPic",
                     "click li.tab-li": "tabChange",
                     "click .close": "close"
                 },
                 init: function(e) {
                     this.waybillId = e.waybillId,
                         this.latestInfo = e.latestInfo,
                         this.deliveryTm = e.deliveryTm,
                         this.refresh = !0,
                         this.picHasLoaded = !1
                 },
                 render: function() {
                     this.$el.html(this.template({})),
                         this.showBillInfo()
                 },
                 showBillInfo: function() {
                     var i = this
                         , e = layer.load();
                     sfAjax.electronicStub({
                         data: {
                             id: this.waybillId
                         },
                         success: function(e) {
                             if (e && 0 === e.code && e.result) {
                                 var t = _.filter(e.result.feeList, function(e) {
                                     return "1" != e.feeCode
                                 });
                                 i.$("#waybillDetail").html(n.moreInfoDetail({
                                     result: i.model.toJSON(),
                                     latestInfo: i.latestInfo,
                                     deliveryTm: i.deliveryTm,
                                     data: e.result
                                 })),
                                     i.$("#electronicStub").html(n.billInfoElectronicStub({
                                         payType: i.getPayType(e.result),
                                         data: e.result,
                                         feeListWidthoutTotalFee: t
                                     })),
                                     i.getBarCode(i.waybillId)
                             }
                         },
                         error: function() {
                             layer.msg(_l("获取失败"))
                         },
                         complete: function() {
                             layer.close(e)
                         },
                         login: {
                             succCallback: i.showBillInfo.bind(i),
                             cancelCallback: null
                         }
                     })
                 },
                 fetchsignedBill: function() {
                     if (this.refresh)
                         var e = layer.load()
                             , t = this
                             , i = sfAjax.signFigure({
                             data: {
                                 id: this.waybillId,
                                 head: !0
                             },
                             success: function(e) {
                                 e && 0 === e.code && (t.$("#signedBill").html(n.billInfoSignedBill({
                                     data: i
                                 })),
                                     t.judgepicLoad(),
                                     t.refresh = !1)
                             },
                             complete: function() {
                                 layer.close(e)
                             },
                             login: {
                                 succCallback: t.fetchsignedBill.bind(t),
                                 cancelCallback: null
                             }
                         })
                 },
                 getBarCode: function(e) {
                     JsBarcode("#barcode", e, {
                         width: 2,
                         height: 50,
                         displayValue: !0,
                         text: e,
                         textAlign: "justify"
                     })
                 },
                 tabChange: function() {
                     setTimeout(function() {
                         $(window).resize()
                     })
                 },
                 rotatePic: function() {
                     this.picHasLoaded && (0 < this.$(".signBillPic").length ? this.$(".signBillPic").rotateRight() : this.$("canvas").rotateRight(),
                         this.$("canvas").css({
                             width: "100%"
                         }))
                 },
                 printPic: function() {
                     this.picHasLoaded && this.signBillPic.jqprint()
                 },
                 getPayType: function(e) {
                     return "1" == e.payType ? "寄付现结" : "2" == e.payType ? "到付" : "3" == e.payType ? "第三方付" : "4" == e.payType ? "寄付月结" : "5" == e.payType ? "到付月结" : ""
                 },
                 judgepicLoad: function() {
                     var e = this
                         , t = setInterval(function() {
                         "visible" === e.$(".signBillPic").css("visibility") && 0 != e.$(".signBillPic").css("width") && (e.picHasLoaded = !0,
                             e.signBillPic = e.$(".signBillPic").clone(),
                             clearInterval(t))
                     })
                 }
             })
         }),
         define("views/waybill/billDetailItem", ["require", "tencentCaptcha", "baseView", "templates", "views/waybill/billDetails", "moment", "helper", "./billDetailItemMoreInfo", "event"], function(i, a, e, t, n, r, s, o, l) {
             var d = {
                 2: {
                     state: "2",
                     className: "sfi-cancelled",
                     txt: "已作废"
                 },
                 3: {
                     state: "3",
                     className: "sfi-turnto",
                     txt: "已转寄"
                 },
                 4: {
                     state: "4",
                     className: "sfi-sendBack",
                     txt: "已退回"
                 },
                 5: {
                     state: "5",
                     className: "sfi-fastener",
                     txt: "已扣件"
                 },
                 6: {
                     state: "6",
                     className: "sfi-lost",
                     txt: "已遗失"
                 },
                 99: {
                     state: "99",
                     className: "delivering",
                     txt: "运送中"
                 },
                 100: {
                     state: "100",
                     className: "delivered",
                     txt: "已签收"
                 }
             };
             return e.extend({
                 template: t.waybillResult2,
                 events: {
                     "click .tabs li": "tabsToggle",
                     "click .a_link_login": "login",
                     "click .delivery-brief": "preshowBillInfo",
                     "click .status-update-tab": "showRoutesByDate"
                 },
                 init: function(e) {
                     this.isRootMenu = e.isRootMenu
                 },
                 tabsToggle: function(e) {
                     var t = this
                         , i = $(e.currentTarget);
                     if (i.data("tab")) {
                         if (i.hasClass("active"))
                             return i.removeClass("active").attr("aria-expanded", "false"),
                                 void this.$(".tab-details").slideUp(300);
                         this.$(".tabs li").removeClass("active").attr("aria-expanded", "false"),
                             i.addClass("active").attr("aria-expanded", "true");
                         var n = i.data("tab");
                         "waybill-childRoute" === n && _webConfig.isGrayscaleUser && a.captcha(function(e) {
                             t.billDetails.doRequest(t.model.get("childSet").join(","), e.ticket, function() {})
                         }, function() {
                             t.$(".error[data-error=server-network]").show()
                         }),
                             this.$(".tab-details>li[data-detail=" + n + "]").siblings().hide().end().trigger("showTabDetail").show().parent().slideDown(300)
                     }
                 },
                 login: function() {
                     l.trigger(l.impNeedlogin, {
                         succCallback: function() {
                             $("#queryBill").trigger("click")
                         },
                         cancelCallback: null
                     })
                 },
                 preshowBillInfo: function(e) {
                     this.isRootMenu && this.$(e.currentTarget).hasClass("mybill") && new o({
                         waybillId: this.$(e.currentTarget).attr("id").split("-")[1],
                         latestInfo: this.getLatestInfo(this.model.toJSON()),
                         deliveryTm: this.getDeliveryTm(this.model.toJSON()),
                         model: this.model
                     })
                 },
                 showRoutesByDate: function(e) {
                     e.stopPropagation(),
                         $(e.target).parents(".status-update-box").toggleClass("open")
                 },
                 render: function() {
                     this.$el.html(this.template(this.handleData(this.model.toJSON())));
                     var e = s.getArrayFromCookie("billNOs");
                     (e = _.without(e, this.model.toJSON().id)).unshift(this.model.toJSON().id),
                         s.setArrayToCookie("billNOs", e, 6),
                         l.trigger(l.nearlyBillCookied);
                     var t = this.model.get("childSet");
                     this.isRootMenu && t && t.length && this.$(".tabs-wrapper").show(),
                         this.billDetails = new (i("./billDetails"))({
                             el: this.$(".childRoute-update"),
                             isRootMenu: !1
                         }),
                         this.showRoutes()
                 },
                 handleData: function(t) {
                     var i = this
                         , n = [];
                     t.routes && t.routes.length && _.each(t.routes, function(e) {
                         n.push(i.handlerRouteInfo(e, t.limitTypeCode))
                     });
                     var e = _.groupBy(t.routes, function(e) {
                         return r(e.scanDateTime).format("YYYY-MM-DD")
                     });
                     return {
                         result: this.model.toJSON(),
                         expressState: this.getExpressState(this.model),
                         certifiedShippingImgUrl: this.getCertifiedShippingImgUrl(this.model),
                         latestInfo: this.getLatestInfo(this.model.toJSON()),
                         deliveryTm: this.getDeliveryTm(this.model.toJSON()),
                         isCNlocation: "cn" == s.getSiteLocation(),
                         isRootMenu: this.isRootMenu,
                         groupRoute: _.pairs(e)
                     }
                 },
                 showRoutes: function() {
                     this.$(".tabs-wrapper .tabs>li").addClass("accessible-click").attr("tabindex", "0").attr("role", "tab").attr("aria-expanded", "false"),
                         this.$(".tabs-wrapper .tabs>li[data-tab=waybill-status]").addClass("active").attr("aria-expanded", "true"),
                         this.$(".tab-details>li[data-detail=waybill-status]").trigger("showTabDetail").show(),
                         this.$(".tab-details").slideDown(300)
                 },
                 getExpressState: function(e) {
                     return d[e.get("expressState")] || (e.signed ? d[100] : d[99])
                 },
                 getCertifiedShippingImgUrl: function(e) {
                     var t = e.get("internationalExpressFlag");
                     return t ? s.getResourceURL("images/certified_shipping/" + t + ".png") : null
                 },
                 getDeliveryTm: function(e) {
                     if ("hk" !== s.getSiteLocation() && ("en" === s.getSiteLanguage() || "sc" === s.getSiteLanguage()) && !1 === e.signed && e.dynamicExpectedDeliveryTm && e.destination) {
                         var t = e.dynamicExpectedDeliveryTm
                             , i = r(t.substring(0, 0 <= t.indexOf("+") ? t.indexOf("+") : t.length)).format("YYYY.MM.DD HH:mm");
                         return e.delay ? _l("预计派送时间重新计算中") : "<p>" + _p("预计<i>%(deliveryTime)s前</i>到达", {
                             deliveryTime: i
                         }) + '</p><p class="product-time-p">' + _l("(仅供参考，具体时效以实际派送时间为准)") + "</p>"
                     }
                 },
                 handlerRouteInfo: function(e, t) {
                     var i = {
                         scanDateTime: r(e.scanDateTime).format("YYYY-MM-DD HH:mm"),
                         remark: ""
                     };
                     if (e.remark) {
                         var n = e.remark.replace('id="opr_phone"', 'class="route-phone"');
                         "ru" === s.getSiteLocation() && ("T13" === t && 31 == e.opCode && _.contains(s.getT13_virtualAddressCodeList(), e.zoneCode) ? n += _l("Tip31") : "T14" === t && 204 == e.opCode && _.contains(s.getT14_virtualAddressCodeList(), e.zoneCode) && (n = _l("Tip204"))),
                             i.remark = n
                     }
                     return i
                 },
                 getLatestInfo: function(e) {
                     if (e.routes && e.routes.length)
                         return this.handlerRouteInfo(e.routes[0], e.limitTypeCode)
                 }
             })
         }),
         define("views/waybill/billDetails", ["baseView", "views/waybill/billDetailItem", "templates", "sflayer", "collections/waybills"], function(e, r, s, a, t) {
             return e.extend({
                 init: function(e) {
                     this.isRootMenu = e.isRootMenu
                 },
                 doRequest: function(t, e, i) {
                     var n = this;
                     this.resetItems(),
                         sfAjax.routes({
                             data: {
                                 billNumbers: t,
                                 ticket: e,
                                 app: "bill"
                             },
                             success: function(e) {
                                 n.render(t, n.handleData(e))
                             },
                             error: function() {
                                 a.msg(_l("网络错误"))
                             },
                             complete: i
                         })
                 },
                 doRequestVip: function(t, i) {
                     var n = this;
                     this.resetItems();
                     var e = a.load();
                     sfAjax.getBillDetailByNum({
                         data: {
                             id: t
                         },
                         success: function(e) {
                             0 === e.code ? (n.render(t, n.handleData([e.result])),
                                 i()) : 600 === e.code && (n.render(t, n.handleData([])),
                                 i())
                         },
                         error: function() {
                             a.msg(_l("获取失败"))
                         },
                         complete: function() {
                             a.close(e)
                         }
                     })
                 },
                 handleData: function(e) {
                     return new t(t.prototype.parse(e))
                 },
                 resetItems: function() {
                     this.$el.empty()
                 },
                 render: function(e, n) {
                     if (e) {
                         var a = this;
                         _.each(e.split(","), function(e) {
                             var t = n.findWaybillById(e);
                             if (t) {
                                 var i = $('<div class="delivery"></div>');
                                 a.$el.append(i),
                                     new r({
                                         el: i,
                                         model: t,
                                         isRootMenu: a.isRootMenu
                                     }).render()
                             } else
                                 a.$el.append(s.waybillNotFound({
                                     billNumber: e
                                 }))
                         })
                     }
                 }
             })
         }),
         define("views/waybill/waybill", ["baseView", "components/tokenInput", "views/waybill/userBillList", "./billDetails", "helper", "tencentCaptcha", "templates", "event"], function(e, a, r, s, o, l, d, c) {
             return e.extend({
                 template: d.waybill,
                 events: {
                     "click .primary-button": "query",
                     "click .clear-inputs": "clearInputs",
                     "click .bill-number-list-content a": "fillInputToken",
                     "click .my-send": "showSendList",
                     "click .my-accept": "showAcceptList",
                     "click .login-btn": "doUpdate",
                     "click .bill-title .close": "closeRouteResult",
                     "click .nearly-records .remove": "deleteRecord",
                     "click .verification-code .refresh": "refreshValidationCode",
                     "click .verification-code img": "refreshValidationCode",
                     "focus .verification-code input": "refreshValidationCode",
                     "keyup .verification-code input": "updateQueryButtonStatus"
                 },
                 init: function(e) {
                     var t = this
                         , i = e.numbers || ""
                         , n = o.getSiteLocation();
                     this.template = "cn" === n ? d.waybill : d.waybill_others,
                         this.$el.html(this.template({
                             region: n
                         })),
                         this.listenTo(c, c.nearlyBillCookied, this.renderNearlyBillNO),
                         this.tokenInput = new a({
                             el: this.$(".bill-number-input"),
                             numbers: i.commaReplace().split(","),
                             limitCallback: function(e) {
                                 e ? t.$(".error[data-error=limit-exceeded]").hide() : (t.$(".token-input").val(""),
                                     t.$(".error[data-error=limit-exceeded]").show())
                             },
                             formatCallback: function(e) {
                                 e ? t.$(".error[data-error=bill-number-format]").hide() : (t.$(".token-input").val(""),
                                     t.$(".error[data-error=bill-number-format]").show())
                             }
                         }),
                         this.billDetails = new s({
                             el: this.$(".delivery-wrapper"),
                             isRootMenu: !0
                         }),
                         i ? (this.tokenInput.createToken(i),
                             this.query()) : this.showSendList()
                 },
                 render: function() {
                     _webConfig.isGrayscaleUser || this.showValidationCode(),
                         this.renderNearlyBillNO()
                 },
                 renderNearlyBillNO: function() {
                     var t = ""
                         , e = o.getArrayFromCookie("billNOs");
                     _.each(e, function(e) {
                         t += '<li><a data-bill="' + e + '">' + e + '</a><span class="remove">×</span></li>'
                     }),
                         this.$(".nearly-records").html(t)
                 },
                 fillInputToken: function(e) {
                     this.tokenInput.createToken($(e.target).data("bill").toString())
                 },
                 query: function() {
                     var t = this
                         , i = this.$(".primary-button")
                         , n = this.tokenInput.getTokens() + "";
                     if (this.tokenInput.validate())
                         if (_webConfig.isGrayscaleUser)
                             l.captcha(function(e) {
                                 i.button("loading"),
                                     t.billDetails.doRequest(n, e.ticket, function() {
                                         t.$(".route-result").show(),
                                             t.$(".my-bills").hide(),
                                             i.button("reset")
                                     })
                             }, function() {
                                 t.$(".error[data-error=server-network]").show()
                             });
                         else {
                             i.button("loading");
                             var e = t.$(".verification-code input").val();
                             t.collection.trigger("fetchItemsWithBillNumbers", {
                                 billNumbers: n,
                                 validationCode: e,
                                 refreshValidationCode: function() {
                                     t.refreshValidationCode("", "querySuccess")
                                 },
                                 showValidationCodeError: function() {
                                     t.showValidationCodeError()
                                 },
                                 showNetworkError: function() {
                                     t.$(".error[data-error=server-network]").show()
                                 },
                                 searchComplete: function() {
                                     i.button("reset")
                                 }
                             })
                         }
                     else
                         this.billDetails.resetItems()
                 },
                 clearInputs: function() {
                     this.tokenInput.clear(),
                         this.$(".error").hide()
                 },
                 showSendList: function() {
                     this.showBillList($(".my-send"), $(".send-list"), sfAjax.getMemberSendBillInfo)
                 },
                 showAcceptList: function() {
                     this.showBillList($(".my-accept"), $(".accept-list"), sfAjax.getMemberRecBillInfo)
                 },
                 showBillList: function(e, t, i) {
                     var n = this;
                     c.trigger(c.RegisterLoginCallback, [function() {
                         e.click()
                     }
                         , function() {
                             n.$(".no-login-wrap").show(),
                                 n.$(".bill-list").hide()
                         }
                     ]),
                         e.addClass("active").siblings().removeClass("active"),
                         $(".no-login-wrap").hide(),
                         $(".bill-list").hide(),
                         $.cookie("loginUser") ? (t.show(),
                             new r({
                                 el: t
                             },{
                                 sfReq: i,
                                 selectItem: function(e) {
                                     n.billDetails.doRequestVip(e.id, function() {
                                         n.$(".route-result").show(),
                                             n.$(".my-bills").hide(),
                                             $("html").scrollTop(100)
                                     })
                                 }
                             })) : $(".no-login-wrap").show()
                 },
                 showLoginModal: function() {
                     var e = this;
                     c.trigger(c.Needlogin, {
                         succCallback: function() {
                             e.$(".bill-tab span.active").click()
                         }
                     })
                 },
                 closeRouteResult: function() {
                     this.$(".route-result").hide(),
                         this.$(".my-bills").show(),
                     $(".bill-tab .active").length || $(".bill-tab .my-send").click()
                 },
                 deleteRecord: function(e) {
                     var t = $(e.currentTarget);
                     o.delArrayItemFromCookie("billNOs", t.siblings("a").text()),
                         t.parent().remove()
                 },
                 refreshValidationCode: function(e, t) {
                     var i = !1;
                     (t && "querySuccess" == t || e && ("IMG" == e.target.nodeName || "SPAN" == e.target.nodeName)) && (i = !0);
                     var n = this.$(".verification-code");
                     this.collection.refreshValidationCode(n, this.cid, i),
                         this.updateQueryButtonStatus()
                 },
                 updateQueryButtonStatus: function() {
                     var e = this.inputValidate() && this.hasInputs() && this.validateValidationCode()
                         , t = this.$("button");
                     e && t.text(t.data("resetText")),
                         t.toggleClass("disabled", !e)
                 },
                 validateValidationCode: function() {
                     return !!this.isGrayscaleUser || 5 == this.$(".verification-code input").val().length
                 },
                 showValidationCode: function() {
                     this.$(".verification-code").show(),
                         this.refreshValidationCode()
                 },
                 showValidationCodeError: function() {
                     this.$(".validation-code-error").show()
                 }
             })
         }),
         define("views/waybill/router", ["views/waybill/billNumber/resultsManager", "views/waybill/billNumber/subView", "collections/waybills", "views/waybill/waybill"], function(t, i, e, n) {
             return Backbone.Router.extend({
                 initialize: function() {
                     _webConfig.useNewWaybill || (this.waybills = new e,
                         this.billNumberSubView = null,
                         this.phoneNumberSubView = null),
                         Backbone.history.start()
                 },
                 routes: {
                     "search/bill-number": "initSearchWrapper",
                     "search/bill-number/": "initSearchWrapper",
                     "search/bill-number/:numbers": "initSearchWrapper",
                     "*path": "initSearchWrapper"
                 },
                 initSearchWrapper: function(e) {
                     _webConfig.useNewWaybill ? new n({
                         el: $(".shipping-detail-page"),
                         numbers: e
                     }) : (this.billNumberSubView || (this.billNumberSubView = new i({
                         el: $(".shipping-detail-page"),
                         collection: this.waybills
                     }),
                         new t({
                             el: $(".delivery-wrapper"),
                             collection: this.waybills
                         })),
                         e ? this.billNumberSubView.updateBillNumbers(e) : this.billNumberSubView.showMySendList())
                 }
             })
         }),
         function(x, $) {
             var f = x(window);
             function S() {
                 return new Date(Date.UTC.apply(Date, arguments))
             }
             function o() {
                 var e = new Date;
                 return S(e.getFullYear(), e.getMonth(), e.getDate())
             }
             function e(e) {
                 return function() {
                     return this[e].apply(this, arguments)
                 }
             }
             var t, i = (t = {
                     get: function(e) {
                         return this.slice(e)[0]
                     },
                     contains: function(e) {
                         for (var t = e && e.valueOf(), i = 0, n = this.length; i < n; i++)
                             if (this[i].valueOf() === t)
                                 return i;
                         return -1
                     },
                     remove: function(e) {
                         this.splice(e, 1)
                     },
                     replace: function(e) {
                         e && (x.isArray(e) || (e = [e]),
                             this.clear(),
                             this.push.apply(this, e))
                     },
                     clear: function() {
                         this.length = 0
                     },
                     copy: function() {
                         var e = new i;
                         return e.replace(this),
                             e
                     }
                 },
                     function() {
                         var e = [];
                         return e.push.apply(e, arguments),
                             x.extend(e, t),
                             e
                     }
             ), v = function(e, t) {
                 this.dates = new i,
                     this.viewDate = o(),
                     this.focusDate = null,
                     this._process_options(t),
                     this.element = x(e),
                     this.isInline = !1,
                     this.isInput = this.element.is("input"),
                     this.component = !!this.element.is(".date") && this.element.find(".add-on, .input-group-addon, .btn"),
                     this.hasInput = this.component && this.element.find("input").length,
                 this.component && 0 === this.component.length && (this.component = !1),
                     this.picker = x(M.template),
                     this._buildEvents(),
                     this._attachEvents(),
                     this.isInline ? this.picker.addClass("datepicker-inline").appendTo(this.element) : this.picker.addClass("datepicker-dropdown dropdown-menu"),
                 this.o.rtl && this.picker.addClass("datepicker-rtl"),
                     this.viewMode = this.o.startView,
                 this.o.calendarWeeks && this.picker.find("tfoot th.today").attr("colspan", function(e, t) {
                     return parseInt(t) + 1
                 }),
                     this._allow_update = !1,
                     this.setStartDate(this._o.startDate),
                     this.setEndDate(this._o.endDate),
                     this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),
                     this.fillDow(),
                     this.fillMonths(),
                     this._allow_update = !0,
                     this.update(),
                     this.showMode(),
                 this.isInline && this.show()
             };
             v.prototype = {
                 constructor: v,
                 _process_options: function(e) {
                     this._o = x.extend({}, this._o, e);
                     var t = this.o = x.extend({}, this._o)
                         , i = t.language;
                     switch (D[i] || (i = i.split("-")[0],
                     D[i] || (i = u.language)),
                         t.language = i,
                         t.startView) {
                         case 2:
                         case "decade":
                             t.startView = 2;
                             break;
                         case 1:
                         case "year":
                             t.startView = 1;
                             break;
                         default:
                             t.startView = 0
                     }
                     switch (t.minViewMode) {
                         case 1:
                         case "months":
                             t.minViewMode = 1;
                             break;
                         case 2:
                         case "years":
                             t.minViewMode = 2;
                             break;
                         default:
                             t.minViewMode = 0
                     }
                     t.startView = Math.max(t.startView, t.minViewMode),
                     !0 !== t.multidate && (t.multidate = Number(t.multidate) || !1,
                     !1 !== t.multidate && (t.multidate = Math.max(0, t.multidate))),
                         t.multidateSeparator = String(t.multidateSeparator),
                         t.weekStart %= 7,
                         t.weekEnd = (t.weekStart + 6) % 7;
                     var n = M.parseFormat(t.format);
                     t.startDate !== -1 / 0 && (t.startDate ? t.startDate instanceof Date ? t.startDate = this._local_to_utc(this._zero_time(t.startDate)) : t.startDate = M.parseDate(t.startDate, n, t.language) : t.startDate = -1 / 0),
                     t.endDate !== 1 / 0 && (t.endDate ? t.endDate instanceof Date ? t.endDate = this._local_to_utc(this._zero_time(t.endDate)) : t.endDate = M.parseDate(t.endDate, n, t.language) : t.endDate = 1 / 0),
                         t.daysOfWeekDisabled = t.daysOfWeekDisabled || [],
                     x.isArray(t.daysOfWeekDisabled) || (t.daysOfWeekDisabled = t.daysOfWeekDisabled.split(/[,\s]*/)),
                         t.daysOfWeekDisabled = x.map(t.daysOfWeekDisabled, function(e) {
                             return parseInt(e, 10)
                         });
                     var a = String(t.orientation).toLowerCase().split(/\s+/g)
                         , r = t.orientation.toLowerCase();
                     if (a = x.grep(a, function(e) {
                             return /^auto|left|right|top|bottom$/.test(e)
                         }),
                             t.orientation = {
                                 x: "auto",
                                 y: "auto"
                             },
                         r && "auto" !== r)
                         if (1 === a.length)
                             switch (a[0]) {
                                 case "top":
                                 case "bottom":
                                     t.orientation.y = a[0];
                                     break;
                                 case "left":
                                 case "right":
                                     t.orientation.x = a[0]
                             }
                         else
                             r = x.grep(a, function(e) {
                                 return /^left|right$/.test(e)
                             }),
                                 t.orientation.x = r[0] || "auto",
                                 r = x.grep(a, function(e) {
                                     return /^top|bottom$/.test(e)
                                 }),
                                 t.orientation.y = r[0] || "auto";
                     else
                         ;
                 },
                 _events: [],
                 _secondaryEvents: [],
                 _applyEvents: function(e) {
                     for (var t, i, n, a = 0; a < e.length; a++)
                         t = e[a][0],
                             2 === e[a].length ? (i = $,
                                 n = e[a][1]) : 3 === e[a].length && (i = e[a][1],
                                 n = e[a][2]),
                             t.on(n, i)
                 },
                 _unapplyEvents: function(e) {
                     for (var t, i, n, a = 0; a < e.length; a++)
                         t = e[a][0],
                             2 === e[a].length ? (n = $,
                                 i = e[a][1]) : 3 === e[a].length && (n = e[a][1],
                                 i = e[a][2]),
                             t.off(i, n)
                 },
                 _buildEvents: function() {
                     this.isInput ? this._events = [[this.element, {
                         focus: x.proxy(this.show, this),
                         keyup: x.proxy(function(e) {
                             -1 === x.inArray(e.keyCode, [27, 37, 39, 38, 40, 32, 13, 9]) && this.update()
                         }, this),
                         keydown: x.proxy(this.keydown, this)
                     }]] : this.component && this.hasInput ? this._events = [[this.element.find("input"), {
                         focus: x.proxy(this.show, this),
                         keyup: x.proxy(function(e) {
                             -1 === x.inArray(e.keyCode, [27, 37, 39, 38, 40, 32, 13, 9]) && this.update()
                         }, this),
                         keydown: x.proxy(this.keydown, this)
                     }], [this.component, {
                         click: x.proxy(this.show, this)
                     }]] : this.element.is("div") ? this.isInline = !0 : this._events = [[this.element, {
                         click: x.proxy(this.show, this)
                     }]],
                         this._events.push([this.element, "*", {
                             blur: x.proxy(function(e) {
                                 this._focused_from = e.target
                             }, this)
                         }], [this.element, {
                             blur: x.proxy(function(e) {
                                 this._focused_from = e.target
                             }, this)
                         }]),
                         this._secondaryEvents = [[this.picker, {
                             click: x.proxy(this.click, this)
                         }], [x(window), {
                             resize: x.proxy(this.place, this)
                         }], [x(document), {
                             "mousedown touchstart": x.proxy(function(e) {
                                 this.element.is(e.target) || this.element.find(e.target).length || this.picker.is(e.target) || this.picker.find(e.target).length || this.hide()
                             }, this)
                         }]]
                 },
                 _attachEvents: function() {
                     this._detachEvents(),
                         this._applyEvents(this._events)
                 },
                 _detachEvents: function() {
                     this._unapplyEvents(this._events)
                 },
                 _attachSecondaryEvents: function() {
                     this._detachSecondaryEvents(),
                         this._applyEvents(this._secondaryEvents)
                 },
                 _detachSecondaryEvents: function() {
                     this._unapplyEvents(this._secondaryEvents)
                 },
                 _trigger: function(e, t) {
                     var i = t || this.dates.get(-1)
                         , n = this._utc_to_local(i);
                     this.element.trigger({
                         type: e,
                         date: n,
                         dates: x.map(this.dates, this._utc_to_local),
                         format: x.proxy(function(e, t) {
                             0 === arguments.length ? (e = this.dates.length - 1,
                                 t = this.o.format) : "string" == typeof e && (t = e,
                                 e = this.dates.length - 1),
                                 t = t || this.o.format;
                             var i = this.dates.get(e);
                             return M.formatDate(i, t, this.o.language)
                         }, this)
                     })
                 },
                 show: function() {
                     this.isInline || this.picker.appendTo("body"),
                         this.picker.show(),
                         this.place(),
                         this._attachSecondaryEvents(),
                         this._trigger("show")
                 },
                 hide: function() {
                     this.isInline || this.picker.is(":visible") && (this.focusDate = null,
                         this.picker.hide().detach(),
                         this._detachSecondaryEvents(),
                         this.viewMode = this.o.startView,
                         this.showMode(),
                     this.o.forceParse && (this.isInput && this.element.val() || this.hasInput && this.element.find("input").val()) && this.setValue(),
                         this._trigger("hide"))
                 },
                 remove: function() {
                     this.hide(),
                         this._detachEvents(),
                         this._detachSecondaryEvents(),
                         this.picker.remove(),
                         delete this.element.data().datepicker,
                     this.isInput || delete this.element.data().date
                 },
                 _utc_to_local: function(e) {
                     return e && new Date(e.getTime() + 6e4 * e.getTimezoneOffset())
                 },
                 _local_to_utc: function(e) {
                     return e && new Date(e.getTime() - 6e4 * e.getTimezoneOffset())
                 },
                 _zero_time: function(e) {
                     return e && new Date(e.getFullYear(),e.getMonth(),e.getDate())
                 },
                 _zero_utc_time: function(e) {
                     return e && new Date(Date.UTC(e.getUTCFullYear(), e.getUTCMonth(), e.getUTCDate()))
                 },
                 getDates: function() {
                     return x.map(this.dates, this._utc_to_local)
                 },
                 getUTCDates: function() {
                     return x.map(this.dates, function(e) {
                         return new Date(e)
                     })
                 },
                 getDate: function() {
                     return this._utc_to_local(this.getUTCDate())
                 },
                 getUTCDate: function() {
                     return new Date(this.dates.get(-1))
                 },
                 setDates: function() {
                     var e = x.isArray(arguments[0]) ? arguments[0] : arguments;
                     this.update.apply(this, e),
                         this._trigger("changeDate"),
                         this.setValue()
                 },
                 setUTCDates: function() {
                     var e = x.isArray(arguments[0]) ? arguments[0] : arguments;
                     this.update.apply(this, x.map(e, this._utc_to_local)),
                         this._trigger("changeDate"),
                         this.setValue()
                 },
                 setDate: e("setDates"),
                 setUTCDate: e("setUTCDates"),
                 setValue: function() {
                     var e = this.getFormattedDate();
                     this.isInput ? this.element.val(e).change() : this.component && this.element.find("input").val(e).change()
                 },
                 getFormattedDate: function(t) {
                     t === $ && (t = this.o.format);
                     var i = this.o.language;
                     return x.map(this.dates, function(e) {
                         return M.formatDate(e, t, i)
                     }).join(this.o.multidateSeparator)
                 },
                 setStartDate: function(e) {
                     this._process_options({
                         startDate: e
                     }),
                         this.update(),
                         this.updateNavArrows()
                 },
                 setEndDate: function(e) {
                     this._process_options({
                         endDate: e
                     }),
                         this.update(),
                         this.updateNavArrows()
                 },
                 setDaysOfWeekDisabled: function(e) {
                     this._process_options({
                         daysOfWeekDisabled: e
                     }),
                         this.update(),
                         this.updateNavArrows()
                 },
                 place: function() {
                     if (!this.isInline) {
                         var e = this.picker.outerWidth()
                             , t = this.picker.outerHeight()
                             , i = f.width()
                             , n = f.height()
                             , a = f.scrollTop()
                             , r = parseInt(this.element.parents().filter(function() {
                             return "auto" !== x(this).css("z-index")
                         }).first().css("z-index")) + 10
                             , s = this.component ? this.component.parent().offset() : this.element.offset()
                             , o = this.component ? this.component.outerHeight(!0) : this.element.outerHeight(!1)
                             , l = this.component ? this.component.outerWidth(!0) : this.element.outerWidth(!1)
                             , d = s.left
                             , c = s.top;
                         this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),
                             "auto" !== this.o.orientation.x ? (this.picker.addClass("datepicker-orient-" + this.o.orientation.x),
                             "right" === this.o.orientation.x && (d -= e - l)) : (this.picker.addClass("datepicker-orient-left"),
                                 s.left < 0 ? d -= s.left - 10 : s.left + e > i && (d = i - e - 10));
                         var u, h, p = this.o.orientation.y;
                         "auto" === p && (u = -a + s.top - t,
                             h = a + n - (s.top + o + t),
                             p = Math.max(u, h) === h ? "top" : "bottom"),
                             this.picker.addClass("datepicker-orient-" + p),
                             "top" === p ? c += o : c -= t + parseInt(this.picker.css("padding-top")),
                             this.picker.css({
                                 top: c,
                                 left: d,
                                 zIndex: r
                             })
                     }
                 },
                 _allow_update: !0,
                 update: function() {
                     if (this._allow_update) {
                         var e = this.dates.copy()
                             , i = []
                             , t = !1;
                         arguments.length ? (x.each(arguments, x.proxy(function(e, t) {
                             t instanceof Date && (t = this._local_to_utc(t)),
                                 i.push(t)
                         }, this)),
                             t = !0) : (i = (i = this.isInput ? this.element.val() : this.element.data("date") || this.element.find("input").val()) && this.o.multidate ? i.split(this.o.multidateSeparator) : [i],
                             delete this.element.data().date),
                             i = x.map(i, x.proxy(function(e) {
                                 return M.parseDate(e, this.o.format, this.o.language)
                             }, this)),
                             i = x.grep(i, x.proxy(function(e) {
                                 return e < this.o.startDate || e > this.o.endDate || !e
                             }, this), !0),
                             this.dates.replace(i),
                             this.dates.length ? this.viewDate = new Date(this.dates.get(-1)) : this.viewDate < this.o.startDate ? this.viewDate = new Date(this.o.startDate) : this.viewDate > this.o.endDate && (this.viewDate = new Date(this.o.endDate)),
                             t ? this.setValue() : i.length && String(e) !== String(this.dates) && this._trigger("changeDate"),
                         !this.dates.length && e.length && this._trigger("clearDate"),
                             this.fill()
                     }
                 },
                 fillDow: function() {
                     var e = this.o.weekStart
                         , t = "<tr>";
                     if (this.o.calendarWeeks) {
                         var i = '<th class="cw">&nbsp;</th>';
                         t += i,
                             this.picker.find(".datepicker-days thead tr:first-child").prepend(i)
                     }
                     for (; e < this.o.weekStart + 7; )
                         t += '<th class="dow">' + D[this.o.language].daysMin[e++ % 7] + "</th>";
                     t += "</tr>",
                         this.picker.find(".datepicker-days thead").append(t)
                 },
                 fillMonths: function() {
                     for (var e = "", t = 0; t < 12; )
                         e += '<span class="month">' + D[this.o.language].monthsShort[t++] + "</span>";
                     this.picker.find(".datepicker-months td").html(e)
                 },
                 setRange: function(e) {
                     e && e.length ? this.range = x.map(e, function(e) {
                         return e.valueOf()
                     }) : delete this.range,
                         this.fill()
                 },
                 getClassNames: function(e) {
                     var t = []
                         , i = this.viewDate.getUTCFullYear()
                         , n = this.viewDate.getUTCMonth()
                         , a = new Date;
                     return e.getUTCFullYear() < i || e.getUTCFullYear() === i && e.getUTCMonth() < n ? t.push("old") : (e.getUTCFullYear() > i || e.getUTCFullYear() === i && e.getUTCMonth() > n) && t.push("new"),
                     this.focusDate && e.valueOf() === this.focusDate.valueOf() && t.push("focused"),
                     this.o.todayHighlight && e.getUTCFullYear() === a.getFullYear() && e.getUTCMonth() === a.getMonth() && e.getUTCDate() === a.getDate() && t.push("today"),
                     -1 !== this.dates.contains(e) && t.push("active"),
                     (e.valueOf() < this.o.startDate || e.valueOf() > this.o.endDate || -1 !== x.inArray(e.getUTCDay(), this.o.daysOfWeekDisabled)) && t.push("disabled"),
                     this.range && (e > this.range[0] && e < this.range[this.range.length - 1] && t.push("range"),
                     -1 !== x.inArray(e.valueOf(), this.range) && t.push("selected")),
                         t
                 },
                 fill: function() {
                     var e, t = new Date(this.viewDate), i = t.getUTCFullYear(), n = t.getUTCMonth(), a = this.o.startDate !== -1 / 0 ? this.o.startDate.getUTCFullYear() : -1 / 0, r = this.o.startDate !== -1 / 0 ? this.o.startDate.getUTCMonth() : -1 / 0, s = this.o.endDate !== 1 / 0 ? this.o.endDate.getUTCFullYear() : 1 / 0, o = this.o.endDate !== 1 / 0 ? this.o.endDate.getUTCMonth() : 1 / 0, l = D[this.o.language].today || D.en.today || "", d = D[this.o.language].clear || D.en.clear || "";
                     this.picker.find(".datepicker-days thead th.datepicker-switch").text(D[this.o.language].months[n] + " " + i),
                         this.picker.find("tfoot th.today").text(l).toggle(!1 !== this.o.todayBtn),
                         this.picker.find("tfoot th.clear").text(d).toggle(!1 !== this.o.clearBtn),
                         this.updateNavArrows(),
                         this.fillMonths();
                     var c = S(i, n - 1, 28)
                         , u = M.getDaysInMonth(c.getUTCFullYear(), c.getUTCMonth());
                     c.setUTCDate(u),
                         c.setUTCDate(u - (c.getUTCDay() - this.o.weekStart + 7) % 7);
                     var h = new Date(c);
                     h.setUTCDate(h.getUTCDate() + 42),
                         h = h.valueOf();
                     for (var p, f = []; c.valueOf() < h; ) {
                         if (c.getUTCDay() === this.o.weekStart && (f.push("<tr>"),
                                 this.o.calendarWeeks)) {
                             var _ = new Date(+c + (this.o.weekStart - c.getUTCDay() - 7) % 7 * 864e5)
                                 , m = new Date(Number(_) + (11 - _.getUTCDay()) % 7 * 864e5)
                                 , g = new Date(Number(g = S(m.getUTCFullYear(), 0, 1)) + (11 - g.getUTCDay()) % 7 * 864e5)
                                 , v = (m - g) / 864e5 / 7 + 1;
                             f.push('<td class="cw">' + v + "</td>")
                         }
                         if ((p = this.getClassNames(c)).push("day"),
                             this.o.beforeShowDay !== x.noop) {
                             var y = this.o.beforeShowDay(this._utc_to_local(c));
                             y === $ ? y = {} : "boolean" == typeof y ? y = {
                                 enabled: y
                             } : "string" == typeof y && (y = {
                                 classes: y
                             }),
                             !1 === y.enabled && p.push("disabled"),
                             y.classes && (p = p.concat(y.classes.split(/\s+/))),
                             y.tooltip && (e = y.tooltip)
                         }
                         p = x.unique(p),
                             f.push('<td class="' + p.join(" ") + '"' + (e ? ' title="' + e + '"' : "") + ">" + c.getUTCDate() + "</td>"),
                         c.getUTCDay() === this.o.weekEnd && f.push("</tr>"),
                             c.setUTCDate(c.getUTCDate() + 1)
                     }
                     this.picker.find(".datepicker-days tbody").empty().append(f.join(""));
                     var b = this.picker.find(".datepicker-months").find("th:eq(1)").text(i).end().find("span").removeClass("active");
                     x.each(this.dates, function(e, t) {
                         t.getUTCFullYear() === i && b.eq(t.getUTCMonth()).addClass("active")
                     }),
                     (i < a || s < i) && b.addClass("disabled"),
                     i === a && b.slice(0, r).addClass("disabled"),
                     i === s && b.slice(o + 1).addClass("disabled"),
                         f = "",
                         i = 10 * parseInt(i / 10, 10);
                     var w = this.picker.find(".datepicker-years").find("th:eq(1)").text(i + "-" + (i + 9)).end().find("td");
                     i -= 1;
                     for (var C, k = x.map(this.dates, function(e) {
                         return e.getUTCFullYear()
                     }), T = -1; T < 11; T++)
                         C = ["year"],
                             -1 === T ? C.push("old") : 10 === T && C.push("new"),
                         -1 !== x.inArray(i, k) && C.push("active"),
                         (i < a || s < i) && C.push("disabled"),
                             f += '<span class="' + C.join(" ") + '">' + i + "</span>",
                             i += 1;
                     w.html(f)
                 },
                 updateNavArrows: function() {
                     if (this._allow_update) {
                         var e = new Date(this.viewDate)
                             , t = e.getUTCFullYear()
                             , i = e.getUTCMonth();
                         switch (this.viewMode) {
                             case 0:
                                 this.o.startDate !== -1 / 0 && t <= this.o.startDate.getUTCFullYear() && i <= this.o.startDate.getUTCMonth() ? this.picker.find(".prev").css({
                                     visibility: "hidden"
                                 }) : this.picker.find(".prev").css({
                                     visibility: "visible"
                                 }),
                                     this.o.endDate !== 1 / 0 && t >= this.o.endDate.getUTCFullYear() && i >= this.o.endDate.getUTCMonth() ? this.picker.find(".next").css({
                                         visibility: "hidden"
                                     }) : this.picker.find(".next").css({
                                         visibility: "visible"
                                     });
                                 break;
                             case 1:
                             case 2:
                                 this.o.startDate !== -1 / 0 && t <= this.o.startDate.getUTCFullYear() ? this.picker.find(".prev").css({
                                     visibility: "hidden"
                                 }) : this.picker.find(".prev").css({
                                     visibility: "visible"
                                 }),
                                     this.o.endDate !== 1 / 0 && t >= this.o.endDate.getUTCFullYear() ? this.picker.find(".next").css({
                                         visibility: "hidden"
                                     }) : this.picker.find(".next").css({
                                         visibility: "visible"
                                     })
                         }
                     }
                 },
                 click: function(e) {
                     e.preventDefault();
                     var t, i, n, a = x(e.target).closest("span, td, th");
                     if (1 === a.length)
                         switch (a[0].nodeName.toLowerCase()) {
                             case "th":
                                 switch (a[0].className) {
                                     case "datepicker-switch":
                                         this.showMode(1);
                                         break;
                                     case "prev":
                                     case "next":
                                         var r = M.modes[this.viewMode].navStep * ("prev" === a[0].className ? -1 : 1);
                                         switch (this.viewMode) {
                                             case 0:
                                                 this.viewDate = this.moveMonth(this.viewDate, r),
                                                     this._trigger("changeMonth", this.viewDate);
                                                 break;
                                             case 1:
                                             case 2:
                                                 this.viewDate = this.moveYear(this.viewDate, r),
                                                 1 === this.viewMode && this._trigger("changeYear", this.viewDate)
                                         }
                                         this.fill();
                                         break;
                                     case "today":
                                         var s = new Date;
                                         s = S(s.getFullYear(), s.getMonth(), s.getDate(), 0, 0, 0),
                                             this.showMode(-2);
                                         var o = "linked" === this.o.todayBtn ? null : "view";
                                         this._setDate(s, o);
                                         break;
                                     case "clear":
                                         var l;
                                         this.isInput ? l = this.element : this.component && (l = this.element.find("input")),
                                         l && l.val("").change(),
                                             this.update(),
                                             this._trigger("changeDate"),
                                         this.o.autoclose && this.hide()
                                 }
                                 break;
                             case "span":
                                 a.is(".disabled") || (this.viewDate.setUTCDate(1),
                                     a.is(".month") ? (n = 1,
                                         i = a.parent().find("span").index(a),
                                         t = this.viewDate.getUTCFullYear(),
                                         this.viewDate.setUTCMonth(i),
                                         this._trigger("changeMonth", this.viewDate),
                                     1 === this.o.minViewMode && this._setDate(S(t, i, n))) : (n = 1,
                                         i = 0,
                                         t = parseInt(a.text(), 10) || 0,
                                         this.viewDate.setUTCFullYear(t),
                                         this._trigger("changeYear", this.viewDate),
                                     2 === this.o.minViewMode && this._setDate(S(t, i, n))),
                                     this.showMode(-1),
                                     this.fill());
                                 break;
                             case "td":
                                 a.is(".day") && !a.is(".disabled") && (n = parseInt(a.text(), 10) || 1,
                                     t = this.viewDate.getUTCFullYear(),
                                     i = this.viewDate.getUTCMonth(),
                                     a.is(".old") ? 0 === i ? (i = 11,
                                         t -= 1) : i -= 1 : a.is(".new") && (11 === i ? (i = 0,
                                         t += 1) : i += 1),
                                     this._setDate(S(t, i, n)))
                         }
                     this.picker.is(":visible") && this._focused_from && x(this._focused_from).focus(),
                         delete this._focused_from
                 },
                 _toggle_multidate: function(e) {
                     var t = this.dates.contains(e);
                     if (e) {
                         if (!1 === this.o.multidate)
                             this.dates.clear(),
                                 this.dates.push(e);
                         else if (-1 !== t ? this.dates.remove(t) : this.dates.push(e),
                             "number" == typeof this.o.multidate)
                             for (; this.dates.length > this.o.multidate; )
                                 this.dates.remove(0)
                     } else
                         this.dates.clear()
                 },
                 _setDate: function(e, t) {
                     var i;
                     t && "date" !== t || this._toggle_multidate(e && new Date(e)),
                     t && "view" !== t || (this.viewDate = e && new Date(e)),
                         this.fill(),
                         this.setValue(),
                         this._trigger("changeDate"),
                         this.isInput ? i = this.element : this.component && (i = this.element.find("input")),
                     i && i.change(),
                     !this.o.autoclose || t && "date" !== t || this.hide()
                 },
                 moveMonth: function(e, t) {
                     if (!e)
                         return $;
                     if (!t)
                         return e;
                     var i, n, a = new Date(e.valueOf()), r = a.getUTCDate(), s = a.getUTCMonth(), o = Math.abs(t);
                     if (t = 0 < t ? 1 : -1,
                         1 === o)
                         n = -1 === t ? function() {
                                 return a.getUTCMonth() === s
                             }
                             : function() {
                                 return a.getUTCMonth() !== i
                             }
                             ,
                             i = s + t,
                             a.setUTCMonth(i),
                         (i < 0 || 11 < i) && (i = (i + 12) % 12);
                     else {
                         for (var l = 0; l < o; l++)
                             a = this.moveMonth(a, t);
                         i = a.getUTCMonth(),
                             a.setUTCDate(r),
                             n = function() {
                                 return i !== a.getUTCMonth()
                             }
                     }
                     for (; n(); )
                         a.setUTCDate(--r),
                             a.setUTCMonth(i);
                     return a
                 },
                 moveYear: function(e, t) {
                     return this.moveMonth(e, 12 * t)
                 },
                 dateWithinRange: function(e) {
                     return e >= this.o.startDate && e <= this.o.endDate
                 },
                 keydown: function(e) {
                     if (this.picker.is(":not(:visible)"))
                         27 === e.keyCode && this.show();
                     else {
                         var t, i, n, a, r = !1, s = this.focusDate || this.viewDate;
                         switch (e.keyCode) {
                             case 27:
                                 this.focusDate ? (this.focusDate = null,
                                     this.viewDate = this.dates.get(-1) || this.viewDate,
                                     this.fill()) : this.hide(),
                                     e.preventDefault();
                                 break;
                             case 37:
                             case 39:
                                 if (!this.o.keyboardNavigation)
                                     break;
                                 t = 37 === e.keyCode ? -1 : 1,
                                     e.ctrlKey ? (i = this.moveYear(this.dates.get(-1) || o(), t),
                                         n = this.moveYear(s, t),
                                         this._trigger("changeYear", this.viewDate)) : e.shiftKey ? (i = this.moveMonth(this.dates.get(-1) || o(), t),
                                         n = this.moveMonth(s, t),
                                         this._trigger("changeMonth", this.viewDate)) : ((i = new Date(this.dates.get(-1) || o())).setUTCDate(i.getUTCDate() + t),
                                         (n = new Date(s)).setUTCDate(s.getUTCDate() + t)),
                                 this.dateWithinRange(i) && (this.focusDate = this.viewDate = n,
                                     this.setValue(),
                                     this.fill(),
                                     e.preventDefault());
                                 break;
                             case 38:
                             case 40:
                                 if (!this.o.keyboardNavigation)
                                     break;
                                 t = 38 === e.keyCode ? -1 : 1,
                                     e.ctrlKey ? (i = this.moveYear(this.dates.get(-1) || o(), t),
                                         n = this.moveYear(s, t),
                                         this._trigger("changeYear", this.viewDate)) : e.shiftKey ? (i = this.moveMonth(this.dates.get(-1) || o(), t),
                                         n = this.moveMonth(s, t),
                                         this._trigger("changeMonth", this.viewDate)) : ((i = new Date(this.dates.get(-1) || o())).setUTCDate(i.getUTCDate() + 7 * t),
                                         (n = new Date(s)).setUTCDate(s.getUTCDate() + 7 * t)),
                                 this.dateWithinRange(i) && (this.focusDate = this.viewDate = n,
                                     this.setValue(),
                                     this.fill(),
                                     e.preventDefault());
                                 break;
                             case 32:
                                 break;
                             case 13:
                                 s = this.focusDate || this.dates.get(-1) || this.viewDate,
                                     this._toggle_multidate(s),
                                     r = !0,
                                     this.focusDate = null,
                                     this.viewDate = this.dates.get(-1) || this.viewDate,
                                     this.setValue(),
                                     this.fill(),
                                 this.picker.is(":visible") && (e.preventDefault(),
                                 this.o.autoclose && this.hide());
                                 break;
                             case 9:
                                 this.focusDate = null,
                                     this.viewDate = this.dates.get(-1) || this.viewDate,
                                     this.fill(),
                                     this.hide()
                         }
                         if (r)
                             this.dates.length ? this._trigger("changeDate") : this._trigger("clearDate"),
                                 this.isInput ? a = this.element : this.component && (a = this.element.find("input")),
                             a && a.change()
                     }
                 },
                 showMode: function(e) {
                     e && (this.viewMode = Math.max(this.o.minViewMode, Math.min(2, this.viewMode + e))),
                         this.picker.find(">div").hide().filter(".datepicker-" + M.modes[this.viewMode].clsName).css("display", "block"),
                         this.updateNavArrows()
                 }
             };
             var c = function(e, t) {
                 this.element = x(e),
                     this.inputs = x.map(t.inputs, function(e) {
                         return e.jquery ? e[0] : e
                     }),
                     delete t.inputs,
                     x(this.inputs).datepicker(t).bind("changeDate", x.proxy(this.dateUpdated, this)),
                     this.pickers = x.map(this.inputs, function(e) {
                         return x(e).data("datepicker")
                     }),
                     this.updateDates()
             };
             c.prototype = {
                 updateDates: function() {
                     this.dates = x.map(this.pickers, function(e) {
                         return e.getUTCDate()
                     }),
                         this.updateRanges()
                 },
                 updateRanges: function() {
                     var i = x.map(this.dates, function(e) {
                         return e.valueOf()
                     });
                     x.each(this.pickers, function(e, t) {
                         t.setRange(i)
                     })
                 },
                 dateUpdated: function(e) {
                     if (!this.updating) {
                         this.updating = !0;
                         var i = x(e.target).data("datepicker").getUTCDate()
                             , t = x.inArray(e.target, this.inputs)
                             , n = this.inputs.length;
                         if (-1 !== t) {
                             if (x.each(this.pickers, function(e, t) {
                                     t.getUTCDate() || t.setUTCDate(i)
                                 }),
                                 i < this.dates[t])
                                 for (; 0 <= t && i < this.dates[t]; )
                                     this.pickers[t--].setUTCDate(i);
                             else if (i > this.dates[t])
                                 for (; t < n && i > this.dates[t]; )
                                     this.pickers[t++].setUTCDate(i);
                             this.updateDates(),
                                 delete this.updating
                         }
                     }
                 },
                 remove: function() {
                     x.map(this.pickers, function(e) {
                         e.remove()
                     }),
                         delete this.element.data().datepicker
                 }
             };
             var n = x.fn.datepicker;
             x.fn.datepicker = function(o) {
                 var l, d = Array.apply(null, arguments);
                 return d.shift(),
                     this.each(function() {
                         var e = x(this)
                             , t = e.data("datepicker")
                             , i = "object" == typeof o && o;
                         if (!t) {
                             var n = function(e, t) {
                                 var i = x(e).data()
                                     , n = {}
                                     , a = new RegExp("^" + t.toLowerCase() + "([A-Z])");
                                 function r(e, t) {
                                     return t.toLowerCase()
                                 }
                                 for (var s in t = new RegExp("^" + t.toLowerCase()),
                                     i)
                                     t.test(s) && (n[s.replace(a, r)] = i[s]);
                                 return n
                             }(this, "date")
                                 , a = function(e) {
                                 var i = {};
                                 if (D[e] || (e = e.split("-")[0],
                                         D[e])) {
                                     var n = D[e];
                                     return x.each(h, function(e, t) {
                                         t in n && (i[t] = n[t])
                                     }),
                                         i
                                 }
                             }(x.extend({}, u, n, i).language)
                                 , r = x.extend({}, u, a, n, i);
                             if (e.is(".input-daterange") || r.inputs) {
                                 var s = {
                                     inputs: r.inputs || e.find("input").toArray()
                                 };
                                 e.data("datepicker", t = new c(this,x.extend(r, s)))
                             } else
                                 e.data("datepicker", t = new v(this,r))
                         }
                         if ("string" == typeof o && "function" == typeof t[o] && (l = t[o].apply(t, d)) !== $)
                             return !1
                     }),
                     l !== $ ? l : this
             }
             ;
             var u = x.fn.datepicker.defaults = {
                 autoclose: !1,
                 beforeShowDay: x.noop,
                 calendarWeeks: !1,
                 clearBtn: !1,
                 daysOfWeekDisabled: [],
                 endDate: 1 / 0,
                 forceParse: !0,
                 format: "mm/dd/yyyy",
                 keyboardNavigation: !0,
                 language: "en",
                 minViewMode: 0,
                 multidate: !1,
                 multidateSeparator: ",",
                 orientation: "auto",
                 rtl: !1,
                 startDate: -1 / 0,
                 startView: 0,
                 todayBtn: !1,
                 todayHighlight: !1,
                 weekStart: 0
             }
                 , h = x.fn.datepicker.locale_opts = ["format", "rtl", "weekStart"];
             x.fn.datepicker.Constructor = v;
             var D = x.fn.datepicker.dates = {
                 en: {
                     days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday", "Sunday"],
                     daysShort: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat", "Sun"],
                     daysMin: ["Su", "Mo", "Tu", "We", "Th", "Fr", "Sa", "Su"],
                     months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
                     monthsShort: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"],
                     today: "Today",
                     clear: "Clear"
                 }
             }
                 , M = {
                 modes: [{
                     clsName: "days",
                     navFnc: "Month",
                     navStep: 1
                 }, {
                     clsName: "months",
                     navFnc: "FullYear",
                     navStep: 1
                 }, {
                     clsName: "years",
                     navFnc: "FullYear",
                     navStep: 10
                 }],
                 isLeapYear: function(e) {
                     return e % 4 == 0 && e % 100 != 0 || e % 400 == 0
                 },
                 getDaysInMonth: function(e, t) {
                     return [31, M.isLeapYear(e) ? 29 : 28, 31, 30, 31, 30, 31, 31, 30, 31, 30, 31][t]
                 },
                 validParts: /dd?|DD?|mm?|MM?|yy(?:yy)?/g,
                 nonpunctuation: /[^ -\/:-@\[\u3400-\u9fff-`{-~\t\n\r]+/g,
                 parseFormat: function(e) {
                     var t = e.replace(this.validParts, "\0").split("\0")
                         , i = e.match(this.validParts);
                     if (!t || !t.length || !i || 0 === i.length)
                         throw new Error("Invalid date format.");
                     return {
                         separators: t,
                         parts: i
                     }
                 },
                 parseDate: function(e, t, i) {
                     if (!e)
                         return $;
                     if (e instanceof Date)
                         return e;
                     "string" == typeof t && (t = M.parseFormat(t));
                     var n, a, r, s = /([\-+]\d+)([dmwy])/, o = e.match(/([\-+]\d+)([dmwy])/g);
                     if (/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(e)) {
                         for (e = new Date,
                                  r = 0; r < o.length; r++)
                             switch (n = s.exec(o[r]),
                                 a = parseInt(n[1]),
                                 n[2]) {
                                 case "d":
                                     e.setUTCDate(e.getUTCDate() + a);
                                     break;
                                 case "m":
                                     e = v.prototype.moveMonth.call(v.prototype, e, a);
                                     break;
                                 case "w":
                                     e.setUTCDate(e.getUTCDate() + 7 * a);
                                     break;
                                 case "y":
                                     e = v.prototype.moveYear.call(v.prototype, e, a)
                             }
                         return S(e.getUTCFullYear(), e.getUTCMonth(), e.getUTCDate(), 0, 0, 0)
                     }
                     o = e && e.match(this.nonpunctuation) || [],
                         e = new Date;
                     var l, d, c = {}, u = ["yyyy", "yy", "M", "MM", "m", "mm", "d", "dd"], h = {
                         yyyy: function(e, t) {
                             return e.setUTCFullYear(t)
                         },
                         yy: function(e, t) {
                             return e.setUTCFullYear(2e3 + t)
                         },
                         m: function(e, t) {
                             if (isNaN(e))
                                 return e;
                             for (t -= 1; t < 0; )
                                 t += 12;
                             for (t %= 12,
                                      e.setUTCMonth(t); e.getUTCMonth() !== t; )
                                 e.setUTCDate(e.getUTCDate() - 1);
                             return e
                         },
                         d: function(e, t) {
                             return e.setUTCDate(t)
                         }
                     };
                     h.M = h.MM = h.mm = h.m,
                         h.dd = h.d,
                         e = S(e.getFullYear(), e.getMonth(), e.getDate(), 0, 0, 0);
                     var p = t.parts.slice();
                     function f() {
                         var e = this.slice(0, o[r].length);
                         return e === o[r].slice(0, e.length)
                     }
                     if (o.length !== p.length && (p = x(p).filter(function(e, t) {
                             return -1 !== x.inArray(t, u)
                         }).toArray()),
                         o.length === p.length) {
                         var _, m, g;
                         for (r = 0,
                                  _ = p.length; r < _; r++) {
                             if (l = parseInt(o[r], 10),
                                     n = p[r],
                                     isNaN(l))
                                 switch (n) {
                                     case "MM":
                                         d = x(D[i].months).filter(f),
                                             l = x.inArray(d[0], D[i].months) + 1;
                                         break;
                                     case "M":
                                         d = x(D[i].monthsShort).filter(f),
                                             l = x.inArray(d[0], D[i].monthsShort) + 1
                                 }
                             c[n] = l
                         }
                         for (r = 0; r < u.length; r++)
                             (g = u[r])in c && !isNaN(c[g]) && (m = new Date(e),
                                 h[g](m, c[g]),
                             isNaN(m) || (e = m))
                     }
                     return e
                 },
                 formatDate: function(e, t, i) {
                     if (!e)
                         return "";
                     "string" == typeof t && (t = M.parseFormat(t));
                     var n = {
                         d: e.getUTCDate(),
                         D: D[i].daysShort[e.getUTCDay()],
                         DD: D[i].days[e.getUTCDay()],
                         m: e.getUTCMonth() + 1,
                         M: D[i].monthsShort[e.getUTCMonth()],
                         MM: D[i].months[e.getUTCMonth()],
                         yy: e.getUTCFullYear().toString().substring(2),
                         yyyy: e.getUTCFullYear()
                     };
                     n.dd = (n.d < 10 ? "0" : "") + n.d,
                         n.mm = (n.m < 10 ? "0" : "") + n.m,
                         e = [];
                     for (var a = x.extend([], t.separators), r = 0, s = t.parts.length; r <= s; r++)
                         a.length && e.push(a.shift()),
                             e.push(n[t.parts[r]]);
                     return e.join("")
                 },
                 headTemplate: '<thead><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',
                 contTemplate: '<tbody><tr><td colspan="7"></td></tr></tbody>',
                 footTemplate: '<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'
             };
             M.template = '<div class="datepicker"><div class="datepicker-days"><table class=" table-condensed">' + M.headTemplate + "<tbody></tbody>" + M.footTemplate + '</table></div><div class="datepicker-months"><table class="table-condensed">' + M.headTemplate + M.contTemplate + M.footTemplate + '</table></div><div class="datepicker-years"><table class="table-condensed">' + M.headTemplate + M.contTemplate + M.footTemplate + "</table></div></div>",
                 x.fn.datepicker.DPGlobal = M,
                 x.fn.datepicker.noConflict = function() {
                     return x.fn.datepicker = n,
                         this
                 }
                 ,
                 x(document).on("focus.datepicker.data-api click.datepicker.data-api", '[data-provide="datepicker"]', function(e) {
                     var t = x(this);
                     t.data("datepicker") || (e.preventDefault(),
                         t.datepicker("show"))
                 }),
                 x(function() {
                     x('[data-provide="datepicker-inline"]').datepicker()
                 })
         }(window.jQuery),
         define("datepicker", function(e) {
             return function() {
                 return e.datepicker
             }
         }(this)),
         jQuery.fn.datepicker.dates["zh-CN"] = {
             days: ["星期日", "星期一", "星期二", "星期三", "星期四", "星期五", "星期六", "星期日"],
             daysShort: ["周日", "周一", "周二", "周三", "周四", "周五", "周六", "周日"],
             daysMin: ["日", "一", "二", "三", "四", "五", "六", "日"],
             months: ["一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月"],
             monthsShort: ["一月", "二月", "三月", "四月", "五月", "六月", "七月", "八月", "九月", "十月", "十一月", "十二月"],
             today: "今天",
             format: "yyyy年mm月dd日",
             weekStart: 1
         },
         define("datepickercn", ["datepicker"], function(e) {
             return function() {
                 return e.datepickercn
             }
         }(this)),
         define("utils/datepickerlist", ["jquery", "moment", "utils/time"], function(c, u, n) {
             c.fn.datepickerlist = function(e) {
                 var s = c(this)
                     , o = []
                     , t = "object" == typeof e && e
                     , l = c.extend({}, {
                     format: "YYYY-MM-DD",
                     days: 5
                 }, t);
                 function d(e, t) {
                     var i = c('<p tabindex="0" class="datepicker-list__item accessible-click"/>');
                     return e.format(l.format) === (t || u()).format(l.format) && i.addClass("today"),
                         i.append(c('<span class="name" />').html(n.relativeDate(e, t)), c('<span class="date" />').html(e.format(l.format))).data("date", e.format(l.format)).on("click", function() {
                             s.find(".datepicker-list__item").removeClass("selected"),
                                 c(this).addClass("selected"),
                                 s.trigger("changeDate", [c(this).data("date")])
                         }),
                         i
                 }
                 return function() {
                     o = [];
                     var e = l.days < 0
                         , t = e ? -l.days : l.days
                         , i = l.baseMomentDate
                         , n = l.synServerTim ? l.synServerTim : void 0;
                     s.html("").addClass("datepicker-list");
                     for (var a = null, r = 0; r < t; r++)
                         a = d(u(i).subtract("days", e ? -r : r), n),
                             s.append(a),
                             o.push(a);
                     s.on("setDate", function(e, t) {
                         var i;
                         i = t,
                             c.each(o, function(e, t) {
                                 t.data("date") == u(i).format(l.format) && t.addClass("selected")
                             })
                     })
                 }(),
                     s
             }
         }),
         define("views/detailDateTimePicker/picker", ["backbone", "datepicker", "datepickercn", "templates", "moment", "helper", "utils/datepickerlist"], function(e, t, i, n, a, r) {
             return e.View.extend({
                 events: {
                     "click input": "toggleLocationPicker",
                     "click .input-group-addon": "toggleLocationPicker",
                     toggle: "toggleLocationPicker",
                     "click .detail-date-time-picker": "stopPropagation",
                     click: "stopPropagation",
                     "click .date-time-tabs li": "toggleDateTime",
                     "mousewheel .picker-wrapper": "mouseWheelChangeOnTimes",
                     "click .indicator": "scrollPage",
                     "click .times li": "timeClicked"
                 },
                 changeTimeToNow: function() {
                     var e = this;
                     $("body").on("click", function() {
                         e.resetNowTimeDescription()
                     })
                 },
                 resetNowTimeDescription: function() {
                     this.selectedMoment.isSame(this.nextHalfHourInTheFuture()) && this.$("input").val(_l("现在"))
                 },
                 initialize: function() {
                     this.$pickerWrapper = $('<div class="detail-date-time-picker toggle-plugins"></div>'),
                         this.$el.append(this.$pickerWrapper),
                         this.showTimePicker = !0,
                         this.synServerTim = this.options && this.options.synServerTim ? this.options.synServerTim : a(),
                         this.selectedMoment = this.nextHalfHourInTheFuture(),
                         this.$("input").data("time", this.selectedMoment.format()),
                         this.render(),
                         this.changeTimeToNow()
                 },
                 stopPropagation: function(e) {
                     e.stopPropagation()
                 },
                 showPicker: function() {
                     $(".toggle-plugins").hide(),
                         this.$pickerWrapper.show(),
                         this.selectedTimeChanged(),
                         this.render()
                 },
                 toggleLocationPicker: function(e) {
                     this.$pickerWrapper.is(":visible") ? (this.$pickerWrapper.hide(),
                         this.resetNowTimeDescription()) : (e && e.stopPropagation(),
                         this.showPicker())
                 },
                 nextHalfHourInTheFuture: function() {
                     var e = this.synServerTim.clone().startOf("hour").add("minutes", 30);
                     return e.isBefore(this.synServerTim) && e.add("minutes", 30),
                         e
                 },
                 selectedTimeChanged: function() {
                     var e = this.$("input");
                     "" != this.selectedMoment && this.selectedMoment.isSame(this.synServerTim, "day") && 0 == this.selectedMoment.hour() && 0 == this.selectedMoment.minutes() ? (e.val(_l("现在")),
                         e.data("time", "")) : (e.val(this.selectedMoment.format("YYYY-MM-DD HH: mm")).trigger("change"),
                         e.data("time", this.selectedMoment.format()))
                 },
                 render: function() {
                     this.showTimePicker ? (this.preRenderTimePicker(),
                         this.$pickerWrapper.html(n.detailedDateTimePicker({
                             showTimePicker: this.showTimePicker,
                             times: this.times,
                             selectedTime: this.selectedMoment.format("HH: mm"),
                             selectedWithInOneHour: !1
                         })),
                         this.scrollToSelectedTime(),
                         this.contentScrolled()) : (this.$pickerWrapper.html(n.detailedDateTimePicker({
                         showTimePicker: this.showTimePicker
                     })),
                         this.postRenderDatePicker())
                 },
                 preRenderTimePicker: function() {
                     for (var e = a(this.selectedMoment.format()).startOf("day"), t = [], i = 0; i < 48; i++)
                         e.isAfter(this.synServerTim) && t.push(e.format("HH: mm")),
                             e.add("minutes", 30);
                     this.times = t
                 },
                 scrollToSelectedTime: function() {
                     var e = this.$(".picker-wrapper")
                         , t = 0;
                     0 < this.$(".times li.current").length && (t = this.$(".times li.current").position().top);
                     var i = this.$(".picker-wrapper").height();
                     e.scrollTop(t - i / 3)
                 },
                 startDate: function() {
                     return "0d"
                 },
                 endDate: function() {
                     return !1
                 },
                 postRenderDatePicker: function() {
                     var i = this
                         , n = a(this.selectedMoment.format());
                     i.endDate() ? this.$(".detail-date-picker").datepickerlist({
                         format: "YYYY-MM-DD",
                         baseMomentDate: i.synServerTim.clone().add("days", parseInt(i.startDate())),
                         days: -parseInt(i.endDate()),
                         synServerTim: i.synServerTim
                     }).on("changeDate", function(e, t) {
                         t && i.pickDate(t),
                         n && (i.showTimePicker = !0,
                             i.render())
                     }).trigger("setDate", n.startOf("day").toDate()).on("click", i.stopPropagation) : this.$(".detail-date-picker").datepicker({
                         language: r.getStandardLocale(),
                         startDate: i.startDate(),
                         endDate: i.endDate(),
                         todayBtn: "linked"
                     }).on("changeDate", function(e) {
                         e.date && i.pickDate(e.date),
                         n && !n.isSame(a(e.date), "date") && (i.showTimePicker = !0,
                             i.render())
                     }).datepicker("setDate", n.startOf("day").toDate()).on("click", i.stopPropagation)
                 },
                 toggleDateTime: function(e) {
                     this.showTimePicker = $(e.currentTarget).hasClass("time"),
                         this.render()
                 },
                 pickDate: function(e) {
                     this.selectedMoment.year(a(e).year()),
                         this.selectedMoment.month(a(e).month()),
                         this.selectedMoment.date(a(e).date()),
                     this.selectedMoment.isBefore(this.synServerTim) && (this.selectedMoment = this.nextHalfHourInTheFuture(),
                         this.$("input").data("time", this.selectedMoment.format())),
                         this.showTimePicker = !0
                 },
                 timeClicked: function(e) {
                     this.$(".times li").removeClass("current"),
                         $(e.currentTarget).addClass("current");
                     var t = a($(e.currentTarget).text(), "HH: mm");
                     this.selectedMoment.hour(t.hour()),
                         this.selectedMoment.minutes(t.minutes()),
                         this.selectedTimeChanged(),
                         $("body").click()
                 },
                 mouseWheelChangeOnTimes: function(e) {
                     var t = e.originalEvent.deltaY
                         , i = $(e.currentTarget);
                     if (t) {
                         var n = i.scrollTop();
                         return i.scrollTop(n + t),
                             this.contentScrolled(),
                             !1
                     }
                 },
                 contentScrolled: function() {
                     var e = this.$(".picker-wrapper")
                         , t = e.scrollTop()
                         , i = this.$(".indicator.top")
                         , n = this.$(".indicator.bottom");
                     0 === t ? i.addClass("disabled") : i.removeClass("disabled"),
                         t >= e.find(".times").height() - e.height() ? n.addClass("disabled") : n.removeClass("disabled")
                 },
                 scrollPage: function(e) {
                     e.stopPropagation();
                     var t, i = $(e.currentTarget).hasClass("top"), n = this.$(".picker-wrapper"), a = n.scrollTop();
                     t = i ? a - n.height() : a + n.height();
                     var r = this;
                     return n.animate({
                         scrollTop: t
                     }, 500, function() {
                         r.contentScrolled()
                     }),
                         !1
                 }
             })
         }),
         define("views/detailDateTimePicker/timeQueryPicker", ["views/detailDateTimePicker/picker", "helper"], function(e, n) {
             return e.extend({
                 preRenderTimePicker: function() {
                     var e = moment(this.selectedMoment.format()).startOf("day");
                     if (!this.times) {
                         for (var t = [], i = 0; i < 48; i++)
                             t.push(e.format("HH: mm")),
                                 e.add("minutes", 30);
                         this.times = t
                     }
                 },
                 postRenderDatePicker: function() {
                     var e = {
                         language: n.getStandardLocale(),
                         startDate: this.startDate(),
                         todayBtn: "linked"
                     };
                     this.endDate() && (e.endDate = this.endDate());
                     var t = this
                         , i = moment(this.selectedMoment.format());
                     this.$(".detail-date-picker").datepicker(e).datepicker("setDate", i.startOf("day").toDate()).on("changeDate", function(e) {
                         e.date && t.pickDate(e.date),
                         i && (t.showTimePicker = !0,
                             t.render())
                     }).on("click", this.stopPropagation)
                 },
                 pickDate: function(e) {
                     this.selectedMoment.year(moment(e).year()),
                         this.selectedMoment.month(moment(e).month()),
                         this.selectedMoment.date(moment(e).date()),
                         this.selectedTimeChanged(),
                         this.showTimePicker = !0
                 },
                 startDate: function() {
                     return "-7d"
                 }
             })
         }),
         define("views/payFee/locationInput", ["backbone", "helper", "event", "views/detailDateTimePicker/timeQueryPicker", "views/detailedLocationPicker/pricePicker"], function(e, d, l, i, n) {
             return e.View.extend({
                 events: {
                     "click .primary-button": "queryRate",
                     "change input.origins": "originInputChanged",
                     "change input.dests": "destInputChanged",
                     "blur input.dests": "destInputChanged",
                     "change #weight": "weightChanged",
                     "regionModelUpdate .detail-location-input": "regionModelUpdate"
                 },
                 initialize: function() {
                     this.$(".origin-price").data("custom-url", _.sprintf(d.urls.subregionOrigin, {
                         parentCode: "%s",
                         level: "%s"
                     })),
                         this.originPrice = this.$(".detail-location-input.origin-price"),
                         this.destPrice = this.$(".detail-location-input.dest-price"),
                         this.originInput = this.$("input.origins.autocomplete"),
                         this.destsInput = this.$("input.dests.autocomplete"),
                         new n({
                             el: this.originPrice
                         }),
                         new n({
                             el: this.destPrice
                         }),
                         new i({
                             el: this.$(".detail-date-time-input")
                         });
                     var e = this.originPrice.data("selected-area")
                         , t = this.destPrice.data("selected-area");
                     "hk-mc-tw" === e && this.originPrice.data("max-level", 4),
                     "hk-mc-tw" === t && this.originPrice.data("max-level", 4),
                         this.originPrice.data("max-A000710000", 4),
                         this.originPrice.data("max-A000820000", 4),
                         this.originPrice.data("max-A000810000", 4),
                         this.originPrice.data("max-886", 4),
                         this.destPrice.data("max-A000710000", 4),
                         this.destPrice.data("max-A000810000", 4),
                         this.destPrice.data("max-A000820000", 4),
                         this.destPrice.data("max-886", 4),
                     this.$el.data("redirect") || (this.listenTo(l, "RateSearchCompleted", this.searchComplete),
                         this.listenTo(l, "RateSearchFailed", this.searchFailed),
                         this.listenTo(l, l.RateSearch, this.searchStart),
                         this.listenTo(l, l.SwitchRateSearch, this.swithQueryType),
                         this.handleQueryStringsFromURL())
                 },
                 handleQueryStringsFromURL: function() {
                     var e = d.getQueryStrings();
                     e && "waybill" === e.from && (this.originInput.val(""),
                         this.originInput.val(e.originName),
                         this.destsInput.val(e.destName),
                         this.$("#weight").val(Number(e.weight)),
                         this.$(".time-query input").val(this.nextHalfHourInTheFuture(decodeURIComponent(e.time)).format("YYYY-MM-DD HH:mm"))),
                     e && e.destName && e.destCode && e.originName && e.originCode && e.lang === d.getSiteLanguage() && (this.originInput.data("code", e.originCode),
                         this.originInput.data("country-code", e.originCountryCode),
                         this.originInput.val(e.originName),
                         this.destsInput.data("code", e.destCode),
                         this.destsInput.data("country-code", e.destCountryCode),
                         this.destsInput.val(e.destName),
                         this.$(".primary-button").toggleClass("disabled", !0),
                         this.inputChanged(),
                         this.queryRate())
                 },
                 nextHalfHourInTheFuture: function(e) {
                     var t = moment(e).startOf("hour").add("minutes", 30);
                     return t.isBefore() && t.add("minutes", 30),
                         t
                 },
                 regionModelUpdate: function(e, t) {
                     var i = $(e.currentTarget)
                         , n = (this.originInput.data("country-code"),
                     "GLOBAL" === t.regionTabs[0].parentRegion.code);
                     t.regionTabs[0].parentRegion.code;
                     i.data("max-level", n ? 1 : 4)
                 },
                 searchStart: function() {
                     this.$(".primary-button").button("loading")
                 },
                 searchComplete: function(e) {
                     this.$(".primary-button").button("reset")
                 },
                 searchFailed: function() {
                     this.$(".primary-button").button("reset")
                 },
                 originInputChanged: function() {
                     var e = this.originInput.data("code")
                         , t = this.$("#weightUnit")
                         , i = $("#unitWeight")
                         , n = $("#length-value")
                         , a = $("#width-value")
                         , r = $("#height-value");
                     "A000001000" == e ? (t.text("lbs"),
                         i.text("lbs"),
                         n.attr("placeholder", "in"),
                         a.attr("placeholder", "in"),
                         r.attr("placeholder", "in")) : (t.text("kg"),
                         i.text("kg"));
                     var s = this.originInput.data("country-code")
                         , o = this.destsInput;
                     if (o.data("origin-country-code", s),
                             e) {
                         var l = _.sprintf(d.urls.subregionDest, {
                             parentCode: "%s",
                             originCode: e,
                             level: "%s"
                         });
                         $(".dest-price").first().data("custom-url", l),
                             $(".dest-price").last().data("custom-url", l),
                         o.data("code") && (o.val(""),
                             o.data("code", "")),
                             o.trigger("change")
                     }
                     this.inputChanged()
                 },
                 destInputChanged: function() {
                     this.inputChanged()
                 },
                 inputChanged: function() {
                     var e = this.originInput.data("code")
                         , t = this.destsInput.data("code");
                     this.destsInput.attr("disabled", !e);
                     var i = e && t && this.weightChanged()
                         , n = this.$(".primary-button");
                     n.toggleClass("disabled", !i),
                     i && n.text(n.data("resetText")),
                         this.$(".error").hide(),
                     "A000710000" === this.originInput.data("code") && "A000710000" === this.destsInput.data("code") && this.$(".primary-button").toggleClass("disabled", !0)
                 },
                 weightChanged: function() {
                     if (0 === this.$("input.weight").length)
                         return !0;
                     var e = this.$("input.weight").val();
                     return (isNaN(e) || _.isEmpty(e) || _.isNull(e)) && this.$("input.weight").val(1),
                         !0
                 },
                 getQueryType: function() {
                     var e, t, i, n, a, r, s = $(".payFee-page .origin-price .area-level-tabs li.current").data("tab"), o = $(".payFee-page .dest-price .area-level-tabs li.current").data("tab");
                     return "main-land" == s ? e = !0 : "hk-mc-tw" == s ? t = !0 : "international" == s && (i = !0),
                         "main-land" == o ? n = !0 : "hk-mc-tw" == o ? a = !0 : "international" == o && (r = !0),
                         e && n ? "2" : e && a ? "3" : t && n ? "4" : e && r || i && n || i && r ? "5" : t && r || i && a ? "9" : t && a ? "12" : "0"
                 },
                 queryRate: function() {
                     var e = this.originInput.data("code")
                         , t = this.destsInput.data("code")
                         , i = this.originInput.data("country-code")
                         , n = this.destsInput.data("country-code")
                         , a = this.$("input.date").data("time")
                         , r = this.getQueryType();
                     if (this.$el.data("redirect")) {
                         var s = this.originInput.val()
                             , o = this.destsInput.val();
                         location.href = d.getDynamicURLWithContext("/price/?originCode=" + e + "&originCountryCode=" + i + "&originName=" + s + "&destCode=" + t + "&destCountryCode=" + n + "&destName=" + o + "&time=" + encodeURIComponent(a) + "&queryType=" + r + "&flag=" + !0 + "&lang=" + d.getSiteLanguage())
                     } else
                         this.$(".error").hide(),
                             l.trigger(l.RateSearch, {
                                 originCode: e,
                                 destCode: t,
                                 originCountryCode: i,
                                 destsCountryCode: n,
                                 time: a,
                                 flag: !0,
                                 queryType: r,
                                 rateType: this.rateType
                             })
                 },
                 swithQueryType: function(e) {
                     this.rateType = e.type,
                         this.queryRate()
                 }
             })
         }),
         define("models/otherService", ["backbone"], function(e) {
             return e.Model.extend({
                 availableAt: function(e) {
                     var t = e.origin
                         , i = e.dests;
                     t != _l("中国件") && t != _l("香港件") && t != _l("台湾件") && t != _l("澳门件") && (t = _l("国际件")),
                     i != _l("中国件") && i != _l("香港件") && i != _l("台湾件") && i != _l("澳门件") && (i = _l("国际件"));
                     for (var n = {
                         originLocations: t,
                         destsLocations: i
                     }, a = this.get("locations"), r = !1, s = 0; s < a.length; s++)
                         JSON.stringify(n) == JSON.stringify(a[s]) && (r = !0);
                     return r
                 }
             })
         }),
         define("collections/otherServices", ["backbone", "models/otherService"], function(e, t) {
             return e.Collection.extend({
                 model: t,
                 comparator: "order",
                 filterOtherServicesWithLocations: function(t) {
                     var e = _.filter(this.models, function(e) {
                         return e.availableAt({
                             origin: t.originCountryCode,
                             dests: t.destsCountryCode
                         })
                     });
                     e.length ? this.trigger("availableOtherServicesFound", e) : $(".payFee-page .other-services-container").css("display", "none")
                 }
             })
         }),
         define("views/payFee/otherService", ["event", "templates", "models/otherService", "backbone", "collections/otherServices"], function(e, t, i, n, a) {
             return n.View.extend({
                 template: t.otherService,
                 initialize: function() {
                     this.$otherServices = $('<div class="other-services"></div>'),
                         this.$el.append(this.$otherServices),
                         this.listenTo(e, e.RateSearch, this.rateSearchStarted),
                         this.listenTo(e, "RateSearchCompleted", this.render),
                         this.otherServices = new a(window.otherServiceList),
                         this.listenTo(this.otherServices, "availableOtherServicesFound", this.appendOtherServices)
                 },
                 appendOtherServices: function(e) {
                     this.$otherServices.html(this.template({
                         otherServices: e
                     })),
                         this.$el.fadeIn()
                 },
                 rateSearchStarted: function(e) {
                     this.locations = _.extend(this.locations || {}, e),
                         this.$el.slideUp(),
                         this.$otherServices.html("")
                 },
                 render: function(e) {
                     if (e) {
                         var t = this.locations;
                         t.originCode && t.destCode && (this.otherServices.filterOtherServicesWithLocations(t),
                         this.$el.is(":visible") && this.$el.slideDown())
                     }
                 }
             })
         }),
         define("models/payFeeComment", ["backbone", "event"], function(e, t) {
             return e.Model.extend({
                 defaults: {
                     shouldShow: !1
                 },
                 initialize: function() {
                     this.listenTo(t, t.RateSearch, this.refresh)
                 },
                 refresh: function(e) {
                     if (this.originCode = e.originCode ? e.originCode : this.originCode,
                             this.originCountryCode = e.originCountryCode ? e.originCountryCode : this.originCountryCode,
                             this.destCode = e.destCode ? e.destCode : this.destCode,
                             this.destCountryCode = e.destCountryCode ? e.destCountryCode : this.destCountryCode,
                         this.originCode && this.destCode) {
                         var t = 0 <= _.indexOf(this.get("originLocations").split(" "), this.originCode)
                             , i = 0 <= _.indexOf(this.get("originLocations").split(" "), this.originCountryCode)
                             , n = 0 <= _.indexOf(this.get("destsLocations").split(" "), this.destCode)
                             , a = 0 <= _.indexOf(this.get("destsLocations").split(" "), this.destCountryCode);
                         this.get("bothRequired") ? (t || i) && (n || a) ? this.set("shouldShow", !0) : this.set("shouldShow", !1) : i || t || a || n ? this.set("shouldShow", !0) : this.set("shouldShow", !1)
                     }
                 }
             })
         }),
         define("collections/payFeeComments", ["backbone", "models/payFeeComment"], function(e, t) {
             return e.Collection.extend({
                 model: t
             })
         }),
         define("views/payFee/payFee", ["backbone", "bootstrap", "templates", "utils/time"], function(e, t, i, r) {
             return e.View.extend({
                 tagName: "tr",
                 template: i.payFee,
                 initialize: function(e) {
                     if (1 == e.showDefault)
                         this.$el.html(this.template({
                             showDefaultService: !0,
                             service: e.data
                         }));
                     else {
                         var t = this.model.toJSON()
                             , i = $(".payFee-page .origin-price .area-level-tabs li.current").data("tab")
                             , n = $(".payFee-page .dest-price .area-level-tabs li.current").data("tab");
                         "main-land" == i && "main-land" == n || (t.notmainland = !0),
                             t.deliverTime ? t.relativeDate = r.relativeDate(moment(t.deliverTime)) : t.internet || ("T104" == t.limitTypeCode ? t.deliverTimeForType = _l("当日送达") : "T801" == t.limitTypeCode ? t.deliverTimeForType = _l("次早送达") : "T4" == t.limitTypeCode ? (t.deliverTimeForType = "2-3" + _l("天"),
                                 "hk-mc-tw" == i && "hk-mc-tw" == n ? t.deliverTimeForType = "" : "2" == t.orgionView && "2" == t.destView && (t.deliverTimeForType = "")) : "T6" == t.limitTypeCode ? (t.deliverTimeForType = "3-5" + _l("天"),
                                 "hk-mc-tw" == i && "hk-mc-tw" == n ? t.deliverTimeForType = "" : "2" == t.orgionView && "2" == t.destView && (t.deliverTimeForType = "")) : t.deliverTimeForType = "");
                         var a = e.model.collection.rateType;
                         "coldChain" == a && t ? $(".service-clodchain-tips").show() : $(".service-clodchain-tips").hide(),
                             t.showDestCurrencyPrice = e.showDestCurrencyPrice,
                             this.$el.html(this.template({
                                 showDefaultService: !1,
                                 rateType: a,
                                 service: t
                             }))
                     }
                 }
             })
         }),
         define("views/payFee/payFeeInitial", ["backbone", "templates", "views/payFee/payFee"], function(e, t, i) {
             return i.extend({
                 template: t.payFeeInitial,
                 initialize: function() {
                     var e = this.model.toJSON()
                         , t = ["#EF7D00", "#E30413", "#FFED00", "#009440"];
                     e.limitTypeCode && (e.serTextColor = "white",
                         "T104" == e.limitTypeCode ? e.serviceColor = t[0] : "T801" == e.limitTypeCode ? e.serviceColor = t[1] : "T4" == e.limitTypeCode ? (e.serviceColor = t[2],
                             e.serTextColor = "black") : "T6" == e.limitTypeCode ? e.serviceColor = t[3] : (e.serTextColor = "",
                             e.serviceColor = "")),
                         this.$el.html(this.template(e))
                 }
             })
         }),
         define("models/rateSearchOption", ["backbone"], function(e) {
             return e.Model.extend({
                 defaults: {
                     weight: "",
                     height: "",
                     length: "",
                     width: ""
                 }
             })
         }),
         define("views/payFee/payFees", ["backbone", "templates", "views/payFee/payFee", "views/payFee/payFeeInitial", "models/rateSearchOption", "collections/payFee", "collections/detailRegions", "models/payFee"], function(e, t, a, n, i, r, s, o) {
             return e.View.extend({
                 tagName: "table",
                 className: "services",
                 template: t.payFee,
                 initialize: function() {
                     var i = this;
                     this.listenTo(this.collection, "sync", this.render),
                         this.listenTo(this.collection, "showDestCurrency", this.renderServices),
                         this.listenTo(this.collection, "outOfRange", this.render),
                         this.listenTo(this.collection, "showDefault", this.showDefaultRule);
                     var e = this.collection.withPromotion();
                     r.setupOrderSymbol(e),
                         _.each(e, function(e) {
                             var t = new n({
                                 model: e
                             });
                             i.$el.append(t.$el)
                         })
                 },
                 render: function() {
                     var e = this.collection.checkResult
                         , t = this.showSearchHint();
                     e.canSearch ? (this.appendServicesWithoutOutskirts(),
                         this.$el.addClass("show-cargo-type"),
                         this.$el.prepend(t)) : this.$el.html(t)
                 },
                 isQueryLocationChinaMainLand: function() {
                     var e = s.isNotAboard(this.collection.originCountryCode)
                         , t = s.isNotAboard(this.collection.destsCountryCode);
                     return e && t
                 },
                 appendServicesWithoutOutskirts: function() {
                     var e, t = this.collection.withOutskirts();
                     0 < t.length ? (e = t,
                         _.each(e, function(e) {
                             e.attributes.limitTypeName += "<em style='color:red;'>(" + _l("郊") + ")</em>"
                         })) : e = this.collection.withoutOutskirts();
                     r.setupOrderSymbol(e),
                         this.finallyServices = e,
                         this.renderServices()
                 },
                 renderServices: function() {
                     this.$el.empty(),
                         $(".service-heavyCargo-weight-tip").hide(),
                     "heavyCargo" == this.collection.rateType && 0 < this.finallyServices.length && this.collection.weight && (this.collection.showDestCurrencyPrice ? this.collection.weight < this.finallyServices[0].get("destWeight") && $(".service-heavyCargo-weight-tip").show() : this.collection.weight < this.finallyServices[0].get("weight") && $(".service-heavyCargo-weight-tip").show());
                     var n = this;
                     _.each(n.finallyServices, function(e) {
                         var t = e.attributes;
                         if ("T4" != t.limitTypeCode || "1" !== t.destView || "1" !== t.orgionView || t.deliverTime) {
                             var i = new a({
                                 model: e,
                                 showDestCurrencyPrice: n.collection.showDestCurrencyPrice
                             });
                             n.$el.append(i.$el)
                         }
                     })
                 },
                 showSearchHint: function() {
                     var e = $("<tbody><tr><td style='padding: 0 33px;color:red' colspan='4'></td></tr></tbody>")
                         , i = [_l("重量超限,"), _l("体积超限,")]
                         , t = this.collection.checkResult
                         , n = "";
                     return t.canSearch && this.arrayContain(t.errs, "2") ? n = _l("您的快件属于超长件，收件时将收取相应的超长附加费。感谢您对F35速运的关注与支持，如有疑问，可致电4008-111-111咨询。") : t.canSearch || (n = _l("很抱歉，您的快件"),
                         $.each(t.errs, function(e, t) {
                             n += i[t]
                         }),
                         n += _l("暂时不能提供收寄服务。感谢您对F35速运的关注与支持，如有疑问，可致电4008-111-111咨询。")),
                         e.find("td").text(n),
                         0 == t.errs.length ? "" : e.html()
                 },
                 arrayContain: function(e, t) {
                     if (null == e)
                         return !1;
                     for (var i = 0; i < e.length; i++)
                         if (e[i] == t)
                             return !0;
                     return !1
                 },
                 showDefaultRule: function(e) {
                     if (this.$el.empty(),
                         "coldChain" == this.collection.rateType)
                         $(".service-wrapper").append("<span id='noData' style='margin-left: 45%;vertical-align: middle;font-size: 20px;color: red;'>" + _l("暂无数据") + "</span>"),
                             $(".services-bottom-bar").toggleClass("empty-content", !0),
                             $(".additional-services-link").empty();
                     else {
                         var t = new a({
                             data: e,
                             showDefault: !0
                         });
                         this.$el.append(t.$el)
                     }
                 }
             })
         }),
         define("views/payFee/comments", ["backbone", "templates"], function(e, t) {
             return e.View.extend({
                 className: "service-comments",
                 template: t.payFeeComments,
                 initialize: function() {
                     this.listenTo(this.collection, "change:shouldShow", this.render)
                 },
                 render: function() {
                     this.collection.findWhere({
                         shouldShow: !0
                     }) ? this.$el.html(this.template({
                         comments: this.collection.toJSON()
                     })).show() : this.$el.hide()
                 }
             })
         }),
         define("views/payFee/moreWeight", ["jquery", "backbone", "templates", "event"], function(a, e, t, i) {
             return e.View.extend({
                 className: "more-weight",
                 template: t.moreWeight,
                 events: {
                     "click .weight-search": "weightSearch",
                     click: "stopPropagation",
                     "keyup input": "refreshSearchButton",
                     "blur #weight-value, #length-value, #width-value, #height-value": "onNumberBlur"
                 },
                 onNumberBlur: function(e) {
                     var t = a(e.target)
                         , i = t.val()
                         , n = Number(i);
                     isNaN(n) || t.val(n)
                 },
                 initialize: function() {
                     this.listenTo(this.model, "change", this.render),
                         this.$el.html(this.template()),
                         this.$("input").placeholder(),
                         this.$length = this.$(".length-value"),
                         this.$weight = this.$(".weight-value"),
                         this.$height = this.$(".height-value"),
                         this.$width = this.$(".width-value"),
                         this.$weightBtn = a('[data-tab="weight"]'),
                         this.listenTo(i, i.RateSearch, this.reloadOnFetch)
                 },
                 reloadOnFetch: function(e) {
                     e.originCountryCode && ("A000810000" === e.originCountryCode ? (this.$(".extra-weight-side-note").show(),
                         this.$weightBtn.addClass("has-extra")) : (this.$(".extra-weight-side-note").hide(),
                         this.$weightBtn.removeClass("has-extra")))
                 },
                 numberCheck: function(e) {
                     var t = a(e.currentTarget).val();
                     isNaN(t) && (2 < (t = t.replace(/[^0-9\.]/g, "")).split(".").length && (t = t.replace(/\.+$/, "")),
                         a(e.currentTarget).val(t))
                 },
                 getRoundWeight: function() {
                     var e = a("input.dests").last().data("country-code")
                         , t = a("input.origins").last().data("country-code");
                     return this.isChinaRegion(e) && this.isChinaRegion(t) ? Math.round(10 * Number(this.$weight.val())) / 10 : Math.round(100 * Number(this.$weight.val())) / 100
                 },
                 isChinaRegion: function(e) {
                     return "A000086000" === e || "A000820000" === e || "A000810000" === e || "A000710000" === e
                 },
                 hasWeightInput: function() {
                     return 0 < this.getRoundWeight()
                 },
                 hasSizeInput: function() {
                     return 0 < Number(this.$height.val()) * Number(this.$length.val()) * Number(this.$width.val())
                 },
                 refreshSearchButton: function(e) {
                     this.numberCheck(e),
                         this.$(".weight-search").toggleClass("disabled", !this.hasWeightInput() && !this.hasSizeInput())
                 },
                 reloadModel: function() {
                     this.model.set({
                         weight: this.$weight.val(),
                         height: this.$height.val(),
                         length: this.$length.val(),
                         width: this.$width.val()
                     })
                 },
                 searchOptionChange: function() {
                     this.reloadModel()
                 },
                 stopPropagation: function(e) {
                     e.stopPropagation()
                 },
                 toggleWeightPanel: function() {
                     this.$(".weight-panel").toggle()
                 },
                 weightSearch: function() {
                     return this.getRoundWeight() && this.$weight.val(this.getRoundWeight()),
                     (this.hasSizeInput() || this.hasWeightInput()) && i.trigger(i.RateSearch, {
                         weight: this.$weight.val(),
                         height: this.$height.val(),
                         length: this.$length.val(),
                         width: this.$width.val(),
                         originCode: a("input.origins").last().data("code"),
                         destCode: a("input.dests").last().data("code"),
                         destCountryCode: a("input.origins").last().data("country-code"),
                         originCountryCode: a("input.origins").last().data("country-code")
                     }),
                         this.toggleWeightPanel(),
                         !1
                 },
                 render: function() {
                     this.$length.val(this.model.get("length")),
                         this.$weight.val(this.model.get("weight")),
                         this.$height.val(this.model.get("height")),
                         this.$width.val(this.model.get("width"))
                 }
             })
         }),
         define("views/payFee/topBar", ["backbone", "templates", "models/rateSearchOption", "views/payFee/moreWeight"], function(e, t, i, n) {
             return e.View.extend({
                 events: {
                     "click li[data-tab=price-toggle] a": "priceCurrecyToggle",
                     "click li[data-tab=weight] a": "moreWeightToggle"
                 },
                 initialize: function() {
                     this.render(!1)
                 },
                 setupMoreWeightPannel: function() {
                     var e = new i;
                     this.moreWeightView = new n({
                         model: e
                     }),
                         this.$(".more-weight-wrapper").html(this.moreWeightView.$el),
                         this.changeWeightUnit()
                 },
                 changeWeightUnit: function() {
                     var e = $("input.origins.autocomplete").data("code")
                         , t = $("#unitWeight")
                         , i = $("#length-value")
                         , n = $("#width-value")
                         , a = $("#height-value");
                     "A000001000" == e ? (t.text("lbs"),
                         i.attr("placeholder", "in"),
                         n.attr("placeholder", "in"),
                         a.attr("placeholder", "in")) : t.text("kg")
                 },
                 moreWeightToggle: function(e) {
                     e.preventDefault(),
                         e.stopPropagation(),
                         this.moreWeightView.toggleWeightPanel()
                 },
                 priceCurrecyToggle: function(e) {
                     e.preventDefault(),
                         this.collection.showDestCurrencyPrice = !this.collection.showDestCurrencyPrice,
                         this.collection.trigger("showDestCurrency"),
                         this.render(this.collection.showDestCurrencyPrice)
                 },
                 render: function(e) {
                     this.$el.html(t.topBarUtils({
                         showDestCurrency: e
                     })),
                         this.setupMoreWeightPannel()
                 }
             })
         }),
         define("views/payFee/payFeesContainer", ["./otherService", "backbone", "collections/payFee", "collections/payFeeComments", "views/payFee/payFees", "views/payFee/comments", "views/payFee/topBar", "event", "templates", "helper"], function(e, t, i, n, a, r, s, o, l, d) {
             return t.View.extend({
                 template: l.payFeeContainer,
                 initialize: function() {
                     this.rateType = "normal",
                         this.collection = new i(window.serviceList),
                         this.listenTo(o, o.RateSearch, this.searchStart),
                         this.listenTo(this.collection, "sync", this.searchComplete),
                         this.listenTo(this.collection, "showDefault", this.showSearchDefault),
                         this.$el.html(this.template()),
                         this.$serviceWrapper = this.$(".service-wrapper"),
                         this.$serviceInternet = this.$(".service-internet-wrapper"),
                         this.$searching = this.$(".searching"),
                         this.topbarUtilsView = new s({
                             el: this.$(".utils"),
                             collection: this.collection
                         }),
                         this.$additionalServicesLink = this.$(".additional-services-link"),
                         this.appendServices(),
                         this.appendServiceComments()
                 },
                 events: {
                     "click .service-switch a": "switchServiceType"
                 },
                 switchServiceType: function(e) {
                     var t = this.$(e.currentTarget).data("type");
                     t != this.rateType && (this.rateType = t,
                         this.$(e.currentTarget).siblings().removeClass("active").end().addClass("active"),
                         o.trigger(o.SwitchRateSearch, {
                             type: this.rateType
                         }))
                 },
                 searchStart: function() {
                     this.collection.checkResult.canSearch ? ($("#noData").remove(),
                         this.$serviceInternet.empty(),
                         this.$el.slideUp()) : ($(".service-comments").hide(),
                         $(".services-bottom-bar").hide())
                 },
                 searchComplete: function() {
                     o.trigger("RateSearchCompleted", !0),
                         this.topbarUtilsView.$el.show(),
                         this.$el.slideDown(),
                         $("li[data-tab=price-toggle] a").show(),
                         this.$(".service-clodchain-tips").hide();
                     var e = this.collection.availableAdditionalServices();
                     _.isEmpty(e) ? (this.$(".services-bottom-bar").toggleClass("empty-content", !0),
                         this.$additionalServicesLink.html("")) : (this.$(".services-bottom-bar").toggleClass("empty-content", !1),
                         this.$additionalServicesLink.html(l.addtionalService({
                             additionalServices: e
                         }))),
                         _.isEmpty(this.collection.models) ? this.$serviceWrapper.append("<span id='noData' style='margin-left: 45%;vertical-align: middle;font-size: 20px;color: red;'>" + _l("暂无数据") + "</span>") : this.$serviceInternet.html(l.payFeeInternet({
                             service: this.collection.models[0].toJSON()
                         }))
                 },
                 showSearchDefault: function() {
                     o.trigger("RateSearchFailed"),
                         this.topbarUtilsView.$el.show(),
                         this.$el.slideDown(),
                         $("li[data-tab=price-toggle] a").hide()
                 },
                 appendServices: function() {
                     this.$servicesView = new a({
                         collection: this.collection
                     }),
                         this.$serviceWrapper.append(this.$servicesView.$el)
                 },
                 appendServiceComments: function() {
                     var e = new n(window.serviceComment);
                     this.$commentsView = new r({
                         collection: e
                     }),
                         this.$serviceWrapper.append(this.$commentsView.$el)
                 }
             })
         }),
         define("views/payFee/payFeePage", ["backbone", "views/payFee/locationInput", "views/payFee/payFeesContainer", "views/payFee/otherService"], function(e, t, i, n) {
             return e.View.extend({
                 initialize: function() {
                     new t({
                         el: this.$(".payFee-location-inputs")
                     }),
                         new i({
                             el: this.$(".services-container")
                         }),
                         new n({
                             el: this.$(".other-services-container")
                         }),
                         $("body").on("click", function() {
                             $(".weight-panel").hide()
                         })
                 }
             })
         }),
         define("views/store/input", ["backbone", "helper", "jquery", "views/detailedLocationPicker/picker"], function(e, r, n, t) {
             return e.View.extend({
                 events: {
                     "click .primary-button": "onSearch",
                     "change input": "inputChanged",
                     "keyup .virtual-address-code, .address-keyword": "inputChanged",
                     "change .address": "addressPickerChanged",
                     "regionModelUpdate .detail-location-input": "regionModelUpdate",
                     "click .switcher": "switchSearching",
                     "click .storeTypeList.dropdown-menu a": "selectStoreType"
                 },
                 initialize: function(e) {
                     this.switchStatus = 1,
                         this.$searchButton = this.$el.find(".primary-button"),
                         this.taiwanStores = e.taiwanStores,
                         this.chineseStores = e.chineseStores,
                         this.map = e.map,
                         this.googleMap = e.googleMap,
                         this.$(".detail-location-input").data("max-A000710000", 5),
                         this.$(".detail-location-input").data("max-A000810000", 5),
                         this.$(".detail-location-input").data("max-852", 5),
                         this.$(".detail-location-input").data("max-886", 5),
                         this.$(".detail-location-input").data("hide-fussy-selector", !0),
                         new t({
                             el: this.$(".detail-location-input")
                         }),
                         this.listenTo(this.taiwanStores, "notFound", this.showNotFoundError),
                         this.listenTo(this.taiwanStores, "virtualNotFound", this.showVirtualNotFoundError),
                         this.listenTo(this.chineseStores, "notFound", this.showNotFoundError),
                         this.listenTo(this.chineseStores, "virtualNotFound", this.showVirtualNotFoundError),
                         this.listenTo(this.chineseStores, "sync", this.resetView),
                         this.listenTo(this.taiwanStores, "sync", this.resetView),
                         this.handleQueryStringFromURL(),
                         this.inputChanged()
                 },
                 showMap: function() {
                     n(".store-map-container").removeClass("hide"),
                         this.isNotAboardForRate() ? (n("#china-store-google-map").removeClass("hide"),
                             n("#china-store-map").addClass("hide")) : (n("#china-store-google-map").addClass("hide"),
                             n("#china-store-map").removeClass("hide"))
                 },
                 hideMap: function() {
                     n(".store-map-container").addClass("hide"),
                         n(".china-store-google-map").addClass("hide"),
                         n(".china-store-map").addClass("hide")
                 },
                 addressPickerChanged: function() {
                     this.isTaiWanAddress || this.$(".address-keyword").show()
                 },
                 switchSearching: function(e) {
                     e.preventDefault(),
                         this.clearError();
                     var t = n(e.target);
                     1 === this.switchStatus ? (t.text(t.data("text-picker")),
                         this.$(".store-address-picker").hide(),
                         this.$(".to-mark").hide(),
                         this.$(".address-keyword").hide(),
                         this.$(".address-keyword").val(""),
                         this.$(".virtual-address-code").show(),
                         this.switchStatus = 2) : (t.text(t.data("text-virtual")),
                         this.$(".store-address-picker").show(),
                         this.$(".to-mark").show(),
                     "" !== this.$(".address").val() && this.$(".address-keyword").show(),
                         this.$(".virtual-address-code").hide(),
                         this.switchStatus = 1),
                         this.inputChanged()
                 },
                 handleQueryStringFromURL: function() {
                     var e = r.getQueryStrings();
                     e && e.locationName && e.locationCode && e.locationCountryCode && e.lang === r.getSiteLanguage() && (this.$searchButton.button("loading"),
                         this.$("input.address").data("code", e.locationCode),
                         this.$("input.address").val(e.locationName),
                         this.$("input.address-keyword").val(e.locationKeyword).show(),
                         this.isTaiWanAddress = "A000710000" === e.locationCountryCode || 886 == e.locationRateCode,
                         this.isNotAboardForRate() ? this.googleMap.searchByAddrName(e.locationName + (e.locationKeyword || ""), r.getSiteLanguage()) : this.isTaiWanAddress ? this.taiwanStores.searchStores(e.locationName + "-" + (e.locationKeyword || "")) : this.map.searchByAddressName(e.locationName + (e.locationKeyword || "")))
                 },
                 resetView: function() {
                     this.$searchButton.button("reset"),
                         this.showMap()
                 },
                 inputChanged: function() {
                     if (1 === this.switchStatus) {
                         var e = 20 < this.$(".address-keyword").val().length;
                         e ? this.$(".keyword-error").show() : this.$(".keyword-error").hide(),
                             this.$searchButton.toggleClass("disabled", _.isEmpty(this.$(".address").data("code")) || e)
                     } else
                         this.$searchButton.toggleClass("disabled", _.isEmpty(this.$(".virtual-address-code").val()))
                 },
                 regionModelUpdate: function(e, t) {
                     var i = t.regionTabs;
                     this.isTaiWanAddress = _.find(i, function(e) {
                         return !!e.selectedRegion && "A000710000" === e.selectedRegion.code
                     })
                 },
                 validateVirtualAddressCode: function() {
                     var e = this.$(".virtual-address-code").val()
                         , t = new RegExp(/[a-zA-Z0-9]{3,33}$/);
                     new RegExp(/[a-zA-Z0-9]{3,33}$/);
                     return t.test(e)
                 },
                 isNotAboardForRate: function() {
                     var e = !1
                         , t = "hk" == r.getSiteLocation() || "tw" == r.getSiteLocation();
                     if (1 === this.switchStatus) {
                         var i = this.$(".address").data("rate-code");
                         if (!i) {
                             var n = r.getQueryStrings();
                             n && n.locationRateCode && (i = n.locationRateCode)
                         }
                         e = t && (852 == i || 853 == i || 886 == i)
                     } else {
                         var a = this.$(".virtual-address-code").val();
                         e = t && (0 <= _.indexOf(a, "SF852") || 0 <= _.indexOf(a, "SF853") || 0 <= _.indexOf(a, "SF886") || 0 <= _.indexOf(a, "TW"))
                     }
                     return e
                 },
                 isTaiWanAddr: function() {
                     var e = r.getQueryStrings();
                     return !!(e && e.locationName && e.locationCode && e.locationCountryCode && e.lang === r.getSiteLanguage()) && "A000710000" === e.locationCountryCode
                 },
                 onSearch: function() {
                     this.clearError(),
                         this.$searchButton.button("loading");
                     var e = this.$(".virtual-address-code").val();
                     1 === this.switchStatus ? this.isNotAboardForRate() ? this.googleMap.searchByAddrName(this.getAddressName(), r.getSiteLanguage()) : this.isTaiWanAddr() || this.isTaiWanAddress ? this.taiwanStores.searchStores(this.getAddressName()) : this.map.searchByAddressName(this.getAddressName()) : this.validateVirtualAddressCode() ? this.isNotAboardForRate() ? this.chineseStores.searchByVirtualAddressCodeHMT(e, this.googleMap) : 0 <= _.indexOf(e, "SF886") || 0 <= _.indexOf(e, "TW") ? this.taiwanStores.searchByVirtualAddressCode(e) : this.chineseStores.searchByVirtualAddressCode(e) : (this.$searchButton.button("reset"),
                         this.showVirtualAddressCodeError())
                 },
                 clearError: function() {
                     this.$(".error").hide()
                 },
                 showNotFoundError: function() {
                     this.clearError(),
                         this.$searchButton.button("reset"),
                         this.$(".not-found-error").show(),
                         this.hideMap()
                 },
                 showVirtualNotFoundError: function() {
                     this.clearError(),
                         this.$searchButton.button("reset"),
                         this.$(".not-found-virtual-error").show(),
                         this.hideMap()
                 },
                 showVirtualAddressCodeError: function() {
                     this.clearError(),
                         this.$searchButton.button("reset"),
                         this.$(".virtual-address-code-error").show(),
                         this.hideMap()
                 },
                 getAddressName: function() {
                     return this.isTaiWanAddr() || this.isTaiWanAddress ? this.$(".address").val() : this.$(".address").val() + this.$(".address-keyword").val()
                 },
                 selectStoreType: function(e) {
                     var t = n(e.currentTarget)
                         , i = t.text();
                     this.$(".storeType").val(i),
                         window.storeType = t.data("code")
                 }
             })
         }),
         define("views/store/map", ["backbone"], function(e) {
             return e.View.extend({
                 events: {
                     "click .close": "closeTip"
                 },
                 initialize: function() {
                     this.listenTo(this.collection, "sync", this.render)
                 },
                 closeTip: function() {
                     this.model.closeOverlayTip()
                 },
                 render: function() {
                     $(".store-result").hide(),
                         this.$el.show()
                 }
             })
         }),
     define("views/store/taiwanStoresResult", ["backbone", "templates", "jquery"], function(e, t, i) {
         return e.View.extend({
             initialize: function() {
                 this.listenTo(this.collection, "sync", this.render)
             },
             render: function() {
                 i(".store-result").hide(),
                     this.$el.show(),
                     this.$el.find(".results").html(t.taiwanStoresTable({
                         stores: this.collection.toJSON()
                     }))
             }
         })
     }),
     define("models/store", ["backbone", "templates"], function(e, n) {
         return e.Model.extend({
             parse: function(e) {
                 return null == window.storeType ? e : window.storeType == e.storeType ? e : void 0
             },
             parseData: function() {
                 var e;
                 this.has("serviceContent") && (e = this.get("serviceContent"),
                 0 <= _.indexOf(e, "1") && this.set("service_content_type", this.getCMSLabels().serviceContent1),
                 0 <= _.indexOf(e, "2") && this.set("service_content_type", this.getCMSLabels().serviceContent2),
                 0 <= _.indexOf(e, "3") && this.set("service_content_type", this.getCMSLabels().serviceContent3),
                 0 <= _.indexOf(e, "4") && this.set("service_content_type", this.getCMSLabels().serviceContent4),
                 0 <= _.indexOf(e, "5") && this.set("service_content_type", this.getCMSLabels().serviceContent5),
                     this.set("telephone", this.get("tel")),
                     this.set("virtual_addr", this.get("code")))
             },
             parseTWData: function() {
                 var e;
                 this.has("service_content_type") && (e = this.get("service_content_type"),
                 0 <= _.indexOf(e, "1") && this.set("service_content_type", this.getCMSLabels().serviceContent1),
                 0 <= _.indexOf(e, "2") && this.set("service_content_type", this.getCMSLabels().serviceContent2),
                 0 <= _.indexOf(e, "3") && this.set("service_content_type", this.getCMSLabels().serviceContent3),
                 0 <= _.indexOf(e, "4") && this.set("service_content_type", this.getCMSLabels().serviceContent4),
                 0 <= _.indexOf(e, "5") && this.set("service_content_type", this.getCMSLabels().serviceContent5))
             },
             updateServices: function() {
                 var e;
                 if (this.has("serviceContent")) {
                     e = this.get("serviceContent");
                     var t = [];
                     0 <= _.indexOf(e, "1") && t.push({
                         flag: "self-send",
                         name: this.getCMSLabels().serviceContent1
                     }),
                     0 <= _.indexOf(e, "2") && t.push({
                         flag: "self-get",
                         name: this.getCMSLabels().serviceContent2
                     }),
                     0 <= _.indexOf(e, "3") && t.push({
                         flag: "self-send-get",
                         name: this.getCMSLabels().serviceContent3
                     }),
                     0 <= _.indexOf(e, "4") && t.push({
                         flag: "personal-address",
                         name: this.getCMSLabels().serviceContent4
                     }),
                     0 <= _.indexOf(e, "5") && t.push({
                         flag: "convenient",
                         name: this.getCMSLabels().serviceContent5
                     }),
                         this.set("services", t)
                 }
             },
             getType: function() {
                 return "1" === this.get("storeType") ? this.getCMSLabels().type1 : "2" === this.get("storeType") ? this.getCMSLabels().type2 : "3" === this.get("storeType") ? this.getCMSLabels().type3 : "4" === this.get("storeType") ? this.getCMSLabels().type4 : (this.get("storeType"),
                     this.getCMSLabels().type5)
             },
             getLabel: function() {
                 var e = {};
                 return e.type = this.getType(),
                     this.get("code") ? "SF" === this.get("code").substring(0, 2).toUpperCase() ? e.code = this.get("code") : e.code = "SF" + this.get("code") : e.code = "",
                     e
             },
             getImageUrl: function() {
                 var e;
                 return "1" === this.get("storeType") ? this.get("selfSendDiscount") || this.get("selfPickupDiscount") ? (e = this.getCMSLabels().type6Image,
                     this.set("tipImageUrl", this.getCMSLabels().type6ImageTip)) : (e = this.getCMSLabels().type1Image,
                     this.set("tipImageUrl", this.getCMSLabels().type1ImageTip)) : "2" === this.get("storeType") ? (e = this.getCMSLabels().type2Image,
                     this.set("tipImageUrl", this.getCMSLabels().type2ImageTip)) : "3" === this.get("storeType") ? (e = this.getCMSLabels().type3Image,
                     this.set("tipImageUrl", this.getCMSLabels().type3ImageTip)) : "4" === this.get("storeType") ? (e = this.getCMSLabels().type4Image,
                     this.set("tipImageUrl", this.getCMSLabels().type4ImageTip)) : (this.get("storeType"),
                     e = this.getCMSLabels().type5Image,
                     this.set("tipImageUrl", this.getCMSLabels().type5ImageTip)),
                     e = e.substring(e.indexOf("/resource")),
                 location.protocol + "//" + location.host + e
             },
             getLabelOption: function() {
                 var e = new MLabelOptions;
                 return e.content = "",
                     e.hasBorder = !1,
                     e.hasBackground = !1,
                     e.labelPosition = new MPoint(12,-8),
                     e
             },
             getMarkerOptions: function() {
                 this.updateServices();
                 var e = {};
                 return e.icon = this.getImageUrl(),
                     e
             },
             getContent: function() {
                 return n.storePoint({
                     store: this.toJSON(),
                     label: this.getLabel()
                 }).replace(/(\r\n|\n|\r)/gm, "")
             },
             getCMSLabels: function() {
                 return window._cmsLabels
             },
             getMarker: function() {
                 var e = this.getMarkerOptions();
                 return this.get("lng") && this.get("lat") && (e.position = new AMap.LngLat(this.get("lng"),this.get("lat"))),
                     new AMap.Marker(e)
             },
             getMarkerTipContent: function(e) {
                 return n.storePoint({
                     tipImageUrl: e.getImageUrl(),
                     services: e.updateServices(),
                     store: e.toJSON(),
                     label: e.getLabel()
                 }).replace(/(\r\n|\n|\r)/gm, "")
             },
             getMapBarMarker: function() {
                 var e = new MPoint(this.get("lng"),this.get("lat"));
                 this.updateServices(),
                     this.getImageUrl();
                 var t = n.storePoint({
                     store: this.toJSON(),
                     label: this.getLabel()
                 }).replace(/(\r\n|\n|\r)/gm, "")
                     , i = new MMarker(e,new MIcon(this.getImageUrl(),32,32),new MInfoWindow("",t));
                 return this.set("markerId", i.id),
                     i
             }
         })
     }),
     define("collections/chineseStores", ["backbone", "underscore", "models/store", "helper"], function(e, n, t, i) {
         return e.Collection.extend({
             model: t,
             url: i.getRESTfulDomain("store"),
             searchByVirtualAddressCode: function(e) {
                 this.searchStores({
                     virtualAddressCode: e
                 })
             },
             searchStores: function(e) {
                 var i = "notFound";
                 n.has(e, "virtualAddressCode") && (i = "virtualNotFound"),
                     this.fetch({
                         data: e,
                         error: function(e, t) {
                             t.status,
                                 e.trigger(i)
                         }
                     })
             },
             searchByVirtualAddressCodeHMT: function(e, t) {
                 this.searchStoresHMT({
                     virtualAddressCode: e
                 }, t)
             },
             searchStoresHMT: function(e, t) {
                 var i = "notFound";
                 n.has(e, "virtualAddressCode") && (i = "virtualNotFound"),
                     this.fetch({
                         data: e,
                         success: function(e) {
                             t.drawPoint(e)
                         },
                         error: function(e, t) {
                             t.status,
                                 e.trigger(i)
                         }
                     })
             }
         })
     }),
     define("collections/taiwanStores", ["backbone", "underscore", "models/store", "helper"], function(e, t, i, n) {
         return e.Collection.extend({
             model: i,
             searchStores: function(e) {
                 var t = e.split("-");
                 this.url = n.getRESTfulDomain("store/taiwan"),
                     this.fetch({
                         data: {
                             province: t[0],
                             city: t[1],
                             county: t[2],
                             lang: "tw" === n.getSiteLocation().toLowerCase() ? "tc" : "sc",
                             start: 0,
                             end: 100
                         },
                         success: function(e) {
                             e.each(function(e) {
                                 e.parseTWData()
                             })
                         },
                         error: function(e, t) {
                             404 === t.status && e.trigger("notFound")
                         }
                     })
             },
             searchByVirtualAddressCode: function(e) {
                 this.url = n.getRESTfulDomain("store"),
                     this.fetch({
                         data: {
                             virtualAddressCode: e
                         },
                         success: function(e) {
                             e.each(function(e) {
                                 e.parseData()
                             })
                         },
                         error: function(e, t) {
                             404 === t.status && e.trigger("virtualNotFound")
                         }
                     })
             },
             parse: function(e) {
                 return e.result ? e.result : e
             }
         })
     }),
     define("models/mapFix", ["underscore"], function(n) {
         var a = {
             "香港香港岛上环": {
                 Y: "22.283696",
                 X: "114.157047"
             },
             "香港香港岛西环": {
                 Y: "22.282147",
                 X: "114.140739"
             },
             "香港香港岛鸭脷洲": {
                 Y: "22.23818",
                 X: "114.159794"
             },
             "香港香港岛北角": {
                 Y: "22.288064",
                 X: "114.20567"
             },
             "香港香港岛湾仔": {
                 Y: "22.2761507532427",
                 X: "114.175157546997"
             },
             "香港新界葵涌": {
                 Y: "22.3619033549806",
                 X: "114.134945869445"
             },
             "香港新界马鞍山": {
                 Y: "22.421899",
                 X: "114.236526"
             },
             "香港新界将军澳": {
                 Y: "22.304602",
                 X: "114.264615"
             },
             "香港九龙长沙湾": {
                 Y: "22.332174",
                 X: "114.161038"
             },
             "香港新界大埔": {
                 Y: "22.44324",
                 X: "114.17078"
             },
             "香港九龙慈云山": {
                 Y: "22.345432",
                 X: "114.205306"
             },
             "香港九龙观塘": {
                 Y: "22.310935",
                 X: "114.227943"
             },
             "香港九龙荔枝角": {
                 Y: "22.334833",
                 X: "114.153013"
             },
             "香港九龙美孚": {
                 Y: "22.336778537476",
                 X: "114.140181541442"
             },
             "香港九龙九龙湾": {
                 Y: "22.317584",
                 X: "114.216184"
             },
             "香港九龙彩虹": {
                 Y: "22.331757",
                 X: "114.212065"
             },
             "香港离岛大屿山": {
                 X: "114.010277",
                 Y: "22.279089"
             },
             "澳门路环": {
                 X: "113.559153",
                 Y: "22.116473"
             },
             "香港离岛马湾": {
                 X: "114.062328",
                 Y: "22.346307"
             }
         }
             , r = {
             "香港香港岛": {
                 Y: "22.2761507532427",
                 X: "114.175157546997"
             },
             "香港离岛": {
                 X: "113.941032",
                 Y: "22.278811"
             },
             "香港新界": {
                 Y: "22.3619033549806",
                 X: "114.134945869445"
             }
         };
         return {
             searchFixies: function(t) {
                 var e = r[t];
                 if (e)
                     return e;
                 var i = n.find(n.keys(a), function(e) {
                     return -1 !== n.indexOf(t, e)
                 });
                 return i ? a[i] : void 0
             }
         }
     }),
     define("models/map", ["backbone", "models/mapFix"], function(e, i) {
         return e.Model.extend({
             initialize: function() {
                 var e = {
                     zoom: 4
                 };
                 e.center = new AMap.LngLat(104.195397,35.86166),
                     e.resizeEnable = !0,
                     e.scrollWheel = !0,
                     e.lang = "zh_cn";
                 var t = new AMap.Map(this.get("mapContainer"),e);
                 t.plugin(["AMap.ToolBar"], function() {
                     t.addControl(new AMap.ToolBar)
                 }),
                     t.plugin(["AMap.Scale"], function() {
                         t.addControl(new AMap.Scale)
                     });
                 var i = new AMap.PlaceSearch({
                     pageSize: 1,
                     pageIndex: 1
                 });
                 this.mapObj = t,
                     this.placeSearch = i,
                     this.listenTo(this.get("stores"), "sync", this.storesChange),
                     _.bindAll(this, "openOverlayTip", "onGeocodeReturn")
             },
             storesChange: function() {
                 var t = this;
                 window.setTimeout(function() {
                     t.clearPoints(),
                         t.get("stores").each(function(e) {
                             e.getMarker().getPosition() && t.drawPoint(e.getMarker(), e.getContent())
                         }),
                         t.setZoomAndCenter()
                 }, 500)
             },
             drawPoint: function(e, t) {
                 e.setMap(this.mapObj),
                     AMap.event.addListener(e, "click", function() {
                         new AMap.InfoWindow({
                             isCustom: !0,
                             content: t,
                             offset: new AMap.Pixel(8,-41)
                         }).open(e.getMap(), e.getPosition())
                     })
             },
             clearPoints: function() {
                 this.mapObj.clearMap()
             },
             searchByAddressName: function(e) {
                 e = e.replace(/-/g, "");
                 var t = i.searchFixies(e);
                 if (t)
                     this.onGeocodeReturn({
                         list: [{
                             x: t.X,
                             y: t.Y,
                             range: window._cmsLabels.queryRadius
                         }]
                     });
                 else {
                     var n = this.onGeocodeReturn;
                     this.placeSearch.search(e, function(e, t) {
                         var i = {};
                         "complete" === e && t.poiList.pois[0] && (i.list = [{
                             x: t.poiList.pois[0].location.lng,
                             y: t.poiList.pois[0].location.lat
                         }]),
                             n(i)
                     })
                 }
             },
             onGeocodeReturn: function(e) {
                 this.set("longitudeAndLatitude", {
                     longitude: e.list ? e.list[0].x : 0,
                     latitude: e.list ? e.list[0].y : 0,
                     range: window._cmsLabels.queryRadius
                 }),
                     this.get("stores").searchStores(this.get("longitudeAndLatitude"))
             },
             setZoomAndCenter: function() {
                 var e = this.get("stores");
                 1 === e.size() ? this.mapObj.setZoomAndCenter(window._cmsLabels.defaultLevel, new AMap.LngLat(e.at(0).get("lng"),e.at(0).get("lat"))) : null != this.get("longitudeAndLatitude") && this.mapObj.setZoomAndCenter(window._cmsLabels.defaultLevel, new AMap.LngLat(this.get("longitudeAndLatitude").longitude,this.get("longitudeAndLatitude").latitude))
             },
             closeOverlayTip: function() {
                 this.mapObj.clearInfoWindow()
             },
             openOverlayTip: function(e, t) {
                 new AMap.InfoWindow({
                     isCustom: !0,
                     content: t,
                     offset: new AMap.Pixel(16,-45)
                 }).open(this.mapObj, e.getPosition())
             }
         })
     }),
     define("models/mapBar", ["backbone", "models/mapFix"], function(n, a) {
         return n.Model.extend({
             initialize: function() {
                 maplet = new Maplet(this.get("mapContainer")),
                     maplet.centerAndZoom(new MPoint(116.38749,39.90515), window._cmsLabels.defaultLevel),
                     maplet.addControl(new MStandardControl),
                     maplet.customInfoWindow = !0,
                     this.listenTo(this.get("stores"), "sync", this.storesChange)
             },
             storesChange: function() {
                 var t = this;
                 window.setTimeout(function() {
                     t.clearPoints(),
                         t.closeOverlayTip(),
                         t.get("stores").each(function(e) {
                             t.drawPoint(e)
                         }),
                         t.setZoomAndCenter()
                 }, 500)
             },
             drawPoint: function(e) {
                 marker = e.getMapBarMarker(),
                     maplet.addOverlay(marker),
                     MEvent.addListener(marker, "iw_beforeopen", this.showCustomIw),
                     MEvent.addListener(marker, "click", function(e) {
                         maplet.setCenter(new MPoint(e.pt.lon,e.pt.lat))
                     })
             },
             showCustomIw: function(e, t, i) {
                 var n = {
                     pin: !1,
                     zindex: 1001,
                     content: e.info.content,
                     location: {
                         type: "xy",
                         x: 10,
                         y: -16
                     },
                     zoomhide: !0
                 };
                 p = new MPanel(n),
                     MPanel.enableDragMap(p.dom, !1),
                     maplet.addPanel(p)
             },
             clearPoints: function() {
                 maplet.clearOverlays(!1)
             },
             searchByAddressName: function(e) {
                 2 < e.split("-").length ? city = e.split("-")[1] : city = e.split("-")[0],
                     e = e.replace(/-/g, "");
                 var t = a.searchFixies(e);
                 if (t)
                     this.onGeocodeReturn(t.X, t.Y);
                 else {
                     var i = this;
                     n.ajax({
                         type: "GET",
                         dataType: "json",
                         url: Helper.getRESTfulDomain("store/getLatLonByAddress?city=" + city + "&encode=UTF-8&customer=2&keyword=" + e),
                         success: function(e) {
                             x = e.strlatlon.split(",")[0],
                                 y = e.strlatlon.split(",")[1],
                                 i.onGeocodeReturn(x, y)
                         }
                     })
                 }
             },
             onGeocodeReturn: function(e, t) {
                 this.set("longitudeAndLatitude", {
                     longitude: e || 0,
                     latitude: t || 0,
                     range: window._cmsLabels.queryRadius
                 }),
                     this.get("stores").searchStores(this.get("longitudeAndLatitude"))
             },
             closeOverlayTip: function() {
                 _.each(maplet.getPanels(), function(e) {
                     maplet.removePanel(e)
                 })
             },
             setZoomAndCenter: function() {
                 var e = this.get("stores");
                 1 === e.size() ? null != e.at(0).get("lng") && (maplet.setCenter(new MPoint(e.at(0).get("lng"),e.at(0).get("lat"))),
                     maplet.setZoomLevel(window._cmsLabels.defaultLevel)) : (maplet.setCenter(new MPoint(this.get("longitudeAndLatitude").longitude,this.get("longitudeAndLatitude").latitude)),
                     maplet.setZoomLevel(window._cmsLabels.defaultLevel))
             }
         })
     }),
     define("models/googleMap", ["backbone", "models/mapFix", "models/store"], function(e, t, n) {
         return e.Model.extend({
             initialize: function() {
                 this.otherStore = new n,
                     this.marker_hk = new google.maps.Marker;
                 var e = {
                     zoom: 4,
                     center: new google.maps.LatLng(22.396428,114.109497),
                     mapTypeId: google.maps.MapTypeId.ROADMAP
                 };
                 this.mapObj = new google.maps.Map($("#" + this.get("mapContainer")).get(0),e),
                     this.marker_hk.setMap(this.mapObj),
                     this.marker_hk.setVisible(!0),
                     this.markersArray = [],
                     this.clickMarkersArray = null,
                     this.geocoder = new google.maps.Geocoder
             },
             searchByAddrName: function(e, t) {
                 var r = this;
                 this.geocoder.geocode({
                     address: e,
                     language: this.getLanguageCode(t)
                 }, function(e, t) {
                     if (t == google.maps.GeocoderStatus.OK) {
                         var i = e[0].geometry.location;
                         r.mapObj.setCenter(i),
                             r.mapObj.setZoom(4);
                         var n = new String(i)
                             , a = (e = n.substring(1, n.length - 1)).split(",");
                         r.set("longitudeAndLatitude", {
                             longitude: a[1].trim(),
                             latitude: a[0].trim(),
                             range: window._cmsLabels.queryRadius
                         }),
                             r.get("stores").searchStoresHMT(r.get("longitudeAndLatitude"), r)
                     }
                 })
             },
             drawPoint: function(e) {
                 var r = this.mapObj
                     , s = 0
                     , o = this.otherStore;
                 this.deleteMarkersArray();
                 var l = this;
                 r.setZoom(12),
                     e.each(function(e) {
                         if (null != e.get("lat")) {
                             var t = new google.maps.LatLng(e.get("lat"),e.get("lng"));
                             0 == s && (r.setZoom(12),
                                 r.setCenter(t),
                                 s++);
                             var i = new google.maps.Marker({
                                 icon: l.getIconUrl(e),
                                 position: t,
                                 map: r,
                                 visible: !0
                             });
                             l.markersArray.push(i);
                             var n = o.getMarkerTipContent(e)
                                 , a = new google.maps.InfoWindow({
                                 maxWidth: 380,
                                 maxHeight: 260,
                                 content: n.replace('class="store"', 'class="store-new"')
                             });
                             google.maps.event.addListener(i, "click", function() {
                                 l.clickMarkersArray && l.clickMarkersArray.close(),
                                     a.open(r, i),
                                     l.clickMarkersArray = a
                             })
                         }
                     })
             },
             deleteMarkersArray: function() {
                 if (this.markersArray && 0 < this.markersArray.length) {
                     for (i = 0; i < this.markersArray.length; i++)
                         this.markersArray[i].setMap(null);
                     this.markersArray = [],
                         this.markersArray.length = 0
                 }
             },
             getLanguageCode: function(e) {
                 return "SC" == e ? "zh" : "TC" == e ? "zh-TW" : "EN" == e ? "en" : e
             },
             getIconUrl: function(e) {
                 var t;
                 return "/" === (t = e.get("selfSendDiscount") || e.get("selfPickupDiscount") ? this.otherStore.getCMSLabels().type5Image : "1" === e.get("storeType") ? this.otherStore.getCMSLabels().type1Image : "2" === e.get("storeType") ? this.otherStore.getCMSLabels().type2Image : "3" === e.get("storeType") ? this.otherStore.getCMSLabels().type3Image : "6" === e.get("storeType") ? this.otherStore.getCMSLabels().type6Image : "9" === e.get("storeType") ? this.otherStore.getCMSLabels().type9Image : this.otherStore.getCMSLabels().type4Image)[0] ? location.protocol + "//" + location.host + t : location.protocol + "//" + location.host + location.pathname + t
             }
         })
     }),
     define("views/store/storeManager", ["backbone", "jquery", "views/store/input", "views/store/map", "views/store/taiwanStoresResult", "collections/chineseStores", "collections/taiwanStores", "models/map", "models/mapBar", "models/googleMap", "helper"], function(e, a, r, s, o, l, d, c, t, u, h) {
         return e.View.extend({
             initialize: function() {
                 var e, t = new l, i = new c({
                     mapContainer: "china-store-map",
                     stores: t
                 });
                 "hk" === h.getSiteLocation() || "tw" === h.getSiteLocation() ? (e = new u({
                     mapContainer: "china-store-google-map",
                     stores: t
                 }),
                     a(".store-map-container").removeClass("hide"),
                     a("#china-store-google-map").removeClass("hide"),
                     a("#china-store-map").addClass("hide")) : e = i;
                 var n = new d;
                 new r({
                     el: a(".store-input-view"),
                     chineseStores: t,
                     map: i,
                     googleMap: e,
                     taiwanStores: n
                 }),
                     new s({
                         el: this.$(".store-map"),
                         collection: t,
                         model: i,
                         googleMap: e
                     }),
                     new o({
                         el: this.$(".store-table"),
                         collection: n
                     })
             }
         })
     }),
     define("views/detailedLocationPicker/available", ["views/detailedLocationPicker/picker"], function(e) {
         return e.extend({
             availableRegions: function() {
                 return "international" === this.getSelectedArea() ? this.regions.models : this.regions.filter(function(e) {
                     return e.get("availableAsOrigin") || e.get("availableAsDestination")
                 })
             },
             unavailableRegions: function() {
                 return this.regions.filter(function(e) {
                     return !e.get("availableAsOrigin") && !e.get("availableAsDestination") && e.get("opening")
                 })
             }
         })
     }),
     define("views/range/input", ["backbone", "collections/detailRegions", "views/detailedLocationPicker/available"], function(e, s, t) {
         return e.View.extend({
             events: {
                 "click .primary-button": "queryRangeDetail",
                 "change .detail-location-input input": "inputChanged",
                 "keyup .abroad-zip-code-input input": "zipCodeinputChanged",
                 "regionModelUpdate .detail-location-input": "regionModelUpdate"
             },
             initialize: function() {
                 this.$(".detail-location-input").data("max-A000710000", 5),
                     this.$(".detail-location-input").data("max-886", 5),
                     new t({
                         el: this.$(".detail-location-input")
                     }),
                     this.inputChanged()
             },
             inputChanged: function() {
                 var e = this.$("input").data("code")
                     , t = this.$("input").data("country-code")
                     , i = this.$("input").data("rate-code")
                     , n = s.isNotAboard(t)
                     , a = s.isNotAboardForRate(i)
                     , r = Boolean(e);
                 n || a ? this.$(".abroad-zip-code-input").hide() : (this.$(".abroad-zip-code-input").show(),
                     this.$(".abroad-zip-code-input input").val(""),
                     r = r && Boolean(this.$(".abroad-zip-code-input input").val())),
                     this.$(".primary-button").toggleClass("disabled", !r)
             },
             numberCheck: function(e) {
                 var t = $(e.currentTarget).val();
                 /[^a-zA-Z0-9]/g.test(t) && (t = t.replace(/[^a-zA-Z0-9]/g, ""),
                     $(e.currentTarget).val(t)),
                 /[a-z]/g.test(t) && $(e.currentTarget).val(t.toUpperCase())
             },
             zipCodeinputChanged: function(e) {
                 this.numberCheck(e);
                 var t = this.$("input").data("code")
                     , i = Boolean(t) && Boolean(this.$(".abroad-zip-code-input input").val());
                 this.$(".primary-button").toggleClass("disabled", !i)
             },
             regionModelUpdate: function(e, t) {
                 this.isTaiWanAddress = _.some(t.regionTabs, function(e) {
                     return e.selectedRegion && "A000710000" === e.selectedRegion.code
                 }),
                     this.isHongKongAddress = _.some(t.regionTabs, function(e) {
                         return e.selectedRegion && "A000810000" === e.selectedRegion.code
                     }),
                     this.isMacaoAddress = _.some(t.regionTabs, function(e) {
                         return e.selectedRegion && "A000820000" === e.selectedRegion.code
                     });
                 var i = $(e.currentTarget)
                     , n = $("li[class='accessible-click current']");
                 this.isChoosingAbord = "international" === n.data("tab") || "international" === i.data("selected-area"),
                     i.data("max-level", this.isChoosingAbord ? 1 : 4)
             },
             queryRangeDetail: function(e) {
                 var t = this.$("input").data("code")
                     , i = this;
                 this.model.clear().trigger("sync");
                 var n = $(e.currentTarget);
                 n.button("loading"),
                     this.$(".error").hide(),
                     this.model.set({
                         locationName: this.$("input").val(),
                         locationCode: this.$("input").data("code"),
                         locationCountryCode: this.$("input").data("country-code"),
                         locationRateCode: this.$("input").data("rate-code"),
                         isTaiWanAddress: this.isTaiWanAddress,
                         isHongKongAddress: this.isHongKongAddress,
                         isMacaoAddress: this.isMacaoAddress,
                         isChoosingAbord: this.isChoosingAbord,
                         zipCodeInputed: this.$(".abroad-zip-code-input input").val()
                     }),
                     this.model.fetchRegion(t, {
                         error: function() {
                             i.isChoosingAbord ? i.$(".error[data-error=zip-code-not-found]").show() : i.$(".error[data-error=not-found]").show()
                         },
                         complete: function() {
                             n.button("reset")
                         }
                     })
             }
         })
     }),
     define("views/range/result", ["backbone", "templates", "helper"], function(e, i, s) {
         return e.View.extend({
             events: {
                 "click .result-regions li": "rangeClicked"
             },
             initialize: function() {
                 this.listenTo(this.model, "sync", this.render)
             },
             closePreviousPopover: function(e) {
                 var t = this.$(".result-region-detail-wrapper");
                 t.length ? t.fadeOut(function() {
                     t.remove(),
                         e()
                 }) : e()
             },
             storeURL: function(e, t, i, n, a) {
                 var r = a ? "&locationKeyword=" + a : "";
                 return s.getDynamicURLWithContext("/store/?locationName=" + e + "&locationCode=" + t + "&locationCountryCode=" + i + r + "&lang=" + s.getSiteLanguage() + "&locationRateCode=" + n)
             },
             rangeDescriptionDatasource: function() {
                 return [{
                     availableAsOrigin: !0,
                     availableAsDestination: !1,
                     selfSend: !1,
                     selfPickup: !1,
                     showRemark: !1,
                     remarks: [{
                         litterTag: _l("收"),
                         remark: _l("仅支持上门收件服务，暂不支持上门派件")
                     }]
                 }, {
                     availableAsOrigin: !1,
                     availableAsDestination: !0,
                     selfSend: !1,
                     selfPickup: !1,
                     showRemark: !1,
                     remarks: [{
                         litterTag: _l("派"),
                         remark: _l("仅支持上门派件服务，暂不支持上门收件")
                     }]
                 }, {
                     availableAsOrigin: !0,
                     availableAsDestination: !1,
                     selfSend: !0,
                     selfPickup: !1,
                     showRemark: !0,
                     remarks: [{
                         litterTag: _l("自"),
                         remark: _l("仅支持到店自寄服务，暂不支持上门收派件")
                     }]
                 }, {
                     availableAsOrigin: !1,
                     availableAsDestination: !0,
                     selfSend: !1,
                     selfPickup: !0,
                     showRemark: !0,
                     remarks: [{
                         litterTag: _l("自"),
                         remark: _l("仅支持到店自取服务，暂不支持上门收派件")
                     }]
                 }, {
                     availableAsOrigin: !0,
                     availableAsDestination: !0,
                     selfSend: !0,
                     selfPickup: !0,
                     showRemark: !0,
                     remarks: [{
                         litterTag: _l("自"),
                         remark: _l("仅支持到店自寄自取服务，暂不支持上门收派件")
                     }]
                 }]
             },
             getAvailableDescription: function(e) {
                 var t = _.findWhere(this.rangeDescriptionDatasource(), {
                     availableAsOrigin: e.availableAsOrigin,
                     availableAsDestination: e.availableAsDestination,
                     selfSend: e.selfSend,
                     selfPickup: e.selfPickup
                 })
                     , i = t ? t.remarks : [];
                 return e.addTime && i.push({
                     litterTag: _l("时"),
                     remark: _p(_l("上门服务需要加时：+%s天"), e.addTime),
                     remark_content: e.remark
                 }),
                     i
             },
             getShowRemark: function(e) {
                 var t = _.findWhere(this.rangeDescriptionDatasource(), {
                     availableAsOrigin: e.availableAsOrigin,
                     availableAsDestination: e.availableAsDestination,
                     selfSend: e.selfSend,
                     selfPickup: e.selfPickup
                 });
                 return !(null == t || null == t.showRemark || !t.showRemark)
             },
             getShowRemarkFromEnd: function(e) {
                 return e.get("isTaiWanAddress") || e.get("isHongKongAddress") || e.get("isMacaoAddress")
             },
             rangeClicked: function(e) {},
             render: function() {
                 if (this.model.get("type") || this.model.get("name")) {
                     this.$el.slideDown();
                     var e = this.model.toJSON()
                         , t = $(".detail-location-input input.no-left-border").prop("title");
                     t && e && (e.name = t),
                         e.isChoosingAbord ? this.$el.html(i.rangeResultInternational(e)) : (e.storeLinkURL = this.storeURL(e.locationName, e.locationCode, e.locationCountryCode, e.locationRateCode),
                             e.lang = s.getSiteLanguage(),
                             e.region = s.getSiteLocation(),
                             this.$el.html(i.rangeResult(e)))
                 } else
                     this.$el.slideUp()
             }
         })
     }),
     define("models/range", ["backbone", "helper"], function(e, i) {
         return e.Model.extend({
             fetchRegion: function(e, t) {
                 this.get("isChoosingAbord") ? this.url = i.getRESTfulDomain("region/" + e + "/globalRange?zipCode=" + this.get("zipCodeInputed")) : this.url = i.getRESTfulDomain("region/" + e + "/range"),
                     this.fetch(t)
             }
         })
     }),
     define("views/range/range", ["backbone", "views/range/input", "views/range/result", "models/range"], function(e, t, i, n) {
         return e.View.extend({
             el: ".range-page",
             initialize: function() {
                 this.model = new n,
                     this.inputView = new t({
                         el: this.$(".range-input"),
                         model: this.model
                     }),
                     this.resultView = new i({
                         el: this.$(".range-result"),
                         model: this.model
                     })
             }
         })
     }),
     define("models/acceptanceCriteria", ["backbone", "helper"], function(t, n) {
         return t.Model.extend({
             fetchDetailsFromCmsp: function(e) {
                 var i = this;
                 t.ajax({
                     type: "GET",
                     url: n.getRESTfulDomain(_p("acceptance/criteria?srcCountryCode=%s&desCountryCode=%s&goodsName=%s&currentPage=%s&pageSize=%s", encodeURIComponent(e.srcCode), encodeURIComponent(e.desCode), encodeURIComponent(e.goodsName), e.currentPage, e.pageSize)),
                     error: function(e, t) {
                         404 === t.status ? i.trigger("notFound") : i.trigger("networkError")
                     },
                     success: function(e, t) {
                         i.trigger("fetchSuccess", e)
                     }
                 })
             },
             fetchDetailsFromHHT: function(e) {
                 var i = this;
                 t.ajax({
                     type: "GET",
                     url: n.getRESTfulDomain(_p("acceptance/chmtcriteria?country=%s&goodsName=%s&currentPage=%s&pageSize=%s", encodeURIComponent(e.country), encodeURIComponent(e.goodsName), e.currentPage, e.pageSize)),
                     error: function(e, t) {
                         404 === t.status ? i.trigger("notFound") : i.trigger("networkError")
                     },
                     success: function(e, t) {
                         i.trigger("fetchSuccess", e)
                     }
                 })
             },
             fetchOrigins: function() {
                 var i = this;
                 t.ajax({
                     type: "GET",
                     url: n.getRESTfulDomain("acceptance/srcCountry"),
                     error: function(e, t) {
                         404 === t.status ? i.trigger("notFound") : i.trigger("networkError")
                     },
                     success: function(e, t) {
                         i.trigger("fetchSuccess", e)
                     }
                 })
             },
             fetchDests: function(e) {
                 var i = this;
                 t.ajax({
                     type: "GET",
                     url: n.getRESTfulDomain(_p("acceptance/destCountry?country=%s", encodeURIComponent(e))),
                     error: function(e, t) {
                         404 === t.status ? i.trigger("notFound") : i.trigger("networkError")
                     },
                     success: function(e, t) {
                         i.trigger("fetchSuccess", e)
                     }
                 })
             }
         })
     }),
     define("views/acceptanceCriteria", ["backbone", "underscore", "bootstrap", "helper", "models/acceptanceCriteria", "templates"], function(e, a, t, i, n, s) {
         return e.View.extend({
             events: {
                 "click .origin-dest-selection .dropdown-menu a": "selectOriginDestSelection",
                 "click .origin .dropdown-menu a": "selectOrigin",
                 "click .dest .dropdown-menu a": "selectDest",
                 "click .submit-query-mainland-hk-mc-tw": "queryAcceptanceCriteriaFromHHT",
                 "keyup #good-name-for-mainland-hk-mc-tw": "updateButtonStatusForHHT",
                 "keyup #good-name-for-others": "updateQueryButtonStatus",
                 "click .submit-query": "queryDetails",
                 "click .clear-query-mainland-hk-mc-tw": "clearInput",
                 "click .clear-query": "clearInput",
                 "click .rule-pagination-other .pagination a": "gotoOtherPage",
                 "click .rule-pagination-hht .pagination a": "gotoHHTPage",
                 "keypress input#good-name-for-mainland-hk-mc-tw": "keypressSearchHHT",
                 "keypress input#good-name-for-others": "keypressSearchCMSP"
             },
             initialize: function() {
                 i.getSiteLocation();
                 this.pageSize = 10,
                     this.originDestSelection = ["1", "2", "3", "4", "OTHERS"],
                     this.srcCountry = new n,
                     this.destCountry = new n,
                     this.hhtDetails = new n,
                     this.otherDetails = new n,
                     this.initsrcCountry = new n,
                     this.listenTo(this.srcCountry, "fetchSuccess", this.renderSrcCountry),
                     this.listenTo(this.destCountry, "fetchSuccess", this.renderDestCountry),
                     this.listenTo(this.hhtDetails, "fetchSuccess", this.renderHHTResults),
                     this.listenTo(this.otherDetails, "fetchSuccess", this.renderOtherResults),
                     this.listenTo(this.initsrcCountry, "fetchSuccess", this.initrenderSrcCountry),
                 "cn" !== i.getSiteLocation() && this.initImportExport(),
                     this.render()
             },
             initImportExport: function() {
                 this.selectionSelected = {
                     name: _l("进出口（含港/澳/台）"),
                     code: "OTHERS"
                 },
                     this.initsrcCountry.fetchOrigins(),
                     $(".selection-others").show(),
                     $(".selection-mainland-hk-mc-tw").hide(),
                     $(".mainland-hk-mc-tw").hide(),
                     $(".other-other-tip").show(),
                     this.$(".results .other-table").hide(),
                     this.$(".results .hmt-table").hide(),
                     this.$(".results .cn-table").hide(),
                     this.$(".rule-pagination-hht").hide(),
                     this.$(".rule-pagination-other").hide()
             },
             initrenderSrcCountry: function(e) {
                 this.$(".origin .dropdown-menu").html(s.dropdownAcceptSrcCountry({
                     dropdownItems: e
                 }))
             },
             selectOriginDestSelection: function(e) {
                 var t = $(e.currentTarget);
                 if (this.selectionSelected = {
                         name: t.text(),
                         code: t.data("code")
                     },
                     "OTHERS" === t.data("code"))
                     this.srcCountry.fetchOrigins(),
                         $(".selection-others").show(),
                         $(".selection-mainland-hk-mc-tw").hide(),
                         $(".mainland-hk-mc-tw").hide(),
                         $(".other-other-tip").show();
                 else {
                     $(".selection-others").hide(),
                         $(".selection-mainland-hk-mc-tw").show(),
                         $(".mainland-hk-mc-tw").show(),
                         $(".other-other-tip").hide();
                     var i = $(".origin-dest-selection .selected-dropdown").text();
                     this.selectionSelected.name != i && (this.clearInput(),
                         this.$(".submit-query-mainland-hk-mc-tw").toggleClass("disabled", !0))
                 }
                 this.$(".results .other-table").hide(),
                     this.$(".results .hmt-table").hide(),
                     this.$(".results .cn-table").hide(),
                     this.$(".rule-pagination-hht").hide(),
                     this.$(".rule-pagination-other").hide(),
                     this.render()
             },
             selectOrigin: function(e) {
                 var t = $(e.currentTarget);
                 this.originSelected = {
                     name: t.text(),
                     code: t.data("code")
                 },
                     this.$(".dest-tip").html(""),
                     this.destSelected = null,
                     this.render(),
                     this.destCountry.fetchDests(this.originSelected.code)
             },
             selectDest: function(e) {
                 var t = $(e.currentTarget);
                 this.destSelected = {
                     name: t.text(),
                     code: t.data("code"),
                     tip: a.isBlank($.trim(t.data("tip"))) ? "" : _l("温馨提示：此流向寄件,") + t.data("tip")
                 },
                     this.$(".dest-tip").html(this.destSelected.tip),
                     this.render()
             },
             updateButtonStatusForHHT: function(e) {
                 var t = $(e.currentTarget);
                 a.isEmpty(t.val()) ? this.$(".submit-query-mainland-hk-mc-tw").toggleClass("disabled", !0) : this.$(".submit-query-mainland-hk-mc-tw").toggleClass("disabled", !1)
             },
             updateQueryButtonStatus: function() {
                 var e = $.trim(this.$("#good-name-for-others").val())
                     , t = this.originSelected && this.destSelected && !a.isEmpty(e);
                 this.$(".submit-query").toggleClass("disabled", !t)
             },
             renderDropdowns: function() {
                 this.$(".origin-dest-selection .dropdown-menu").html(s.dropdownRuleTemplates({
                     dropdownItems: this.originDestSelection
                 }))
             },
             renderDropdownTitle: function() {
                 var e = this.$(".origin-dest-selection .dropdown-toggle .selected-dropdown")
                     , t = this.selectionSelected ? this.selectionSelected.name : e.data("origin-text");
                 e.text(t);
                 var i = this.$(".origin .dropdown-toggle .selected-dropdown")
                     , n = this.originSelected ? this.originSelected.name : i.data("origin-text");
                 i.text(n);
                 var a = this.$(".dest .dropdown-toggle .selected-dropdown")
                     , r = this.destSelected ? this.destSelected.name : a.data("origin-text");
                 a.text(r);
                 var s = this.$(".recieve-type .dropdown-toggle .selected-dropdown")
                     , o = this.recieveTypeSelected ? this.recieveTypeSelected.name : s.data("origin-text");
                 s.text(o)
             },
             renderSrcCountry: function(e) {
                 var t = this.selectionSelected;
                 t && "OTHERS" === t.code && this.$(".origin .dropdown-menu").html(s.dropdownAcceptSrcCountry({
                     dropdownItems: e
                 }))
             },
             renderDestCountry: function(e) {
                 this.originSelected ? (this.$(".dest .dropdown-menu").removeClass("hidden"),
                     this.$(".dest .dropdown-menu").html(s.dropdownAcceptDestCountry({
                         dropdownItems: e
                     }))) : this.$(".dest .dropdown-menu").addClass("hidden")
             },
             renderResults: function() {
                 this.$(".results"),
                     this.$(".results .src-table tbody")
             },
             renderHHTResults: function(e) {
                 var t = this.$(".results")
                     , i = this.$(".results .cn-table tbody")
                     , n = this.$(".results .hmt-table tbody");
                 e.acceptCriterias && !a.isEmpty(e.acceptCriterias) ? (this.currentSrcGoods = e.acceptCriterias,
                     -1 == e.code ? (i.empty().html(s.acceptCriteriaResultCN({
                         results: this.currentSrcGoods,
                         pageIndex: window.pageIndex || 1,
                         pageSize: this.pageSize
                     })),
                         this.$(".results .cn-table").show(),
                         this.$(".results .hmt-table").hide(),
                         this.$(".results .other-table").hide()) : -2 == e.code && (n.empty().html(s.acceptCriteriaResultHMT({
                         results: this.currentSrcGoods,
                         pageIndex: window.pageIndex || 1,
                         pageSize: this.pageSize
                     })),
                         this.$(".results .cn-table").hide(),
                         this.$(".results .hmt-table").show(),
                         this.$(".results .other-table").hide()),
                     this.printPageNavLinkList(".rule-pagination-hht", e.page.totalPage),
                     this.$(".rule-pagination-hht").show(),
                     t.slideDown()) : (i.empty(),
                     n.empty(),
                     t.slideUp(),
                     this.$(".results .cn-table").hide(),
                     this.$(".results .hmt-table").hide(),
                     this.$(".results .other-table").hide(),
                     this.$(".rule-pagination-hht").hide(),
                     alert(_l("未搜索到的物品以收派员上门核实为准")))
             },
             renderOtherResults: function(e) {
                 var t = this.$(".results")
                     , i = this.$(".results .other-table tbody");
                 0 == e.code ? e.acceptCriterias && !a.isEmpty(e.acceptCriterias) ? (this.currentSrcGoods = e.acceptCriterias,
                     i.empty().html(s.acceptCriteriaOther({
                         results: this.currentSrcGoods,
                         pageIndex: window.pageIndex || 1,
                         pageSize: this.pageSize
                     })),
                     this.printPageNavLinkList(".rule-pagination-other", e.page.totalPage),
                     this.$(".results .other-table").show(),
                     this.$(".results .cn-table").hide(),
                     this.$(".results .hmt-table").hide(),
                     this.$(".rule-pagination-other").show(),
                     t.slideDown()) : (i.empty(),
                     t.slideUp(),
                     alert(_l("未搜索到的物品以收派员上门核实为准"))) : (t.slideDown(),
                     this.$(".results .other-table").hide(),
                     this.$(".results .cn-table").hide(),
                     this.$(".results .hmt-table").hide(),
                     this.$(".rule-pagination-other").hide(),
                     i.empty(),
                     alert(_l("未搜索到的物品以收派员上门核实为准")))
             },
             render: function() {
                 this.renderDropdownTitle(),
                     this.renderDropdowns(),
                     this.updateQueryButtonStatus()
             },
             gotoOtherPage: function(e) {
                 var t = $(e.currentTarget);
                 e.stopPropagation();
                 var i = t.attr("data-pageindex");
                 window.pageIndex = Number(i);
                 var n = {
                     srcCode: this.originSelected.code,
                     desCode: this.destSelected.code,
                     goodsName: $.trim(this.$("#good-name-for-others").val()),
                     currentPage: i,
                     pageSize: this.pageSize
                 };
                 this.otherDetails.fetchDetailsFromCmsp(n)
             },
             gotoHHTPage: function(e) {
                 var t = $(e.currentTarget);
                 e.stopPropagation();
                 var i = t.attr("data-pageindex");
                 window.pageIndex = Number(i);
                 var n = {
                     goodsName: $.trim(this.$("#good-name-for-mainland-hk-mc-tw").val()),
                     currentPage: i,
                     country: null == this.selectionSelected ? "1" : this.selectionSelected.code,
                     pageSize: this.pageSize
                 };
                 this.hhtDetails.fetchDetailsFromHHT(n)
             },
             showsSrcTaxDetails: function(e) {
                 var t = $(e.currentTarget);
                 e.stopPropagation();
                 var i = t.attr("item-index")
                     , n = Number(i)
                     , a = this.currentSrcGoods[n].taxs
                     , r = s.tooltipsTable({
                     taxs: a
                 });
                 t.attr("title", r),
                     $(".tooltip").remove(),
                     t.tooltip("toggle"),
                     $(".tooltip").css({
                         top: "30px",
                         "z-index": "1000",
                         background: "#D0CECE",
                         position: "absolute"
                     }),
                     $(".tooltip table").css({
                         background: "#D0CECE",
                         width: "300px",
                         "text-align": "center"
                     }),
                     t.attr("title", "")
             },
             keypressSearchHHT: function(e) {
                 13 == e.keyCode && this.queryAcceptanceCriteriaFromHHT()
             },
             keypressSearchCMSP: function(e) {
                 13 == e.keyCode && this.queryDetails()
             },
             queryAcceptanceCriteriaFromHHT: function() {
                 var e = this
                     , t = {
                     goodsName: $.trim(e.$("#good-name-for-mainland-hk-mc-tw").val()),
                     currentPage: 1,
                     country: null == e.selectionSelected ? "1" : e.selectionSelected.code,
                     pageSize: e.pageSize
                 };
                 e.checkInput(t) && (window.pageIndex = 1,
                     e.$(".error").hide(),
                     e.$(".results").slideUp(function() {
                         e.hhtDetails.fetchDetailsFromHHT(t)
                     }))
             },
             queryDetails: function() {
                 var e = this;
                 if (a.isEmpty(e.originSelected))
                     alert(_l("请选择始发国家"));
                 else if (a.isEmpty(e.destSelected))
                     alert(_l("请选择目的国家"));
                 else {
                     var t = {
                         srcCode: e.originSelected.code,
                         desCode: e.destSelected.code,
                         goodsName: $.trim(e.$("#good-name-for-others").val()),
                         currentPage: 1,
                         pageSize: e.pageSize
                     };
                     e.checkInput(t) && (window.pageIndex = 1,
                         e.$(".error").hide(),
                         e.$(".results").slideUp(function() {
                             e.otherDetails.fetchDetailsFromCmsp(t)
                         }))
                 }
             },
             checkInput: function(e) {
                 return !("" === e.goodName || "" != e.goodName && 50 < i.parseChineseChar(e.goodName).length) || (this.$(".error[data-error=input-invalid]").text(_l("请输入必填项")).show(),
                     this.$("input[name=goodName]").focus(),
                     !1)
             },
             clearInput: function() {
                 this.$("input[type=text]").val(""),
                     this.$(".submit-query-mainland-hk-mc-tw").toggleClass("disabled", !0)
             },
             resetQueryButton: function() {
                 this.$(".submit-query").button("reset")
             },
             showNotFoundError: function() {
                 this.$(".error[data-error=not-found]").show(),
                     this.resetQueryButton()
             },
             showNetworkError: function() {
                 this.$(".error[data-error=network]").show(),
                     this.resetQueryButton()
             },
             paginationNews: function() {
                 this.show(this.newsOfPage(1)),
                 1 < this.pageCount() && this.printPageNavLinkList()
             },
             printPageNavLinkList: function(e, t) {
                 var i = window.pageIndex || 1;
                 $(e).html(s.pagination({
                     pageIndex: i,
                     pageCount: t
                 }))
             },
             pageCount: function() {
                 var e = window.news.size()
                     , t = window.newsPageSize;
                 return e % t == 0 ? e / t : Math.floor(e / t) + 1
             }
         })
     }),
     define("collections/rules", ["backbone", "helper"], function(e, i) {
         return e.Collection.extend({
             fetchURL: function(e, t) {
                 t = t || {},
                     this.url = i.getRESTfulDomain(e),
                     this.reset().fetch(t)
             },
             fetchOrigins: function() {
                 this.fetchURL("regulation/origins")
             },
             fetchDests: function(e) {
                 this.fetchURL(_p("regulation/dests?originCode=%s", encodeURIComponent(e)))
             },
             fetchItems: function(e, t) {
                 this.fetchURL(_p("regulation/items?originCode=%s&destCode=%s", encodeURIComponent(e), encodeURIComponent(t)))
             },
             fetchDetails: function(e, t, i) {
                 var n = this;
                 this.fetchURL(_p("regular/tax?code=%s&flag=%s&descType=%s&goodCode=%s&goodName=%s&weight=%s&goodValue=%s&currentPage=%s&pageSize=%s", encodeURIComponent(e), encodeURIComponent(t), encodeURIComponent(i.descType), encodeURIComponent(i.goodCode), encodeURIComponent(i.goodName), i.weight, encodeURIComponent(i.goodValue), i.currentPage, i.pageSize), {
                     error: function(e, t) {
                         404 === t.status ? n.trigger("notFound") : n.trigger("networkError")
                     }
                 })
             }
         })
     }),
     define("models/rules", ["backbone", "helper"], function(a, r) {
         return a.Model.extend({
             fetchDetails: function(e, t, i) {
                 var n = this;
                 a.ajax({
                     type: "GET",
                     url: r.getRESTfulDomain(_p("regular/tax?code=%s&flag=%s&descType=%s&goodCode=%s&goodName=%s&weight=%s&goodValue=%s&currentPage=%s&pageSize=%s", encodeURIComponent(e), encodeURIComponent(t), encodeURIComponent(i.descType), encodeURIComponent(i.goodCode), encodeURIComponent(i.goodName), i.weight, encodeURIComponent(i.goodValue), i.currentPage, i.pageSize)),
                     error: function(e, t) {
                         404 === t.status ? n.trigger("notFound") : n.trigger("networkError")
                     },
                     success: function(e, t) {
                         n.trigger("fetchSuccess", e)
                     }
                 })
             }
         })
     }),
     define("views/importExportRule", ["backbone", "underscore", "bootstrap", "helper", "collections/rules", "models/rules", "templates"], function(e, n, t, a, i, r, s) {
         return e.View.extend({
             events: {
                 "click .origin .dropdown-menu a": "selectOrigin",
                 "click .dest .dropdown-menu a": "selectDest",
                 "click .recieve-type .dropdown-menu a": "selectRecieveType",
                 "click .submit-query": "queryDetails",
                 "click .clear-query": "clearInput",
                 "click .rule-pagination-src .pagination a": "gotoSrcPage",
                 "click .rule-pagination-dest .pagination a": "gotoDestPage",
                 "click .src-table td a.tax-details": "showsSrcTaxDetails",
                 "click .dest-table td a.tax-details": "showsDestTaxDetails",
                 "click td a.tax-images": "showsTaxImages"
             },
             initialize: function() {
                 this.pageSize = 10,
                     this.origins = ["CN", "TW", "HK", "MO", "IN", "KH", "AU", "SG", "MY", "TH", "VN", "JP", "US", "KR", "RU", "MN", "ID"],
                     this.srcDetails = new r,
                     this.destDetails = new r,
                     this.listenTo(this.srcDetails, "fetchSuccess", this.renderSrcResults),
                     this.listenTo(this.srcDetails, "notFound", this.showNotFoundError),
                     this.listenTo(this.srcDetails, "networkError", this.showNetworkError),
                     this.listenTo(this.destDetails, "fetchSuccess", this.renderDestResults),
                     this.listenTo(this.destDetails, "notFound", this.showNotFoundError),
                     this.render(),
                     $("[data-toggle='tooltip']").tooltip({
                         html: !0
                     })
             },
             selectOrigin: function(e) {
                 var t = $(e.currentTarget);
                 this.originSelected = {
                     name: t.text(),
                     code: t.data("code")
                 },
                     this.render()
             },
             selectDest: function(e) {
                 var t = $(e.currentTarget);
                 this.destSelected = {
                     name: t.text(),
                     code: t.data("code")
                 },
                     this.render()
             },
             selectRecieveType: function(e) {
                 var t = $(e.currentTarget);
                 this.recieveTypeSelected = {
                     name: t.text(),
                     code: t.data("code")
                 },
                     this.render()
             },
             renderDropdowns: function() {
                 this.$(".origin .dropdown-menu").html(s.dropdownRuleTemplates({
                     dropdownItems: n.sortBy(this.origins)
                 })),
                     this.$(".dest .dropdown-menu").removeClass("hidden"),
                     this.$(".dest .dropdown-menu").html(s.dropdownRuleTemplates({
                         dropdownItems: n.sortBy(this.origins)
                     }))
             },
             renderDropdownTitle: function() {
                 var e = this.$(".origin .dropdown-toggle .selected-dropdown")
                     , t = this.originSelected ? this.originSelected.name : e.data("origin-text");
                 e.text(t);
                 var i = this.$(".dest .dropdown-toggle .selected-dropdown")
                     , n = this.destSelected ? this.destSelected.name : i.data("origin-text");
                 i.text(n);
                 var a = this.$(".recieve-type .dropdown-toggle .selected-dropdown")
                     , r = this.recieveTypeSelected ? this.recieveTypeSelected.name : a.data("origin-text");
                 a.text(r)
             },
             updateQueryButtonStatus: function() {
                 var e = this.originSelected && this.destSelected && this.recieveTypeSelected;
                 this.$(".submit-query").toggleClass("disabled", !e)
             },
             renderResults: function() {
                 this.$(".results"),
                     this.$(".results .src-table tbody"),
                     this.$(".results .dest-table tbody")
             },
             renderSrcResults: function(e) {
                 var t = this.$(".results")
                     , i = this.$(".results .src-table tbody");
                 0 == e.code ? e.goods && !n.isEmpty(e.goods) ? (this.currentSrcGoods = e.goods,
                     i.empty().html(s.importExportRuleResult({
                         results: e.goods,
                         pageIndex: window.pageIndex || 1,
                         pageSize: this.pageSize
                     })),
                     this.printPageNavLinkList(".rule-pagination-src", e.page.totalPage),
                     this.$(".results .src-table").show(),
                     this.$(".rule-pagination-src").show(),
                     t.slideDown()) : (i.empty(),
                     t.slideUp()) : (t.slideDown(),
                     this.$(".results .src-table").show(),
                     this.$(".rule-pagination-src").hide(),
                     i.empty())
             },
             renderDestResults: function(e) {
                 var t = this.$(".results")
                     , i = this.$(".results .dest-table tbody");
                 0 == e.code ? e.goods && !n.isEmpty(e.goods) ? (this.currentDestGoods = e.goods,
                     i.empty().html(s.importExportRuleResult({
                         results: e.goods,
                         pageIndex: window.pageIndex || 1,
                         pageSize: this.pageSize
                     })),
                     this.printPageNavLinkList(".rule-pagination-dest", e.page.totalPage),
                     this.$(".results .dest-table").show(),
                     this.$(".rule-pagination-dest").show(),
                     t.slideDown()) : (i.empty(),
                     t.slideUp()) : (t.slideDown(),
                     this.$(".results .dest-table").show(),
                     this.$(".rule-pagination-dest").hide(),
                     i.empty())
             },
             render: function() {
                 this.renderDropdownTitle(),
                     this.renderDropdowns(),
                     this.updateQueryButtonStatus()
             },
             gotoSrcPage: function(e) {
                 var t = $(e.currentTarget);
                 e.stopPropagation();
                 var i = t.attr("data-pageindex");
                 window.pageIndex = Number(i);
                 var n = {
                     descType: this.recieveTypeSelected.code,
                     goodCode: $.trim(this.$("input[name=goodCode]").val()),
                     goodName: $.trim(this.$("input[name=goodName]").val()),
                     weight: $.trim(this.$("input[name=weight]").val()),
                     goodValue: $.trim(this.$("input[name=goodValue]").val()),
                     currentPage: i,
                     pageSize: this.pageSize
                 };
                 this.srcDetails.fetchDetails(this.originSelected.code, "E", n)
             },
             gotoDestPage: function(e) {
                 var t = $(e.currentTarget);
                 e.stopPropagation();
                 var i = t.attr("data-pageindex");
                 window.pageIndex = Number(i);
                 var n = {
                     descType: this.recieveTypeSelected.code,
                     goodCode: $.trim(this.$("input[name=goodCode]").val()),
                     goodName: $.trim(this.$("input[name=goodName]").val()),
                     weight: $.trim(this.$("input[name=weight]").val()),
                     goodValue: $.trim(this.$("input[name=goodValue]").val()),
                     currentPage: i,
                     pageSize: this.pageSize
                 };
                 this.destDetails.fetchDetails(this.destSelected.code, "I", n)
             },
             showsSrcTaxDetails: function(e) {
                 var t = $(e.currentTarget);
                 e.stopPropagation();
                 var i = t.attr("item-index")
                     , n = Number(i)
                     , a = this.currentSrcGoods[n].taxs
                     , r = s.tooltipsTable({
                     taxs: a
                 });
                 t.attr("title", r),
                     $(".tooltip").remove(),
                     t.tooltip("toggle"),
                     $(".tooltip").css({
                         top: "30px",
                         "z-index": "1000",
                         background: "#D0CECE",
                         position: "absolute"
                     }),
                     $(".tooltip table").css({
                         background: "#D0CECE",
                         width: "300px",
                         "text-align": "center"
                     }),
                     t.attr("title", "")
             },
             showsDestTaxDetails: function(e) {
                 var t = $(e.currentTarget);
                 e.stopPropagation();
                 var i = t.attr("item-index")
                     , n = Number(i)
                     , a = this.currentDestGoods[n].taxs
                     , r = s.tooltipsTable({
                     taxs: a
                 });
                 t.attr("title", r),
                     $(".tooltip").remove(),
                     t.tooltip("toggle"),
                     $(".tooltip").css({
                         top: "30px",
                         "z-index": "1000",
                         background: "#D0CECE",
                         position: "absolute"
                     }),
                     $(".tooltip table").css({
                         background: "#D0CECE",
                         width: "300px",
                         "text-align": "center"
                     }),
                     t.attr("title", "")
             },
             showsTaxImages: function(e) {
                 var t = $(e.currentTarget);
                 e.stopPropagation();
                 var i = t.attr("image-src")
                     , n = a.getImportAndExportPicture() + i;
                 window.open(n)
             },
             queryDetails: function() {
                 var e = this
                     , t = {
                     descType: e.recieveTypeSelected.code,
                     goodCode: $.trim(e.$("input[name=goodCode]").val()),
                     goodName: $.trim(e.$("input[name=goodName]").val()),
                     weight: $.trim(e.$("input[name=weight]").val()),
                     goodValue: $.trim(e.$("input[name=goodValue]").val()),
                     currentPage: 1,
                     pageSize: e.pageSize
                 };
                 e.checkInput(t) && (this.$(".error").hide(),
                     this.$(".results").slideUp(function() {
                         e.srcDetails.fetchDetails(e.originSelected.code, "E", t),
                             e.destDetails.fetchDetails(e.destSelected.code, "I", t)
                     }))
             },
             checkInput: function(e) {
                 return "" == e.goodValue || 50 < a.parseChineseChar(e.goodValue).length ? (this.$(".error[data-error=input-invalid]").text(_l("请输入必填项")).show(),
                     this.$("input[name=goodValue]").focus(),
                     !1) : "" == e.weight || 50 < a.parseChineseChar(e.weight).length ? (this.$(".error[data-error=input-invalid]").text(_l("请输入必填项")).show(),
                     this.$("input[name=weight]").focus(),
                     !1) : "" != e.goodName && 50 < a.parseChineseChar(e.goodName).length ? (this.$(".error[data-error=input-invalid]").show(),
                     this.$("input[name=goodName]").focus(),
                     !1) : "" != e.goodCode && 50 < a.parseChineseChar(e.goodCode).length ? (this.$(".error[data-error=input-invalid]").show(),
                     this.$("input[name=goodCode]").focus(),
                     !1) : "" != e.goodCode || "" != e.goodName || (this.$(".error[data-error=input-invalid]").text(_l("品名与商品代码至少输入一项")).show(),
                     this.$("input[name=goodCode]").focus(),
                     !1)
             },
             clearInput: function() {
                 this.$("input[type=text]").val("")
             },
             resetQueryButton: function() {
                 this.$(".submit-query").button("reset")
             },
             showNotFoundError: function() {
                 this.$(".error[data-error=not-found]").show(),
                     this.resetQueryButton()
             },
             showNetworkError: function() {
                 this.$(".error[data-error=network]").show(),
                     this.resetQueryButton()
             },
             paginationNews: function() {
                 this.show(this.newsOfPage(1)),
                 1 < this.pageCount() && this.printPageNavLinkList()
             },
             printPageNavLinkList: function(e, t) {
                 var i = window.pageIndex || 1;
                 $(e).html(s.pagination({
                     pageIndex: i,
                     pageCount: t
                 }))
             },
             pageCount: function() {
                 var e = window.news.size()
                     , t = window.newsPageSize;
                 return e % t == 0 ? e / t : Math.floor(e / t) + 1
             }
         })
     }),
     define("models/clearance", ["backbone", "jquery", "helper", "jquery.iframe-transport"], function(t, e, i) {
         return t.Model.extend({
             uploadClearance: function(e) {
                 var n = this;
                 t.ajax({
                     type: " POST",
                     dataType: "json",
                     data: e.data,
                     files: e.files,
                     iframe: !0,
                     processData: !1,
                     url: i.getRESTfulDomain("clearance/upload"),
                     error: function(e, t, i) {
                         n.trigger("clearance-failed", e.responseText)
                     },
                     success: function(e, t, i) {
                         n.trigger("clearance-success", e, i.responseText)
                     }
                 })
             },
             uploadClearanceqingguan: function(e) {
                 var n = this;
                 t.ajax({
                     type: " POST",
                     dataType: "json",
                     contentType: "application/x-www-form-urlencoded; charset=utf-8",
                     data: {
                         cardType: e.cardType,
                         imageType: e.imageType,
                         bno: e.bno
                     },
                     files: e.files,
                     iframe: !0,
                     processData: !1,
                     url: i.getRESTfulDomain("clearance/clearanceImageUpload"),
                     error: function(e, t, i) {
                         n.trigger("clearance-failed", e.responseText)
                     },
                     success: function(e, t, i) {
                         n.trigger("clearanceqingguan-success", e, i.responseText)
                     }
                 })
             }
         })
     }),
     define("views/clearance", ["templates", "backbone", "models/clearance", "helper"], function(e, t, i, n) {
         return t.View.extend({
             $el: $(".clearance-page"),
             initialize: function() {
                 this.model = new i,
                     this.$imgBackWrapper = this.$("#imgBackWrapper"),
                     this.$billNumber = this.$("#bno"),
                     this.$cardType = this.$("#cardType"),
                     this.$submitButton = this.$("#submitButton"),
                     this.$imgBackWrapper = this.$("#imgBackWrapper"),
                     this.$idcardFront = this.$("#idcardFront"),
                     this.$idcardBack = this.$("#idcardBack"),
                     this.$errorWrapper = this.$(".form-group.error"),
                     this.errCodes = [],
                     this.listenTo(this.model, "clearance-failed", this.clearanceFail),
                     this.listenTo(this.model, "clearance-success", this.clearanceSuccess),
                     this.listenTo(this.model, "clearanceqingguan-success", this.clearanceqingguanSuccess),
                     this.check = !0
             },
             events: {
                 "click #btutypeqingguan .label-button": "changeTypeqingguan",
                 "click #btntype .label-button": "changeType",
                 "change #bno": "checkAll",
                 "change #idcardFront": "checkAll",
                 "change #idcardBack": "checkAll",
                 "change #clearanceImage": "checkAll",
                 "click #submitButton": "submitButtonImage",
                 "click .require-policy input.policy": "agreePrivacy"
             },
             submitButtonImage: function(e) {
                 var t = $(".label-button.selected").attr("btn-type");
                 "passport" == t || "others" == t || "identity" == t ? this.uploadClearance() : this.uploadClearanceqingguan()
             },
             changeType: function(e) {
                 $("#btutypeqingguan .label-button").removeClass("selected"),
                     $("#file-pathF").attr("placeholder", _l("上传证件正面图片")),
                     e.stopPropagation();
                 var t = $(e.target)
                     , i = t.attr("btn-type");
                 t.addClass("selected").siblings().removeClass("selected"),
                     this.$cardType.val(t.attr("btn-value")),
                     "passport" == i || "others" == i ? (this.$imgBackWrapper.find("input").val(""),
                         this.$imgBackWrapper.hide()) : this.$imgBackWrapper.show(),
                     this.checkAll()
             },
             changeTypeqingguan: function(e) {
                 $("#btntype .label-button").removeClass("selected"),
                     $("#file-pathF").attr("placeholder", _l("上传图片")),
                     e.stopPropagation();
                 var t = $(e.target);
                 t.attr("btn-type");
                 t.addClass("selected").siblings().removeClass("selected"),
                     this.$cardType.val(t.attr("btn-value")),
                     this.$imgBackWrapper.find("input").val(""),
                     this.$imgBackWrapper.hide(),
                     this.checkAll()
             },
             checkAll: function() {
                 this.check = !0,
                     this.errCodes = [],
                     this.checkBillNumber(),
                     this.checkImg(),
                 "cn" != n.getSiteLocation() && this.checkPrivacyPolicy(),
                     this.renderMsg(this.errCodes),
                     this.check ? this.$submitButton.removeAttr("disabled") : this.$submitButton.attr("disabled", "disabled")
             },
             checkBillNumber: function() {
                 var e = this.$billNumber.val();
                 "" == e || null == e ? (this.errCodes.push("4"),
                     this.check = !1) : /^\d{12}$/.test(e) || (this.errCodes.push("7"),
                     this.check = !1)
             },
             checkImg: function() {
                 var e = /.*(jpg|JPG|jpeg|JPEG|gif|GIF|png|PNG)$/;
                 "1" === this.$cardType.val() ? "" == this.$idcardFront.val() || null == this.$idcardFront.val() || "" == this.$idcardBack.val() || null == this.$idcardBack.val() ? (this.check = !1,
                     this.errCodes.push("2")) : e.test(this.$idcardFront.val()) && e.test(this.$idcardBack.val()) || (this.check = !1,
                     this.errCodes.push("21")) : "" == this.$idcardFront.val() || null == this.$idcardFront.val() ? (this.check = !1,
                     this.errCodes.push("2")) : e.test(this.$idcardFront.val()) || (this.check = !1,
                     this.errCodes.push("21"))
             },
             renderMsg: function(e) {
                 var n = this.$errorWrapper;
                 this.clearHint(),
                     this.$errorWrapper.show(),
                     _.each(e, function(e, t, i) {
                         n.find("#err-" + e).css("display", "block")
                     })
             },
             uploadClearanceqingguan: function() {
                 if (this.checkAll(),
                     0 === this.errCodes.length) {
                     var e = $(".label-button.selected").attr("btn-type")
                         , t = $(".label-button.selected").attr("btn-value")
                         , i = this.$billNumber.val();
                     $('input[name="idcardFront"]').attr("name", "clearanceImage"),
                         $('input[id="idcardFront"]').attr("id", "clearanceImage"),
                         this.model.uploadClearanceqingguan({
                             files: this.$("form :file"),
                             cardType: e,
                             imageType: t,
                             bno: i
                         })
                 }
             },
             uploadClearance: function() {
                 if ($('input[name="clearanceImage"]').attr("name", "idcardFront"),
                         $('input[id="clearanceImage"]').attr("id", "idcardFront"),
                         this.checkAll(),
                     0 === this.errCodes.length) {
                     var t = {};
                     _.each(this.$('form :input[type="text"]').add('form :input[type="hidden"]'), function(e) {
                         t[e.name] = e.value
                     }),
                         this.model.uploadClearance({
                             files: this.$("form :file"),
                             data: t
                         })
                 }
             },
             clearHint: function() {
                 this.$errorWrapper.hide().find("b").hide()
             },
             clearanceFail: function(e) {
                 this.renderMsg([9])
             },
             clearanceqingguanSuccess: function(e) {
                 this.renderMsg([e[0].code]),
                 500 === e[0].code && this.renderMsg([9]),
                 100 === e[0].code && this.renderMsg([0]),
                 100 == e[0].code && ($(".form-horizontal")[0].reset(),
                     this.$submitButton.attr("disabled", "disabled"))
             },
             clearanceSuccess: function(e) {
                 this.renderMsg([e.code]),
                 500 === e.code && this.renderMsg([9]),
                 0 == e.code && ($(".form-horizontal")[0].reset(),
                     this.$submitButton.attr("disabled", "disabled"))
             },
             agreePrivacy: function(e) {
                 $(e.currentTarget).attr("checked") ? ($(".require-policy .error-prompt").hide(),
                     this.checkAll()) : ($(".require-policy .error-prompt").show(),
                     this.$submitButton.attr("disabled", "disabled"))
             },
             checkPrivacyPolicy: function() {
                 $("#policy").attr("checked") ? $(".require-policy .checkbox").removeClass("s-prompt") : ($(".require-policy .error-prompt").show(),
                     $(".require-policy .checkbox").addClass("s-prompt"),
                     this.check = !1,
                     this.errCodes.push("201"))
             }
         })
     }),
     define("models/tax", ["backbone", "helper"], function(e, i) {
         return e.Model.extend({
             getTaxDetail: function() {
                 var t = this;
                 e.ajax({
                     contentType: "application/json",
                     type: "GET",
                     headers: {
                         "Captcha-App": "kj3tax"
                     },
                     url: i.getRESTfulDomain("tax/kj3/" + this.get("ticket") + "?app=kj3tax&answer=" + this.get("answer")),
                     error: function(e) {
                         t.trigger("failed", e)
                     },
                     success: function(e) {
                         t.trigger("get-tax", e)
                     }
                 })
             }
         })
     }),
     function(y, b) {
         var w = /[<>&\r\n"']/gm
             , C = {
             "<": "lt;",
             ">": "gt;",
             "&": "amp;",
             "\r": "#13;",
             "\n": "#10;",
             '"': "quot;",
             "'": "apos;"
         };
         y.extend({
             fileDownload: function(a, e) {
                 var t, i, n, r = y.extend({
                     preparingMessageHtml: null,
                     failMessageHtml: null,
                     androidPostUnsupportedMessageHtml: "Unfortunately your Android browser doesn't support this type of file download. Please try again with a different browser.",
                     dialogOptions: {
                         modal: !0
                     },
                     prepareCallback: function(e) {},
                     successCallback: function(e) {},
                     failCallback: function(e, t) {},
                     httpMethod: "GET",
                     data: null,
                     checkInterval: 100,
                     cookieName: "fileDownload",
                     cookieValue: "true",
                     cookiePath: "/",
                     popupWindowTitle: "Initiating file download...",
                     encodeHTMLEntities: !0
                 }, e), s = new y.Deferred, o = (navigator.userAgent || navigator.vendor || b.opera).toLowerCase();
                 /ip(ad|hone|od)/.test(o) ? t = !0 : -1 !== o.indexOf("android") ? i = !0 : n = /avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|playbook|silk|iemobile|iris|kindle|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|symbian|treo|up\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(o) || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|e\-|e\/|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(di|rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|xda(\-|2|g)|yas\-|your|zeto|zte\-/i.test(o.substr(0, 4));
                 var l = r.httpMethod.toUpperCase();
                 if (i && "GET" !== l)
                     return y().dialog ? y("<div>").html(r.androidPostUnsupportedMessageHtml).dialog(r.dialogOptions) : alert(r.androidPostUnsupportedMessageHtml),
                         s.reject();
                 var d, c, u, h, p = null, f = {
                     onPrepare: function(e) {
                         r.preparingMessageHtml ? p = y("<div>").html(r.preparingMessageHtml).dialog(r.dialogOptions) : r.prepareCallback && r.prepareCallback(e)
                     },
                     onSuccess: function(e) {
                         p && p.dialog("close"),
                             r.successCallback(e),
                             s.resolve(e)
                     },
                     onFail: function(e, t) {
                         p && p.dialog("close"),
                         r.failMessageHtml && y("<div>").html(r.failMessageHtml).dialog(r.dialogOptions),
                             r.failCallback(e, t),
                             s.reject(e, t)
                     }
                 };
                 if (f.onPrepare(a),
                     null !== r.data && "string" != typeof r.data && (r.data = y.param(r.data)),
                     "GET" === l) {
                     if (null !== r.data)
                         -1 !== a.indexOf("?") ? "&" !== a.substring(a.length - 1) && (a += "&") : a += "?",
                             a += r.data;
                     t || i ? ((c = b.open(a)).document.title = r.popupWindowTitle,
                         b.focus()) : n ? b.location(a) : d = y("<iframe>").hide().prop("src", a).appendTo("body")
                 } else {
                     var _ = "";
                     null !== r.data && y.each(r.data.replace(/\+/g, " ").split("&"), function() {
                         var e = this.split("=")
                             , t = r.encodeHTMLEntities ? v(decodeURIComponent(e[0])) : decodeURIComponent(e[0]);
                         if (t) {
                             var i = r.encodeHTMLEntities ? v(decodeURIComponent(e[1])) : decodeURIComponent(e[1]);
                             _ += '<input type="hidden" name="' + t + '" value="' + i + '" />'
                         }
                     }),
                         n ? (h = y("<form>").appendTo("body")).hide().prop("method", r.httpMethod).prop("action", a).html(_) : (t ? ((c = b.open("about:blank")).document.title = r.popupWindowTitle,
                             u = c.document,
                             b.focus()) : u = m(d = y("<iframe style='display: none' src='about:blank'></iframe>").appendTo("body")),
                             u.write("<html><head></head><body><form method='" + r.httpMethod + "' action='" + a + "'>" + _ + "</form>" + r.popupWindowTitle + "</body></html>"),
                             h = y(u).find("form")),
                         h.submit()
                 }
                 function m(e) {
                     var t = e[0].contentWindow || e[0].contentDocument;
                     return t.document && (t = t.document),
                         t
                 }
                 function g(e) {
                     setTimeout(function() {
                         c && (i && c.close(),
                         t && (c.focus(),
                         e && c.close()))
                     }, 0)
                 }
                 function v(e) {
                     return e.replace(w, function(e) {
                         return "&" + C[e]
                     })
                 }
                 return setTimeout(function e() {
                     if (-1 != document.cookie.indexOf(r.cookieName + "=" + r.cookieValue))
                         return f.onSuccess(a),
                             document.cookie = r.cookieName + "=; expires=" + new Date(1e3).toUTCString() + "; path=" + r.cookiePath,
                             void g(!1);
                     if (c || d)
                         try {
                             var t = c ? c.document : m(d);
                             if (t && null != t.body && t.body.innerHTML.length) {
                                 var i = !0;
                                 if (h && h.length) {
                                     var n = y(t.body).contents().first();
                                     n.length && n[0] === h[0] && (i = !1)
                                 }
                                 if (i)
                                     return f.onFail(t.body.innerHTML, a),
                                         void g(!0)
                             }
                         } catch (e) {
                             return f.onFail("", a),
                                 void g(!0)
                         }
                     setTimeout(e, r.checkInterval)
                 }, r.checkInterval),
                     s.promise()
             }
         })
     }(jQuery, this),
     define("jquery-download", function() {}),
     define("views/tax", ["templates", "backbone", "models/tax", "helper", "jquery-download"], function(t, e, i, n, a) {
         return e.View.extend({
             events: {
                 "click .primary-button.fetch-result": "getTaxDetail",
                 "click .primary-button.download": "download",
                 "click .verification-code .refresh": "refreshValidationCode",
                 "click .validation-image": "refreshValidationCode",
                 "keyup input": "checkInput",
                 "blur input": "checkInput",
                 "click .close": "closeModal"
             },
             initialize: function() {
                 this.refreshValidationCode("refresh-search-code"),
                     this.model = new i,
                     this.listenTo(this.model, "get-tax", this.renderTax).listenTo(this.model, "failed", this.renderFailed)
             },
             download: function() {
                 var e = this
                     , t = n.getRESTfulDomain("tax/kj3/" + this.model.get("ticket") + ".pdf?app=kj3tax&lang=" + n.getSiteLanguage() + "&region=" + n.getSiteLocation() + "&answer=" + $("#validation-download-code").val());
                 $.fileDownload(t).fail(function() {
                     alert(_l("验证码输入有误，文件下载失败!"))
                 }),
                     window.setTimeout(function() {
                         e.refreshValidationCode("refresh-download-code")
                     }, 1e3)
             },
             clearHint: function() {
                 this.$(".hint").removeClass("show"),
                     this.$(".hint .error.show").removeClass("show")
             },
             closeModal: function() {
                 this.refreshValidationCode("refresh-search-code"),
                     $("#tax-modal").modal("hide")
             },
             renderTax: function(e) {
                 if (e.validation = this.$("#validation-search-code").val(),
                     0 === e.code) {
                     "KJ3" == e.taxType ? $(".modal-content.tax-detail").html(t.taxDetail({
                         result: e
                     })) : "F" == e.taxType ? $(".modal-content.tax-detail").html(t.taxBorderDetail({
                         result: e
                     })) : $(".modal-content.tax-detail").html(t.taxPersonDetail({
                         result: e
                     })),
                         this.$("#tax-modal").modal({
                             keyboard: !0,
                             backdrop: !0
                         }),
                         this.refreshValidationCode("refresh-download-code")
                 } else
                     this.renderMsg(e.code)
             },
             renderFailed: function(e) {
                 403 === e.status ? this.renderMsg("5") : this.renderMsg("6")
             },
             renderMsg: function(e) {
                 this.refreshValidationCode("refresh-search-code"),
                     this.$(".hint").addClass("show"),
                     this.$(".hint .error.show").removeClass("show"),
                     e ? (e = "#code-" + e,
                         this.$(e).addClass("show")) : this.$("#code-2").addClass("show")
             },
             getTaxDetail: function(e) {
                 e.preventDefault(),
                     this.model.set("ticket", this.$("#ticket").val()).set("answer", this.$("#validation-search-code").val()).getTaxDetail()
             },
             checkInput: function(e) {
                 this.clearHint(),
                     "validation-download-code" === e.currentTarget.id ? this.$(".primary-button.download").toggleClass("disabled", !this.isExist(this.$("#validation-download-code").val())) : this.$(".primary-button.fetch-result").toggleClass("disabled", !(/^\d{12}$/.test(this.$("#ticket").val()) && this.isExist(this.$("#validation-search-code").val())))
             },
             isExist: function(e) {
                 return e && "" !== e
             },
             refreshValidationCode: function(e) {
                 switch (e = _.isObject(e) ? e.currentTarget.id : e) {
                     case "refresh-search-code":
                         e = "#validation-search-image";
                         break;
                     case "refresh-download-code":
                         e = "#validation-download-image";
                         break;
                     case "validation-search-image":
                     case "validation-download-image":
                         e = "#" + e
                 }
                 var t = this.$(e)
                     , i = n.getRESTfulDomain("captcha/kj3tax?force=true&time=" + moment());
                 t.attr("src", i),
                     this.$(".primary-button.download").toggleClass("disabled", !0),
                     this.$(".verification-code input").val("")
             }
         })
     }),
     define("others/graphValidate", ["sflayer", "helper"], function(e, t) {
         return Backbone.View.extend({
             initialize: function() {
                 this.getNewGraph()
             },
             events: {
                 "click .graph-validate-img": "getNewGraph",
                 "submit form": "submitValidate"
             },
             getNewGraph: function() {
                 this.$(".graph-validate-img").attr("src", t.getRESTfulDomain("captcha/sms?force=true&time=" + (new Date).getTime()))
             },
             submitValidate: function(e) {
                 e.preventDefault();
                 var t = this.$(".graph-validate-input").val();
                 /^[A-Za-z0-9]{5}$/.test(t) ? this.options.submitCallBack(t) : this.graphInputErr()
             },
             graphInputErr: function() {
                 e.msg(_l("请输入正确的验证码"))
             }
         })
     }),
     define("views/claims", ["templates", "backbone", "models/clearance", "helper", "views/detailedLocationPicker/picker", "others/graphValidate", "sflayer"], function(t, s, e, o, i, n, r) {
         return s.View.extend({
             el: $(".claim"),
             initialize: function() {
                 new i({
                     el: this.$(".detail-location-input")
                 }),
                     this.$steps = [this.$(".step_1"), this.$(".step_2"), this.$(".step_3")],
                     this.$protocalWrapper = this.$("#protocalWrapper"),
                     this.$invalidTips = this.$(".invalid-claims-tips"),
                     this.$errorWrapper = this.$(".form-group.error"),
                     this.errCodes = [],
                     this.isValidClaimsBillNo = !1
             },
             events: {
                 "keyup #carryId": "checkCarryidBeforeSubmit",
                 "click #bankCode_ul li a": "selectBank",
                 "click #submitBtn": "postInfo",
                 "keyup #phone": "isMemberByPhone",
                 "click #getCaptcha": "getCaptcha",
                 "click #confirmBtn": "confirm",
                 "click #backModifyBtn": "backModify",
                 "change #countProvince": "setCode"
             },
             parseChineseChar: function(e) {
                 return encodeURIComponent(e).replace(/%[A-F\d]{2}/g, "U")
             },
             checkCarryidBeforeSubmit: function(e) {
                 e.preventDefault();
                 var t = $(e.target).val();
                 this.$(".invalid-claims-tips ul>li").hide(),
                     this.$invalidTips.hide(),
                     this.checkBillNo(t)
             },
             checkBillNo: function(e) {
                 if ((t = this).validBillnoLength(e)) {
                     var t = this;
                     s.ajax({
                         type: "GET",
                         url: o.getRESTfulDomain("claims/" + e + "/check?app=claims"),
                         error: function(e) {
                             t.handleCheckingError(e)
                         },
                         success: function(e) {
                             t.handleCheckingSuccess(e)
                         }
                     })
                 } else
                     t.setValidCheckingBillNo(!1)
             },
             setValidCheckingBillNo: function(e) {
                 (this.isValidClaimsBillNo = e) ? this.$("#submitBtn").removeClass("disabled") : this.$("#submitBtn").addClass("disabled")
             },
             validBillnoLength: function(e) {
                 return e.length < 12 ? (this.$invalidTips.show(),
                     this.$(".invalid-claims-tips ul>li[invalid-code=2]").show(),
                     !1) : !(12 < e.length || !/^\d{12}$/.test(e)) || (this.$invalidTips.show(),
                     this.$(".invalid-claims-tips ul>li[invalid-code=2]").show(),
                     !1)
             },
             handleCheckingError: function(e) {
                 var t = ".invalid-claims-tips ul>li[invalid-code=500]";
                 e.status,
                     this.$invalidTips.show(),
                     this.$(t).show()
             },
             handleCheckingSuccess: function(e) {
                 var t = e.code;
                 if (0 == t)
                     this.setValidCheckingBillNo(!0),
                         this.$invalidTips.hide();
                 else {
                     61 !== t && 62 !== t || (t = 61);
                     var i = ".invalid-claims-tips ul>li[invalid-code=" + t + "]";
                     this.$invalidTips.show(),
                         this.$(i).show()
                 }
             },
             selectBank: function(e) {
                 e.preventDefault();
                 var t = $(e.target).data("value")
                     , i = $(e.target).text()
                     , n = $(e.target).parents("ul");
                 n.prevAll("input[name='bankCode']").val(t),
                     n.prevAll("input[name='bankCodeTxt']").val(i),
                     n.prevAll("button").html(i + '<span class="caret"></span>')
             },
             postInfo: function() {
                 this.setCode();
                 if (!this.checkAllInputs())
                     return this.renderErrMsg(),
                         !1;
                 this.$steps[1].html(t.claims({
                     data: this.serializeObject(this.$("form").serializeArray())
                 })),
                     this.showStep(2)
             },
             checkAllInputs: function() {
                 return this.errCodes = [],
                     this.checkCarryId(),
                     this.checkEndClaimMoney(),
                     this.checkCompensateAmt(),
                     this.checkBankCode(),
                     this.checkBankname(),
                     this.checkCountName(),
                     this.checkCustomerBankCard(),
                     this.checkCountProvince(),
                     this.checkPurp(),
                     this.checkPhone(),
                     this.checkCapcha(),
                     this.renderErrMsg(),
                     this.checkArea(),
                 0 == this.errCodes.length
             },
             isMemberByPhone: function() {
                 var e = this.$("#phone").val();
                 if (/^6\d{7}$|^(569){1}\d{7}$|^9\d{8}$/.test(e))
                     this.$(".area :radio")[0].checked = !0,
                         this.$(".area").show();
                 else {
                     var t = this.$(".area :radio:checked");
                     0 < t.length && (t[0].checked = !1,
                         this.$(".area").hide())
                 }
                 if (!this.isValidMainlandPhoneNumber(e)) {
                     var i = this.$("#protocal:checked");
                     return 0 < i.length && (i[0].checked = !1,
                         this.$protocalWrapper.hide()),
                         !1
                 }
                 var n = this;
                 s.ajax({
                     type: "POST",
                     url: o.getRESTfulDomain(_p("member/%(phone)s/exists?lang=%(lang)s&region=%(region)s", {
                         phone: e,
                         lang: o.getSiteLanguage(),
                         region: o.getSiteLocation()
                     })),
                     success: function(e) {
                         n.errCodes = [],
                             e.success ? (n.$("#protocal")[0].checked = !0,
                                 n.$protocalWrapper.show("")) : (n.$("#protocal")[0].checked = !1,
                                 n.$protocalWrapper.hide())
                     },
                     error: function() {}
                 })
             },
             getCaptcha: function(e) {
                 this.graphValidateLayer = r.open({
                     title: _l("图形验证码"),
                     area: "380px",
                     skin: "graphValidate",
                     content: t.graphValidate()
                 }),
                     this.graphValidate = new n({
                         el: ".graphValidate",
                         submitCallBack: this.getCaptchaone.bind(this)
                     })
             },
             getCaptchaone: function(e) {
                 r.close(this.graphValidateLayer);
                 var i = this
                     , t = $("#phone").val();
                 if (!o.isValidPhoneNumber(t))
                     return i.errCodes.push("910"),
                         i.renderErrMsg(),
                         !1;
                 if (!i.checkArea())
                     return i.errCodes.push("913"),
                         i.renderErrMsg(),
                         !1;
                 if ("" == i.$("#carryId").val() || "none" != i.$invalidTips.css("display"))
                     return i.errCodes.push("901"),
                         i.renderErrMsg(),
                         !1;
                 var n = 30
                     , a = i.$("#getCaptcha").attr("disabled", !0);
                 s.ajax({
                     type: "POST",
                     url: o.getRESTfulDomain("sms/claims/" + i.$("#phone").val() + "/notification?app=sms&lang=" + o.getSiteLanguage() + "&region=" + o.getSiteLocation() + "&billno=" + i.$("#carryId").val() + "&answer=" + e + "&area=" + o.getArea(i.$("#phone").val())),
                     error: function(e) {
                         i.errCodes = [],
                             403 === e.status ? i.errCodes.push("916") : i.errCodes.push("915"),
                             i.renderErrMsg(),
                             i.showStep(1),
                             i.$("#getCaptcha").attr("disabled", !1)
                     },
                     success: function(e) {
                         i.errCodes = [],
                             i.renderErrMsg(),
                             i.showStep(1);
                         var t = function() {
                             setTimeout(function() {
                                 if (0 == n)
                                     return a.text(_l("获取验证码")),
                                         a.attr("disabled", !1),
                                         !1;
                                 a.text(_l("重新获取") + n--),
                                     t()
                             }, 1e3)
                         };
                         t()
                     }
                 })
             },
             isValidMainlandPhoneNumber: function(e) {
                 return /^1\d{10}$/.test(e)
             },
             renderErrMsg: function() {
                 this.$("#errMsgWrapper li").hide(),
                 0 < this.errCodes.length && _.each(this.errCodes, function(e) {
                     this.$("#errMsgWrapper li[errCode=" + e + "]").show()
                 })
             },
             checkCarryId: function() {
                 "" != this.$("#carryId").val() && 12 == this.$("#carryId").val().length || this.errCodes.push("901")
             },
             checkEndClaimMoney: function() {
                 var e = this.$("#endClaimMoney").val();
                 "" != e && /^\d+(\.\d{1,2})?$/.test(e) || this.errCodes.push("902")
             },
             checkCompensateAmt: function() {
                 var e = this.$("#compensateAmt").val();
                 "" != e && /^\d+(\.\d{1,2})?$/.test(e) || this.errCodes.push("903")
             },
             checkBankCode: function() {
                 "" == this.$("#bankCode").val() && this.errCodes.push("904")
             },
             checkBankname: function() {
                 var e = this.$("#bankName").val();
                 "" == (e = this.parseChineseChar(e)) && this.errCodes.push("905"),
                 100 < e.length && this.errCodes.push("1105")
             },
             checkCountName: function() {
                 var e = this.$("#countName").val();
                 "" == (e = this.parseChineseChar(e)) && this.errCodes.push("906"),
                 100 < e.length && this.errCodes.push("1104")
             },
             checkCustomerBankCard: function() {
                 var e = this.$("#customerBankCard").val();
                 "" == e && this.errCodes.push("907"),
                 (!/^\d*$/.test(e) || 25 < e.length) && this.errCodes.push("1106")
             },
             checkCountProvince: function() {
                 "" == this.$("#countProvince").val() && this.errCodes.push("908")
             },
             checkPurp: function() {
                 0 === this.$(":radio[name=ctgyPurp]:checked").length && this.errCodes.push("909")
             },
             checkPhone: function() {
                 o.isValidMobileByChinaAndHMT(this.$("#phone").val()) || this.errCodes.push("910")
             },
             checkCapcha: function() {
                 "" != this.$("#capcha").val() && 6 == this.$("#capcha").val().length || this.errCodes.push("911")
             },
             checkArea: function() {
                 return !this.$(".area").is(":visible") || 0 != this.$(".area :radio:checked").length || (this.errCodes.push("914"),
                     !1)
             },
             showStep: function(e) {
                 _.each(this.$steps, function(e) {
                     e.hide()
                 }),
                     this.$steps[e - 1].show()
             },
             confirm: function() {
                 var r = this;
                 0 < this.errCodes.length ? (r.renderErrMsg(),
                     r.showStep(1)) : s.ajax({
                     type: "POST",
                     url: o.getRESTfulDomain("claims/sendCustomer?app=claims"),
                     headers: {
                         "SMS-Verification-App": "claims",
                         "SMS-Verification-Code": this.$("#capcha").val(),
                         "SMS-Verification-Mobile": this.$("#phone").val()
                     },
                     data: this.$("form").serializeArray(),
                     error: function(e) {
                         if (r.errCodes = [],
                             403 === e.status) {
                             var t = JSON.parse(e.responseText);
                             !t || "003" !== t.code && "002" !== t.code ? r.errCodes.push("911") : r.errCodes.push("912")
                         } else
                             r.errCodes.push("913");
                         var i = r.$("#getCaptcha");
                         i.text(_l("获取验证码")),
                             i.attr("disabled", !1),
                             r.renderErrMsg(),
                             r.showStep(1)
                     },
                     success: function(e) {
                         if ("0" == e.claimsRst) {
                             if (r.$("#protocal").is(":checked")) {
                                 var t = _l("您已经成功注册为F35会员，账号为") + r.$("#phone").val() + _l("。密码会在稍后发送到您的手机。")
                                     , i = _l("注册会员失败。")
                                     , n = "1" == e.regRst && r.$("") ? t : i;
                                 r.$(".step_3").append("<p>" + n + "</p>")
                             }
                             r.showStep(3)
                         } else {
                             var a = e;
                             "2" !== a.claimsRst && "48" !== a.claimsRst || (a.claimsRst = "2"),
                             "5" !== a.claimsRst && "47" !== a.claimsRst || (a.claimsRst = "5"),
                             "1" !== a.claimsRst && "46" !== a.claimsRst || (a.claimsRst = "1"),
                             "3" !== a.claimsRst && "49" !== a.claimsRst || (a.claimsRst = "3"),
                                 r.errCodes = [],
                                 r.errCodes.push(a.claimsRst),
                                 r.renderErrMsg(),
                                 r.showStep(1)
                         }
                     }
                 })
             },
             backModify: function() {
                 this.showStep(1)
             },
             serializeObject: function(e) {
                 var t = {};
                 return $.each(e, function() {
                     void 0 !== t[this.name] ? (t[this.name].push || (t[this.name] = [t[this.name]]),
                         t[this.name].push(this.value || "")) : t[this.name] = this.value || ""
                 }),
                     t
             },
             setCode: function() {
                 this.$("#countProvinceCode").val(this.$("#countProvince").data("code"))
             }
         })
     }),
     define("models/currency", ["backbone"], function(e) {
         return e.Model.extend({
             initialize: function() {}
         })
     }),
     define("collections/currency", ["backbone", "models/currency", "helper", "moment"], function(n, e, a, r) {
         return n.Collection.extend({
             model: e,
             url: a.getRESTfulDomain("exrate/currencies"),
             initialize: function() {
                 this.fetch()
             },
             fetchRate: function(e, t, i) {
                 return n.ajax({
                     url: a.getRESTfulDomain("exrate"),
                     data: {
                         time: i || r().format(),
                         originCode: e,
                         destCode: t
                     }
                 })
             }
         })
     }),
     define("views/detailDatePicker/picker", ["backbone", "datepicker", "datepickercn", "templates", "moment", "helper"], function(e, t, i, n, a, r) {
         return e.View.extend({
             events: {
                 "click input": "toggleLocationPicker",
                 "click .input-group-addon": "toggleLocationPicker",
                 toggle: "toggleLocationPicker",
                 click: "stopPropagation"
             },
             initialize: function() {
                 this.$pickerWrapper = $('<div class="detail-date-picker toggle-plugins"></div>'),
                     this.$el.append(this.$pickerWrapper),
                     this.render()
             },
             stopPropagation: function(e) {
                 e.stopPropagation()
             },
             showPicker: function() {
                 $("body").click(),
                     this.$pickerWrapper.show()
             },
             toggleLocationPicker: function(e) {
                 this.$pickerWrapper.is(":visible") ? this.$pickerWrapper.hide() : (e && e.stopPropagation(),
                     this.showPicker())
             },
             startDate: function() {
                 return "1993-01-01"
             },
             render: function() {
                 var t = this;
                 this.$(".detail-date-picker").datepicker({
                     language: r.getStandardLocale(),
                     startDate: t.startDate(),
                     endDate: "0d",
                     todayBtn: "linked"
                 }).on("changeDate", function(e) {
                     e.date && (a(e.date).isSame(a(), "day") ? t.$("input").val(_l("今天")) : t.$("input").val(a(e.date).format("YYYY-MM-DD")),
                         t.$("input").data("date", a(e.date).format()).trigger("change"));
                     t.$pickerWrapper.hide()
                 }).datepicker("setDate", "0d")
             }
         })
     }),
     define("views/currency", ["backbone", "collections/currency", "templates", "views/detailDatePicker/picker"], function(e, t, i, n) {
         return e.View.extend({
             events: {
                 "click .origin .dropdown-menu a": "selectOriginCurrency",
                 "click .dest .dropdown-menu a": "selectDestCurrency",
                 "keyup .origin input": "originInputChanged",
                 "change #time-picker": "fetchRate"
             },
             initialize: function() {
                 this.collection = new t,
                     this.listenTo(this.collection, "sync", this.render),
                     this.originUnit = 1,
                     new n({
                         el: $(".detail-date-input")
                     }),
                     this.render()
             },
             numberCheck: function(e) {
                 var t = $(e.currentTarget).val();
                 (isNaN(t) || -1 !== _.indexOf(t, ".")) && (t = t.replace(/[^0-9]/g, ""),
                     $(e.currentTarget).val(t)),
                 9 < t.length && $(e.currentTarget).val(t.substr(0, 9))
             },
             originInputChanged: function(e) {
                 this.numberCheck(e),
                     this.originUnit = Math.round(Number($(e.currentTarget).val())),
                 this.currencyRate && this.setResultText()
             },
             setResultText: function() {
                 var e;
                 if (Number(this.originUnit)) {
                     var t = this.originUnit * this.currencyRate;
                     e = Math.round(1e6 * t) / 1e6
                 } else
                     e = this.$(".result-text").data("placeholder");
                 var i = this.selectedDest.code;
                 this.$(".result-text").html("<small>" + i + "</small> " + e).show()
             },
             selectOriginCurrency: function(e) {
                 var t = $(e.currentTarget);
                 this.selectedOrigin = {
                     name: t.text(),
                     code: t.data("code")
                 },
                     this.$(".origin .input-group-addon").text(t.data("code")).show(),
                     this.fetchRate()
             },
             selectDestCurrency: function(e) {
                 var t = $(e.currentTarget);
                 this.selectedDest = {
                     name: t.text(),
                     code: t.data("code")
                 },
                     this.$(".dest .input-group-addon").text(t.data("code")).show(),
                     this.fetchRate()
             },
             fetchRate: function() {
                 if (!this.selectedOrigin || !this.selectedDest)
                     return this.isFetchRateFromServer = !1,
                         this.render(),
                         void this.$(".result-text").hide();
                 var t = this;
                 t.$(".error").hide(),
                     t.isFetchRateFromServer = !0,
                     t.currencyRate = null,
                     t.render(),
                     this.collection.fetchRate(this.selectedOrigin.code, this.selectedDest.code, this.$("#time-picker").data("date")).success(function(e) {
                         t.currencyRate = e,
                             t.isFetchRateFromServer = !1,
                             t.render()
                     }).error(function(e) {
                         t.isFetchRateFromServer = !1,
                             t.currencyRate = void 0,
                             t.render(),
                             404 === e.status ? t.$(".error[data-error=not-found]").show() : t.$(".error[data-error=network]").show()
                     })
             },
             availableOriginCurrencies: function() {
                 return this.selectedDest,
                     this.collection.models
             },
             availableDestCurrencies: function() {
                 return this.selectedOrigin,
                     this.collection.models
             },
             render: function() {
                 this.selectedOrigin && this.$(".origin .dropdown-toggle .selected-currency").text(this.selectedOrigin.name),
                 this.selectedDest && this.$(".dest .dropdown-toggle .selected-currency").text(this.selectedDest.name),
                     this.$(".origin input").val(this.originUnit),
                     this.currencyRate ? this.setResultText() : this.isFetchRateFromServer ? this.$(".result-text").html(this.$(".result-text").data("loading-text")).show() : this.$(".result-text").hide(),
                     this.$(".origin .dropdown-menu").html(i.dropdownTemplates({
                         dropdownItems: this.availableOriginCurrencies()
                     })),
                     this.$(".dest .dropdown-menu").html(i.dropdownTemplates({
                         dropdownItems: this.availableDestCurrencies()
                     }))
             }
         })
     }),
     define("collections/invoices", ["backbone", "helper"], function(e, a) {
         return e.Collection.extend({
             parse: function(e) {
                 return _.each(e, function(e) {
                     e.invoiceID = e.id,
                         e.id = null
                 }),
                     e
             },
             fetchInvoiceDetails: function(e, t, i) {
                 var n = this;
                 this.url = a.getRESTfulDomain(_p("invoices/%s?code=%s&answer=%s&app=invoice", e, t, i)),
                     this.fetch({
                         error: function(e, t) {
                             404 === t.status ? n.trigger("notFound") : 403 === t.status ? n.trigger("validationCodeError") : n.trigger("networkError");
                             var i = a.getRESTfulDomain("captcha/invoice?force=true&time=" + moment());
                             this.$("#validation-search-image").attr("src", i),
                                 this.$("#validation-search-code").val("")
                         }
                     })
             }
         })
     }),
     define("views/invoices", ["backbone", "collections/invoices", "templates", "helper"], function(e, t, n, i) {
         return e.View.extend({
             events: {
                 "keyup #invoice-number": "invoiceNumberUpdated",
                 "keyup #invoice-code": "invoiceCodeUpdated",
                 "keyup #validation-search-code": "inputUpdated",
                 "click .refresh": "reloadValidateCodeImage",
                 "click #validation-search-image": "reloadValidateCodeImage",
                 "click .primary-button": "queryInvoices"
             },
             initialize: function() {
                 this.collection = new t,
                     this.listenTo(this.collection, "sync", this.render),
                     this.listenTo(this.collection, "notFound", this.showNotFoundError),
                     this.listenTo(this.collection, "networkError", this.showNetworkError),
                     this.listenTo(this.collection, "validationCodeError", this.showValidationCodeError),
                     this.reloadValidateCodeImage()
             },
             invoiceNumberUpdated: function(e) {
                 var t = $(e.currentTarget).val()
                     , i = t.replace(/[^0-9]/g, "");
                 t !== i && $(e.currentTarget).val(i),
                     this.inputUpdated()
             },
             invoiceCodeUpdated: function(e) {
                 var t = $(e.currentTarget).val()
                     , i = t.replace(/[^0-9A-Za-z]/g, "");
                 t !== i && $(e.currentTarget).val(i),
                     this.inputUpdated()
             },
             reloadValidateCodeImage: function() {
                 var e = i.getRESTfulDomain("captcha/invoice?force=true&time=" + moment());
                 this.$("#validation-search-image").attr("src", e),
                     this.$("#validation-search-code").val("")
             },
             render: function() {
                 var e = this.$(".results");
                 if (this.collection.length) {
                     var t = this.$(".primary-button");
                     t.html(t.data("resetText")),
                         this.reloadValidateCodeImage();
                     var i = this.collection.toJSON();
                     e.html(n.invoicesResult({
                         results: i
                     })),
                         e.slideDown()
                 } else
                     e.slideUp()
             },
             inputUpdated: function() {
                 var e = this.$("#invoice-number").val()
                     , t = this.$("#invoice-code").val()
                     , i = this.$("#validation-search-code").val();
                 this.$(".primary-button").toggleClass("disabled", !(e && t && i)),
                     this.$(".error").hide()
             },
             resetLoading: function() {
                 this.$(".error").hide(),
                     this.$(".primary-button").button("reset")
             },
             showNotFoundError: function() {
                 var e = this.$(".primary-button");
                 e.html(e.data("resetText")),
                     this.$(".error[data-error=not-found]").show(),
                     this.reloadValidateCodeImage()
             },
             showNetworkError: function() {
                 this.resetLoading(),
                     this.$(".error[data-error=network]").show()
             },
             showValidationCodeError: function() {
                 var e = this.$(".primary-button");
                 e.html(e.data("resetText")),
                     this.$(".error[data-error=validation-code]").show()
             },
             queryInvoices: function() {
                 var e = this.$(".primary-button");
                 this.resetLoading(),
                     e.button("loading");
                 var t = this.$("#invoice-number").val()
                     , i = this.$("#invoice-code").val()
                     , n = this.$("#validation-search-code").val()
                     , a = this;
                 this.$(".results").slideUp(function() {
                     a.collection.fetchInvoiceDetails(t, i, n)
                 })
             }
         })
     }),
     define("views/home/moveContent", ["backbone"], function(e) {
         return e.View.extend({
             events: {
                 "click .nav a": "tabSwitch"
             },
             initialize: function() {
                 this.$(".nav a").attr("aria-pressed", "false")
             },
             tabSwitch: function(e) {
                 e.preventDefault(),
                     this.$(".nav li").removeClass("active").find("a").attr("aria-pressed", "false"),
                     this.$(e.currentTarget).parent().addClass("active").end().attr("aria-pressed", "true"),
                     this.$(".nav-content").removeClass("tab-open"),
                     this.$(this.$(e.currentTarget).attr("href")).addClass("tab-open")
             }
         })
     }),
     define("views/home/index", ["views/quicktools/waybill", "./moveContent"], function(e, t) {
         return Backbone.View.extend({
             initialize: function() {
                 new e({
                     el: this.$("#small-header .quick-tool")
                 }),
                 0 < $(".move-content").length && new t({
                     el: $(".index-page .move-content")
                 })
             }
         })
     }),
     define("views/cooperativeAdvisory/coomperativeAdvisory", ["backbone", "templates", "jquery", "helper", "views/detailedLocationPicker/amapPicker", "views/detailedLocationPicker/picker", "sflayer"], function(i, e, a, r, t, n, s) {
         var o = {
             companyName: {
                 require: "客户名称未填写",
                 maxLength: [50, "客户名称超出长度范围"]
             },
             companyRegion: {
                 require: "客户区域未填写"
             },
             companyAddress: {
                 require: "客户详细地址未填写",
                 maxLength: [128, "客户详细地址超出长度范围"]
             },
             contacts: {
                 require: "联系人姓名未填写",
                 maxLength: [32, "联系人姓名超出长度范围"]
             },
             contactsMobile: {
                 require: "联系人手机未填写",
                 regex: [/^[1][3,4,5,7,8][0-9]{9}$/, "联系人手机不符合手机格式"]
             },
             contactsTel: {
                 regex: [/^0\d{2,3}-[1-9]\d{6,7}(-\d{3,5})?$/, "联系人座机不符合电话格式"]
             },
             potentialIncomeStr: {
                 require: "每月F35快递费未填写",
                 regex: [/^([1-9]\d{0,8}|1000000000)$/, "每月F35快递费超出长度规定"]
             },
             code: {
                 require: "您输入的验证码不能为空"
             },
             policy: {
                 checked: "必须同意隐私声明"
             }
         }
             , l = {
             0: {
                 tip: "无效手机号码"
             },
             1: {
                 status: "common",
                 tip: "您的合作申请需求我司已在跟进中，请您耐心等待，谢谢！"
             },
             2: {
                 status: "common",
                 tip: "您的月结申请未成功，如有问题请与客户经理联系（客户经理${managerName}、电话${managerPhone}），谢谢！"
             },
             3: {
                 status: "common",
                 tip: "您的月结申请已在办理中，如有问题请与客户经理联系（客户经理${managerName}、电话${managerPhone}），谢谢！"
             },
             4: {
                 status: "continue",
                 tip: "您在${clueCloseTime}申请我司月结未成功，是否继续申请？"
             },
             5: {
                 status: "continue",
                 tip: "您已是月结卡号尾数为${cardTailNum}的月结客户，如有问题请与客户经理联系（客户经理${managerName}、电话${managerPhone}），是否继续申请？"
             },
             6: {
                 status: "success",
                 tip: "销售人员将会尽快与您取得联系，近期请留意接听来电"
             },
             7: {
                 status: "continue",
                 tip: "您的月结申请已在办理中，如有问题请与客户经理联系（客户经理${managerName}、电话${managerPhone}），是否继续申请？"
             }
         };
         return i.View.extend({
             events: {
                 "click .select p": "openCooperativeType",
                 "click .select li": "chooseCooperativeType",
                 "click #validation-image": "refreshValidationCode",
                 "click .r-btn-a": "sumitApplication",
                 "click .continue-btn": "sumitApplication",
                 "blur input.text": "txtBlur",
                 "focus input.text": "txtFocus",
                 "change #policy": "policyChange",
                 "regionModelUpdate .detail-location-input": "regionModelUpdate"
             },
             initialize: function() {
                 this.refreshValidationCode(),
                     this.location = new n({
                         el: this.$(".detail-location-input")
                     }),
                     this.AmapPicker = new t({
                         el: this.$("#companyAddress").parent(),
                         location: this.location
                     })
             },
             txtBlur: function(e) {
                 var t = a(e.currentTarget)
                     , i = t.attr("id");
                 this.subValidate(t.parents(".subclass"), o[i], t.val().trim()),
                 "companyAddress" === i && this.subValidate(a(".company-region"), o.companyRegion, a("#companyRegion").val().trim())
             },
             txtFocus: function(e) {
                 this.hideError(a(e.currentTarget).parents(".subclass"))
             },
             openCooperativeType: function(e) {
                 a(e.currentTarget).parent().toggleClass("active")
             },
             chooseCooperativeType: function(e) {
                 var t = a(e.currentTarget);
                 t.parents(".select").removeClass("active").find("p").text(t.text()),
                     a("#businessSegment").val(t.data("business-type"))
             },
             policyChange: function() {
                 this.subValidate(a(".require-policy"), o.policy, a("#policy").prop("checked"))
             },
             regionModelUpdate: function(e, t) {
                 this.add_location = this.getLocationData(t.regionTabs) || {},
                     this.subValidate(a(".company-region"), o.companyRegion, "1")
             },
             showError: function(e, t) {
                 var i = a(a(".error-prompt-template").html());
                 i.children("span").text(_l(t)),
                     e.append(i),
                     e.find(".input").addClass("s-prompt")
             },
             hideError: function(e) {
                 e.find(".error-prompt").remove(),
                     e.find(".input").removeClass("s-prompt")
             },
             refreshValidationCode: function() {
                 a("#code").val("");
                 var e = r.getRESTfulDomain("captcha/sasp?force=true&time=" + (new Date).getTime());
                 a("#validation-image").length && a("#validation-image").attr("src", e)
             },
             getLocationData: function(e) {
                 var t, i, n, a, r, s;
                 return 2 === (e = _.filter(e, function(e) {
                     return e.selectedRegion
                 })).length ? (t = e[0].selectedRegion.distId,
                     i = e[1].selectedRegion.parentId,
                     n = e[1].selectedRegion.distId,
                     a = e[1].selectedRegion.rateCode,
                     r = e[0].selectedRegion.name,
                     s = e[1].selectedRegion.name) : 3 === e.length && (t = e[0].selectedRegion.distId,
                     i = e[1].selectedRegion.distId,
                     n = e[2].selectedRegion.distId,
                     a = e[2].selectedRegion.rateCode,
                     r = e[1].selectedRegion.name,
                     s = e[2].selectedRegion.name),
                     {
                         provinceId: t,
                         cityId: i,
                         districtId: n,
                         cityCode: a,
                         cityName: r,
                         districtName: s
                     }
             },
             subValidate: function(e, t, i) {
                 if (t) {
                     var n = "";
                     this.hideError(e),
                     t.require && "" === i && (n = t.require),
                     t.checked && !i && (n = t.checked),
                     t.maxLength && i.length > t.maxLength[0] && (n = t.maxLength[1]),
                     "" !== i && t.regex && !t.regex[0].test(i) && (n = t.regex[1]),
                     n && this.showError(e, n)
                 }
             },
             validateAll: function() {
                 var i = this;
                 a(".subclass").each(function() {
                     var e = a(this).find("input[type='text']")
                         , t = a(this).find("input[type='checkbox']");
                     e.length ? i.subValidate(a(this), o[e.attr("id")], e.val().trim()) : t.length && i.subValidate(a(this), o[t.attr("id")], t.prop("checked"))
                 })
             },
             sumitApplication: function(e) {
                 if (this.validateAll(),
                     1 === a(".error-prompt").length) {
                     var t = {
                         isResubmit: a(e.currentTarget).hasClass("continue-btn"),
                         companyName: a("#companyName").val(),
                         companyAddress: a("#companyAddress").val(),
                         contacts: a("#contacts").val(),
                         contactsMobile: a("#contactsMobile").val(),
                         contactsTel: a("#contactsTel").val(),
                         potentialIncomeStr: a("#potentialIncomeStr").val(),
                         clueSubmitPeople: a("#clueSubmitPeople").val(),
                         businessSegment: a("#businessSegment").val(),
                         clueSource: 1958,
                         remark: a("#remark").val(),
                         lang: r.getSiteLanguage()
                     };
                     _.extend(t, this.add_location),
                         this.saveCooperativeAjax(t, a("#code").val())
                 }
             },
             saveCooperativeAjax: function(e, t) {
                 var n = this;
                 i.ajax({
                     type: "POST",
                     contentType: "application/json",
                     url: r.getRESTfulDomain("sasp/collectedInformation?app=sasp&answer=" + t),
                     data: JSON.stringify(e),
                     success: function(e) {
                         if (a(".submit-result").hide(),
                             "true" === e.success) {
                             var t = e.obj
                                 , i = l[t.status];
                             switch (a("." + i.status).show().find(".tip").html(n.getTip(_l(i.tip), t)),
                                 i.status) {
                                 case "continue":
                                     a(".submit-wrap").hide(),
                                         n.refreshValidationCode();
                                     break;
                                 case "success":
                                 case "common":
                                     a(".content form").hide();
                                     break;
                                 default:
                                     a(".prompt2").text(_l(t.tips))
                             }
                         } else
                             a(".r-btn-b").show(),
                                 n.refreshValidationCode(),
                                 setTimeout("$('.r-btn-b').hide()", 3e3)
                     },
                     error: function(e) {
                         403 === e.status ? n.showError(a(".verification-code"), _l("您输入的验证码有误，请重新输入")) : (a(".r-btn-b").css("width", "220px").text(_l("网络异常，请稍后再试！")).show(),
                             setTimeout("$('.r-btn-b').hide()", 3e3)),
                             n.refreshValidationCode()
                     }
                 })
             },
             getTip: function(e, t) {
                 for (var i in t)
                     e = e.replace("${" + i + "}", t[i]);
                 return e
             }
         })
     }),
     define("views/cooperativeAdvisory/coomperativeAdvisoryForKR", ["backbone", "templates", "jquery", "helper"], function(n, e, a, r) {
         return n.View.extend({
             events: {
                 "click .select p": "openContactTitleType",
                 "click .select a": "chooseContactTitleType",
                 "click #validation-image": "refreshValidationCode",
                 "blur .contact-name input.text": "inputChangedByContactName",
                 "blur .require-company input.text": "inputChangedByCompanyName",
                 "blur .mobile input.text": "inputChangedByMobile",
                 "blur .require-mail input.text": "inputChangedByMail",
                 "blur .require-enquiry textarea.enquiry": "inputChangedByEnquiry",
                 "click .r-btn-a": "sumitApplication",
                 "click .require-policy input.policy": "agreePrivacy",
                 "focus .contact-name input.text, .mobile input.text, .require-mail input.text, .require-company input.text, .require-enquiry textarea.enquiry ": "hideErrorPrompt",
                 "focus #code": "hideValidcodeErrorPrompt"
             },
             initialize: function() {
                 this.errorCode = [],
                     this.defaultTitleType(),
                     this.refreshValidationCode()
             },
             defaultTitleType: function() {
                 a(".subclass .input").removeClass("s-prompt"),
                     a(".validation-code").siblings(".input").find(".error-prompt").hide(),
                     a("form")[0].reset(),
                     this.showSubmitBtn(),
                     this.setDefaultTitleType()
             },
             showSubmitBtn: function() {
                 a(".r-btn-b").hide(),
                     a(".submit-bottom .r-prompt").hide(),
                     a(".r-btn-a").show()
             },
             setDefaultTitleType: function() {
                 var e = a("ul.type-down").children().first().find("a").data("title-type")
                     , t = a("ul.type-down").children().first().find("a").text();
                 a("#title-type").data("title-type", e),
                     a("#title-type").val(t)
             },
             openContactTitleType: function(e) {
                 a(e.currentTarget).parent().toggleClass("active"),
                     a(e.currentTarget).parent().siblings().removeClass("active")
             },
             chooseContactTitleType: function(e) {
                 var t = a(e.currentTarget)
                     , i = t.html()
                     , n = t.data("title-type");
                 t.parent().parent().parent().removeClass("active"),
                     t.parent().parent().siblings("p").html("").append(i),
                     a("#title-type").data("titleType", n),
                     a("#title-type").val(i),
                     a(".r-btn-a").show(),
                     a(".submit-bottom .r-prompt").hide(),
                     a(".input").find("input").val(""),
                     a(".textarea").find("textarea").val(""),
                     this.refreshValidationCode()
             },
             hideErrorPrompt: function(e) {
                 var t = a(e.currentTarget);
                 t.parent().removeClass("s-prompt"),
                     t.parent().children(".error-prompt").hide()
             },
             hideValidcodeErrorPrompt: function() {
                 a(".validation-code-prompt").hide()
             },
             agreePrivacy: function(e) {
                 a(e.currentTarget).attr("checked") ? a(".require-policy .error-prompt").hide() : a(".require-policy .error-prompt").show()
             },
             refreshValidationCode: function() {
                 var e = this.$("#validation-image")
                     , t = r.getRESTfulDomain("captcha/pms?force=true&time=" + (new Date).getTime());
                 e && e.attr("src", t)
             },
             inputChangedByContactName: function(e) {
                 var t = a.trim(a(e.currentTarget).val());
                 "" == t || null == t ? (a(".contact-name .error-prompt").prop("lastChild").nodeValue = _l("您的姓名不可为空"),
                     a(".contact-name .error-prompt").show(),
                     a(".contact-name .input").addClass("s-prompt")) : a(".contact-name .input").removeClass("s-prompt")
             },
             inputChangedByCompanyName: function(e) {
                 var t = a.trim(a(e.currentTarget).val());
                 "" == t || null == t ? (a(".require-company .error-prompt").prop("lastChild").nodeValue = _l("公司名称不可为空"),
                     a(".require-company .error-prompt").show(),
                     a(".require-company .input").addClass("s-prompt")) : a(".require-company .input").removeClass("s-prompt")
             },
             inputChangedByMobile: function(e) {
                 var t = a.trim(a(e.currentTarget).val())
                     , i = r.isValidPhoneNumber(t);
                 "" == t || null == t ? (a(".mobile .error-prompt").prop("lastChild").nodeValue = _l("您的联系电话不可为空"),
                     a(".mobile .error-prompt").show(),
                     a(".mobile .input").addClass("s-prompt")) : i ? a(".mobile .input").removeClass("s-prompt") : (a(".mobile .error-prompt").prop("lastChild").nodeValue = _l("您输入联系电话有误，请重新输入"),
                     a(".mobile .error-prompt").show(),
                     a(".mobile .input").addClass("s-prompt"))
             },
             inputChangedByMail: function(e) {
                 var t = a.trim(a(e.currentTarget).val())
                     , i = r.isValidMailAddr(t);
                 "" == t || null == t ? (a(".require-mail .error-prompt").prop("lastChild").nodeValue = _l("邮箱地址不可为空"),
                     a(".require-mail .error-prompt").show(),
                     a(".require-mail .input").addClass("s-prompt")) : i ? a(".require-mail .input").removeClass("s-prompt") : (a(".require-mail .error-prompt").prop("lastChild").nodeValue = _l("邮箱地址格式有误"),
                     a(".require-mail .error-prompt").show(),
                     a(".require-mail .input").addClass("s-prompt"))
             },
             inputChangedByEnquiry: function(e) {
                 var t = a.trim(a(e.currentTarget).val());
                 "" == t || null == t ? (a(".require-enquiry .error-prompt").prop("lastChild").nodeValue = _l("咨询内容不可为空"),
                     a(".require-enquiry .error-prompt").addClass("textArea"),
                     a(".require-enquiry .error-prompt").show(),
                     a(".require-enquiry .textarea").addClass("s-prompt")) : (a(".require-enquiry .error-prompt").removeClass("textArea"),
                     a(".require-enquiry .textarea").removeClass("s-prompt"))
             },
             sumitApplication: function() {
                 var e, t = a("#code").val();
                 this.checkContactName() && this.checkCompanyName() && this.checkMobile() && this.checkMobileReg() && this.checkMail() && this.checkMailReg() && this.checkEnquiry() && this.checkValidCode() && this.checkPrivacyPolicy() && (e = {
                     customerName: a("input[name='user']").val(),
                     companyName: a("input[name='companyName']").val(),
                     industry: a("input[name='industry']").val(),
                     tel: a("input[name='mobile']").val(),
                     email: a("input[name='mail']").val(),
                     city: a("input[name='city']").val(),
                     countryCode: r.getSiteLocation(),
                     lang: r.getSiteLanguage(),
                     message: a("textarea[name='enquiry']").val(),
                     countryInput: a("input[name='country']").val(),
                     source: "CE",
                     isRecMsg: "gb" == r.getSiteLocation() || "fr" == r.getSiteLocation() || "de" == r.getSiteLocation() ? 1 == a("#marketing-info").prop("checked") ? "1" : "0" : ""
                 },
                     this.saveCooperativeAjax(e, t))
             },
             saveCooperativeAjax: function(e, t) {
                 var i = this;
                 n.ajax({
                     type: "POST",
                     contentType: "application/json",
                     url: r.getRESTfulDomain("pms/collectedInformation?app=pms&answer=" + t),
                     data: JSON.stringify(e),
                     success: function(e) {
                         if ("WS_PC_01" === e.resultStr && (a(".r-btn-a").hide(),
                                 a(".submit-bottom .r-prompt").show()),
                             "WS_PC_02" === e.resultStr || "WS_PC_03" === e.resultStr || "WS_PC_04" === e.resultStr) {
                             a(".r-btn-b").show(),
                                 a(".validation-code-prompt").hide(),
                                 i.refreshValidationCode();
                             setTimeout("$('.r-btn-b').hide()", 3e3)
                         }
                     },
                     error: function(e) {
                         403 === e.status ? (a(".validation-code-prompt").prop("lastChild").nodeValue = _l("您输入的验证码有误，请重新输入"),
                             a(".validation-code-prompt").show()) : (a(".r-btn-b").text(_l("网络异常，请稍后再试！")),
                             a(".r-btn-b").css("width", "220px"),
                             a(".r-btn-b").show(),
                             setTimeout("$('.r-btn-b').hide()", 3e3)),
                             i.refreshValidationCode()
                     }
                 })
             },
             checkValidCode: function() {
                 var e = a("#code").val();
                 return "" != e && null != e || (a(".validation-code-prompt").prop("lastChild").nodeValue = _l("您输入的验证码不能为空"),
                     a(".validation-code-prompt").show(),
                     !1)
             },
             checkContactName: function() {
                 var e = a.trim(a(".contact-name input").val());
                 return "" != e && null != e || (a(".contact-name .error-prompt").prop("lastChild").nodeValue = _l("您的姓名不可为空"),
                     a(".contact-name .input").addClass("s-prompt"),
                     !1)
             },
             checkCompanyName: function() {
                 var e = a.trim(a(".require-company input").val());
                 return "" != e && null != e || (a(".require-company .error-prompt").prop("lastChild").nodeValue = _l("公司名称不可为空"),
                     a(".require-company .input").addClass("s-prompt"),
                     !1)
             },
             checkMobile: function() {
                 var e = a.trim(a(".mobile input").val());
                 return "" != e && null != e || (a(".mobile .error-prompt").prop("lastChild").nodeValue = _l("您的联系电话不可为空"),
                     a(".mobile .input").addClass("s-prompt"),
                     !1)
             },
             checkMobileReg: function() {
                 var e = a.trim(a(".mobile input").val());
                 return !!r.isValidPhoneNumber(e) || (a(".mobile .error-prompt").prop("lastChild").nodeValue = _l("您输入联系电话有误，请重新输入"),
                     a(".mobile .input").addClass("s-prompt"),
                     !1)
             },
             checkMail: function() {
                 var e = a.trim(a(".require-mail input").val());
                 r.isValidMailAddr(e);
                 return "" == e || null == e ? (a(".require-mail .error-prompt").prop("lastChild").nodeValue = _l("邮箱地址不可为空"),
                     a(".require-mail .input").addClass("s-prompt"),
                     !1) : (a(".require-mail .input").removeClass("s-prompt"),
                     !0)
             },
             checkMailReg: function() {
                 var e = a.trim(a(".require-mail input").val());
                 return r.isValidMailAddr(e) ? (a(".require-mail .input").removeClass("s-prompt"),
                     !0) : (a(".require-mail .error-prompt").prop("lastChild").nodeValue = _l("邮箱地址格式有误"),
                     a(".require-mail .input").addClass("s-prompt"),
                     !1)
             },
             checkEnquiry: function() {
                 var e = a.trim(a(".require-enquiry textarea").val());
                 return "" == e || null == e ? (a(".require-enquiry .error-prompt").prop("lastChild").nodeValue = _l("咨询内容不可为空"),
                     a(".require-enquiry .error-prompt").addClass("textArea"),
                     a(".require-enquiry .error-prompt").show(),
                     a(".require-enquiry .textarea").addClass("s-prompt"),
                     !1) : (a(".require-enquiry .error-prompt").removeClass("textArea"),
                     a(".require-enquiry .textarea").removeClass("s-prompt"),
                     !0)
             },
             checkPrivacyPolicy: function() {
                 return a("#policy").attr("checked") ? (a(".require-policy .checkbox").removeClass("s-prompt"),
                     !0) : (a(".require-policy .error-prompt").show(),
                     a(".require-policy .checkbox").addClass("s-prompt"),
                     !1)
             }
         })
     }),
     define("views/feedbackAndSuggestion/feedbackAndSuggestionForKR", ["backbone", "templates", "jquery", "helper"], function(i, e, a, n) {
         return i.View.extend({
             events: {
                 "click .select p": "openContactTitleType",
                 "click .select .about a": "chooseSuggestionsAbout",
                 "blur .contact-name input.text": "inputChangedByContactName",
                 "blur .mobile input.text": "inputChangedByMobile",
                 "blur .require-mail input.text": "inputChangedByMail",
                 "blur .require-suggestion textarea.suggestion": "inputChangedBySuggestion",
                 "click .r-btn-a": "submitForm",
                 "click .require-policy input.policy": "agreePrivacy",
                 "focus .contact-name input.text, .mobile input.text, .require-mail input.text, .require-suggestion textarea.suggestion ": "hideErrorPrompt",
                 "focus #code": "hideValidcodeErrorPrompt"
             },
             initialize: function() {
                 this.errorCode = [],
                     this.setDefaultValue()
             },
             setDefaultValue: function() {
                 a(".subclass .input").removeClass("s-prompt"),
                     a("form")[0].reset(),
                     this.showSubmitBtn(),
                     this.setDefaultSuggestionAbout()
             },
             showSubmitBtn: function() {
                 a(".r-btn-b").hide(),
                     a(".submit-bottom .r-prompt").hide(),
                     a(".r-btn-a").show()
             },
             setDefaultSuggestionAbout: function() {
                 var e = a("ul.about").children().first().find("a").data("suggestion-type")
                     , t = a("ul.about").children().first().find("a").text();
                 a("#suggestion-type").data("suggestion-type", e),
                     a("#suggestion-type").val(t)
             },
             openContactTitleType: function(e) {
                 a(e.currentTarget).parent().toggleClass("active"),
                     a(e.currentTarget).parent().siblings().removeClass("active")
             },
             chooseSuggestionsAbout: function(e) {
                 var t = a(e.currentTarget)
                     , i = t.html()
                     , n = t.data("suggestion-type");
                 t.parent().parent().parent().removeClass("active"),
                     t.parent().parent().siblings("p").html("").append(i),
                     a("#suggestion-type").data("suggestion-type", n),
                     a("#suggestion-type").val(i)
             },
             hideErrorPrompt: function(e) {
                 var t = a(e.currentTarget);
                 t.parent().removeClass("s-prompt"),
                     t.parent().children(".error-prompt").hide()
             },
             hideValidcodeErrorPrompt: function() {
                 a(".validation-code-prompt").hide()
             },
             agreePrivacy: function(e) {
                 a(e.currentTarget).attr("checked") ? a(".require-policy .error-prompt").hide() : a(".require-policy .error-prompt").show()
             },
             refreshValidationCode: function() {
                 var e = this.$("#validation-image")
                     , t = n.getRESTfulDomain("captcha/pms?force=true&time=" + (new Date).getTime());
                 e && e.attr("src", t)
             },
             inputChangedByContactName: function(e) {
                 var t = a.trim(a(e.currentTarget).val());
                 "" == t || null == t ? (a(".contact-name .error-prompt").prop("lastChild").nodeValue = _l("您的姓名不可为空"),
                     a(".contact-name .error-prompt").show(),
                     a(".contact-name .input").addClass("s-prompt")) : a(".contact-name .input").removeClass("s-prompt")
             },
             inputChangedByMobile: function(e) {
                 var t = a.trim(a(e.currentTarget).val())
                     , i = n.isValidPhoneNumber(t);
                 "" == t || null == t ? (a(".mobile .error-prompt").prop("lastChild").nodeValue = _l("您的联系电话不可为空"),
                     a(".mobile .error-prompt").show(),
                     a(".mobile .input").addClass("s-prompt")) : i ? a(".mobile .input").removeClass("s-prompt") : (a(".mobile .error-prompt").prop("lastChild").nodeValue = _l("您输入联系电话有误，请重新输入"),
                     a(".mobile .error-prompt").show(),
                     a(".mobile .input").addClass("s-prompt"))
             },
             inputChangedByMail: function(e) {
                 var t = a.trim(a(e.currentTarget).val())
                     , i = n.isValidMailAddr(t);
                 "" == t || null == t ? (a(".require-mail .error-prompt").prop("lastChild").nodeValue = _l("邮箱地址不可为空"),
                     a(".require-mail .error-prompt").show(),
                     a(".require-mail .input").addClass("s-prompt")) : i ? a(".require-mail .input").removeClass("s-prompt") : (a(".require-mail .error-prompt").prop("lastChild").nodeValue = _l("邮箱地址格式有误"),
                     a(".require-mail .error-prompt").show(),
                     a(".require-mail .input").addClass("s-prompt"))
             },
             inputChangedBySuggestion: function(e) {
                 var t = a.trim(a(e.currentTarget).val());
                 "" == t || null == t ? (a(".require-suggestion .error-prompt").prop("lastChild").nodeValue = _l("意见反馈内容不可为空"),
                     a(".require-suggestion .error-prompt").addClass("textArea"),
                     a(".require-suggestion .error-prompt").show(),
                     a(".require-suggestion .textarea").addClass("s-prompt")) : (a(".require-suggestion .error-prompt").removeClass("textArea"),
                     a(".require-suggestion .textarea").removeClass("s-prompt"))
             },
             submitForm: function() {
                 var e = null;
                 this.checkParams(),
                 0 === this.errorCode.length && (e = {
                     customerName: a("input[name='user']").val(),
                     companyName: a("input[name='companyName']").val(),
                     tel: a("input[name='mobile']").val(),
                     email: a("input[name='mail']").val(),
                     suggestionType: a("input[name='suggestionsAbout']").val(),
                     countryCode: n.getSiteLocation(),
                     lang: n.getSiteLanguage(),
                     message: a("textarea[name='suggestion']").val(),
                     source: "CE",
                     isRecMsg: "gb" == n.getSiteLocation() || "fr" == n.getSiteLocation() || "de" == n.getSiteLocation() ? 1 == a("#marketing-info").prop("checked") ? "1" : "0" : ""
                 },
                     this.saveSuggestionAjax(e, ""))
             },
             saveSuggestionAjax: function(e, t) {
                 i.ajax({
                     type: "POST",
                     contentType: "application/json",
                     url: n.getRESTfulDomain("pms/suggesion?app=pms"),
                     data: JSON.stringify(e),
                     success: function(e) {
                         if ("WS_PC_01" === e.resultStr && (a(".r-btn-a").hide(),
                                 a(".submit-bottom .r-prompt").show()),
                             "WS_PC_02" === e.resultStr || "WS_PC_03" === e.resultStr || "WS_PC_04" === e.resultStr) {
                             a(".r-btn-b").show();
                             setTimeout("$('.r-btn-b').hide()", 3e3)
                         }
                     },
                     error: function(e) {
                         a(".r-btn-b").text(_l("网络异常，请稍后再试！")),
                             a(".r-btn-b").css("width", "220px"),
                             a(".r-btn-b").show(),
                             setTimeout("$('.r-btn-b').hide()", 3e3)
                     }
                 })
             },
             serializeObject: function(e) {
                 var t = {};
                 return a.each(e, function() {
                     void 0 !== t[this.name] ? (t[this.name].push || (t[this.name] = [t[this.name]]),
                         t[this.name].push(this.value || "")) : t[this.name] = this.value || ""
                 }),
                     t
             },
             checkParams: function() {
                 this.errorCode.splice(0, this.errorCode.length),
                     this.checkContactName(),
                     this.checkMobile(),
                     this.checkMail(),
                     this.checkSuggestion(),
                     this.checkPrivacyPolicy()
             },
             checkContactName: function() {
                 var e = a.trim(a(".contact-name input").val());
                 "" != e && null != e || (a(".contact-name .error-prompt").prop("lastChild").nodeValue = _l("您的姓名不可为空"),
                     a(".contact-name .input").addClass("s-prompt"),
                     this.errorCode.push("901"))
             },
             checkMobile: function() {
                 var e = a.trim(a(".mobile input").val());
                 "" == e || null == e ? (a(".mobile .error-prompt").prop("lastChild").nodeValue = _l("您的联系电话不可为空"),
                     a(".mobile .input").addClass("s-prompt"),
                     this.errorCode.push("903")) : n.isValidPhoneNumber(e) || (a(".mobile .error-prompt").prop("lastChild").nodeValue = _l("您输入联系电话有误，请重新输入"),
                     a(".mobile .input").addClass("s-prompt"),
                     this.errorCode.push("904"))
             },
             checkMail: function() {
                 var e = a.trim(a(".require-mail input").val())
                     , t = n.isValidMailAddr(e);
                 "" == e || null == e ? (a(".require-mail .error-prompt").prop("lastChild").nodeValue = _l("邮箱地址不可为空"),
                     a(".require-mail .input").addClass("s-prompt"),
                     this.errorCode.push("905")) : t ? a(".require-mail .input").removeClass("s-prompt") : (a(".require-mail .error-prompt").prop("lastChild").nodeValue = _l("邮箱地址格式有误"),
                     a(".require-mail .input").addClass("s-prompt"),
                     this.errorCode.push("906"))
             },
             checkSuggestion: function() {
                 var e = a.trim(a(".require-suggestion textarea").val());
                 "" == e || null == e ? (a(".require-suggestion .error-prompt").prop("lastChild").nodeValue = _l("意见反馈内容不可为空"),
                     a(".require-suggestion .error-prompt").addClass("textArea"),
                     a(".require-suggestion .error-prompt").show(),
                     a(".require-suggestion .textarea").addClass("s-prompt"),
                     this.errorCode.push("907")) : (a(".require-suggestion .error-prompt").removeClass("textArea"),
                     a(".require-suggestion .textarea").removeClass("s-prompt"))
             },
             checkPrivacyPolicy: function() {
                 a("#policy").attr("checked") ? a(".require-policy .checkbox").removeClass("s-prompt") : (a(".require-policy .error-prompt").show(),
                     a(".require-policy .checkbox").addClass("s-prompt"),
                     this.errorCode.push("908"))
             }
         })
     }),
     define("views/popularization/popularization", ["backbone", "templates", "jquery", "helper"], function(n, e, i, a) {
         return n.View.extend({
             events: {
                 "click #popularization-validation-image": "refreshPopularizationValidationCode",
                 "click #popularization-submission": "sumitPopularizationApplication"
             },
             errorTips: function(e) {
                 i("[name=popularization-submission-error]").html(e)
             },
             initialize: function() {
                 this.refreshPopularizationValidationCode()
             },
             refreshPopularizationValidationCode: function() {
                 var e = this.$("#popularization-validation-image")
                     , t = a.getRESTfulDomain("captcha/pms?force=true&time=" + (new Date).getTime());
                 e && e.attr("src", t)
             },
             isValidMailAddr: function(e) {
                 return a.isValidMailAddr(e)
             },
             sumitPopularizationApplication: function() {
                 var e, t = i("[name=popularization-security-code]").val();
                 this.checkPopularizationContactName() && this.checkPopularizationCompanyName() && this.checkPopularizationMail() && this.checkPopularizationMailReg() && this.checkPopularizationMobile() && this.checkMobileReg() && this.checkPopularizationEnquiry() && this.checkPopularizationValidCode() && this.checkPopularizationPrivacyPolicy() && this.checkPopularizationPersonalInfAgreement() && (e = {
                     title: i("input[name='title']").val(),
                     customerName: i("input[name='popularization-contact-name']").val(),
                     companyName: i("input[name='popularization-require-company']").val(),
                     industry: "",
                     type: "2",
                     tel: i("input[name='popularization-mobile']").val(),
                     email: i("input[name='popularization-require-mail']").val(),
                     city: "",
                     countryCode: a.getSiteLocation(),
                     lang: a.getSiteLanguage(),
                     message: i("[name='popularization-require-enquiry']").val(),
                     countryInput: "",
                     source: "LP"
                 },
                     this.savePopularizationCooperativeAjax(e, t))
             },
             savePopularizationCooperativeAjax: function(e, t) {
                 var i = this;
                 n.ajax({
                     type: "POST",
                     contentType: "application/json",
                     url: a.getRESTfulDomain("pms/collectedInformation?app=pms&answer=" + t),
                     data: JSON.stringify(e),
                     success: function(e) {
                         "WS_PC_01" === e.resultStr && i.errorTips(_l("您的信息提交成功")),
                         "WS_PC_02" !== e.resultStr && "WS_PC_03" !== e.resultStr && "WS_PC_04" !== e.resultStr || (i.errorTips(_l("提交失败")),
                             i.refreshPopularizationValidationCode())
                     },
                     error: function(e) {
                         403 === e.status ? i.errorTips(_l("您输入的验证码有误，请重新输入")) : i.errorTips(_l("网络异常，请稍后再试！")),
                             i.refreshPopularizationValidationCode()
                     }
                 })
             },
             checkPopularizationValidCode: function() {
                 var e = i("[name=popularization-security-code]").val();
                 return "" != e && null != e || (this.errorTips(_l("您输入的验证码不能为空")),
                     !1)
             },
             checkPopularizationContactName: function() {
                 var e = i.trim(i("[name=popularization-contact-name]").val());
                 return "" != e && null != e || (this.errorTips(_l("您的姓名不可为空")),
                     !1)
             },
             checkPopularizationCompanyName: function() {
                 var e = i.trim(i("[name=popularization-require-company]").val());
                 return "" != e && null != e || (this.errorTips(_l("公司名称不可为空")),
                     !1)
             },
             checkPopularizationMobile: function() {
                 var e = i.trim(i("[name=popularization-mobile]").val());
                 return "" != e && null != e || (this.errorTips(_l("您的联系电话不可为空")),
                     !1)
             },
             checkMobileReg: function() {
                 var e = i.trim(i("[name=popularization-mobile]").val());
                 return !!a.isValidPhoneNumber(e) || (this.errorTips(_l("您输入联系电话有误，请重新输入")),
                     !1)
             },
             checkPopularizationMail: function() {
                 var e = i.trim(i("[name=popularization-require-mail]").val());
                 return "" != e && null != e || (this.errorTips(_l("邮箱地址不可为空")),
                     !1)
             },
             checkPopularizationMailReg: function() {
                 var e = i.trim(i("[name=popularization-require-mail]").val());
                 return !!this.isValidMailAddr(e) || (this.errorTips(_l("邮箱地址格式有误")),
                     !1)
             },
             checkPopularizationEnquiry: function() {
                 var e = i.trim(i("[name=popularization-require-enquiry]").val());
                 return "" != e && null != e || (this.errorTips(_l("咨询内容不可为空")),
                     !1)
             },
             checkPopularizationPrivacyPolicy: function() {
                 return !!i("[name=popularization-require-policy]").attr("checked") || (this.errorTips(_l("必须同意隐私声明(谷歌推广)")),
                     !1)
             },
             checkPopularizationPersonalInfAgreement: function() {
                 return "jp" != a.getSiteLocation() || (!!i("[name=popularization-personal-inf-agreement]").attr("checked") || (this.errorTips(_l("必须同意个人信息管理同意书")),
                     !1))
             }
         })
     }),
     define("models/track", ["backbone", "helper"], function(e, t) {
         return e.Model.extend({}, {
             parse: function(e) {
                 return null == e.awbNo && (e.awbNo = "-"),
                 null == e.flightNo && (e.flightNo = "-"),
                 null == e.vrn && (e.vrn = "-"),
                 null == e.scheDate && (e.scheDate = "-"),
                 null == e.port && (e.port = "-"),
                     e
             }
         })
     }),
     define("collections/track", ["backbone", "models/track", "helper"], function(e, t, r) {
         return e.Collection.extend({
             model: t,
             parse: function(e) {
                 return e = _.map(e, function(e) {
                     return t.parse(e)
                 })
             },
             fetchDetails: function(e, t, i, n) {
                 this.url = r.getRESTfulDomain("bills/referenceNum?monthlyCardNo=" + e + "&code=" + t + "&date=" + i + "&answer=" + n + "&app=track");
                 var a = this;
                 this.fetch({
                     success: function(e, t) {
                         return t
                     },
                     timeout: 5e3,
                     error: function(e, t) {
                         404 === t.status ? a.trigger("notFound") : 403 === t.status ? a.trigger("validationCodeError") : a.trigger("networkError")
                     }
                 })
             }
         })
     }),
     define("views/track", ["backbone", "helper", "templates", "collections/track", "views/detailDatePicker/picker"], function(e, n, i, t, a) {
         return e.View.extend({
             events: {
                 "click .verification-code .refresh": "refreshValidationCode",
                 "click #validation-image": "refreshValidationCode",
                 "click .submit-query": "queryDetails"
             },
             initialize: function() {
                 this.collections = new t,
                     this.listenTo(this.collections, "sync", this.render),
                     this.listenTo(this.collections, "sync", this.resetQueryButton),
                     this.listenTo(this.collections, "notFound", this.showNotFoundError),
                     this.listenTo(this.collections, "networkError", this.showNetworkError),
                     this.listenTo(this.collections, "validationCodeError", this.showValidationCodeError),
                     this.refreshValidationCode(),
                     this.$(".results").slideUp(),
                     this.$("input").placeholder(),
                     new a({
                         el: $(".detail-date-input")
                     })
             },
             renderResults: function() {
                 var e = this.$(".results")
                     , t = n.getDynamicURLWithContext("/waybill/#search/bill-number/");
                 e.html(i.trackResult({
                     results: this.collections.models,
                     patch: t
                 })),
                     e.slideDown()
             },
             render: function() {
                 this.refreshValidationCode(),
                     this.renderResults()
             },
             resetQueryButton: function() {
                 this.$(".submit-query").button("reset")
             },
             showNotFoundError: function() {
                 this.$(".error[data-error=not-found]").show(),
                     this.resetQueryButton()
             },
             showNetworkError: function() {
                 this.$(".error[data-error=network]").show(),
                     this.resetQueryButton()
             },
             showValidationCodeError: function() {
                 var e = this.$(".primary-button");
                 e.html(e.data("resetText")),
                     this.$(".error[data-error=validation-code]").show(),
                     this.resetQueryButton()
             },
             queryDetails: function() {
                 if (this.isFormsValidated()) {
                     var e = this.$("#validation-search-code").val();
                     this.$(".error").hide(),
                         this.$(".submit-query").button("loading"),
                         this.collections.fetchDetails(this.$("#account").val(), this.$("#reference").val(), moment(this.$("#date").data("date")).format("YYYY-MM-DD"), e)
                 }
             },
             isFormsValidated: function() {
                 var e = this.$(".sender-form").parsley().validate();
                 return "" === this.$("#account").val() ? (this.$("#account").focus(),
                     !1) : "" === this.$("#reference").val() ? (this.$("#reference").focus(),
                     !1) : e
             },
             refreshValidationCode: function() {
                 var e = this.$("#validation-image")
                     , t = $("#validation-image-child")
                     , i = n.getRESTfulDomain("captcha/track?force=true&time=" + (new Date).getTime());
                 e && e.attr("src", i),
                 t && t.attr("src", i),
                     this.$(".verification-code input").val(""),
                     this.$(".validation-code-error").hide()
             }
         })
     }),
     define("collections/regulations", ["backbone", "helper"], function(e, i) {
         return e.Collection.extend({
             fetchURL: function(e, t) {
                 t = t || {},
                     this.url = i.getRESTfulDomain(e),
                     this.reset().fetch(t)
             },
             fetchOrigins: function() {
                 this.fetchURL("regulation/origins")
             },
             fetchDests: function(e) {
                 this.fetchURL(_p("regulation/dests?originCode=%s", encodeURIComponent(e)))
             },
             fetchItems: function(e, t) {
                 this.fetchURL(_p("regulation/items?originCode=%s&destCode=%s", encodeURIComponent(e), encodeURIComponent(t)))
             },
             fetchDetails: function(e, t, i) {
                 var n = this;
                 this.fetchURL(_p("regulation?originCode=%s&destCode=%s&item=%s", encodeURIComponent(e), encodeURIComponent(t), encodeURIComponent(i)), {
                     error: function(e, t) {
                         404 === t.status ? n.trigger("notFound") : n.trigger("networkError")
                     }
                 })
             }
         })
     }),
     define("views/regulation", ["backbone", "collections/regulations", "templates"], function(e, t, i) {
         return e.View.extend({
             events: {
                 "click .origin .dropdown-menu a": "selectOrigin",
                 "click .dest .dropdown-menu a": "selectDest",
                 "click .cargo-type-items button": "changeCargoType",
                 "click .submit-query": "queryDetails"
             },
             initialize: function() {
                 this.origins = new t,
                     this.dests = new t,
                     this.items = new t,
                     this.details = new t,
                     this.listenTo(this.origins, "sync", this.render),
                     this.listenTo(this.dests, "sync", this.render),
                     this.listenTo(this.items, "sync", this.render),
                     this.listenTo(this.details, "sync", this.render),
                     this.listenTo(this.details, "sync", this.resetQueryButton),
                     this.listenTo(this.details, "notFound", this.showNotFoundError),
                     this.listenTo(this.details, "networkError", this.showNetworkError),
                     this.origins.fetchOrigins(),
                     this.render()
             },
             selectOrigin: function(e) {
                 var t = $(e.currentTarget);
                 this.originSelected = {
                     name: t.text(),
                     code: t.data("code")
                 },
                     this.destSelected = null,
                     this.render(),
                     this.dests.fetchDests(this.originSelected.code)
             },
             selectDest: function(e) {
                 var t = $(e.currentTarget);
                 this.destSelected = {
                     name: t.text(),
                     code: t.data("code")
                 },
                     this.render(),
                     this.items.fetchItems(this.originSelected.code, this.destSelected.code)
             },
             changeCargoType: function(e) {
                 var t = $(e.currentTarget);
                 this.$(".cargo-type-items button").removeClass("active"),
                     t.addClass("active"),
                     this.itemSelected = {
                         name: t.text(),
                         code: t.data("code")
                     },
                     this.render()
             },
             renderDropdowns: function() {
                 this.$(".origin .dropdown-menu").html(i.dropdownTemplates({
                     dropdownItems: this.origins.models
                 })),
                     this.originSelected ? (this.$(".dest .dropdown-menu").removeClass("hidden"),
                         this.$(".dest .dropdown-menu").html(i.dropdownTemplates({
                             dropdownItems: this.dests.models
                         }))) : this.$(".dest .dropdown-menu").addClass("hidden")
             },
             renderDropdownTitle: function() {
                 var e = this.$(".origin .dropdown-toggle .selected-dropdown")
                     , t = this.originSelected ? this.originSelected.name : e.data("origin-text");
                 e.text(t);
                 var i = this.$(".dest .dropdown-toggle .selected-dropdown")
                     , n = this.destSelected ? this.destSelected.name : i.data("origin-text");
                 i.text(n)
             },
             renderItemSelector: function() {
                 var e = this.$(".cargo-type");
                 if (this.items.length) {
                     if (e.show(),
                             this.$(".cargo-type-items").html(i.buttonGroupTempletas({
                                 items: this.items.models
                             })),
                             this.itemSelected) {
                         var t = this.$(".cargo-type-items button[data-code=" + this.itemSelected.code + "]");
                         _.isEmpty(t) ? (this.itemSelected = null,
                             this.render()) : t.addClass("active")
                     }
                 } else
                     e.hide()
             },
             updateQueryButtonStatus: function() {
                 var e = this.originSelected && this.destSelected && this.itemSelected;
                 this.$(".submit-query").toggleClass("disabled", !e)
             },
             renderResults: function() {
                 var e = this.$(".results");
                 this.details.length ? (e.html(i.regulationResult({
                     results: this.details.models
                 })),
                     e.slideDown()) : e.slideUp()
             },
             render: function() {
                 this.renderDropdownTitle(),
                     this.renderDropdowns(),
                     this.renderItemSelector(),
                     this.updateQueryButtonStatus(),
                     this.renderResults()
             },
             queryDetails: function() {
                 this.$(".error").hide(),
                     this.$(".submit-query").button("loading");
                 var e = this;
                 this.$(".results").slideUp(function() {
                     e.details.fetchDetails(e.originSelected.code, e.destSelected.code, e.itemSelected.code)
                 })
             },
             resetQueryButton: function() {
                 this.$(".submit-query").button("reset")
             },
             showNotFoundError: function() {
                 this.$(".error[data-error=not-found]").show(),
                     this.resetQueryButton()
             },
             showNetworkError: function() {
                 this.$(".error[data-error=network]").show(),
                     this.resetQueryButton()
             }
         })
     }),
     define("models/consign", ["backbone", "helper"], function(e, t) {
         return e.Model.extend({}, {
             parse: function(e) {
                 return null == e.awbNo && (e.awbNo = "-"),
                 null == e.flightNo && (e.flightNo = "-"),
                 null == e.vrn && (e.vrn = "-"),
                 null == e.scheDate && (e.scheDate = "-"),
                 null == e.port && (e.port = "-"),
                     e
             },
             validateBillNumber: function(e, t) {
                 if (1 == t)
                     var i = /^\d{12}$/;
                 else if (2 == t)
                     i = /^\d{10}$/;
                 else
                     i = /^\d{12}$/;
                 return i.test(e.trim())
             },
             validateBillNumbers: function(e, t) {
                 var i = !0
                     , n = this;
                 return _.each(e, function(e) {
                     e.length && !n.validateBillNumber(e, t) && (i = !1)
                 }),
                     i
             }
         })
     }),
     define("collections/consign", ["backbone", "models/consign", "helper"], function(e, t, n) {
         return e.Collection.extend({
             model: t,
             parse: function(e) {
                 return e = _.map(e, function(e) {
                     return t.parse(e)
                 })
             },
             fetchDetails: function(e, t) {
                 this.url = n.getRESTfulDomain("consignee/list?type=" + e + "&code=" + t),
                     this.code = t,
                     this.type = e;
                 var i = this;
                 this.fetch({
                     success: function(e, t) {
                         return t
                     },
                     error: function(e, t) {
                         404 === t.status ? i.trigger("notFound") : 403 === t.status ? i.trigger("validationCodeError") : i.trigger("networkError")
                     }
                 })
             }
         })
     }),
     define("views/consign", ["backbone", "collections/consign", "models/consign", "templates", "tokenfield", "jquery-placeholder"], function(e, t, a, i, n) {
         return e.View.extend({
             events: {
                 "click .cargo-type-items button": "changeCargoType",
                 "keyup .billNumber1 input": "updateQueryButtonStatus",
                 "mouseout .tokenfield.form-control": "stopPropagation",
                 "focusin input.token-input": "setInputToken",
                 "focusout input.token-input": "setInputToken",
                 "click .submit-query": "queryDetails",
                 "click .clear-inputs": "clearInputs"
             },
             initialize: function() {
                 this.itemSelected = {
                     code: 1
                 },
                     this.placeHolder = this.$(".billNumber input").attr("placeholder"),
                     this.setupTokenField(this.$(".billNumber input"), this.placeHolder),
                     this.collections = new t,
                     this.codes = [],
                     this.clearInputs(),
                     this.listenTo(this.collections, "sync", this.render),
                     this.listenTo(this.collections, "sync", this.resetQueryButton),
                     this.listenTo(this.collections, "notFound", this.showNotFoundError),
                     this.listenTo(this.collections, "networkError", this.showNetworkError),
                     this.listenTo(this.collections, "validationCodeError", this.showValidationCodeError),
                     this.render()
             },
             clearInputs: function() {
                 this.$(".token-input").val(""),
                     this.$tokenfield.tokenfield("setTokens", []),
                     this.$tokenfield.trigger("tokenfield:removetoken"),
                     this.validateBillNumbersInput(),
                     this.$(".error").hide(),
                     this.placeHolderToggle()
             },
             changeCargoType: function(e) {
                 var t = $(e.currentTarget);
                 this.$(".cargo-type-items button").removeClass("active"),
                     t.addClass("active"),
                     this.itemSelected = {
                         name: t.text(),
                         code: t.data("code")
                     },
                 1 == this.itemSelected.code && (this.$(".billLabel").text(_l("运单号")),
                     this.$(".error[data-error=bill-number-format]").html(_l("订单号只能为12位数字,且不能重复。")),
                     this.$(".error[data-error=limit-exceeded]").html(_l("您已输入超过10条运单号，系统将自动截取并显示前10条运单号的追踪信息。"))),
                 2 == this.itemSelected.code && (this.$(".billLabel").text(_l("海关货运编号")),
                     this.$(".error[data-error=bill-number-format]").html(_l("海关货运编号只能为10位数字,且不能重复。")),
                     this.$(".error[data-error=limit-exceeded]").html(_l("您已输入超过10条海关货运编号，系统将自动截取并显示前10条海关货运编号的追踪信息。"))),
                     this.clearInputs()
             },
             setInputToken: function(e) {
                 var t = this;
                 "focusin" === e.type ? (this.$(e.target).data("input-status", !0),
                     this.$el.find(".billNumber").removeClass("folded")) : (this.$(e.target).data("input-status", !1),
                 this.$el.find(".token").length || this.$el.find(".token-input").val() || setTimeout(function() {
                     t.$el.find(".tokenfield.form-control").hasClass("focus") || t.$el.find(".billNumber").addClass("folded")
                 }, 200))
             },
             stopPropagation: function(e) {
                 e.stopPropagation()
             },
             placeHolderToggle: function() {
                 if (0 === this.inputedBillNumbers().length) {
                     var e = this.$(".tokenfield.form-control")
                         , t = this.$(".token-input")
                         , i = e.offset().left + e.width() + parseInt(e.css("padding-left"), 10) - t.offset().left - 1;
                     1 == this.itemSelected.code ? this.placeholder = _l("最多可同时查询10条运单号，以中英文逗号、空格或回车键隔开。") : this.placeholder = _l("最多可同时查询10条海关货运编号，以中英文逗号、空格或回车键隔开。"),
                         t.attr("placeholder", this.placeholder).width(i).placeholder()
                 } else
                     this.$(".token-input").attr("placeholder", "").removeClass("placeholder")
             },
             setupTokenField: function(e, t) {
                 this.placeholder = t;
                 var i = this;
                 this.$tokenfield = e;
                 var n = function() {
                     window.setTimeout(function() {
                         i.validateBillNumbersInput()
                     }, 0)
                 };
                 i.$tokenfield.attr("placeholder", t).on("tokenfield:removetoken", function() {
                     i.$(".error[data-error=limit-exceeded]").hide(),
                         i.placeHolderToggle(),
                     i.inputValidate() && i.$(".error[data-error=bill-number-format]").hide(),
                         i.validateBillNumbersInput()
                 }).on("tokenfield:createtoken", function(e) {
                     a.validateBillNumber(e.token.value, i.itemSelected.code) || $(e.relatedTarget).addClass("invalid"),
                         i.placeHolderToggle(),
                         n()
                 }).on("tokenfield:preventduplicate", function() {
                     window.setTimeout(function() {
                         i.$(".error[data-error=bill-number-format]").show()
                     }, 200)
                 }).on("tokenfield:edittoken", function() {
                     i.$(".token-input").on("blur", function() {
                         n()
                     }).on("keyup", function(e) {
                         e.currentTarget.value.length || (i.placeHolderToggle(),
                             n())
                     })
                 }).tokenfield({
                     createTokensOnBlur: !0,
                     delimiter: [",", "\n", "\t", " ", "，"],
                     limit: 10,
                     minWidth: 90,
                     leakCallback: function() {
                         i.$(".token-input").val(""),
                             i.$(".error[data-error=limit-exceeded]").show()
                     }
                 }),
                     i.$(".token-input").attr("placeholder", this.placeHolder).placeholder()
             },
             inputedBillNumbers: function() {
                 var t;
                 try {
                     t = this.$tokenfield.tokenfield("getTokensList").split(",")
                 } catch (e) {
                     t = this.$tokenfield.tokenfield("getTokensList").val().split(",")
                 }
                 return t = _.map(t, function(e) {
                     return e.trim()
                 }),
                     _.compact(t)
             },
             hasInputs: function() {
                 var t = !1;
                 return _.each(this.inputedBillNumbers(), function(e) {
                     e.length && (t = !0)
                 }),
                     t
             },
             inputValidate: function() {
                 return a.validateBillNumbers(this.inputedBillNumbers(), this.itemSelected.code)
             },
             validateBillNumbersInput: function() {
                 this.inputValidate() ? this.$(".error[data-error=bill-number-format]").hide() : this.$(".error[data-error=bill-number-format]").show(),
                     this.updateQueryButtonStatus()
             },
             updateQueryButtonStatus: function() {
                 var e = a.validateBillNumbers(this.inputedBillNumbers(), this.itemSelected.code)
                     , t = this.$el.find(".token").length;
                 this.$(".primary-button").toggleClass("disabled", !e || !t)
             },
             renderResults: function() {
                 var e = this.$(".results");
                 this.collections.length ? (e.html(i.consignResult({
                     results: this.collections.models,
                     codes: this.codes,
                     type: this.itemSelected.code
                 })),
                     e.slideDown()) : e.slideUp()
             },
             render: function() {
                 this.updateQueryButtonStatus(),
                     this.renderResults()
             },
             queryDetails: function() {
                 if (this.inputValidate() && this.hasInputs()) {
                     this.$(".error").hide(),
                         this.$(".submit-query").button("loading");
                     var e = this.$tokenfield.tokenfield("getTokensList", ",").split(", ");
                     e = _.map(e, function(e) {
                         return e.trim()
                     }),
                         this.codes = e,
                         this.collections.fetchDetails(this.itemSelected.code, e)
                 } else
                     this.$(".error[data-error=bill-number-format]").show()
             },
             resetQueryButton: function() {
                 this.$(".submit-query").button("reset")
             },
             showNotFoundError: function() {
                 this.$(".error[data-error=not-found]").show(),
                     this.resetQueryButton()
             },
             showNetworkError: function() {
                 this.$(".error[data-error=network]").show(),
                     this.resetQueryButton()
             }
         })
     }),
     define("models/notIndustry", ["backbone", "helper"], function(e, t) {
         return e.Model.extend({}, {
             parse: function(e) {
                 return e
             },
             getIndustryCommerceCity: function() {
                 return e.ajax({
                     type: "get",
                     url: t.getRESTfulDomain("region/industryCommerceCity")
                 })
             }
         })
     }),
     define("collections/notIndustry", ["backbone", "models/notIndustry", "helper"], function(o, t, l) {
         return o.Collection.extend({
             model: t,
             parse: function(e) {
                 return e = _.map(e, function(e) {
                     return t.parse(e)
                 })
             },
             getIndustryCommerceCity: function() {
                 return o.ajax({
                     type: "GET",
                     url: l.getRESTfulDomain("region/industryCommerceCity")
                 })
             },
             fetchIndustryCommerceArea: function(e) {
                 return o.ajax({
                     type: "GET",
                     url: l.getRESTfulDomain("region/" + encodeURIComponent(e) + "/industryCommerceArea")
                 })
             },
             fetchIndustryCommerceTown: function(e) {
                 return o.ajax({
                     type: "GET",
                     url: l.getRESTfulDomain("region/" + e + "/industryCommerceTown")
                 })
             },
             fetchTownByArea: function(e, t) {
                 return o.ajax({
                     type: "GET",
                     url: l.getRESTfulDomain("region/" + encodeURIComponent(e) + "/industryCommerceTown?area=" + encodeURIComponent(t))
                 })
             },
             fetchRoadByTown: function(e, t) {
                 return o.ajax({
                     type: "GET",
                     url: l.getRESTfulDomain("region/" + encodeURIComponent(e) + "/industryCommerceRoad?town=" + encodeURIComponent(t))
                 })
             },
             fetchRoad: function(e, t, i) {
                 var n = "region/" + encodeURIComponent(e) + "/industryCommerceRoad?";
                 return null != t && t != _l("请选择") && (n += "&area=" + encodeURIComponent(t)),
                 null != i && i != _l("请选择") && (n += "&town=" + encodeURIComponent(i)),
                     o.ajax({
                         type: "GET",
                         url: l.getRESTfulDomain(n)
                     })
             },
             fetchAddressByAreaAndTownAndRoad: function(e, t, i, n) {
                 var a = "region/" + encodeURIComponent(e) + "/industryCommerceAddress?town=" + encodeURIComponent(i);
                 return null != t && t != _l("请选择") && (a += "&area=" + encodeURIComponent(t)),
                 null != n && n != _l("请选择") && (a += "&road=" + encodeURIComponent(n)),
                     o.ajax({
                         type: "GET",
                         url: l.getRESTfulDomain(a)
                     })
             },
             industryCommerce: function(e, t, i, n, a, r) {
                 var s = "region/industryCommerce?";
                 return null != e && e != _l("请选择") && (s += "&city=" + encodeURIComponent(e)),
                 null != t && t != _l("请选择") && (s += "&area=" + encodeURIComponent(t)),
                 null != i && i != _l("请选择") && (s += "&town=" + encodeURIComponent(i)),
                 null != n && n != _l("请选择") && (s += "&road=" + encodeURIComponent(n)),
                 null != a && a != _l("请选择") && (s += "&address=" + encodeURIComponent(a)),
                 null != r && (s += "&pageNO=" + r),
                     o.ajax({
                         type: "GET",
                         url: l.getRESTfulDomain(s)
                     })
             },
             industryCommercePageCount: function(e, t, i, n, a) {
                 var r = "region/industryCommercePageCount?";
                 return null != e && e != _l("请选择") && (r += "&city=" + encodeURIComponent(e)),
                 null != t && t != _l("请选择") && (r += "&area=" + encodeURIComponent(t)),
                 null != i && i != _l("请选择") && (r += "&town=" + encodeURIComponent(i)),
                 null != n && n != _l("请选择") && (r += "&road=" + encodeURIComponent(n)),
                 null != a && a != _l("请选择") && (r += "&address=" + encodeURIComponent(a)),
                     o.ajax({
                         type: "GET",
                         url: l.getRESTfulDomain(r)
                     })
             }
         })
     }),
     define("views/notIndustry", ["backbone", "collections/notIndustry", "models/notIndustry", "templates"], function(e, t, i, n) {
         return e.View.extend({
             events: {
                 "click .city": "renderCityDropdowns",
                 "click .citylist.dropdown-menu a": "selectCity",
                 "click .arealist.dropdown-menu a": "selectArea",
                 "click .townlist.dropdown-menu a": "selectTown",
                 "click .roadlist.dropdown-menu a": "selectRoad",
                 "click .addresslist.dropdown-menu a": "selectAddress",
                 "click .submit-query": "queryDetails",
                 "keyup .address": "searchAddress",
                 "keyup .road": "searchRoad",
                 "click .goToPage": "goToPage"
             },
             initialize: function() {
                 this.itemSelected = {},
                     this.collections = new t,
                     this.addresslist = [],
                     this.roadlist = [],
                     this.listenTo(this.collections, "sync", this.render),
                     this.render()
             },
             renderCityDropdowns: function() {
                 (that = this).collections.getIndustryCommerceCity().success(function(e) {
                     that.$(".citylist").html(n.dropdownCity({
                         dropdownItems: e
                     }))
                 }).error(function(e) {
                     404 === e.status && that.showNetworkError()
                 })
             },
             selectCity: function(e) {
                 e.preventDefault();
                 var t = $(e.currentTarget).text();
                 this.itemSelected = {
                     city: t
                 },
                 t != this.$(".city").val() && (this.$(".area").val(_l("请选择")),
                     this.$(".town").val(_l("请选择")),
                     this.$(".road").val(_l("请选择")),
                     this.$(".address").val(_l("请选择")),
                     this.addresslist = [],
                     this.roadlist = [],
                     this.collections.fetchIndustryCommerceArea(t).success(function(e) {
                         that.$(".arealist").html(n.dropdownCity({
                             dropdownItems: e
                         })),
                             that.$(".townlist").html(n.dropdownCity({
                                 dropdownItems: []
                             })),
                             that.$(".roadlist").html(n.dropdownCity({
                                 dropdownItems: []
                             })),
                             that.$(".addresslist").html(n.dropdownCity({
                                 dropdownItems: []
                             }))
                     }).error(function(e) {
                         404 === e.status && that.showNetworkError()
                     })),
                     this.$(".city").val(t)
             },
             selectArea: function(e) {
                 var t = $(e.currentTarget).text();
                 this.itemSelected = {
                     city: this.itemSelected.city,
                     area: t
                 },
                 t != this.$(".area").val() && (this.$(".town").val(_l("请选择")),
                     this.$(".road").val(_l("请选择")),
                     this.$(".address").val(_l("请选择")),
                     this.addresslist = [],
                     this.collections.fetchTownByArea(this.itemSelected.city, t).success(function(e) {
                         that.$(".townlist").html(n.dropdownCity({
                             dropdownItems: e
                         })),
                             that.$(".addresslist").html(n.dropdownCity({
                                 dropdownItems: []
                             }))
                     }).error(function(e) {
                         404 === e.status && that.$(".townlist").html(n.dropdownCity({
                             dropdownItems: []
                         }))
                     }),
                     this.collections.fetchRoad(this.itemSelected.city, t, "").success(function(e) {
                         that.$(".roadlist").html(n.dropdownCity({
                             dropdownItems: e
                         })),
                             that.roadlist = e,
                             that.$(".addresslist").html(n.dropdownCity({
                                 dropdownItems: []
                             }))
                     }).error(function(e) {
                         404 === e.status && that.$(".townlist").html(n.dropdownCity({
                             dropdownItems: []
                         }))
                     })),
                     this.$(".area").val(t)
             },
             selectTown: function(e) {
                 var t = $(e.currentTarget).text();
                 this.itemSelected = {
                     city: this.itemSelected.city,
                     town: t,
                     area: this.itemSelected.area
                 },
                 t != this.$(".town").val() && (this.$(".road").val(_l("请选择")),
                     this.$(".address").val(_l("请选择")),
                     this.collections.fetchRoad(this.itemSelected.city, this.itemSelected.area, this.itemSelected.town).success(function(e) {
                         that.$(".roadlist").html(n.dropdownCity({
                             dropdownItems: e
                         })),
                             that.$(".addresslist").html(n.dropdownCity({
                                 dropdownItems: []
                             })),
                             that.roadlist = e
                     }).error(function(e) {
                         404 === e.status && that.showNetworkError()
                     })),
                     this.$(".town").val(t)
             },
             selectRoad: function(e) {
                 var t = $(e.currentTarget).text();
                 this.itemSelected = {
                     city: this.itemSelected.city,
                     town: this.itemSelected.town,
                     area: this.itemSelected.area,
                     road: t
                 },
                 t != this.$(".road").val() && (this.$(".address").val(_l("请选择")),
                     this.$(".road").val(t),
                 null == this.itemSelected.town && (this.itemSelected.town = ""),
                     this.collections.fetchAddressByAreaAndTownAndRoad(this.itemSelected.city, this.itemSelected.area, this.itemSelected.town, t).success(function(e) {
                         that.$(".addresslist").html(n.dropdownCity({
                             dropdownItems: e
                         })),
                             that.addresslist = e
                     }).error(function(e) {
                         404 === e.status && that.showNetworkError()
                     }))
             },
             selectAddress: function(e) {
                 var t = $(e.currentTarget).text();
                 this.$(".address").val(t),
                     this.itemSelected = {
                         city: this.itemSelected.city,
                         town: this.itemSelected.town,
                         area: this.itemSelected.area,
                         road: this.itemSelected.road,
                         address: t
                     }
             },
             updateQueryButtonStatus: function() {},
             renderResults: function() {
                 var e = this.$(".results");
                 this.collections.length ? (e.html(n.notIndustryResult({
                     results: this.collections.models
                 })),
                     e.slideDown()) : e.slideUp()
             },
             render: function() {
                 this.$(".area").val(_l("请选择")),
                     this.$(".town").val(_l("请选择")),
                     this.$(".road").val(_l("请选择")),
                     this.$(".address").val(_l("请选择")),
                     this.renderCityDropdowns(),
                     this.updateQueryButtonStatus(),
                     this.renderResults()
             },
             queryDetails: function() {
                 this.$(".submit-query").button("loading"),
                     this.$(".error").hide(),
                     (that = this).$(".results").slideDown(),
                     this.collections.industryCommerce(this.itemSelected.city, this.itemSelected.area, this.itemSelected.town, this.itemSelected.road, this.itemSelected.address, window.pageIndex).success(function(e) {
                         that.$(".results").html(n.notIndustryResult({
                             results: e
                         })),
                             that.collections.industryCommercePageCount(that.itemSelected.city, that.itemSelected.area, that.itemSelected.town, that.itemSelected.road, that.itemSelected.address).success(function(e) {
                                 var t = window.pageIndex || 1;
                                 that.$(".results").append(n.paginationPro({
                                     pageIndex: t,
                                     pageCount: e
                                 })),
                                     that.count = e,
                                     that.$(".submit-query").button("reset")
                             }).error(function(e) {
                                 404 === e.status && that.showNetworkError()
                             })
                     }).error(function(e) {
                         404 === e.status && that.showNetworkError()
                     })
             },
             goToPage: function(e) {
                 var t = $(e.currentTarget).attr("data-pageindex");
                 this.itemSelected = {
                     city: this.itemSelected.city,
                     town: this.itemSelected.town,
                     area: this.itemSelected.area,
                     road: this.itemSelected.road,
                     address: this.itemSelected.address
                 },
                     this.collections.industryCommerce(this.itemSelected.city, this.itemSelected.area, this.itemSelected.town, this.itemSelected.road, this.itemSelected.address, t).success(function(e) {
                         that.$(".results").html(n.notIndustryResult({
                             results: e
                         })),
                             that.$(".results").append(n.paginationPro({
                                 pageIndex: t,
                                 pageCount: that.count
                             }))
                     }).error(function(e) {
                         404 === e.status && that.showNetworkError()
                     })
             },
             searchAddress: function(e) {
                 var t = $(e.currentTarget).context.value;
                 "" != t ? this.$(".addresslist").html(n.dropdownSearch({
                     dropdownItems: this.addresslist,
                     search: t
                 })) : this.$(".addresslist").html(n.dropdownCity({
                     dropdownItems: this.addresslist
                 }))
             },
             searchRoad: function(e) {
                 var t = $(e.currentTarget).context.value;
                 "" != t ? this.$(".roadlist").html(n.dropdownSearch({
                     dropdownItems: this.roadlist,
                     search: t
                 })) : this.$(".roadlist").html(n.dropdownCity({
                     dropdownItems: this.roadlist
                 }))
             },
             resetQueryButton: function() {
                 this.$(".submit-query").button("reset")
             },
             showNotFoundError: function() {
                 this.$(".error[data-error=not-found]").show(),
                     this.resetQueryButton()
             },
             showNetworkError: function() {
                 this.$(".error[data-error=network]").show(),
                     this.resetQueryButton()
             }
         })
     }),
     define("views/internationalApplication/internationalApplication", ["backbone", "templates", "jquery", "helper"], function(n, e, a, r) {
         return n.View.extend({
             events: {
                 "blur .require-company input.text": "checkCompanyName",
                 "blur .send-addr input.text": "checkRegistCountry",
                 "blur .contact-name input.text": "checkChargePerson",
                 "blur .mobile input.text": "inputChangedByMobile",
                 "blur .email input.text": "checkEmail",
                 "blur .accountNumber input.text": "inputAccountNumber",
                 "blur .companyNameOnline input.text": "checkCompanyNameOnline",
                 "blur .onlinePlatform input.text": "checkOnlinePlatform",
                 "blur .conpanyWebsite input.text": "inputConpanyWebsite",
                 "blur .productType input.text": "checkProductType",
                 "blur .shipmentsPerDay input.text": "checkShipmentsPerDay",
                 "blur .shipmentsTotal input.text": "checkShipmentsTotal",
                 "click .r-btn-a": "sumitApplication",
                 "click #validation-image": "refreshValidationCode",
                 "focus .require-company input.text, .send-addr input.text , .contact-name input.text, .mobile input.text, .email input.text, .accountNumber input.text, .companyNameOnline input.text, .onlinePlatform input.text, .conpanyWebsite input.text, .productType input.text, .shipmentsPerDay input.text, .shipmentsTotal input.text": "hideErrorPrompt",
                 "focus #code": "hideValidcodeErrorPrompt",
                 "click .require-policy input.policy": "agreePrivacy"
             },
             initialize: function() {
                 this.errorCode = [],
                     this.refreshValidationCode()
             },
             refreshValidationCode: function() {
                 var e = this.$("#validation-image")
                     , t = r.getRESTfulDomain("captcha/cis?force=true&time=" + (new Date).getTime());
                 e && e.attr("src", t)
             },
             hideErrorPrompt: function(e) {
                 a(e.currentTarget).parent().removeClass("s-prompt")
             },
             sumitApplication: function() {
                 var e, t = a("#code").val();
                 this.checkParam() && (e = {
                     source: a("input[name='source']").val(),
                     companyName: a("input[name='companyName']").val(),
                     registCountry: a("input[name='registCountry']").val(),
                     chargePerson: a("input[name='chargePerson']").val(),
                     contactNumber: a("input[name='contactNumber']").val(),
                     email: a("input[name='email']").val(),
                     accountNumber: a("input[name='accountNumber']").val(),
                     companyNameOnline: a("input[name='companyNameOnline']").val(),
                     onlinePlatform: a("input[name='onlinePlatform']").val(),
                     conpanyWebsite: a("input[name='conpanyWebsite']").val(),
                     productType: a("input[name='productType']").val(),
                     shipmentsPerDay: a("input[name='shipmentsPerDay']").val(),
                     shipmentsTotal: a("input[name='shipmentsTotal']").val()
                 },
                     this.saveCooperativeAjax(e, t))
             },
             saveCooperativeAjax: function(e, t) {
                 var i = this;
                 n.ajax({
                     type: "POST",
                     contentType: "application/json",
                     url: r.getRESTfulDomain("pms/certifiedInternationalShipping?app=cis&answer=" + t + "&lang=" + r.getSiteLanguage() + "&region=" + r.getSiteLocation()),
                     data: JSON.stringify(e),
                     success: function(e) {
                         if ("1" === e.resultStr && (a(".r-btn-a").hide(),
                                 a(".submit-bottom .r-prompt").show()),
                             "0" === e.resultStr) {
                             a(".r-btn-b").show(),
                                 a(".validation-code-prompt").hide(),
                                 i.refreshValidationCode();
                             setTimeout("$('.r-btn-b').hide()", 3e3)
                         }
                     },
                     error: function(e) {
                         403 === e.status ? (a(".validation-code-prompt").prop("lastChild").nodeValue = _l("您输入的验证码有误，请重新输入"),
                             a(".validation-code-prompt").show()) : (a(".r-btn-b").text(_l("网络异常，请稍后再试！")),
                             a(".r-btn-b").css("width", "220px"),
                             a(".r-btn-b").show(),
                             setTimeout("$('.r-btn-b').hide()", 3e3)),
                             i.refreshValidationCode()
                     }
                 })
             },
             checkParam: function() {
                 return this.checkCompanyName() && this.checkRegistCountry() && this.checkChargePerson() && this.checkMobile() && this.checkMobileReg() && this.checkEmailNotEmpty() && this.checkEmailReg() && this.checkAccountNumber() && this.checkAccountNumberReg() && this.checkCompanyNameOnline() && this.checkOnlinePlatform() && this.checkConpanyWebsite() && this.checkConpanyWebsiteReg() && this.checkProductType() && this.checkValidCode() && this.checkPrivacyPolicy()
             },
             checkMobile: function() {
                 var e = a.trim(a(".mobile input").val());
                 return "" == e || null == e ? (a(".mobile .input").addClass("s-prompt"),
                     a(".mobile .error-prompt").prop("lastChild").nodeValue = _l("请注意此项为必填"),
                     !1) : (a(".mobile .input").removeClass("s-prompt"),
                     !0)
             },
             checkMobileReg: function() {
                 var e = a.trim(a(".mobile input").val());
                 return r.isValidPhoneNumber(e) ? (a(".mobile .input").removeClass("s-prompt"),
                     !0) : (a(".mobile .error-prompt").prop("lastChild").nodeValue = _l("您输入联系电话有误，请重新输入"),
                     a(".mobile .input").addClass("s-prompt"),
                     !1)
             },
             checkEmailNotEmpty: function() {
                 var e = a.trim(a(".email input").val());
                 return "" == e || null == e ? (a(".email .input").addClass("s-prompt"),
                     a(".email .error-prompt").prop("lastChild").nodeValue = _l("请注意此项为必填"),
                     !1) : (a(".email .input").removeClass("s-prompt"),
                     !0)
             },
             checkEmailReg: function() {
                 var e = a.trim(a(".email input").val());
                 return r.isValidMailAddr(e) ? (a(".email .input").removeClass("s-prompt"),
                     !0) : (a(".email .error-prompt").prop("lastChild").nodeValue = _l("邮箱地址格式有误"),
                     a(".email .input").addClass("s-prompt"),
                     !1)
             },
             checkConpanyWebsite: function() {
                 var e = a.trim(a(".conpanyWebsite input").val());
                 return "" == e || null == e ? (a(".conpanyWebsite .input").addClass("s-prompt"),
                     a(".accountNumber .error-prompt").prop("lastChild").nodeValue = _l("请注意此项为必填"),
                     !1) : (a(".accountNumber .input").removeClass("s-prompt"),
                     !0)
             },
             checkConpanyWebsiteReg: function() {
                 var e = a.trim(a(".conpanyWebsite input").val());
                 return /^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-&._?=:~]+)\.)+([A-Za-z0-9-&._?=:~\/])+$/.test(e) ? (a(".conpanyWebsite .input").removeClass("s-prompt"),
                     !0) : (a(".conpanyWebsite .error-prompt").prop("lastChild").nodeValue = _l("这网址不是以http://https://开头，或者不是网址！"),
                     a(".conpanyWebsite .input").addClass("s-prompt"),
                     !1)
             },
             checkAccountNumber: function() {
                 var e = a.trim(a(".accountNumber input").val());
                 new RegExp("^[A-Za-z0-9]+$");
                 return null == e || "" == e ? (a(".accountNumber .input").addClass("s-prompt"),
                     a(".accountNumber .error-prompt").prop("lastChild").nodeValue = _l("请注意此项为必填"),
                     !1) : (a(".accountNumber .input").removeClass("s-prompt"),
                     !0)
             },
             checkAccountNumberReg: function() {
                 var e = a.trim(a(".accountNumber input").val());
                 return new RegExp("^[A-Za-z0-9]+$").test(e) ? (a(".accountNumber .input").removeClass("s-prompt"),
                     !0) : (a(".accountNumber .error-prompt").prop("lastChild").nodeValue = _l("只能填写数字或字母，请重新输入"),
                     a(".accountNumber .input").addClass("s-prompt"),
                     !1)
             },
             checkCompanyName: function() {
                 var e = a.trim(a(".require-company input").val());
                 return "" != e && null != e || (a(".require-company .input").addClass("s-prompt"),
                     !1)
             },
             checkRegistCountry: function() {
                 var e = a.trim(a(".send-addr input").val());
                 return "" != e && null != e || (a(".send-addr .input").addClass("s-prompt"),
                     !1)
             },
             checkChargePerson: function() {
                 var e = a.trim(a(".contact-name input").val());
                 return "" != e && null != e || (a(".contact-name .input").addClass("s-prompt"),
                     !1)
             },
             inputChangedByMobile: function(e) {
                 var t = a(e.currentTarget).val()
                     , i = r.isValidPhoneNumber(t);
                 "" == t || null == t ? (a(".mobile .error-prompt").prop("lastChild").nodeValue = _l("请注意此项为必填"),
                     a(".mobile .input").addClass("s-prompt")) : i ? a(".mobile .input").removeClass("s-prompt") : (a(".mobile .error-prompt").prop("lastChild").nodeValue = _l("您输入联系电话错误，请重新输入"),
                     a(".mobile .input").addClass("s-prompt"))
             },
             checkEmail: function(e) {
                 var t = a(e.currentTarget).val()
                     , i = r.isValidMailAddr(t);
                 "" == t || null == t ? (a(".email .error-prompt").prop("lastChild").nodeValue = _l("请注意此项为必填"),
                     a(".email .input").addClass("s-prompt")) : i ? a(".email .input").removeClass("s-prompt") : (a(".email .error-prompt").prop("lastChild").nodeValue = _l("您输入联系邮箱错误，请重新输入"),
                     a(".email .input").addClass("s-prompt"))
             },
             inputAccountNumber: function(e) {
                 var t = a(e.currentTarget).val()
                     , i = new RegExp("^[A-Za-z0-9]+$");
                 "" == t || null == t ? (a(".accountNumber .error-prompt").prop("lastChild").nodeValue = _l("请注意此项为必填"),
                     a(".accountNumber .input").addClass("s-prompt")) : i.test(t) ? a(".accountNumber .input").removeClass("s-prompt") : (a(".accountNumber .error-prompt").prop("lastChild").nodeValue = _l("只能填写数字或字母，请重新输入"),
                     a(".accountNumber .input").addClass("s-prompt"))
             },
             checkCompanyNameOnline: function() {
                 var e = a.trim(a(".companyNameOnline input").val());
                 return "" != e && null != e || (a(".companyNameOnline .input").addClass("s-prompt"),
                     !1)
             },
             checkOnlinePlatform: function() {
                 var e = a.trim(a(".onlinePlatform input").val());
                 return "" != e && null != e || (a(".onlinePlatform .input").addClass("s-prompt"),
                     !1)
             },
             inputConpanyWebsite: function(e) {
                 if (null != e && "" != e && "undefined" != e) {
                     var t = a(e.currentTarget).val();
                     /^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-:&=_.?~]+)\.)+([A-Za-z0-9-:&=_.?~\/])+$/.test(t) ? 100 < t.length ? (a(".conpanyWebsite .error-prompt").prop("lastChild").nodeValue = _l("网店网址最大长度不能超过100个字符"),
                         a(".conpanyWebsite .input").addClass("s-prompt")) : a(".conpanyWebsite .input").removeClass("s-prompt") : (a(".conpanyWebsite .error-prompt").prop("lastChild").nodeValue = _l("这网址不是以http://https://开头，或者不是网址！"),
                         a(".conpanyWebsite .input").addClass("s-prompt"))
                 }
             },
             checkProductType: function() {
                 var e = a.trim(a(".productType input").val());
                 return "" != e && null != e || (a(".productType .input").addClass("s-prompt"),
                     !1)
             },
             checkShipmentsPerDay: function(e) {
                 if (null != e && "" != e && "undefined" != e) {
                     var t = a(e.currentTarget).val();
                     new RegExp("^[0-9]*$").test(t) ? 9 < t.length ? (a(".shipmentsPerDay .error-prompt").prop("lastChild").nodeValue = _l("发件量最大长度只能填写9位"),
                         a(".shipmentsPerDay .input").addClass("s-prompt")) : a(".shipmentsPerDay .input").removeClass("s-prompt") : (a(".shipmentsPerDay .error-prompt").prop("lastChild").nodeValue = _l("发件量只能为数字"),
                         a(".shipmentsPerDay .input").addClass("s-prompt"))
                 }
             },
             checkShipmentsTotal: function(e) {
                 if (null != e && "" != e && "undefined" != e) {
                     var t = a(e.currentTarget).val();
                     if (null != t && "" != t)
                         new RegExp("^[0-9]+([.][0-9]{1}){0,1}$").test(t) ? 100 < t ? (a(".shipmentsTotal .error-prompt").prop("lastChild").nodeValue = _l("F35发件占比不能大于100%"),
                             a(".shipmentsTotal .input").addClass("s-prompt")) : a(".shipmentsTotal .input").removeClass("s-prompt") : (a(".shipmentsTotal .error-prompt").prop("lastChild").nodeValue = _l("格式填写有误"),
                             a(".shipmentsTotal .input").addClass("s-prompt"))
                 }
             },
             checkValidCode: function() {
                 var e = a("#code").val();
                 return "" != e && null != e || (a(".validation-code-prompt").prop("lastChild").nodeValue = _l("您输入的验证码不能为空"),
                     a(".validation-code-prompt").show(),
                     !1)
             },
             hideValidcodeErrorPrompt: function() {
                 a(".validation-code-prompt").hide()
             },
             checkPrivacyPolicy: function() {
                 return a("#policy").attr("checked") ? (a(".require-policy .checkbox").removeClass("s-prompt"),
                     !0) : (a(".require-policy .error-prompt").prop("lastChild").nodeValue = _l("请勾选并接受相关协议提交您的申请"),
                     a(".require-policy .error-prompt").show(),
                     a(".require-policy .checkbox").addClass("s-prompt"),
                     !1)
             },
             agreePrivacy: function(e) {
                 a(e.currentTarget).attr("checked") ? a(".require-policy .error-prompt").hide() : a(".require-policy .error-prompt").show()
             }
         })
     }),
     define("models/declare", ["backbone", "jquery", "helper", "jquery.iframe-transport"], function(i, e, a) {
         return i.Model.extend({
             getVerifictionCode: function(e) {
                 var t = this;
                 i.ajax({
                     type: "POST",
                     url: a.getRESTfulDomain("sms/idcard/" + t.get("phone") + "/notification?app=sms&lang=" + a.getSiteLanguage() + "&region=" + a.getSiteLocation() + "&answer=" + e + "&area=" + a.getArea(t.get("phone"))),
                     error: function(e) {
                         t.trigger("get-validation-failed", e)
                     },
                     success: function(e) {
                         t.trigger("get-validation-success", e)
                     }
                 })
             },
             uploadImg: function(e, t) {
                 var n = this;
                 i.ajax({
                     type: " POST",
                     dataType: "json",
                     data: e,
                     files: t.files,
                     iframe: !0,
                     processData: !1,
                     url: a.getRESTfulDomain("idcard/upload/pic?verificationApp=idcard&verificationCode=" + n.get("code") + "&verificationMobile=" + n.get("phone") + n.get("queryString")),
                     headers: {
                         "SMS-Verification-App": "idcard",
                         "SMS-Verification-Code": n.get("code"),
                         "SMS-Verification-Mobile": n.get("phone")
                     },
                     error: function(e, t, i) {
                         n.trigger("img-upload-failed", e.responseText)
                     },
                     success: function(e, t, i) {
                         n.trigger("img-upload-success", e, i.responseText)
                     }
                 })
             },
             parseQueryString: function(e) {
                 var t = this;
                 i.ajax({
                     contentType: "application/json",
                     type: "GET",
                     data: e,
                     url: a.getRESTfulDomain("idcard/decode"),
                     error: function(e) {
                         t.trigger("decode-url-failed", e)
                     },
                     success: function(e) {
                         t.trigger("decode-url-success", e)
                     }
                 })
             },
             uploadWithoutImg: function(e) {
                 var t = this;
                 i.ajax({
                     contentType: "application/x-www-form-urlencoded",
                     type: "POST",
                     headers: {
                         "SMS-Verification-App": "idcard",
                         "SMS-Verification-Code": t.get("code"),
                         "SMS-Verification-Mobile": t.get("phone")
                     },
                     data: e,
                     url: a.getRESTfulDomain("idcard/upload/nopic"),
                     error: function(e) {
                         t.trigger("no-img-upload-failed", e)
                     },
                     success: function(e) {
                         t.trigger("no-img-upload-success", e)
                     }
                 })
             }
         })
     }),
     define("views/declare", ["templates", "backbone", "models/declare", "helper", "others/graphValidate", "sflayer", "jquery-download"], function(t, e, i, l, n, a) {
         return e.View.extend({
             initialize: function() {
                 this.model = new i,
                     this.queryStrings = l.getQueryStrings(),
                     this.queryStrings && this.queryStrings.mcn && this.queryStrings.ts && this.queryStrings.sign ? (this.queryStrings.mcn = this.queryStrings.mcn.substring(0, 32),
                         this.queryStrings.ts = this.queryStrings.ts.substring(0, 13),
                         this.queryStrings.sign = this.queryStrings.sign.substring(0, 32),
                         this.model.set("queryString", this.getQueryStringFromURL()),
                         this.waitTime = 30,
                         this.$phone = this.$("#phone"),
                         this.$name = this.$("#name"),
                         this.$firstUploadButton = this.$("#firstUpload"),
                         this.$notFirstUploadButton = this.$("#notFirstUpload"),
                         this.$validation = this.$("#validation"),
                         this.$cardId = this.$("#cardId"),
                         this.$validationCode = this.$(".validation-code"),
                         this.$orderNo = this.$("#orderNo"),
                         this.$saveToOWT = this.$("#saveToOWT"),
                         this.$toThirdPart = this.$("#toThirdPart"),
                         this.isFirstUpload = !0,
                         this.maxSendPhoneValidationCount = 5,
                         this.sendPhoneValidationCount = 0,
                         this.listenTo(this.model, "img-upload-success", this.imgUploadSuccess).listenTo(this.model, "img-upload-failed", this.imgUploadFailed).listenTo(this.model, "no-img-upload-success", this.noimgUploadSuccess).listenTo(this.model, "no-img-upload-failed", this.noimgUploadFailed).listenTo(this.model, "get-validation-success", this.renderValidationSuccess).listenTo(this.model, "get-validation-failed", this.renderValidationFailed).listenTo(this.model, "decode-url-success", this.decodeUrlSuccess).listenTo(this.model, "decode-url-failed", this.decodeUrlFailed),
                         this.parseQueryString(this.queryStrings)) : this.illegelURLLink()
             },
             events: {
                 "click .primary-button.upload-personal-id": "uploadFile",
                 "click .primary-button.validation-code": "getValidationCode",
                 "click  button#notFirstUpload": "notFirstUpload",
                 "click  button#firstUpload": "firstUpload",
                 "keyup input#orderNo": "checkInputOrderNo",
                 "blur input#orderNo": "checkInputOrderNo",
                 "keyup input#name": "checkInputName",
                 "blur input#name": "checkInputName",
                 "keyup input#phone": "checkInputPhone",
                 "blur input#phone": "checkInputPhone",
                 "keyup input#cardId": "checkInputIdcardNumber",
                 "blur input#cardId": "checkInputIdcardNumber",
                 "change input#idcardFront": "checkIdcardFileChange",
                 "change input#idcardBack": "checkIdcardFileChange",
                 "keyup input": "checkInput",
                 "blur input": "checkInput",
                 "submit form": "uploadFile",
                 "click #proDisagree": "proDisagree",
                 "click #proAgree": "proAgree",
                 "click #close": "proDisagree",
                 "click #cardTypeUl li a": "chooseCardType"
             },
             getQueryStringFromURL: function() {
                 return 0 === location.search.slice(1).length ? "" : "&" + location.search.slice(1).substring(0, 91)
             },
             firstUpload: function() {
                 this.$firstUploadButton.addClass("checked"),
                     this.$notFirstUploadButton.removeClass("checked"),
                     this.$(".first-upload").show(),
                     this.isFirstUpload = !0,
                     this.checkAllInput()
             },
             notFirstUpload: function() {
                 this.$firstUploadButton.removeClass("checked"),
                     this.$notFirstUploadButton.addClass("checked"),
                     this.$(".first-upload").hide(),
                     this.isFirstUpload = !1,
                     this.checkAllInput()
             },
             render: function() {},
             uploadFile: function(e) {
                 if (l.isValidPhoneNumber(this.$("#phone").val()) && this.$("#phone").val() === this.model.get("phone")) {
                     var n = {};
                     if (e && e.preventDefault(),
                             _.each(this.$('form :input[type="text"]'), function(e) {
                                 n[e.name] = e.value
                             }),
                             this.$saveToOWT.is(":checked") && this.$saveToOWT.is(":visible") ? n.saveToOWT = 1 : n.saveToOWT = 0,
                             this.$toThirdPart.is(":checked") ? n.toThirdPart = "true" : n.toThirdPart = "false",
                             n.cardType = $("#cardType").val(),
                             this.isFirstUpload) {
                         if (!this.isIdcardImageSelected())
                             return void this.renderMsg(12);
                         this.model.set("code", this.$validation.val()).uploadImg(n, {
                             files: this.$("form :file"),
                             data: n
                         })
                     } else
                         this.$(".primary-button.upload-personal-id").text("提交中...").addClass("disabled"),
                             _.each(this.queryStrings, function(e, t, i) {
                                 n[t] = e
                             }),
                             this.model.set("code", this.$validation.val()).uploadWithoutImg(n)
                 } else
                     this.renderMsg(15)
             },
             isIdcardImageSelected: function() {
                 return (isIdcardFrontSelect = "" != this.$("#idcardFront").val()) && (isIdcardBackSelect = "" != this.$("#idcardBack").val())
             },
             imgUploadSuccess: function(e, t) {
                 this.clearHint();
                 var i = "500";
                 try {
                     i = JSON.parse(t).code
                 } catch (e) {
                     i = t
                 }
                 "21" === (i += "") ? this.renderMsg("600") : "9" === i ? this.renderMsg("500") : "004" === i || "002" === i ? this.renderMsg("008") : "003" === i ? this.renderMsg("009") : "0" === i ? this.uploadImgSuccessHint() : this.renderMsg(i),
                     this.disabledUploadButton()
             },
             imgUploadFailed: function(e) {
                 this.clearHint(),
                     this.$("#code-404").addClass("show"),
                     this.disabledUploadButton()
             },
             noimgUploadSuccess: function(e) {
                 this.clearHint(),
                     this.$("#code-7").addClass("show"),
                     0 != e.code ? this.renderMsg(e.code) : this.uploadImgSuccessHint(),
                     this.disabledUploadButton(),
                     this.$("#notFirstUpload").removeClass("disabled")
             },
             disabledUploadButton: function() {
                 this.$(".primary-button.upload-personal-id").text(_l("提交报关信息")).removeClass("disabled")
             },
             noimgUploadFailed: function(e) {
                 if (this.clearHint(),
                     403 === e.status) {
                     var t = JSON.parse(e.responseText).code || e.responseText;
                     "21" === t ? this.renderMsg("600") : "004" === t || "002" === t ? this.renderMsg("008") : this.renderMsg("009")
                 } else
                     400 === e.status ? this.renderMsg("14") : (this.$validationCode.addClass("disabled"),
                         this.$(".primary-button.upload-personal-id").addClass("disabled"),
                         this.renderMsg("#code-000"));
                 this.$(".primary-button.upload-personal-id").text(_l("提交报关信息"))
             },
             clearHint: function() {
                 this.$(".hint").removeClass("show"),
                     this.$(".hint .error.show").removeClass("show")
             },
             uploadImgSuccessHint: function() {
                 this.clearHint(),
                     this.$("#code-0").addClass("show"),
                     this.$(".primary-button.upload-personal-id").toggleClass("disabled", !0),
                     this.disabledAllInput()
             },
             getValidationCode: function(e) {
                 e.preventDefault(),
                     e.stopPropagation(),
                     this.$("#validation-fetch-403").hide(),
                     this.$("#validation-fetch-410").hide(),
                     this.graphValidateLayer = a.open({
                         title: _l("图形验证码"),
                         area: "380px",
                         skin: "graphValidate",
                         content: t.graphValidate()
                     }),
                     this.graphValidate = new n({
                         el: ".graphValidate",
                         submitCallBack: this.getValidationCodeSubmit.bind(this)
                     })
             },
             getValidationCodeSubmit: function(e) {
                 a.close(this.graphValidateLayer);
                 var t = this;
                 if (t.$validation.val(""),
                         t.$validationCode.toggleClass("disabled", !0).data("wait", !0),
                     t.sendPhoneValidationCount > t.maxSendPhoneValidationCount) {
                     t.$("#max-count").show();
                     window.setInterval(function() {
                         t.$("#max-count4").hide()
                     }, 5e3)
                 } else
                     t.model.set("phone", t.$phone.val()).getVerifictionCode(e)
             },
             renderValidationSuccess: function() {
                 this.clearHint(),
                     this.setTimeOut(),
                     this.$validation.attr({
                         disabled: !1
                     }),
                     this.sendPhoneValidationCount += 1
             },
             renderValidationFailed: function(e) {
                 if (403 === e.status)
                     this.$("#validation-fetch-403").show(),
                         this.setTimeOut();
                 else if (410 === e.status)
                     this.$("#validation-fetch-410").show(),
                         this.setTimeOut();
                 else {
                     this.clearHint(),
                         this.$("#validation-fetch-404").show(),
                         this.$validationCode.data("wait", !1),
                         this.setTimeOut(),
                         this.$validation.attr({
                             disabled: !0
                         });
                     window.setInterval(function() {
                         this.$("#validation-fetch-404").hide()
                     }, 5e3)
                 }
             },
             setTimeOut: function() {
                 var e = this
                     , t = e.waitTime;
                 e.$validationCode.text(_l("重新获取") + t).toggleClass("disabled", !0);
                 var i = window.setInterval(function() {
                     if ((t -= 1) <= 0)
                         return window.clearInterval(i),
                             e.$validationCode.text(_l("获取验证码")).data("wait", !1),
                             void (/^\d{11}$/.test(e.$phone.val()) && e.$validationCode.toggleClass("disabled"));
                     e.$validationCode.text(_l("重新获取") + t)
                 }, 1e3)
             },
             renderMsg: function(e) {
                 this.$(".hint").addClass("show"),
                     this.$(".hint .error.show").removeClass("show"),
                     e ? (e = "#code-" + e,
                         this.$(e).addClass("show")) : this.$("#code-2").addClass("show")
             },
             checkAllInput: function() {
                 var e = "" !== this.$name.val() && this.$name.val()
                     , t = l.isValidPhoneNumber(this.$("#phone").val())
                     , i = /^\d{6}$/.test(this.$validation.val())
                     , n = this.validIdcardNumber()
                     , a = this.validOrderNumber()
                     , r = this.checkNameLength(this.$name.val())
                     , s = a && e && r && t && i
                     , o = s && this.isIdcardImageSelected() && n;
                 this.isFirstUpload ? this.$(".primary-button.upload-personal-id").toggleClass("disabled", !o) : this.$(".primary-button.upload-personal-id").toggleClass("disabled", !s)
             },
             checkInput: function(e) {
                 this.checkAllInput()
             },
             checkInputPhone: function(e) {
                 "keyup" === e.type && (this.clearHint(),
                 "phone" === e.currentTarget.id && this.$validation.val(""));
                 var t = l.isValidPhoneNumber(this.$("#phone").val())
                     , i = this.$validationCode.data("wait");
                 this.$validationCode.toggleClass("disabled", !(t && !i)),
                     this.clearHint();
                 var n = this.isFirstUpload ? "4" : "4_";
                 "" === this.$("#phone").val() && (this.clearHint(),
                     this.renderMsg(n)),
                 t || (this.clearHint(),
                     this.renderMsg(n))
             },
             checkInputOrderNo: function(e) {
                 this.clearHint();
                 var t = this.isFirstUpload ? "4" : "4_";
                 "" === this.$orderNo.val() && this.renderMsg(t),
                 this.validOrderNumber() || this.renderMsg("5")
             },
             validOrderNumber: function() {
                 var e = this.$orderNo.val();
                 return "" != e && e.length <= 35
             },
             checkInputName: function(e) {
                 this.clearHint();
                 var t = this.isFirstUpload ? "4" : "4_";
                 this.checkNameLength(this.$name.val()) || this.renderMsg(t)
             },
             checkNameLength: function(e) {
                 return !("" === (e = (e = encodeURIComponent(e)).replace(/%[A-F\d]{2}/g, "U")) || 60 < e.length)
             },
             checkInputIdcardNumber: function(e) {
                 this.clearHint(),
                     isValidIdcardNumber = this.validIdcardNumber();
                 var t = this.isFirstUpload ? "4" : "4_";
                 isValidIdcardNumber || this.renderMsg(t)
             },
             validIdcardNumber: function() {
                 var e = this.$cardId.val();
                 return "" != e && l.validIdcardNumber(e)
             },
             parseQueryString: function(e) {
                 this.model.parseQueryString(e)
             },
             decodeUrlSuccess: function(e) {
                 return e.configured ? ($("#toThirdPartWrap").show(),
                     $("#toThirdPart").attr("checked", !0)) : $("#toThirdPartWrap").hide(),
                     this.clearHint(),
                     this.showProtocal(),
                     !0
             },
             decodeUrlFailed: function(e) {
                 this.clearHint(),
                     404 === e.status ? this.renderMsg(404) : 500 === e.status ? this.renderMsg("000") : this.illegelURLLink()
             },
             illegelURLLink: function() {
                 this.disabledAllInputs(),
                     this.renderMsg(600)
             },
             disabledAllInput: function() {
                 this.$("input").val(""),
                     this.$validation.prop("disabled", !0)
             },
             disabledAllInputs: function() {
                 this.$("input").not("#cardType").val("").prop("disabled", !0),
                     this.$validation.prop("disabled", !0)
             },
             clearHint: function() {
                 this.$(".hint").removeClass("show"),
                     this.$(".hint .error.show").removeClass("show")
             },
             checkIdcardFileChange: function() {
                 this.checkAllInput()
             },
             troggleHint: function(e) {
                 this.$(e).show();
                 window.setInterval(function() {
                     this.$(e).hide()
                 }, 5e3)
             },
             showProtocal: function() {
                 var e = $("#protocal");
                 this.resizePop(e),
                     $("body").append('<div id="layerMask" style="background: #aaaaaa;opacity: .3;position: fixed;top: 0;left: 0;width: 100%;height: 100%;z-index:999;"></div>'),
                     e.parent().css("display", "inline");
                 var t = ($(window).height() - e.height()) / 2 - 100;
                 e.animate({
                     top: t + "px"
                 }, 500)
             },
             resizePop: function(e) {
                 var t = e.width()
                     , i = e.height()
                     , n = ($(window).width() - t) / 2;
                 $(window).height();
                 e.css({
                     left: n + "px",
                     top: "0px",
                     "z-index": 1e3,
                     position: "fixed"
                 })
             },
             proDisagree: function(e) {
                 $("#layerMask").remove(),
                     $("#protocal").hide(),
                     this.disabledAllInputs()
             },
             proAgree: function() {
                 $("#layerMask").remove(),
                     $("#protocal").hide()
             },
             chooseCardType: function(e) {
                 var t = $(e.currentTarget);
                 $("#cardTypeBtn").text(t.text()),
                     $("#cardType").val(t.data("value"))
             }
         })
     }),
     function() {
         var t, i;
         function e() {
             for (var e = 0; e < t.length; e++)
                 $("." + i[e]).length && function(e, t) {
                     require([e], function(e) {
                         "function" == typeof e && (-1 < ["order-service", "acs-order-page"].indexOf(t) ? (new e,
                             Backbone.history.start()) : new e({
                             el: $("." + t)
                         }))
                     })
                 }(t[e], i[e])
         }
         t = ["routers/orderDetailRouter", "routers/acsOrderDetailRouter", "views/waybill/router", "views/payFee/payFeePage", "views/store/storeManager", "views/range/range", "views/acceptanceCriteria", "views/importExportRule", "views/clearance", "views/tax", "views/claims", "views/currency", "views/invoices", "views/home/index", "views/cooperativeAdvisory/coomperativeAdvisory", "views/cooperativeAdvisory/coomperativeAdvisoryForKR", "views/feedbackAndSuggestion/feedbackAndSuggestionForKR", "views/popularization/popularization", "views/track", "views/regulation", "views/consign", "views/notIndustry", "views/internationalApplication/internationalApplication", "views/declare"],
             i = ["order-service", "acs-order-page", "shipping-detail-page", "payFee-page", "store-view", "range-page", "acceptance-criteria-page", "import-export-rule-page", "clearance-page", "tax", "claim-content", "currency-page", "invoices-page", "index-page", "cooperative_cn", "cooperative_kr", "suggestion_kr", "popularization", "track-content", "regulation-page", "consign-page", "notIndustry-page", "internationalApplication_cn", "cmsp_upload_personal_id"],
             (0,
                 window.define)("manager", [], function() {
                 return e
             })
     }(),
     define("partials/headHoverItem", ["backbone"], function(e) {
         return e.View.extend({
             initialize: function() {
                 this.$el.find(".topli").each(function() {
                     0 < $(this).find(".dropdown").length && $(this).children("a").attr("aria-haspopup", !0).attr("aria-expanded", !1)
                 })
             },
             events: {
                 "mouseenter .topli:not(.log)": "hoverIn",
                 "mouseleave .topli:not(.log)": "hoverOut",
                 "keydown .topli>a": "toggleHover"
             },
             hoverIn: function(e) {
                 var t = $(e.target).closest(".topli");
                 if (0 < t.find(".dropdown").length) {
                     if (t.find(".dropdown").css("display", "block"),
                         0 < t.find(".topa").length) {
                         1280 < t.find(".dropdown").width() && t.find(".innerWrapper").css("white-space", "initial");
                         var i = t.find(".topa").position().left;
                         1280 < i + (t.find(".dropdown").width() - 35) ? t.find(".dropdown").css("left", (1280 - t.find(".dropdown").width()) / 2 + "px") : t.find(".dropdown").css("left", i - 35 + "px")
                     } else {
                         var n = t.find(".region").width();
                         t.find(".region").css("left", 1280 - n - 40 + "px")
                     }
                     if (1 == t.find(".part2").length) {
                         var a = t.find(".topa").width();
                         t.find(".part2").css("min-width", a)
                     }
                 }
             },
             hoverOut: function(e) {
                 var t = $(e.target).closest(".topli");
                 0 < t.find(".dropdown").length && t.find(".dropdown").css("display", "none")
             },
             toggleHover: function(e) {
                 if (32 == e.which) {
                     e.preventDefault();
                     var t = $(e.target).closest(".topli");
                     return t.siblings().find(".dropdown").hide().end().find('[aria-expanded="true"]').attr("aria-expanded", !1),
                     0 < t.find(".dropdown").length && (t.find(".dropdown").is(":visible") ? (t.trigger("mouseleave"),
                         $(e.target).attr("aria-expanded", !1)) : (t.trigger("mouseenter"),
                         $(e.target).attr("aria-expanded", !0))),
                         !1
                 }
             }
         })
     }),
     define("views/phoneInput/phoneInput", ["backbone", "helper"], function(e, n) {
         return e.View.extend({
             data: {
                 showAreaCodeSelect: !0,
                 areaCodeCanEdit: !0,
                 region: "cn",
                 phone: "",
                 area: "",
                 valid: !1,
                 callback: null
             },
             areas: [{
                 name: "China (中国)",
                 region: "cn",
                 code: "86",
                 regx: /^1\d{10}$/
             }, {
                 name: "Hong Kong (香港)",
                 region: "hk",
                 code: "852",
                 regx: /^[569]{1}\d{7}$/
             }, {
                 name: "Macau (澳門)",
                 region: "mo",
                 code: "853",
                 regx: /^6\d{7}$/
             }, {
                 name: "Taiwan (台灣)",
                 region: "tw",
                 code: "886",
                 regx: /^[0]{0,1}9\d{8}$/
             }],
             events: {
                 "keyup input": "onValidate",
                 "click .selected-flag": "onToggleRegionOpts",
                 "click .country": "onSelectRegion"
             },
             initialize: function(e, t) {
                 var i = this;
                 this.areas.map(function(e) {
                     e.region.toLowerCase() === n.getSiteLocation().toLowerCase() && (i.data.region = e.region)
                 }),
                     this.data = _.extend({}, this.data, t),
                     this.areas.map(function(e) {
                         i.data.region === e.region && (i.data.area = e.code,
                             i.data.name = e.name)
                     }),
                     this.$el.val(this.data.phone),
                     this.$el.wrap("<div class='intl-tel-input allow-dropdown separate-dial-code iti-sdc-4'></div>"),
                     this.$el = this.$el.closest(".intl-tel-input"),
                     this.render(),
                     this.onValidate(),
                     $("body").click(function() {
                         i.$(".country-list").hide()
                     })
             },
             onValidate: function() {
                 for (var e, t = -1, i = this.$("input").val(); ++t < this.areas.length; )
                     if (e = this.areas[t],
                         this.data.area === e.code) {
                         this.data.valid = e.regx.test(i);
                         break
                     }
                 if (this.data.valid ? this.$("input").addClass("success-indicator").removeClass("warning-indicator") : this.$("input").addClass("warning-indicator").removeClass("success-indicator"),
                     this.data.callback && this.data.callback(this.data.valid, "86" === this.data.area ? "" : this.data.area, i),
                         _.isEmpty(i))
                     return this.$("input").removeClass("success-indicator warning-indicator")
             },
             onSelectRegion: function(e) {
                 var t = $(e.currentTarget)
                     , i = this.data.area = t.attr("data-dial-code")
                     , n = t.attr("data-region")
                     , a = t.find(".country-name").text();
                 this.$(".selected-flag .iti-flag").attr("class", "iti-flag " + n),
                     this.$(".selected-flag .selected-dial-code").html("+" + i),
                     this.$(".flag-container").attr("title", a),
                     this.onValidate()
             },
             onToggleRegionOpts: function(e) {
                 this.data.areaCodeCanEdit && (e.stopPropagation(),
                     this.$(".country-list").toggle())
             },
             render: function() {
                 var t = "";
                 return this.data.showAreaCodeSelect ? (this.$el.prepend("<div class='flag-container' title='" + this.data.name + "'><div class='selected-flag'><i class='iti-flag " + this.data.region + "'></i><span class='selected-dial-code'>+" + this.data.area + "</span><i class='iti-arrow'></i></div><ul class='country-list'></ul></div>"),
                     this.areas.map(function(e) {
                         t += '<li class="country" data-dial-code="' + e.code + '" data-region="' + e.region + '"><div class="flag-box"><div class="iti-flag ' + e.region + '"></div></div><span class="country-name">' + e.name + '</span><span class="dial-code">+' + e.code + "</span></li>"
                     }),
                     this.$(".country-list").html(t).hide(),
                 this.data.areaCodeCanEdit || this.$(".iti-arrow").hide()) : (this.$el.addClass("hideAreaCode"),
                     this.$(".flag-container").hide()),
                     this
             },
             isValid: function() {
                 return this.data.valid
             },
             getAreaCode: function() {
                 return "86" === this.data.area ? "" : this.data.area
             },
             getPhone: function() {
                 return this.$("input").val()
             },
             setPhone: function(e) {
                 this.$("input").val(e),
                     this.onValidate()
             }
         })
     }),
     define("others/countDownButton", ["backbone"], function(e) {
         return e.View.extend({
             events: {
                 "start .count-down-button": "startCountDown",
                 "reset .count-down-button": "resetCountDown",
                 "shouldBeActive .count-down-button": "changeShouldActiveFlag"
             },
             changeShouldActiveFlag: function(e, t) {
                 var i = $(e.currentTarget);
                 i.data("should-deactivate", !Boolean(t)),
                 i.data("is-loading") || i.toggleClass("disabled", !t)
             },
             startCountDown: function(e) {
                 var t = $(e.currentTarget);
                 t.data("origin-title", t.text());
                 var i = t.data("count-down-time") || 30
                     , n = t.data("count-down-title") || "reload in %d";
                 t.toggleClass("disabled", !0),
                     t.text(_p(n, i)),
                     t.data("is-loading", !0);
                 var a = this;
                 this.countDownTimer = window.setInterval(function() {
                     (i -= 1) ? t.text(_p(n, i)) : a.resetCountDown(e)
                 }, 1e3)
             },
             resetCountDown: function(e) {
                 var t = $(e.currentTarget);
                 t.toggleClass("disabled", t.data("should-deactivate")),
                     t.text(t.data("origin-title")),
                 this.countDownTimer && window.clearInterval(this.countDownTimer),
                     t.data("is-loading", !1)
             }
         })
     }),
     define("partials/login", ["backbone", "templates", "views/phoneInput/phoneInput", "helper", "event", "others/countDownButton", "others/graphValidate", "sflayer"], function(t, i, n, a, e, r, s, o) {
         return t.View.extend({
             initialize: function() {
                 this.judgeLogin(),
                     this.listenTo(e, e.Needlogin, this.needlogin),
                     this.listenTo(e, e.impNeedlogin, this.impNeedlogin),
                     this.listenTo(e, e.RegisterLoginCallback, this.registerLoginCallback)
             },
             events: {
                 "click .quickLogin a": "preshowLoginModal",
                 "click .login_validation_code": "getValidationCode",
                 "keydown #login_mobile": "regInput",
                 "keydown #login_code": "regInput",
                 "blur #login_code": "regCode",
                 "click .verification_quick_login": "login",
                 "click .quickLogout .logout": "logout",
                 "click .closeLoginWindow": "cancelLogin",
                 "click .refresh-btn": "openQRCode",
                 "click .tab-li": "toggleQRCode",
                 "click #tab2 a": "tabContentEvent"
             },
             impNeedlogin: function(e) {
                 this.registerSucc = null,
                     this.registerCancel = null,
                     this.needlogin(e)
             },
             needlogin: function(e) {
                 e && (this.succCallback = e.succCallback,
                     this.cancelCallback = e.cancelCallback),
                     $.cookie("loginUser", null, {
                         path: "/"
                     }),
                     this.judgeLogin(),
                     this.showLoginModal()
             },
             registerLoginCallback: function(e) {
                 e && ("function" == typeof e ? this.registerSucc = e : (this.registerSucc = e[0],
                     this.registerCancel = e[1]))
             },
             judgeLogin: function() {
                 this.$(".topli.log").hide(),
                     $.cookie("loginUser") ? this.$(".quickLogout").find('[data-toggle="dropdown"]').html(a.handleStr($.cookie("loginUser")) + ' <span class="caret"></span>').end().show() : this.$(".quickLogin").show()
             },
             preshowLoginModal: function() {
                 this.succCallback = null,
                     this.cancelCallback = null,
                     this.showLoginModal()
             },
             getMemberUrl: function() {
                 return "hk" == a.getSiteLocation() ? "en" == a.getSiteLanguage() ? "https://i.sf-express.com/orgin/hk/en/login.html" : "https://i.sf-express.com/orgin/hk/tc/login.html" : "cn" == a.getSiteLocation() ? a.getURLWithContext("login_register/") : "#"
             },
             showLoginModal: function() {
                 var e = {
                     verification: !0,
                     QRcode: "cn" == a.getSiteLocation(),
                     password: !1
                 };
                 this.loginLayer = o.open({
                     title: !1,
                     closeBtn: !1,
                     area: "417px",
                     content: i.loginWindow({
                         logtype: e,
                         termUrl: a.getURLWithContext("other/terms_service/"),
                         memberUrl: this.getMemberUrl()
                     })
                 }),
                     this.phoneInput = new n({
                         el: this.$("#login_mobile")
                     },{
                         showAreaCodeSelect: !1,
                         callback: this.activeBtnStatus.bind(this)
                     }),
                     new r({
                         el: this.$(".login_validation_code").parent()
                     }),
                 e.QRcode && this.$(".qrcode-tab").hasClass("active") && this.openQRCode(),
                 0 < $("#sender-mobile").length && this.$("#login_mobile").val($("#sender-mobile").val()),
                     this.$("#login_mobile").trigger("keyup")
             },
             activeBtnStatus: function(e) {
                 this.$(".login_validation_code").trigger("shouldBeActive", e)
             },
             hideErrorTips: function() {
                 this.$(".loginWindow .error").hide()
             },
             regInput: function() {
                 setTimeout(function() {
                     "" === $("#login_mobile").val().trim() || "" === $("#login_code").val().trim() ? $(".verification_quick_login").addClass("disabled") : $(".verification_quick_login").removeClass("disabled")
                 })
             },
             regCode: function() {
                 this.hideErrorTips();
                 var e = this.$("#login_code").val();
                 /^\d{6}$/.test(e) || "" === $.trim(e) ? this.validationCodeError = !1 : (this.$(".validation-code-error").show(),
                     this.validationCodeError = !0)
             },
             getValidationCode: function(e) {
                 e.preventDefault(),
                     this.graphValidateLayer = o.open({
                         title: _l("图形验证码"),
                         area: "380px",
                         skin: "graphValidate",
                         content: i.graphValidate()
                     }),
                     this.graphValidate = new s({
                         el: ".graphValidate",
                         submitCallBack: this.getSMSCodefromServer.bind(this)
                     })
             },
             getSMSCodefromServer: function(e) {
                 var t = this.phoneInput.getPhone()
                     , i = this.phoneInput.getAreaCode();
                 this.hideErrorTips();
                 var n = this;
                 sfAjax.smsUserNotification({
                     gdata: {
                         app: "sms",
                         mobile: t,
                         answer: e,
                         area: i
                     },
                     success: function() {
                         o.close(n.graphValidateLayer),
                             n.renderValidationSuccess()
                     },
                     error: function(e) {
                         403 == e.status ? (n.graphValidate.graphInputErr(),
                             n.graphValidate.getNewGraph()) : (o.close(n.graphValidateLayer),
                             n.renderValidationFailed(e))
                     }
                 })
             },
             renderValidationFailed: function(e) {
                 410 == e.status ? this.$(".loginWindow .limit-send-sms").show() : 400 == e.status ? (this.$("#login_mobile").focus(),
                     this.$(".loginWindow .telNO-err").show()) : this.$(".loginWindow .get-validation-code-failed").show()
             },
             renderValidationSuccess: function() {
                 this.$(".login_validation_code").trigger("start"),
                     this.$("#login_code").val("")
             },
             login: function(e) {
                 if (this.validationCodeError)
                     this.$(".validation-code-error").show();
                 else {
                     this.$(e.target).button("loading").prop("disabled", !0),
                         this.mobile = this.$("#login_mobile").val();
                     var t = this.$("#login_code").val();
                     this.area = this.phoneInput.getAreaCode();
                     var i = this;
                     sfAjax.login({
                         code: t,
                         mobile: this.mobile,
                         area: this.area,
                         gdata: {
                             rememberMe: $("#pwdRemeber").prop("checked")
                         },
                         error: function() {
                             i.hideErrorTips(),
                                 i.$("#login_code").focus(),
                                 i.$(".validation-code-network-error").show()
                         },
                         success: function(e) {
                             i.hideErrorTips(),
                                 0 === e.code ? i.loginSucc() : 120 === e.code ? i.showTerms() : 122 === e.code ? i.$(".login-err").show() : 111 === e.code ? i.$(".validation-code-error").show() : 112 === e.code ? i.$(".validation-code-param-error").show() : 113 === e.code ? i.$(".validation-not-send").show() : 114 === e.code ? i.$(".validation-code-expired").show() : 115 === e.code ? i.$(".validation-code-count-expired").show() : i.$(".validation-code-network-error").show()
                         },
                         complete: function() {
                             i.$(e.target).button("reset").prop("disabled", !1)
                         }
                     })
                 }
             },
             showTerms: function() {
                 $(window).resize(function() {
                     $("iframe").css("height", $(this).height() - 200)
                 });
                 var t = this
                     , e = a.getURLWithContext("other/modal/terms_service.html");
                 layer.open({
                     title: _l("服务条款"),
                     type: 2,
                     area: ["960px"],
                     offset: "40px",
                     content: [e],
                     btn: [_l("同意条款并注册会员")],
                     yes: function(e) {
                         sfAjax.regist({
                             mobile: t.mobile,
                             area: t.area,
                             gdata: {
                                 rememberMe: $("#pwdRemeber").prop("checked")
                             },
                             success: function() {
                                 t.loginSucc()
                             },
                             error: function() {
                                 o.msg(_l("注册失败"))
                             },
                             complete: function() {
                                 o.close(e),
                                     $(window).scrollTop(0)
                             }
                         })
                     }
                 }),
                     $(window).resize()
             },
             loginSucc: function() {
                 o.close(this.loginLayer),
                     this.judgeLogin(),
                 this.succCallback && this.succCallback(),
                 this.registerSucc && this.registerSucc(),
                     this.closeQRCode()
             },
             logout: function() {
                 var e = this;
                 t.ajax({
                     type: "POST",
                     url: a.getRESTfulDomain("user/logout") + a.assemabledLocationAndLanguageQureyString(),
                     success: function() {
                         $.cookie("loginUser", null, {
                             path: "/"
                         }),
                             e.judgeLogin()
                     }
                 })
             },
             cancelLogin: function() {
                 this.cancelCallback && this.cancelCallback(),
                 this.registerCancel && this.registerCancel(),
                     this.closeQRCode(),
                     o.close(this.loginLayer)
             },
             toggleQRCode: function(e) {
                 var t = $(e.currentTarget);
                 t.hasClass("qrcode-tab") ? t.hasClass("active") || this.openQRCode() : this.closeQRCode()
             },
             refreshQRCode: function() {
                 this.loop && this.$(".qrcode-pane .scan-img").attr("src", a.getRESTfulDomain("user/qrcode/getqrcode") + "?timestamp=" + (new Date).getTime())
             },
             resetQRCode: function() {
                 this.$(".scan-img").show(),
                     this.$(".scan-success").hide(),
                     this.$(".scan-abate").hide(),
                     this.refreshQRCode(),
                     this.setQRCodeInfo(0)
             },
             setQRCodeInfo: function(e) {
                 $(".QRinfo").html(_l({
                     0: "请使用微信扫描二维码",
                     10: "请在手机上登录F35官网",
                     11: "请在手机上确认",
                     2: "二维码已失效"
                 }[e]))
             },
             closeQRCode: function() {
                 this.loop && (clearInterval(this.loop),
                     this.refreshQRCode())
             },
             openQRCode: function() {
                 var t = this;
                 this.loop && clearInterval(this.loop),
                     this.loop = setInterval(function() {
                         sfAjax.qrLoginCheck({
                             data: {
                                 timestamp: (new Date).getTime(),
                                 rememberMe: $("#QRremember").prop("checked")
                             },
                             success: function(e) {
                                 switch (e.code) {
                                     case 0:
                                         t.renderQRstatus(e.result);
                                         break;
                                     case 126:
                                     case 131:
                                     case 101:
                                     case 125:
                                         t.renderAbateStatus()
                                 }
                             }
                         })
                     }, 2e3),
                     this.resetQRCode()
             },
             renderQRstatus: function(e) {
                 switch (e.status) {
                     case 0:
                         break;
                     case 1:
                         $(".scan-img").hide(),
                             $(".scan-success").show(),
                             this.setQRCodeInfo(e.login ? 11 : 10);
                         break;
                     case 2:
                         this.renderAbateStatus();
                         break;
                     case 3:
                         this.loginSucc()
                 }
             },
             renderAbateStatus: function() {
                 $(".scan-img").show(),
                     $(".scan-success").hide(),
                     $(".scan-abate").show(),
                     this.setQRCodeInfo(2),
                 this.loop && clearInterval(this.loop)
             },
             tabContentEvent: function(e) {
                 switch ($(e.target).data("type")) {
                     case 1:
                         sfgather.trackClicks("点击速运会员登录", "126001");
                         break;
                     case 2:
                         sfgather.trackClicks("点击速运月结积分登录", "126002");
                         break;
                     case 3:
                         sfgather.trackClicks("点击国际月结客户登录", "126003");
                         break;
                     case 4:
                         sfgather.trackClicks("点击优选会员登录", "126004");
                         break;
                     case 5:
                         sfgather.trackClicks("点击金融会员登录", "126005")
                 }
             }
         })
     }),
     define("partials/switchRegionAndLanguage", ["backbone", "helper"], function(e, t) {
         return e.View.extend({
             events: {
                 "click a": "switchRegionAndLanguage"
             },
             switchRegionAndLanguage: function(e) {
                 e.preventDefault(),
                     t.switchRegionAndLanguage($(e.target).data("region"), $(e.target).data("language"))
             }
         })
     }),
     function(s, t, e) {
         "$:nomunge";
         var i, n = s([]), a = s.resize = s.extend(s.resize, {}), o = "setTimeout", r = "resize", l = r + "-special-event", d = "delay", c = "throttleWindow";
         a[d] = 250,
             a[c] = !0,
             s.event.special[r] = {
                 setup: function() {
                     if (!a[c] && this[o])
                         return !1;
                     var e = s(this);
                     n = n.add(e),
                         s.data(this, l, {
                             w: e.width(),
                             h: e.height()
                         }),
                     1 === n.length && function e() {
                         i = t[o](function() {
                             n.each(function() {
                                 var e = s(this)
                                     , t = e.width()
                                     , i = e.height()
                                     , n = s.data(this, l);
                                 t === n.w && i === n.h || e.trigger(r, [n.w = t, n.h = i])
                             }),
                                 e()
                         }, a[d])
                     }()
                 },
                 teardown: function() {
                     if (!a[c] && this[o])
                         return !1;
                     var e = s(this);
                     n = n.not(e),
                         e.removeData(l),
                     n.length || clearTimeout(i)
                 },
                 add: function(e) {
                     if (!a[c] && this[o])
                         return !1;
                     var r;
                     function t(e, t, i) {
                         var n = s(this)
                             , a = s.data(this, l);
                         a.w = void 0 !== t ? t : n.width(),
                             a.h = void 0 !== i ? i : n.height(),
                             r.apply(this, arguments)
                     }
                     if (s.isFunction(e))
                         return r = e,
                             t;
                     r = e.handler,
                         e.handler = t
                 }
             }
     }(jQuery, this),
     define("jqresize", function() {}),
     define("partials/totop", ["backbone", "jqresize"], function(e) {
         return e.View.extend({
             events: {
                 "click .botfooter .toTop": "scrollToTop",
                 "mouseenter .botfooter .toTop": "changBlack",
                 "mouseleave .botfooter .toTop": "returnToRed"
             },
             initialize: function() {
                 var e = this;
                 $(window).scroll(function() {
                     e.init()
                 }),
                     $(window).resize(function() {
                         e.init()
                     }),
                     $("body").resize(function() {
                         e.init()
                     })
             },
             init: function() {
                 var e = this.$(".botfooter .toTop")
                     , t = $(window).height()
                     , i = this.$(".botfooter")[0].offsetHeight
                     , n = this.$el.height()
                     , a = $(window).scrollTop()
                     , r = n - a - t;
                 100 < a ? e.fadeIn(500) : e.fadeOut(500),
                     r <= i + 10 ? e.removeClass("fixed") : e.addClass("fixed")
             },
             scrollToTop: function() {
                 $("html,body").animate({
                     scrollTop: 0
                 }, 300)
             },
             changBlack: function() {
                 $(".botfooter .toTop").addClass("active")
             },
             returnToRed: function() {
                 $(".botfooter .toTop").removeClass("active")
             }
         })
     }),
     define("partials/index", ["./headHoverItem", "./login", "./switchRegionAndLanguage", "./totop"], function(e, t, i, n) {
         return Backbone.View.extend({
             initialize: function() {
                 new e({
                     el: $(".topheader")
                 }),
                     new t({
                         el: $("body")
                     }),
                     new i({
                         el: $(".topheader .region")
                     }),
                 0 < $(".botfooter .toTop").length && new n({
                     el: $("body")
                 }),
                     $("body").on("click", function(e) {
                         var t = (e = window.event || e).currentTarget || e.toElement || e.srcElement || e.originalEvent || e.target;
                         $(".location-picker").hide(),
                         /ui-menu-item/.test(t.className) || $(".toggle-plugins").hide()
                     })
             }
         })
     }),
     define("others/goDynamic", ["backbone", "helper"], function(e, n) {
         return e.View.extend({
             events: {
                 "click .go-dynamic": "locationChange",
                 "click .go-root": "goRoot"
             },
             goRoot: function(e) {
                 e.preventDefault(),
                     location.href = n.getURLWithContext("/")
             },
             locationChange: function(e) {
                 e.preventDefault();
                 var t = $(e.currentTarget);
                 if (t.data("with-return-page"))
                     return "_blank" === t.attr("target") ? window.open(t.attr("href") + "?return-page=" + escape(location)) : location.href = t.attr("href") + "?return-page=" + escape(location),
                         !1;
                 if (t.data("go-back")) {
                     var i = n.getQueryStrings();
                     return i && i["return-page"] ? location.href = i["return-page"] : location.href = t.attr("href"),
                         !1
                 }
                 t.data("new-window") ? window.open(n.getDynamicURLWithContext(t.data("location"))) : location.href = n.getDynamicURLWithContext(t.data("location"))
             }
         })
     }),
     define("others/inputIndicator", ["backbone"], function(e) {
         return e.View.extend({
             events: {
                 "keyup input": "inputKeyupTriggered",
                 "change .phone-number-area": "selectChangeTriggered"
             },
             selectChangeTriggered: function(e) {
                 var t = this.$("#hk-area-list").val()
                     , i = this.$(".phone-number-input");
                 null == t ? hasValidationReg = /^1\d{10}$/ : "852" == t ? hasValidationReg = /^[569]{1}\d{7}$/ : "853" == t ? hasValidationReg = /^6\d{7}$/ : "886" == t && (hasValidationReg = /^[0]{0,1}9\d{8}$/),
                     hasValidationReg.test(i.val()) ? (i.toggleClass("success-indicator", !0),
                         i.toggleClass("warning-indicator", !1)) : (i.toggleClass("success-indicator", !1),
                         i.toggleClass("warning-indicator", !0))
             },
             inputKeyupTriggered: function(e) {
                 var t = $(e.currentTarget)
                     , i = t.data("validation-regexp")
                     , n = !1
                     , a = this.$("#hk-area-list").val();
                 if (i) {
                     if (":phone" === i ? (null == a ? i = /^1\d{10}$/ : "852" == a ? i = /^[569]{1}\d{7}$/ : "853" == a ? i = /^6\d{7}$/ : "886" == a && (i = /^[0]{0,1}9\d{8}$/),
                             n = i.test(t.val())) : ":subPhone" === i && (n = /^1\d+$/.test(t.val()) ? /^1\d{10}$/.test(t.val()) : /^8\d{10,12}$/.test(t.val()) || /^[569]{1}\d{7}$/.test(t.val()) || /^6\d{7}$/.test(t.val()) || /^[0]{0,1}9\d{8}$/.test(t.val())),
                             _.isEmpty(t.val()))
                         return t.toggleClass("success-indicator", !1),
                             void t.toggleClass("warning-indicator", !1);
                     n ? (t.toggleClass("success-indicator", !0),
                         t.toggleClass("warning-indicator", !1)) : (t.toggleClass("success-indicator", !1),
                         t.toggleClass("warning-indicator", !0))
                 }
             }
         })
     }),
     function(o) {
         o.fn.qrcode = function(c) {
             var t, i;
             return "string" == typeof c && (c = {
                 text: c
             }),
                 c = o.extend({}, {
                     render: "canvas",
                     width: 256,
                     height: 256,
                     imgWidth: c.width / 2.5,
                     imgHeight: c.height / 2.5,
                     typeNumber: -1,
                     correctLevel: QRErrorCorrectLevel.H,
                     background: "#ffffff",
                     foreground: "#000000"
                 }, c),
                 t = function() {
                     var e, t, i, n, a, r, s, o, l, d = new QRCode(c.typeNumber,c.correctLevel);
                     for (d.addData(c.text),
                              d.make(),
                              (e = document.createElement("canvas")).width = c.width,
                              e.height = c.height,
                              t = e.getContext("2d"),
                          c.src && ((i = new Image).src = c.src,
                                  i.onload = function() {
                                      t.drawImage(i, (c.width - c.imgWidth) / 2, (c.height - c.imgHeight) / 2, c.imgWidth, c.imgHeight)
                                  }
                          ),
                              n = c.width / d.getModuleCount(),
                              a = c.height / d.getModuleCount(),
                              r = 0; r < d.getModuleCount(); r++)
                         for (s = 0; s < d.getModuleCount(); s++)
                             t.fillStyle = d.isDark(r, s) ? c.foreground : c.background,
                                 o = Math.ceil((s + 1) * n) - Math.floor(s * n),
                                 l = Math.ceil((r + 1) * n) - Math.floor(r * n),
                                 t.fillRect(Math.round(s * n), Math.round(r * a), o, l);
                     return e
                 }
                 ,
                 i = function() {
                     var e, t, i, n, a, r, s = new QRCode(c.typeNumber,c.correctLevel);
                     for (s.addData(c.text),
                              s.make(),
                              e = o("<table></table>").css("width", c.width + "px").css("height", c.height + "px").css("border", "0px").css("border-collapse", "collapse").css("background-color", c.background),
                              t = c.width / s.getModuleCount(),
                              i = c.height / s.getModuleCount(),
                              n = 0; n < s.getModuleCount(); n++)
                         for (a = o("<tr></tr>").css("height", i + "px").appendTo(e),
                                  r = 0; r < s.getModuleCount(); r++)
                             o("<td></td>").css("width", t + "px").css("background-color", s.isDark(n, r) ? c.foreground : c.background).appendTo(a);
                     return e
                 }
                 ,
                 this.each(function() {
                     var e = "canvas" == c.render ? t() : i();
                     o(e).appendTo(this)
                 })
         }
     }(jQuery),
     QR8bitByte.prototype = {
         getLength: function() {
             return this.data.length
         },
         write: function(e) {
             for (var t = 0; t < this.data.length; t++)
                 e.put(this.data.charCodeAt(t), 8)
         }
     },
     QRCode.prototype = {
         addData: function(e) {
             var t = new QR8bitByte(e);
             this.dataList.push(t),
                 this.dataCache = null
         },
         isDark: function(e, t) {
             if (e < 0 || this.moduleCount <= e || t < 0 || this.moduleCount <= t)
                 throw new Error(e + "," + t);
             return this.modules[e][t]
         },
         getModuleCount: function() {
             return this.moduleCount
         },
         make: function() {
             var e, t, i, n, a, r;
             if (this.typeNumber < 1) {
                 for (e = e = 1; e < 40; e++) {
                     for (t = QRRSBlock.getRSBlocks(e, this.errorCorrectLevel),
                              i = new QRBitBuffer,
                              a = n = 0; a < t.length; a++)
                         n += t[a].dataCount;
                     for (a = 0; a < this.dataList.length; a++)
                         r = this.dataList[a],
                             i.put(r.mode, 4),
                             i.put(r.getLength(), QRUtil.getLengthInBits(r.mode, e)),
                             r.write(i);
                     if (i.getLengthInBits() <= 8 * n)
                         break
                 }
                 this.typeNumber = e
             }
             this.makeImpl(!1, this.getBestMaskPattern())
         },
         makeImpl: function(e, t) {
             var i, n;
             for (this.moduleCount = 4 * this.typeNumber + 17,
                      this.modules = new Array(this.moduleCount),
                      i = 0; i < this.moduleCount; i++)
                 for (this.modules[i] = new Array(this.moduleCount),
                          n = 0; n < this.moduleCount; n++)
                     this.modules[i][n] = null;
             this.setupPositionProbePattern(0, 0),
                 this.setupPositionProbePattern(this.moduleCount - 7, 0),
                 this.setupPositionProbePattern(0, this.moduleCount - 7),
                 this.setupPositionAdjustPattern(),
                 this.setupTimingPattern(),
                 this.setupTypeInfo(e, t),
             7 <= this.typeNumber && this.setupTypeNumber(e),
             null == this.dataCache && (this.dataCache = QRCode.createData(this.typeNumber, this.errorCorrectLevel, this.dataList)),
                 this.mapData(this.dataCache, t)
         },
         setupPositionProbePattern: function(e, t) {
             var i, n;
             for (i = -1; i <= 7; i++)
                 if (!(e + i <= -1 || this.moduleCount <= e + i))
                     for (n = -1; n <= 7; n++)
                         t + n <= -1 || this.moduleCount <= t + n || (this.modules[e + i][t + n] = 0 <= i && i <= 6 && (0 == n || 6 == n) || 0 <= n && n <= 6 && (0 == i || 6 == i) || 2 <= i && i <= 4 && 2 <= n && n <= 4)
         },
         getBestMaskPattern: function() {
             var e, t, i = 0, n = 0;
             for (e = 0; e < 8; e++)
                 this.makeImpl(!0, e),
                     t = QRUtil.getLostPoint(this),
                 (0 == e || t < i) && (i = t,
                     n = e);
             return n
         },
         createMovieClip: function(e, t, i) {
             var n, a, r, s, o = e.createEmptyMovieClip(t, i);
             for (this.make(),
                      n = 0; n < this.modules.length; n++)
                 for (a = 1 * n,
                          r = 0; r < this.modules[n].length; r++)
                     s = 1 * r,
                     this.modules[n][r] && (o.beginFill(0, 100),
                         o.moveTo(s, a),
                         o.lineTo(s + 1, a),
                         o.lineTo(s + 1, a + 1),
                         o.lineTo(s, a + 1),
                         o.endFill());
             return o
         },
         setupTimingPattern: function() {
             var e, t;
             for (e = 8; e < this.moduleCount - 8; e++)
                 null == this.modules[e][6] && (this.modules[e][6] = 0 == e % 2);
             for (t = 8; t < this.moduleCount - 8; t++)
                 null == this.modules[6][t] && (this.modules[6][t] = 0 == t % 2)
         },
         setupPositionAdjustPattern: function() {
             var e, t, i, n, a, r, s = QRUtil.getPatternPosition(this.typeNumber);
             for (e = 0; e < s.length; e++)
                 for (t = 0; t < s.length; t++)
                     if (i = s[e],
                             n = s[t],
                         null == this.modules[i][n])
                         for (a = -2; a <= 2; a++)
                             for (r = -2; r <= 2; r++)
                                 this.modules[i + a][n + r] = -2 == a || 2 == a || -2 == r || 2 == r || 0 == a && 0 == r
         },
         setupTypeNumber: function(e) {
             var t, i, n = QRUtil.getBCHTypeNumber(this.typeNumber);
             for (t = 0; t < 18; t++)
                 i = !e && 1 == (1 & n >> t),
                     this.modules[Math.floor(t / 3)][t % 3 + this.moduleCount - 8 - 3] = i;
             for (t = 0; t < 18; t++)
                 i = !e && 1 == (1 & n >> t),
                     this.modules[t % 3 + this.moduleCount - 8 - 3][Math.floor(t / 3)] = i
         },
         setupTypeInfo: function(e, t) {
             var i, n, a = this.errorCorrectLevel << 3 | t, r = QRUtil.getBCHTypeInfo(a);
             for (i = 0; i < 15; i++)
                 n = !e && 1 == (1 & r >> i),
                     i < 6 ? this.modules[i][8] = n : i < 8 ? this.modules[i + 1][8] = n : this.modules[this.moduleCount - 15 + i][8] = n;
             for (i = 0; i < 15; i++)
                 n = !e && 1 == (1 & r >> i),
                     i < 8 ? this.modules[8][this.moduleCount - i - 1] = n : i < 9 ? this.modules[8][15 - i - 1 + 1] = n : this.modules[8][15 - i - 1] = n;
             this.modules[this.moduleCount - 8][8] = !e
         },
         mapData: function(e, t) {
             var i, n, a, r = -1, s = this.moduleCount - 1, o = 7, l = 0;
             for (i = this.moduleCount - 1; 0 < i; i -= 2)
                 for (6 == i && i--; ; ) {
                     for (n = 0; n < 2; n++)
                         null == this.modules[s][i - n] && (a = !1,
                         l < e.length && (a = 1 == (1 & e[l] >>> o)),
                         QRUtil.getMask(t, s, i - n) && (a = !a),
                             this.modules[s][i - n] = a,
                         -1 == --o && (l++,
                             o = 7));
                     if ((s += r) < 0 || this.moduleCount <= s) {
                         s -= r,
                             r = -r;
                         break
                     }
                 }
         }
     },
     QRCode.PAD0 = 236,
     QRCode.PAD1 = 17,
     QRCode.createData = function(e, t, i) {
         var n, a, r, s = QRRSBlock.getRSBlocks(e, t), o = new QRBitBuffer;
         for (n = 0; n < i.length; n++)
             a = i[n],
                 o.put(a.mode, 4),
                 o.put(a.getLength(), QRUtil.getLengthInBits(a.mode, e)),
                 a.write(o);
         for (n = r = 0; n < s.length; n++)
             r += s[n].dataCount;
         if (o.getLengthInBits() > 8 * r)
             throw new Error("code length overflow. (" + o.getLengthInBits() + ">" + 8 * r + ")");
         for (o.getLengthInBits() + 4 <= 8 * r && o.put(0, 4); 0 != o.getLengthInBits() % 8; )
             o.putBit(!1);
         for (; !(o.getLengthInBits() >= 8 * r) && (o.put(QRCode.PAD0, 8),
             !(o.getLengthInBits() >= 8 * r)); )
             o.put(QRCode.PAD1, 8);
         return QRCode.createBytes(o, s)
     }
    ,
     QRCode.createBytes = function(e, t) {
         var i, n, a, r, s, o, l, d, c, u, h = 0, p = 0, f = 0, _ = new Array(t.length), m = new Array(t.length);
         for (i = 0; i < t.length; i++) {
             for (n = t[i].dataCount,
                      a = t[i].totalCount - n,
                      p = Math.max(p, n),
                      f = Math.max(f, a),
                      _[i] = new Array(n),
                      r = 0; r < _[i].length; r++)
                 _[i][r] = 255 & e.buffer[r + h];
             for (h += n,
                      s = QRUtil.getErrorCorrectPolynomial(a),
                      o = new QRPolynomial(_[i],s.getLength() - 1).mod(s),
                      m[i] = new Array(s.getLength() - 1),
                      r = 0; r < m[i].length; r++)
                 l = r + o.getLength() - m[i].length,
                     m[i][r] = 0 <= l ? o.get(l) : 0
         }
         for (r = d = 0; r < t.length; r++)
             d += t[r].totalCount;
         for (c = new Array(d),
                  r = u = 0; r < p; r++)
             for (i = 0; i < t.length; i++)
                 r < _[i].length && (c[u++] = _[i][r]);
         for (r = 0; r < f; r++)
             for (i = 0; i < t.length; i++)
                 r < m[i].length && (c[u++] = m[i][r]);
         return c
     }
    ,
     QRMode = {
         MODE_NUMBER: 1,
         MODE_ALPHA_NUM: 2,
         MODE_8BIT_BYTE: 4,
         MODE_KANJI: 8
     },
     QRErrorCorrectLevel = {
         L: 1,
         M: 0,
         Q: 3,
         H: 2
     },
     QRMaskPattern = {
         PATTERN000: 0,
         PATTERN001: 1,
         PATTERN010: 2,
         PATTERN011: 3,
         PATTERN100: 4,
         PATTERN101: 5,
         PATTERN110: 6,
         PATTERN111: 7
     },
     QRUtil = {
         PATTERN_POSITION_TABLE: [[], [6, 18], [6, 22], [6, 26], [6, 30], [6, 34], [6, 22, 38], [6, 24, 42], [6, 26, 46], [6, 28, 50], [6, 30, 54], [6, 32, 58], [6, 34, 62], [6, 26, 46, 66], [6, 26, 48, 70], [6, 26, 50, 74], [6, 30, 54, 78], [6, 30, 56, 82], [6, 30, 58, 86], [6, 34, 62, 90], [6, 28, 50, 72, 94], [6, 26, 50, 74, 98], [6, 30, 54, 78, 102], [6, 28, 54, 80, 106], [6, 32, 58, 84, 110], [6, 30, 58, 86, 114], [6, 34, 62, 90, 118], [6, 26, 50, 74, 98, 122], [6, 30, 54, 78, 102, 126], [6, 26, 52, 78, 104, 130], [6, 30, 56, 82, 108, 134], [6, 34, 60, 86, 112, 138], [6, 30, 58, 86, 114, 142], [6, 34, 62, 90, 118, 146], [6, 30, 54, 78, 102, 126, 150], [6, 24, 50, 76, 102, 128, 154], [6, 28, 54, 80, 106, 132, 158], [6, 32, 58, 84, 110, 136, 162], [6, 26, 54, 82, 110, 138, 166], [6, 30, 58, 86, 114, 142, 170]],
         G15: 1335,
         G18: 7973,
         G15_MASK: 21522,
         getBCHTypeInfo: function(e) {
             for (var t = e << 10; 0 <= QRUtil.getBCHDigit(t) - QRUtil.getBCHDigit(QRUtil.G15); )
                 t ^= QRUtil.G15 << QRUtil.getBCHDigit(t) - QRUtil.getBCHDigit(QRUtil.G15);
             return (e << 10 | t) ^ QRUtil.G15_MASK
         },
         getBCHTypeNumber: function(e) {
             for (var t = e << 12; 0 <= QRUtil.getBCHDigit(t) - QRUtil.getBCHDigit(QRUtil.G18); )
                 t ^= QRUtil.G18 << QRUtil.getBCHDigit(t) - QRUtil.getBCHDigit(QRUtil.G18);
             return e << 12 | t
         },
         getBCHDigit: function(e) {
             for (var t = 0; 0 != e; )
                 t++,
                     e >>>= 1;
             return t
         },
         getPatternPosition: function(e) {
             return QRUtil.PATTERN_POSITION_TABLE[e - 1]
         },
         getMask: function(e, t, i) {
             switch (e) {
                 case QRMaskPattern.PATTERN000:
                     return 0 == (t + i) % 2;
                 case QRMaskPattern.PATTERN001:
                     return 0 == t % 2;
                 case QRMaskPattern.PATTERN010:
                     return 0 == i % 3;
                 case QRMaskPattern.PATTERN011:
                     return 0 == (t + i) % 3;
                 case QRMaskPattern.PATTERN100:
                     return 0 == (Math.floor(t / 2) + Math.floor(i / 3)) % 2;
                 case QRMaskPattern.PATTERN101:
                     return 0 == t * i % 2 + t * i % 3;
                 case QRMaskPattern.PATTERN110:
                     return 0 == (t * i % 2 + t * i % 3) % 2;
                 case QRMaskPattern.PATTERN111:
                     return 0 == (t * i % 3 + (t + i) % 2) % 2;
                 default:
                     throw new Error("bad maskPattern:" + e)
             }
         },
         getErrorCorrectPolynomial: function(e) {
             var t, i = new QRPolynomial([1],0);
             for (t = 0; t < e; t++)
                 i = i.multiply(new QRPolynomial([1, QRMath.gexp(t)],0));
             return i
         },
         getLengthInBits: function(e, t) {
             if (1 <= t && t < 10)
                 switch (e) {
                     case QRMode.MODE_NUMBER:
                         return 10;
                     case QRMode.MODE_ALPHA_NUM:
                         return 9;
                     case QRMode.MODE_8BIT_BYTE:
                     case QRMode.MODE_KANJI:
                         return 8;
                     default:
                         throw new Error("mode:" + e)
                 }
             else if (t < 27)
                 switch (e) {
                     case QRMode.MODE_NUMBER:
                         return 12;
                     case QRMode.MODE_ALPHA_NUM:
                         return 11;
                     case QRMode.MODE_8BIT_BYTE:
                         return 16;
                     case QRMode.MODE_KANJI:
                         return 10;
                     default:
                         throw new Error("mode:" + e)
                 }
             else {
                 if (!(t < 41))
                     throw new Error("type:" + t);
                 switch (e) {
                     case QRMode.MODE_NUMBER:
                         return 14;
                     case QRMode.MODE_ALPHA_NUM:
                         return 13;
                     case QRMode.MODE_8BIT_BYTE:
                         return 16;
                     case QRMode.MODE_KANJI:
                         return 12;
                     default:
                         throw new Error("mode:" + e)
                 }
             }
         },
         getLostPoint: function(e) {
             var t, i, n, a, r, s, o, l, d = e.getModuleCount(), c = 0;
             for (t = 0; t < d; t++)
                 for (i = 0; i < d; i++) {
                     for (n = 0,
                              a = e.isDark(t, i),
                              r = -1; r <= 1; r++)
                         if (!(t + r < 0 || d <= t + r))
                             for (s = -1; s <= 1; s++)
                                 i + s < 0 || d <= i + s || (0 != r || 0 != s) && a == e.isDark(t + r, i + s) && n++;
                     5 < n && (c += 3 + n - 5)
                 }
             for (t = 0; t < d - 1; t++)
                 for (i = 0; i < d - 1; i++)
                     o = 0,
                     e.isDark(t, i) && o++,
                     e.isDark(t + 1, i) && o++,
                     e.isDark(t, i + 1) && o++,
                     e.isDark(t + 1, i + 1) && o++,
                     (0 == o || 4 == o) && (c += 3);
             for (t = 0; t < d; t++)
                 for (i = 0; i < d - 6; i++)
                     e.isDark(t, i) && !e.isDark(t, i + 1) && e.isDark(t, i + 2) && e.isDark(t, i + 3) && e.isDark(t, i + 4) && !e.isDark(t, i + 5) && e.isDark(t, i + 6) && (c += 40);
             for (i = 0; i < d; i++)
                 for (t = 0; t < d - 6; t++)
                     e.isDark(t, i) && !e.isDark(t + 1, i) && e.isDark(t + 2, i) && e.isDark(t + 3, i) && e.isDark(t + 4, i) && !e.isDark(t + 5, i) && e.isDark(t + 6, i) && (c += 40);
             for (i = l = 0; i < d; i++)
                 for (t = 0; t < d; t++)
                     e.isDark(t, i) && l++;
             return c + 10 * (Math.abs(100 * l / d / d - 50) / 5)
         }
     },
     QRMath = {
         glog: function(e) {
             if (e < 1)
                 throw new Error("glog(" + e + ")");
             return QRMath.LOG_TABLE[e]
         },
         gexp: function(e) {
             for (; e < 0; )
                 e += 255;
             for (; 256 <= e; )
                 e -= 255;
             return QRMath.EXP_TABLE[e]
         },
         EXP_TABLE: new Array(256),
         LOG_TABLE: new Array(256)
     },
     i = 0; i < 8; i++)
    QRMath.EXP_TABLE[i] = 1 << i;
for (i = 8; i < 256; i++)
    QRMath.EXP_TABLE[i] = QRMath.EXP_TABLE[i - 4] ^ QRMath.EXP_TABLE[i - 5] ^ QRMath.EXP_TABLE[i - 6] ^ QRMath.EXP_TABLE[i - 8];
for (i = 0; i < 255; i++)
    QRMath.LOG_TABLE[QRMath.EXP_TABLE[i]] = i;
QRPolynomial.prototype = {
    get: function(e) {
        return this.num[e]
    },
    getLength: function() {
        return this.num.length
    },
    multiply: function(e) {
        var t, i, n = new Array(this.getLength() + e.getLength() - 1);
        for (t = 0; t < this.getLength(); t++)
            for (i = 0; i < e.getLength(); i++)
                n[t + i] ^= QRMath.gexp(QRMath.glog(this.get(t)) + QRMath.glog(e.get(i)));
        return new QRPolynomial(n,0)
    },
    mod: function(e) {
        var t, i, n;
        if (this.getLength() - e.getLength() < 0)
            return this;
        for (t = QRMath.glog(this.get(0)) - QRMath.glog(e.get(0)),
                 i = new Array(this.getLength()),
                 n = 0; n < this.getLength(); n++)
            i[n] = this.get(n);
        for (n = 0; n < e.getLength(); n++)
            i[n] ^= QRMath.gexp(QRMath.glog(e.get(n)) + t);
        return new QRPolynomial(i,0).mod(e)
    }
},
    QRRSBlock.RS_BLOCK_TABLE = [[1, 26, 19], [1, 26, 16], [1, 26, 13], [1, 26, 9], [1, 44, 34], [1, 44, 28], [1, 44, 22], [1, 44, 16], [1, 70, 55], [1, 70, 44], [2, 35, 17], [2, 35, 13], [1, 100, 80], [2, 50, 32], [2, 50, 24], [4, 25, 9], [1, 134, 108], [2, 67, 43], [2, 33, 15, 2, 34, 16], [2, 33, 11, 2, 34, 12], [2, 86, 68], [4, 43, 27], [4, 43, 19], [4, 43, 15], [2, 98, 78], [4, 49, 31], [2, 32, 14, 4, 33, 15], [4, 39, 13, 1, 40, 14], [2, 121, 97], [2, 60, 38, 2, 61, 39], [4, 40, 18, 2, 41, 19], [4, 40, 14, 2, 41, 15], [2, 146, 116], [3, 58, 36, 2, 59, 37], [4, 36, 16, 4, 37, 17], [4, 36, 12, 4, 37, 13], [2, 86, 68, 2, 87, 69], [4, 69, 43, 1, 70, 44], [6, 43, 19, 2, 44, 20], [6, 43, 15, 2, 44, 16], [4, 101, 81], [1, 80, 50, 4, 81, 51], [4, 50, 22, 4, 51, 23], [3, 36, 12, 8, 37, 13], [2, 116, 92, 2, 117, 93], [6, 58, 36, 2, 59, 37], [4, 46, 20, 6, 47, 21], [7, 42, 14, 4, 43, 15], [4, 133, 107], [8, 59, 37, 1, 60, 38], [8, 44, 20, 4, 45, 21], [12, 33, 11, 4, 34, 12], [3, 145, 115, 1, 146, 116], [4, 64, 40, 5, 65, 41], [11, 36, 16, 5, 37, 17], [11, 36, 12, 5, 37, 13], [5, 109, 87, 1, 110, 88], [5, 65, 41, 5, 66, 42], [5, 54, 24, 7, 55, 25], [11, 36, 12], [5, 122, 98, 1, 123, 99], [7, 73, 45, 3, 74, 46], [15, 43, 19, 2, 44, 20], [3, 45, 15, 13, 46, 16], [1, 135, 107, 5, 136, 108], [10, 74, 46, 1, 75, 47], [1, 50, 22, 15, 51, 23], [2, 42, 14, 17, 43, 15], [5, 150, 120, 1, 151, 121], [9, 69, 43, 4, 70, 44], [17, 50, 22, 1, 51, 23], [2, 42, 14, 19, 43, 15], [3, 141, 113, 4, 142, 114], [3, 70, 44, 11, 71, 45], [17, 47, 21, 4, 48, 22], [9, 39, 13, 16, 40, 14], [3, 135, 107, 5, 136, 108], [3, 67, 41, 13, 68, 42], [15, 54, 24, 5, 55, 25], [15, 43, 15, 10, 44, 16], [4, 144, 116, 4, 145, 117], [17, 68, 42], [17, 50, 22, 6, 51, 23], [19, 46, 16, 6, 47, 17], [2, 139, 111, 7, 140, 112], [17, 74, 46], [7, 54, 24, 16, 55, 25], [34, 37, 13], [4, 151, 121, 5, 152, 122], [4, 75, 47, 14, 76, 48], [11, 54, 24, 14, 55, 25], [16, 45, 15, 14, 46, 16], [6, 147, 117, 4, 148, 118], [6, 73, 45, 14, 74, 46], [11, 54, 24, 16, 55, 25], [30, 46, 16, 2, 47, 17], [8, 132, 106, 4, 133, 107], [8, 75, 47, 13, 76, 48], [7, 54, 24, 22, 55, 25], [22, 45, 15, 13, 46, 16], [10, 142, 114, 2, 143, 115], [19, 74, 46, 4, 75, 47], [28, 50, 22, 6, 51, 23], [33, 46, 16, 4, 47, 17], [8, 152, 122, 4, 153, 123], [22, 73, 45, 3, 74, 46], [8, 53, 23, 26, 54, 24], [12, 45, 15, 28, 46, 16], [3, 147, 117, 10, 148, 118], [3, 73, 45, 23, 74, 46], [4, 54, 24, 31, 55, 25], [11, 45, 15, 31, 46, 16], [7, 146, 116, 7, 147, 117], [21, 73, 45, 7, 74, 46], [1, 53, 23, 37, 54, 24], [19, 45, 15, 26, 46, 16], [5, 145, 115, 10, 146, 116], [19, 75, 47, 10, 76, 48], [15, 54, 24, 25, 55, 25], [23, 45, 15, 25, 46, 16], [13, 145, 115, 3, 146, 116], [2, 74, 46, 29, 75, 47], [42, 54, 24, 1, 55, 25], [23, 45, 15, 28, 46, 16], [17, 145, 115], [10, 74, 46, 23, 75, 47], [10, 54, 24, 35, 55, 25], [19, 45, 15, 35, 46, 16], [17, 145, 115, 1, 146, 116], [14, 74, 46, 21, 75, 47], [29, 54, 24, 19, 55, 25], [11, 45, 15, 46, 46, 16], [13, 145, 115, 6, 146, 116], [14, 74, 46, 23, 75, 47], [44, 54, 24, 7, 55, 25], [59, 46, 16, 1, 47, 17], [12, 151, 121, 7, 152, 122], [12, 75, 47, 26, 76, 48], [39, 54, 24, 14, 55, 25], [22, 45, 15, 41, 46, 16], [6, 151, 121, 14, 152, 122], [6, 75, 47, 34, 76, 48], [46, 54, 24, 10, 55, 25], [2, 45, 15, 64, 46, 16], [17, 152, 122, 4, 153, 123], [29, 74, 46, 14, 75, 47], [49, 54, 24, 10, 55, 25], [24, 45, 15, 46, 46, 16], [4, 152, 122, 18, 153, 123], [13, 74, 46, 32, 75, 47], [48, 54, 24, 14, 55, 25], [42, 45, 15, 32, 46, 16], [20, 147, 117, 4, 148, 118], [40, 75, 47, 7, 76, 48], [43, 54, 24, 22, 55, 25], [10, 45, 15, 67, 46, 16], [19, 148, 118, 6, 149, 119], [18, 75, 47, 31, 76, 48], [34, 54, 24, 34, 55, 25], [20, 45, 15, 61, 46, 16]],
    QRRSBlock.getRSBlocks = function(e, t) {
        var i, n, a, r, s, o, l, d = QRRSBlock.getRsBlockTable(e, t);
        if (null == d)
            throw new Error("bad rs block @ typeNumber:" + e + "/errorCorrectLevel:" + t);
        for (i = d.length / 3,
                 n = new Array,
                 a = 0; a < i; a++)
            for (r = d[3 * a + 0],
                     s = d[3 * a + 1],
                     o = d[3 * a + 2],
                     l = 0; l < r; l++)
                n.push(new QRRSBlock(s,o));
        return n
    }
    ,
    QRRSBlock.getRsBlockTable = function(e, t) {
        switch (t) {
            case QRErrorCorrectLevel.L:
                return QRRSBlock.RS_BLOCK_TABLE[4 * (e - 1) + 0];
            case QRErrorCorrectLevel.M:
                return QRRSBlock.RS_BLOCK_TABLE[4 * (e - 1) + 1];
            case QRErrorCorrectLevel.Q:
                return QRRSBlock.RS_BLOCK_TABLE[4 * (e - 1) + 2];
            case QRErrorCorrectLevel.H:
                return QRRSBlock.RS_BLOCK_TABLE[4 * (e - 1) + 3];
            default:
                return
        }
    }
    ,
    QRBitBuffer.prototype = {
        get: function(e) {
            var t = Math.floor(e / 8);
            return 1 == (1 & this.buffer[t] >>> 7 - e % 8)
        },
        put: function(e, t) {
            for (var i = 0; i < t; i++)
                this.putBit(1 == (1 & e >>> t - i - 1))
        },
        getLengthInBits: function() {
            return this.length
        },
        putBit: function(e) {
            var t = Math.floor(this.length / 8);
            this.buffer.length <= t && this.buffer.push(0),
            e && (this.buffer[t] |= 128 >>> this.length % 8),
                this.length++
        }
    },
    define("jqueryQrcode", function() {}),
    define("others/share", ["backbone", "helper", "jqueryQrcode"], function(e, m) {
        return e.View.extend({
            initialize: function() {
                var e = this.$el
                    , t = e.find(".xinlang")
                    , i = encodeURIComponent(t.data("title"))
                    , n = e.find(".qq")
                    , a = e.find(".douban")
                    , r = e.find(".in")
                    , s = e.find(".facebook")
                    , o = e.find(".naver")
                    , l = e.find(".whatsapp")
                    , d = e.find(".twitter")
                    , c = e.find(".googleplus")
                    , u = e.find(".reddit")
                    , h = e.find(".zalo");
                t.attr("href", "http://v.t.sina.com.cn/share/share.php?url=" + window.location.href + "&title=" + i),
                    n.attr("href", "http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url=" + window.location.href + "&title=" + i),
                    a.attr("href", "http://shuo.douban.com/!service/share?href=" + window.location.href + "&title=" + i),
                    r.attr("href", "http://www.linkedin.com/shareArticle?mini=true&url=" + window.location.href + "&title=" + i),
                    s.attr("href", "https://www.facebook.com/sharer/sharer.php?u=" + window.location.href + "&t=" + i),
                    o.attr("href", "http://share.naver.com/web/shareView.nhn?url=" + window.location.href + "&title=" + i),
                    l.attr("href", "https://api.whatsapp.com/send?text=" + window.location.href),
                    d.attr("href", "http://twitter.com/home?status=" + window.location.href + "&title=" + i),
                    u.attr("href", "http://www.reddit.com/submit?url=" + window.location.href + "&title=" + i),
                    c.attr("href", "https://plus.google.com/share?url=" + window.location.href + "&title=" + i),
                    h.attr("href", "https://wordpress.org/plugins/like-share-zalo-button/");
                var p = e.find(".weixin").data("urltext");
                if ($qrcodeCanvas = e.find("#qrcodeCanvas"),
                        p) {
                    var f = $qrcodeCanvas.qrcode({
                        render: "canvas",
                        text: p,
                        width: "200",
                        height: "200",
                        background: "#ffffff",
                        foreground: "#000000"
                    })
                        , _ = new Image;
                    _.src = m.getResourceURL("images/about_us/SF_logo.png"),
                        _.onload = function() {
                            f.children("canvas")[0].getContext("2d").drawImage(_, 80, 80, 40, 40)
                        }
                } else
                    "cn" == m.getSiteLocation() ? $qrcodeCanvas.html('<img src="' + m.getResourceURL("images/index/sf-code-img.jpg") + '" style="width:100%"/>') : "hk" == m.getSiteLocation() ? $qrcodeCanvas.html('<img src="' + m.getResourceURL("images/index/sfwechat_hk.jpg") + '" style="width:100%"/>') : $qrcodeCanvas.html('<img src="' + m.getResourceURL("images/index/sfwechat_international.png") + '" style="width:100%"/>')
            }
        })
    }),
    define("others/orderButton", ["backbone", "helper"], function(e, t) {
        return e.View.extend({
            initialize: function() {
                var e = this.$el
                    , t = e.width()
                    , i = e.find(".arrow")
                    , n = e.find(".flash")
                    , a = e.find(".icon")
                    , r = a.attr("src");
                e.hover(function() {
                    a.attr("src", r),
                        a.show(),
                        e.animate({
                            paddingLeft: 15,
                            paddingRight: 15
                        }),
                        i.animate({
                            opacity: 1
                        }),
                        n.animate({
                            left: t
                        })
                }, function() {
                    e.removeClass("hover"),
                        e.animate({
                            paddingLeft: 0,
                            paddingRight: 0
                        }),
                        i.animate({
                            opacity: 0
                        }),
                        n.hide().css({
                            left: "-101px"
                        })
                })
            }
        })
    }),
    define("others/video/videoMask", ["backbone"], function(e) {
        return e.View.extend({
            el: $("#video-box"),
            events: {
                "click a.close": "videoClose"
            },
            initialize: function(e) {
                this.videoUrl = e.videoUrl,
                    this.hasShortVideo = e.hasShortVideo
            },
            showMask: function() {
                this.$el.show(),
                    Player = jwplayer("video").setup({
                        stretching: "fill",
                        flashplayer: jwplayerFlashSwf,
                        file: this.videoUrl,
                        width: 960,
                        height: 540,
                        autostart: !0,
                        skin: {
                            name: "glow",
                            url: jwplayerSkin
                        }
                    })
            },
            videoClose: function(e) {
                e.preventDefault(),
                    Player.remove(),
                    this.$el.hide(),
                this.hasShortVideo && playerShort.play()
            }
        })
    }),
    define("others/video/video", ["backbone", "./videoMask", "helper"], function(e, i, n) {
        return e.View.extend({
            events: {
                "click a.play": "videoPop"
            },
            initialize: function() {
                var e = this.$el;
                if (this.videoShort = e.find("#videoShort"),
                        this.aPlay = e.find(".play"),
                        this.videoMaskView = new i({
                            videoUrl: this.aPlay.attr("data-video"),
                            hasShortVideo: this.videoShort[0]
                        }),
                        jwplayer.key = "N2Z47h5lEkdFZFPwrPS0j5p+FH3UmaACS13lzg==",
                        jwplayerFlashSwf = n.getResourceURL("scripts/old/jwplayer-7.9.1/jwplayer.flash.swf"),
                        jwplayerSkin = n.getResourceURL("scripts/old/jwplayer-7.9.1/skins/glow.css"),
                    0 < this.videoShort.length) {
                    playerShort = jwplayer("videoShort").setup({
                        stretching: "fill",
                        file: this.videoShort.attr("data-videoShort"),
                        flashplayer: jwplayerFlashSwf,
                        height: 488,
                        repeat: !0,
                        controls: !1,
                        mute: !0,
                        autostart: !0
                    });
                    var t = this;
                    playerShort.on("ready", function() {
                        t.aPlay.css("display", "block")
                    })
                }
            },
            videoPop: function(e) {
                e.preventDefault(),
                    e.stopPropagation(),
                this.videoShort[0] && ("playing" != playerShort.getState() && "buffering" != playerShort.getState() || playerShort.pause()),
                    this.videoMaskView.showMask()
            }
        })
    }),
    define("others/bannertip", ["backbone"], function(e) {
        return e.View.extend({
            initialize: function() {
                var e = this.$el;
                e.hover(function() {
                    e.stop(!0, !1).animate({
                        right: "0px"
                    }, 500)
                }, function() {
                    e.stop(!0, !1).animate({
                        right: "-177px"
                    }, 500)
                }),
                    setTimeout(function() {
                        e.stop(!0, !1).animate({
                            right: "-177px"
                        }, 500)
                    }, 3e3)
            }
        })
    }),
    define("others/secondNavigation", ["backbone"], function(e) {
        return e.View.extend({
            events: {
                "click .slideToggle>a": "toggleSubMenu"
            },
            toggleSubMenu: function(e) {
                e.preventDefault();
                var t = $(e.currentTarget)
                    , i = t.siblings(".block-holder");
                t.parent().hasClass("expand") ? (t.parent().removeClass("expand").end().attr("aria-expanded", !1),
                    i.slideUp(300)) : (t.parent().addClass("expand").end().attr("aria-expanded", !0),
                    i.slideDown(300))
            },
            initialize: function() {
                this.$(".current").children("a").attr("aria-checked", !0),
                0 < this.$(".current").parents(".slideToggle").length && this.$(".current").parents(".slideToggle").addClass("expand").children(".block-holder").slideDown()
            }
        })
    }),
    define("others/swiper", ["backbone", "swiper"], function(e) {
        return e.View.extend({
            initialize: function() {
                var e = this.$el
                    , t = e.find(".swiper-pagination")
                    , i = (e.find(".swiper-button-next"),
                    e.find(".swiper-button-prev"),
                    !!e.closest("#banner")[0])
                    , n = (e.closest("#tab1")[0],
                    e.closest("#tab2")[0],
                    !!e.closest("#tab3")[0])
                    , a = !!e.closest("#case-share")[0]
                    , r = !!e.closest("#exSquare")[0]
                    , s = !!e.closest("#exStation")[0]
                    , o = !!e.closest(".relatedVideo")[0];
                if (r)
                    3 == new Swiper(e[0],{
                        nextButton: e.closest("#exSquare").find(".swiper-button-next")[0],
                        prevButton: e.closest("#exSquare").find(".swiper-button-prev")[0],
                        slidesPerView: 3,
                        spaceBetween: 80,
                        watchSlidesProgress: !0,
                        watchSlidesVisibility: !0,
                        lazyLoading: !0
                    }).slides.length && (e.closest("#exSquare").find(".swiper-button-next").css("display", "none"),
                        e.closest("#exSquare").find(".swiper-button-prev").css("display", "none"));
                else if (s)
                    new Swiper(e[0],{
                        loop: !0,
                        autoplay: 3e3,
                        speed: 1e3,
                        slidesPerView: 4,
                        spaceBetween: 15,
                        pagination: t[0],
                        paginationClickable: !0,
                        autoplayDisableOnInteraction: !1,
                        watchSlidesProgress: !0,
                        watchSlidesVisibility: !0,
                        lazyLoading: !0
                    });
                else if (o) {
                    3 == new Swiper(e[0],{
                        nextButton: e.closest(".relatedVideo").find(".swiper-button-next")[0],
                        prevButton: e.closest(".relatedVideo").find(".swiper-button-prev")[0],
                        slidesPerView: 3,
                        spaceBetween: 80,
                        watchSlidesProgress: !0,
                        watchSlidesVisibility: !0,
                        lazyLoading: !0
                    }).slides.length && (e.closest(".relatedVideo").find(".swiper-button-next").css("display", "none"),
                        e.closest(".relatedVideo").find(".swiper-button-prev").css("display", "none"))
                } else
                    new Swiper(e[0],{
                        loop: !n && !a,
                        autoplay: i ? 3e3 : 2e3,
                        speed: 2e3,
                        pagination: n ? null : a ? null : t[0],
                        paginationClickable: !0,
                        slidesPerView: a ? 4 : 1,
                        noSwiping: !0,
                        autoplayDisableOnInteraction: !1
                    })
            }
        })
    }),
    define("others/accessibleHover", ["backbone"], function(e) {
        return e.View.extend({
            initialize: function() {
                this.$(".hover-elem").attr("aria-expanded", !1);
                var e = this.$el;
                e.hover(function() {
                    e.addClass("hover"),
                        e.find(".hover-elem").attr("aria-expanded", !0)
                }, function() {
                    e.removeClass("hover"),
                        e.find(".hover-elem").attr("aria-expanded", !1)
                })
            },
            events: {
                "keydown .hover-elem": "toggleHover"
            },
            toggleHover: function(e) {
                if (32 == e.which)
                    return e.preventDefault(),
                        this.$el.siblings(".hover").removeClass("hover").find(".hover-elem").attr("aria-expanded", !1),
                        this.$el.toggleClass("hover"),
                        this.$el.hasClass("hover") ? this.$(e.currentTarget).attr("aria-expanded", !0) : this.$(e.currentTarget).attr("aria-expanded", !1),
                        !1
            }
        })
    }),
    define("others/mailServiceNav", ["backbone"], function(e) {
        return e.View.extend({
            initialize: function() {
                var e = this.$el
                    , t = e.find("#header")
                    , i = e.find(".t_banner")
                    , n = e.find(".tabs_nav_fa")
                    , a = e.find(".tab_container");
                $(window).scroll(function() {
                    var e = $(window).scrollTop();
                    t.height() + i.height() <= e ? (n.addClass("fixed"),
                        a.css("margin-top", "150px")) : (n.removeClass("fixed"),
                        a.css("margin-top", "60px"))
                })
            }
        })
    }),
    define("others/arrowswitch", ["backbone"], function(e) {
        return e.View.extend({
            events: {
                "click .sub": "switchArrow"
            },
            switchArrow: function(e) {
                $(e.target).parent().hasClass("arrowup") ? ($(e.target).parent().removeClass("arrowup").addClass("arrowdown"),
                    $(e.target).parent().parent().next().slideUp(500)) : ($(e.target).parent().removeClass("arrowdown").addClass("arrowup"),
                    $(e.target).parent().parent().next().slideDown(500))
            }
        })
    }),
    define("others/ifaDownload", ["backbone", "helper"], function(t, i) {
        return t.View.extend({
            events: {
                "click .downloadLink a": "popForm",
                "click .ifa_modal .close": "closeForm",
                "click .validate-code-btn": "refreshValidationCode",
                "click #submit": "saveInfo"
            },
            initialize: function() {
                this.$el.find(".downloadLink a").css("pointer-events", "auto"),
                null == this.$el.find(".downloadLink a").attr("download") && this.$el.find(".downloadLink a").attr("download", "")
            },
            popForm: function(e) {
                "1" != window.localStorage.getItem("alreadyifaVisitor") && (e.preventDefault(),
                    this.errorCode = [],
                    this.refreshValidationCode(),
                    this.$el.find(".ifa_modal").show(),
                    $("body").css("overflow", "hidden"),
                    this.$href = $(e.target).attr("href"),
                    this.$download = $(e.target).attr("download"))
            },
            closeForm: function() {
                $("body").css("overflow", "auto"),
                    this.$el.find(".ifa_modal").hide()
            },
            saveInfo: function(e) {
                if (e.preventDefault(),
                        this.errorCode.splice(0, this.errorCode.length),
                        this.validateUser(),
                        this.validateMobile(),
                        this.validateCompany(),
                        this.validateEmail(),
                        this.validateCode(),
                    0 === this.errorCode.length) {
                    this.$submit = this.$el.find("#submit");
                    var t = this.$el.find("form").serializeArray()
                        , i = {};
                    for (var n in t)
                        i[t[n].name] = t[n].value;
                    i.source = _l("速运"),
                        this.$submit.attr("disabled", "true").text(_l("提交中...")),
                        this.saveInfoAjax(JSON.stringify(i))
                }
            },
            saveInfoAjax: function(e) {
                var a = this;
                t.ajax({
                    type: "post",
                    url: i.getRESTfulDomain("cudp/saveCoopConsult?app=cooperative&answer=" + a.$code.val()),
                    data: e,
                    contentType: "application/json",
                    success: function(e, t) {
                        if ("200" == e.retCode) {
                            a.$submit.text(_l("提交成功！"));
                            var i = 3
                                , n = setInterval(function() {
                                a.$submit.text(i + _l("秒后开始下载！")),
                                0 == i && ($("body").css("overflow", "auto"),
                                    a.$el.find(".ifa_modal").hide(),
                                    a.clickCopyDownload(),
                                    clearInterval(n)),
                                    i--
                            }, 1e3);
                            window.localStorage.setItem("alreadyifaVisitor", "1")
                        } else
                            a.ajaxError(e.retMsg)
                    },
                    error: function(e) {
                        "403" == e.status ? (a.$code.next().next().html(_l("验证码错误！")),
                            a.$code.parent().addClass("error"),
                            a.$submit.removeAttr("disabled").text(_l("提交")),
                            a.refreshValidationCode()) : a.ajaxError(_l("网络错误！"))
                    }
                })
            },
            ajaxError: function(e) {
                this.$submit.text(e);
                var t = this
                    , i = 5
                    , n = setInterval(function() {
                    i <= 3 && t.$submit.text(i + _l("秒后重新提交！")),
                    0 == i && (t.$submit.removeAttr("disabled").text(_l("提交")),
                        clearInterval(n)),
                        i--
                }, 1e3)
            },
            clickCopyDownload: function() {
                $('<a href="' + this.$href + '" download="' + this.$download + '"></a>')[0].click()
            },
            validateUser: function() {
                var e = this.$el.find('input[name="user"]');
                "" == $.trim(e.val()) ? (e.parent().addClass("error"),
                    this.errorCode.push("1")) : e.parent().removeClass("error")
            },
            validateMobile: function() {
                var e = this.$el.find('input[name="mobile"]');
                "" == $.trim(e.val()) ? (e.next().html(_l("手机号码不能为空！")),
                    e.parent().addClass("error"),
                    this.errorCode.push("2")) : i.isValidPhoneNumber($.trim(e.val())) ? e.parent().removeClass("error") : (e.next().html(_l("请输入正确的手机号！")),
                    e.parent().addClass("error"),
                    this.errorCode.push("2"))
            },
            validateCompany: function() {
                var e = this.$el.find('input[name="companyName"]');
                "" == $.trim(e.val()) ? (e.parent().addClass("error"),
                    this.errorCode.push("3")) : e.parent().removeClass("error")
            },
            validateEmail: function() {
                var e = this.$el.find('input[name="email"]');
                "" == e.val() ? e.parent().removeClass("error") : i.isValidMailAddr(e.val()) ? e.parent().removeClass("error") : (e.parent().addClass("error"),
                    this.errorCode.push("4"))
            },
            validateCode: function() {
                this.$code = this.$el.find('input[name="code"]'),
                    "" == this.$code.val() ? (this.$code.next().next().html(_l("验证码不能为空！")),
                        this.$code.parent().addClass("error"),
                        this.errorCode.push("5")) : this.$code.parent().removeClass("error")
            },
            refreshValidationCode: function() {
                var e = this.$el.find(".validate-code-btn")
                    , t = i.getRESTfulDomain("captcha/cooperative?force=true&time=" + (new Date).getTime());
                e.attr("src", t)
            }
        })
    }),
    define("models/uploadAddressBookModel", ["backbone", "helper", "jquery.iframe-transport"], function(a, r) {
        return a.Model.extend({
            fetchAddressBook: function(t) {
                var i = this
                    , e = {
                    condition: "",
                    pageNo: this.get("pageNo"),
                    rowCount: "10",
                    memType: ""
                };
                t.hideOthers(),
                    t.showLoading(),
                    a.ajax({
                        type: "GET",
                        url: r.getRESTfulDomain("address/list"),
                        data: e,
                        contentType: "application/json;charset=UTF-8",
                        cache: !1,
                        error: function(e) {
                            t.hideOthers(),
                                t.networkErr()
                        },
                        success: function(e) {
                            "121" == e.code ? t.needLogin() : "0" == e.code && (i.set("addressBooksArr", e.result.content),
                                i.set("totalPage", e.result.totalPage),
                                i.set("currentPage", e.result.pageNo),
                                t.fetchSucc())
                        }
                    })
            },
            uploadAddressBook: function(t) {
                a.ajax({
                    type: " POST",
                    dataType: "json",
                    files: t.file,
                    iframe: !0,
                    processData: !1,
                    url: r.getRESTfulDomain("address/importAddress") + r.assemabledLocationAndLanguageQureyString(),
                    success: function(e) {
                        "121" == e.code ? t.needLogin() : "0" == e.code && (1 == e.result.success ? t.uploadSucc() : 0 == e.result.success && (e.result.errors ? t.uploadFail(e.result.errors) : t.uploadFail()))
                    },
                    error: function(e) {
                        -1 < e.responseText.indexOf("413") ? t.uploadFileTooBig() : t.uploadErr()
                    }
                })
            },
            deleteOneAddressBook: function(e, t) {
                a.ajax({
                    type: "POST",
                    url: r.getRESTfulDomain("address/" + e + "/delete"),
                    dataType: "json",
                    contentType: "application/json;charset=UTF-8",
                    error: function() {
                        t.deleteErr()
                    },
                    success: function(e) {
                        "121" == e.code ? t.needLogin() : "0" == e.code && t.deleteSuccess()
                    }
                })
            },
            saveToAddressBook: function(e, t, i) {
                var n = {
                    address: e.address,
                    city: e.location.city,
                    cityCode: e.location.cityCode,
                    companyName: e.companyName,
                    contactName: e.contactName,
                    contactPhone: e.contactPhone,
                    contactTel: e.contactTel,
                    country: "中国",
                    countryCode: "A000086000",
                    county: e.location.county,
                    countyCode: e.location.countyCode,
                    isDefault: "0",
                    locationCode: e.location.locationCode,
                    province: e.location.province,
                    provinceCode: e.location.provinceCode,
                    addressId: t,
                    memType: e.memType,
                    latitude: e.latitude,
                    longitude: e.longitude
                };
                a.ajax({
                    type: "POST",
                    url: r.getRESTfulDomain("address/save"),
                    data: JSON.stringify(n),
                    dataType: "json",
                    contentType: "application/json;charset=UTF-8",
                    error: function() {
                        i.saveErr()
                    },
                    success: function(e) {
                        "121" == e.code ? i.needLogin() : "0" == e.code && i.saveSucc()
                    }
                })
            },
            getAddressById: function(e, t) {
                a.ajax({
                    type: "GET",
                    url: r.getRESTfulDomain("address/" + e + "/query"),
                    contentType: "application/json;charset=UTF-8",
                    error: function() {
                        t.error()
                    },
                    success: function(e) {
                        "121" == e.code ? t.needLogin() : "0" == e.code && e.result && t.success(e.result)
                    }
                })
            }
        })
    }),
    define("others/uploadAddressBook", ["backbone", "models/uploadAddressBookModel", "templates", "others/bootstrapPagination", "views/detailedLocationPicker/picker", "helper", "event"], function(e, t, a, i, r, n, s) {
        return e.View.extend({
            initialize: function() {
                this.model = new t,
                    $.cookie("loginUser") ? (this.model.set("pageNo", 1),
                        this.getAddressBook()) : s.trigger(s.Needlogin, {
                        succCallback: this.getAddressBook.bind(this),
                        cancelCallback: this.goToIndex.bind(this)
                    })
            },
            events: {
                "click .fetchAgain": "getAddressBook",
                "click tr": "activeRadio",
                "pageClicked .bootstrap-pagination": "jumpPage",
                "click input[type=file]": "clearFileInputVal",
                "change input[type=file]": "uploadTemplate",
                "click .uploadAgain": "uploadTrigger",
                "click #hideExtentionError": "hideExtentionErrorModal",
                "click .delete": "openDeleteConfirmModal",
                "click .delete-yes": "predeleteAddressBook",
                "click .option-add": "addOneAddressBook",
                "click .edit": "preeditOneAddress",
                "regionModelUpdate .detail-location-input": "regionModelUpdate",
                "click .save-address": "presaveOneAddress"
            },
            goToIndex: function() {
                window.location.href = n.getURLWithContext("index.html")
            },
            showInnerhtmlInModal: function(e) {
                if (0 == this.$("#" + e).length) {
                    var t = a.modalNoHeader({
                        id: e,
                        body: this.$("." + e).html(),
                        fade: !1,
                        backdrop: !0,
                        width: 435
                    });
                    this.$("." + e).html(t).show()
                }
                this.$("#" + e).modal("show")
            },
            hideInnerhtmlInModal: function(e) {
                this.$("#" + e).modal("hide")
            },
            activeRadio: function(e) {
                "INPUT" == $(e.target)[0].nodeName ? e.stopPropagation() : (this.$('input[type="radio"]').prop("checked", !1),
                    $(e.currentTarget).find('input[type="radio"]').prop("checked", !0))
            },
            getAddressBook: function() {
                var e = this;
                this.model.fetchAddressBook({
                    hideOthers: function() {
                        e.$(".fetchStatus,.addressList,.initStatus").hide()
                    },
                    showLoading: function() {
                        e.$(".fetch-loading").show()
                    },
                    networkErr: function() {
                        e.$(".fetch-network-error").show()
                    },
                    needLogin: function() {
                        s.trigger(s.Needlogin, {
                            succCallback: e.getAddressBook.bind(e),
                            cancelCallback: function() {
                                this.$(".fetch-loading").hide(),
                                    this.$(".fetch-network-error").show()
                            }
                                .bind(e)
                        })
                    },
                    fetchSucc: function() {
                        e.renderAddressbook()
                    }
                })
            },
            renderAddressbook: function() {
                if (0 == this.model.get("addressBooksArr").length)
                    1 < this.model.get("pageNo") ? (this.model.set("pageNo", this.model.get("pageNo") - 1),
                        this.getAddressBook()) : (this.$(".fetch-loading").hide(),
                        this.$(".fetch-null").show());
                else {
                    this.$(".addressListBody").html(a.upLoadAddressBookContent({
                        addressBooksArr: this.model.get("addressBooksArr")
                    }));
                    new i({
                        el: this.$(".bootstrap-pagination"),
                        totalPages: this.model.get("totalPage"),
                        currentPage: this.model.get("currentPage"),
                        numberOfPages: 4
                    });
                    this.$(".fetch-loading").hide(),
                        this.$(".addressList").show()
                }
            },
            jumpPage: function(e, t) {
                this.model.set("pageNo", t),
                    this.getAddressBook()
            },
            uploadTrigger: function() {
                this.$("input[type=file]").trigger("click")
            },
            clearFileInputVal: function() {
                this.$("input[type=file]").val("")
            },
            uploadTemplate: function(t) {
                t && this.$(t.target).hasClass("uploadAgain") ? (this.$(t.target).button("loading"),
                    this.uploadActiveEle = this.$(t.target)) : this.uploadActiveEle = null;
                var e = this.$("input[type=file]").val();
                if ("" != e)
                    if ("xlsx" != e.substring(e.lastIndexOf(".") + 1, e.length).toLowerCase())
                        this.showInnerhtmlInModal("fileExtentionError"),
                            sfgather.trackClicks("点击确认", "109001");
                    else {
                        var i = this;
                        i.model.uploadAddressBook({
                            file: i.$('input[type="file"]'),
                            uploadSucc: function() {
                                0 < i.$("#uploadErrContent").length && i.$("#uploadErrContent").modal("hide"),
                                    i.showInnerhtmlInModal("uploadSuccContent"),
                                    i.getAddressBook()
                            },
                            uploadFail: function(e) {
                                0 < i.$("#uploadErrContent").length && i.$("#uploadErrContent").modal("hide"),
                                    "OWF-0007" == e ? (i.showInnerhtmlInModal("uploadErrContent"),
                                    i.$(t.target).hasClass("uploadAgain") && i.$(t.target).button("reset")) : (null == e || "OWF-0006" == e ? (i.$(".uploadtemplateErr").siblings(".error").hide().end().show(),
                                        sfgather.trackClicks("点击确认", "109001")) : "OWF-0001" == e || "OWF-0005" == e ? (i.$(".uploadrequireErr").siblings(".error").hide().end().show(),
                                        sfgather.trackClicks("点击确认", "109002")) : "OWF-0002" == e ? (i.$(".uploadlimitErr").siblings(".error").hide().end().show(),
                                        sfgather.trackClicks("点击确认", "109004")) : "OWF-0003" == e ? i.$(".uploadlocationErr").siblings(".error").hide().end().show() : "OWF-0004" == e && (i.$(".uploadtelErr").siblings(".error").hide().end().show(),
                                        sfgather.trackClicks("点击确认", "109003")),
                                        i.showInnerhtmlInModal("uploadFailContent"))
                            },
                            uploadFileTooBig: function() {
                                0 < i.$("#uploadErrContent").length && i.$("#uploadErrContent").modal("hide"),
                                    i.$(".uploadtemplateTooBig").siblings(".error").hide().end().show(),
                                    i.showInnerhtmlInModal("uploadFailContent")
                            },
                            uploadErr: function() {
                                i.showInnerhtmlInModal("uploadErrContent"),
                                t && i.$(t.target).hasClass("uploadAgain") && i.$(t.target).button("reset")
                            },
                            needLogin: function() {
                                s.trigger(s.Needlogin, {
                                    succCallback: i.uploadTemplate.bind(i),
                                    cancelCallback: function() {
                                        this.showInnerhtmlInModal("uploadErrContent"),
                                        this.uploadActiveEle && this.uploadActiveEle.button("reset")
                                    }
                                        .bind(i)
                                })
                            }
                        })
                    }
            },
            hideExtentionErrorModal: function() {
                this.hideInnerhtmlInModal("fileExtentionError")
            },
            openDeleteConfirmModal: function(e) {
                this.delAddressId = this.$(e.target).closest("tr").data("addid"),
                    this.showInnerhtmlInModal("deleteConfirmContent")
            },
            predeleteAddressBook: function(e) {
                this.delActiveEle = this.$(e.target),
                    this.delActiveEle.button("loading"),
                    this.deleteAddressBook()
            },
            deleteAddressBook: function() {
                var e = this;
                this.model.deleteOneAddressBook(this.delAddressId, {
                    deleteSuccess: function() {
                        e.hideInnerhtmlInModal("deleteConfirmContent"),
                            e.getAddressBook(),
                            e.delActiveEle.button("reset")
                    },
                    deleteErr: function() {
                        e.$("#deleteConfirmContent .error").show(),
                            e.delActiveEle.button("reset")
                    },
                    needLogin: function() {
                        s.trigger(s.Needlogin, {
                            succCallback: e.deleteAddressBook.bind(e),
                            cancelCallback: function() {
                                this.$("#deleteConfirmContent .error").show(),
                                    this.delActiveEle.button("reset")
                            }
                                .bind(e)
                        })
                    }
                })
            },
            addOneAddressBook: function() {
                this.popOneAddressContent(null, _l("新增地址"))
            },
            preeditOneAddress: function(e) {
                this.editAddressId = this.$(e.target).closest("tr").data("addid"),
                    this.editOneAddress()
            },
            editOneAddress: function() {
                var t = this;
                this.model.getAddressById(this.editAddressId, {
                    success: function(e) {
                        t.add_location = {
                            provinceName: e.province,
                            provinceCode: e.provinceCode,
                            cityName: e.city,
                            cityCode: e.cityCode,
                            countyName: e.county,
                            countyCode: e.countyCode,
                            locationCode: e.locationCode
                        },
                            t.popOneAddressContent(e, _l("修改地址"))
                    },
                    needLogin: function() {
                        s.trigger(s.Needlogin, {
                            succCallback: t.editOneAddress.bind(t),
                            cancelCallback: null
                        })
                    }
                })
            },
            popOneAddressContent: function(e, t) {
                var i = a.addressBookaddOrmod_hk({
                    addressBook: e
                });
                this.$("#dealOneAddress").remove();
                var n = a.modal({
                    title: t,
                    id: "dealOneAddress",
                    body: i,
                    fade: !1,
                    width: 640
                });
                this.$(".dealOneAddressContent").html(n),
                    this.$("#dealOneAddress").modal("show"),
                    this.$(".detail-location-input").data("max-A000710000", 5),
                    this.$(".detail-location-input").data("max-886", 5),
                    this.$(".detail-location-input").data("max-A000810000", 5),
                    this.$(".detail-location-input").data("max-852", 5),
                    new r({
                        el: this.$(".detail-location-input")
                    })
            },
            getLocationData: function(e) {
                var t, i, n, a, r, s;
                return 1 === (e = _.filter(e, function(e) {
                    return e.selectedRegion
                })).length ? (locationCode = e[0].selectedRegion.rateCode,
                    t = e[0].selectedRegion.provinceCode,
                    i = e[0].selectedRegion.provinceName,
                    n = e[0].selectedRegion.code,
                    a = e[0].selectedRegion.name,
                    s = r = "") : 2 === e.length ? (locationCode = e[1].selectedRegion.rateCode,
                    t = e[0].selectedRegion.code,
                    i = e[0].selectedRegion.name,
                    n = e[1].selectedRegion.code,
                    a = e[1].selectedRegion.name) : (locationCode = e[2].selectedRegion.rateCode,
                    t = e[0].selectedRegion.code,
                    i = e[0].selectedRegion.name,
                    n = e[1].selectedRegion.code,
                    a = e[1].selectedRegion.name,
                    r = e[2].selectedRegion.code,
                    s = e[2].selectedRegion.name),
                    {
                        locationCode: locationCode,
                        provinceCode: t,
                        provinceName: i,
                        cityCode: n,
                        cityName: a,
                        countyCode: r,
                        countyName: s
                    }
            },
            regionModelUpdate: function(e, t) {
                this.add_location = this.getLocationData(t.regionTabs)
            },
            presaveOneAddress: function(e) {
                if (this.saveActiveEle = this.$(e.target),
                        this.$(".address-form").parsley().validate()) {
                    if ("" == this.$("#add-mobile").val() && "" == this.$("#add-phone").val())
                        return void this.$(".receiver-both-phone-mobile").show();
                    if (this.$(".receiver-both-phone-mobile").hide(),
                            this.saveAddressId = this.saveActiveEle.data("addressid"),
                            this.saveAddressId) {
                        var t = _.findWhere(this.model.get("addressBooksArr"), {
                            addressId: this.saveAddressId
                        });
                        this.saveAddressData = {
                            contactName: this.$("#add-name").val(),
                            contactTel: this.$("#add-mobile").val(),
                            companyName: this.$("#add-company").val(),
                            contactPhone: this.$("#add-phone").val(),
                            location: this.add_location,
                            address: this.$("#add-detailaddress").val(),
                            latitude: "",
                            longitude: "",
                            memType: t.memType
                        }
                    } else
                        this.saveAddressData = {
                            contactName: this.$("#add-name").val(),
                            contactTel: this.$("#add-mobile").val(),
                            companyName: this.$("#add-company").val(),
                            contactPhone: this.$("#add-phone").val(),
                            location: this.add_location,
                            address: this.$("#add-detailaddress").val(),
                            latitude: "",
                            longitude: "",
                            memType: 2
                        };
                    this.$(".address-form .save-fail").hide(),
                        this.saveActiveEle.button("loading"),
                    this.saveAddressId || sfgather.trackClicks("点击保存", "108001"),
                        this.saveOneAddress()
                }
            },
            saveOneAddress: function() {
                var e = this;
                this.model.saveToAddressBook(this.saveAddressData, this.saveAddressId, {
                    saveSucc: function() {
                        e.$("#dealOneAddress").modal("hide"),
                            e.showInnerhtmlInModal("saveSuccContent"),
                            e.getAddressBook()
                    },
                    saveErr: function() {
                        e.$(".address-form .save-fail").show(),
                            e.saveActiveEle.button("reset")
                    },
                    needLogin: function() {
                        s.trigger(s.Needlogin, {
                            succCallback: e.saveOneAddress.bind(e),
                            cancelCallback: function() {
                                this.$(".address-form .save-fail").show(),
                                    this.saveActiveEle.button("reset")
                            }
                                .bind(e)
                        })
                    }
                })
            }
        })
    }),
    define("others/index", ["./goDynamic", "./inputIndicator", "./share", "./countDownButton", "./orderButton", "./video/video", "./bannertip", "./secondNavigation", "./swiper", "./accessibleHover", "./mailServiceNav", "./arrowswitch", "./ifaDownload", "./uploadAddressBook"], function(t, i, e, n, a, r, s, o, l, d, c, u, h, p) {
        var f = {
            "share-pages": e,
            "order-button": a,
            videoWrapper: r,
            "same-tip": s,
            "content-second-navigation": o,
            "swiper-container": l,
            "accessible-hover": d
        };
        return {
            init: function() {
                for (var e in f)
                    $("." + e).each(function() {
                        new f[e]({
                            el: this
                        })
                    });
                new t({
                    el: $("body")
                }),
                    new i({
                        el: $("body")
                    }),
                    $(".count-down-button").each(function() {
                        new n({
                            el: $(this).parent()
                        })
                    }),
                0 < $(".mail_service").length && new c({
                    el: $("body")
                }),
                0 < $(".kr-services").length && new u({
                    el: $(".kr-services .part")
                }),
                0 < $(".ifadownLoad").length && new h({
                    el: $(".ifadownLoad")
                }),
                0 < $(".uploadAddressBook").length && new p({
                    el: $(".uploadAddressBook")
                })
            }
        }
    }),
    require.config({
        baseUrl: "scripts",
        shim: {
            datepicker: {
                exports: "datepicker"
            },
            datepickercn: {
                deps: ["datepicker"],
                exports: "datepickercn"
            },
            momentcn: {
                deps: ["moment"]
            },
            momenttc: {
                deps: ["moment"]
            },
            momentko: {
                deps: ["moment"]
            },
            momentja: {
                deps: ["moment"]
            },
            momentru: {
                deps: ["moment"]
            },
            momentvn: {
                deps: ["moment"]
            },
            momentde: {
                deps: ["moment"]
            },
            momentfr: {
                deps: ["moment"]
            },
            momentth: {
                deps: ["moment"]
            },
            parsleyjs: {},
            parsleyjssc: {
                deps: ["parsleyjs"]
            },
            parsleyjstc: {
                deps: ["parsleyjs"]
            },
            parsleyjsko: {
                deps: ["parsleyjs"]
            },
            parsleyjsja: {
                deps: ["parsleyjs"]
            },
            parsleyjsth: {
                deps: ["parsleyjs"]
            },
            parsleyjsfr: {
                deps: ["parsleyjs"]
            },
            parsleyjsde: {
                deps: ["parsleyjs"]
            },
            jqprint: {
                deps: ["jquery-migrate"]
            },
            "jquery-validate": {
                deps: ["jquery"]
            }
        },
        paths: {
            jquery: "../bower_components/jquery/jquery",
            underscore: "../bower_components/underscore/underscore",
            backbone: "../bower_components/backbone/backbone",
            swiper: "lib-fix/swiper-3.4.1.jquery.min",
            bootstrap: "../bower_components/sass-bootstrap/dist/bootstrap",
            "jquery-ui": "../bower_components/jquery-ui/jquery-ui",
            "underscore.string": "../bower_components/underscore.string/lib/underscore.string",
            bootstrapPagination: "lib-fix/bootstrap-pagination/bootstrap-paginator",
            moment: "../bower_components/momentjs/moment",
            momentcn: "../bower_components/momentjs/lang/zh-cn",
            momenttc: "../bower_components/momentjs/lang/zh-tw",
            momentko: "../bower_components/momentjs/lang/ko",
            momentja: "../bower_components/momentjs/lang/ja",
            momentru: "../bower_components/momentjs/lang/ru",
            momentvn: "../bower_components/momentjs/lang/vn",
            momentth: "../bower_components/momentjs/lang/th",
            momentde: "../bower_components/momentjs/lang/de",
            momentfr: "../bower_components/momentjs/lang/fr",
            datepicker: "../bower_components/bootstrap-datepicker/js/bootstrap-datepicker",
            datepickercn: "lib-fix/bootstrap-datepicker.zh-CN",
            "jquery-placeholder": "lib-fix/jquery.placeholder",
            tokenfield: "lib-fix/bootstrap-tokenfield",
            parsleyjs: "../bower_components/parsleyjs/dist/parsley.min",
            parsleyjssc: "../bower_components/parsleyjs/src/i18n/zh_cn",
            parsleyjstc: "../bower_components/parsleyjs/src/i18n/zh_tw",
            parsleyjsko: "../bower_components/parsleyjs/src/i18n/ko",
            parsleyjsja: "../bower_components/parsleyjs/src/i18n/ja",
            parsleyjsth: "../bower_components/parsleyjs/src/i18n/th",
            parsleyjsfr: "../bower_components/parsleyjs/src/i18n/fr",
            parsleyjsde: "../bower_components/parsleyjs/src/i18n/de",
            "jquery-download": "../bower_components/jquery.fileDownload/src/Scripts/jquery.fileDownload",
            "jQuery.XDomainRequest": "../bower_components/jQuery.XDomainRequest/jQuery.XDomainRequest",
            "jquery.iframe-transport": "lib-fix/jquery.iframe-transport",
            numberpicker: "lib-fix/dpNumberPicker-2.x-min",
            jqueryQrcode: "../bower_components/jquery.qrcode.js/jquery.qrcode.min",
            "jquery-migrate": "lib-fix/jquery-migrate-1.2.1.min",
            jqprint: "lib-fix/jquery.jqprint-0.3",
            jqcookie: "lib-fix/jquery.cookie",
            jqresize: "lib-fix/jquery.ba-resize",
            sfgather: "lib-fix/SfGather",
            xlayer: "lib-fix/layer",
            sflayer: "components/sflayer/sflayer",
            JsBarcode: "lib-fix/JsBarcode.all.min",
            JqueryRotate: "lib-fix/jquery.rotate",
            "jquery-validate": "components/jqueryValidate/jquery.validate"
        },
        waitSeconds: 0
    }),
    require(["initialSetups", "service/ajax", "manager", "partials/index", "others/index"], function(e, t, i, n, a) {
        new n,
            a.init(),
            i()
    }),
    define("main", function() {});