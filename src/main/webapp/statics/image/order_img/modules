_jsload_('mouse', 'f.Sb.gb({bD:"_docMsMov",JY:function(){var a=this.Ia.qc;f.A.h(a,"mousedown",this.tS,this);this.fH||(this.fH=function(){this.Px=!1},this.gB=function(a){var c=this.Hf(a,!0);this.r(this.bD,{event:a,vT:c})});f.A.h(document,"mousedown",this.fH,this);f.A.h(document,"mouseout",this.gB,this);f.A.h(document,"mousemove",this.gB,this);f.A.h(a,"mousemove",this.uS,this);f.A.h(a,"mouseover",this.T9,this);f.A.h(a,"mouseup",this.vS,this);f.A.h(a,"contextmenu",this.Zw,this);f.A.h(a,"rightclick",this.Zw,this);this.h(this.bD, this.GT,this)},T9:function(){this.Px=!0},K1:function(){var a=this.Ia.qc;f.A.H(a,"mousedown",this.tS,this);f.A.H(document,"mousedown",this.fH,this);f.A.H(document,"mouseout",this.gB,this);this.H(this.bD,this.GT,this);f.A.H(document,"mousemove",this.gB,this);f.A.H(a,"mousemove",this.uS,this);f.A.H(a,"mouseup",this.vS,this);f.A.H(a,"contextmenu",this.Zw,this);f.A.H(a,"rightclick",this.Zw,this)},LY:function(){f.A.h(this.Ia.qc,"mousewheel",this.sS,this)},N1:function(){f.A.H(this.Ia.qc,"mousewheel",this.sS, this)},KY:function(){this.h("mousemove",this.sO);this.h("mouseout",this.tO);this.h("mouseover",this.uO);this.h("mouseup",this.vO);this.h("mousedown",this.rO);this.h("rightclick",this.xO);this.h("contextmenu",this.jO);this.h("rdblclick",this.yO)},M1:function(){this.H("mousemove",this.sO);this.H("mouseout",this.tO);this.H("mouseover",this.uO);this.H("mouseup",this.vO);this.H("mousedown",this.rO);this.H("rightclick",this.xO);this.H("contextmenu",this.jO);this.H("rdblclick",this.yO)},keyboardEnableChanged:function(){this.get("keyboardEnable")? this.HY():this.iE()},scrollWheelChanged:function(){this.get("scrollWheel")?this.h("mousewheel",this.wO):this.H("mousewheel",this.wO)},Zw:function(a){f.A.preventDefault(a)},C1:function(a){var b=this.Hf(a,void 0,!0),c=0;"3D"==this.K.view.type?(this.da("mousewheel",b),a.wheelDelta?(c=a.wheelDelta,window.opera&&9.5>parseFloat(window.opera.version())&&(c=-c)):a.detail&&(c=-a.detail,120!==c&&-120!==c&&(c*=20)),a=c/1200,a=this.get("zoom")+a,this.NQ(a,b.wd,!0)):(a.wheelDelta?(c=a.wheelDelta/120,window.opera&& 9.5>parseFloat(window.opera.version())&&(c=-c)):a.detail&&(c=-a.detail),this.Q.Uu=(this.Q.Uu||0)+c,this.r("mousewheel",b))},sS:function(a){if(this.get("scrollWheel"))if(this.C1(a),a.preventDefault)a.preventDefault();else return!1},gH:function(a,b){f.A.preventDefault(a);b=this.Hf(a);var c=this.Q;if(!this.Jp(b.ub,c.vo)){c.vo=b.ub;if(c.um){if(!c.Fc&&(b.ub.x!==this.Q.cl.x||b.ub.y!==this.Q.cl.y)){var d;this.HD(c.uo)&&c.uo.get("draggable")&&(d=c.uo);!d&&this.get("dragEnable")&&(d=this);d&&(c.Fc=!0,c.yl= d,c.Re=c.cl,c.wl=c.FI)}c.Fc&&(c.xl=b,b.button=a.buttons||a.button||0,this.AE())}if(a.preventDefault)a.preventDefault();else return!1}},Xz:function(a){f.g.Ha(this.J,"amap-drag");a=this.Hf(a);f.g.E8();f.g.tR();this.Q&&(this.Q.Fc=!1);this.fh&&!this.vg&&this.r("moveend");this.Q.bl&&(this.Q.bl=!1,this.Q.Fc=!1,this.Q.yl.r("dragend",a));this.Q.um=!1;this.Q.vo=null;this.Q.Re=null;f.A.H(document,"mousemove",this.gH,this);f.A.H(document,"mouseup",this.Xz,this);try{f.A.H(window.parent.document,"mouseup",this.Xz, this)}catch(b){}f.A.bea(this.Ia.qc)},U9:function(a,b){b=b||this.Hf(a);var c=this.get("size"),d;0<=b.ub.x&&b.ub.x<=c.width&&0<=b.ub.y&&b.ub.y<=c.height&&(d=!0);this.XS&&!d?this.r("mouseout",b):!this.XS&&d&&this.r("mouseover",b);this.XS=d},uS:function(a){f.A.preventDefault(a);f.l.pn&&(a=window.event);if(a){a=this.Hf(a);var b=this.Q,c=a.Pc,d;this.Q.um||(c instanceof f.D.Sf?d=c.Qc.get("cursor"):c instanceof f.B.kc?d=c.get("cursor"):c===this&&(d=c.get("defaultCursor")),d=this.K.get("optimalCursor")||d, this.J.style.cursor=d||"");d=b.h1;var e=a.Ho;d!==e&&(d&&b.GN&&b.GN.r("mouseout",a),e&&c&&(c.r("mouseover",a),c.get("topWhenMouseOver")&&c.Qc.setTop(!0)));a.Pc.r("mousemove",a);a.Pc!==this&&this.r("mousemove",a);b.h1=a.Ho||null;b.GN=a.Pc||null}},Q:{Fc:!1},tS:function(a){this.Px=!0;f.g.b8();f.g.nR();this.Q.vo=null;this.Q.Re=null;var b=this.Hf(a,!0);this.Q.oR=new Date;this.Q.uo=b.Pc;this.Q.cl=b.ub;this.Q.f1=b.button;this.Q.um=!0;this.Q.g1=b;this.Q.Fc||(this.Q.FI=b);this.qd&&this.qd.stop();var c=b.Pc; !c.Qc&&c.get("dragEnable")&&(this.Q.um=!0);f.g.za(this.J,"amap-drag");b.Pc.r("mousedown",b);b.Pc!==this&&this.r("mousedown",b);f.A.Dca(this.Ia.qc);f.A.h(document,"mousemove",this.gH,this);f.A.h(document,"mouseup",this.Xz,this);try{window.parent.document&&f.l.pn&&f.A.h(window.parent.document,"mouseup",this.Xz,this)}catch(d){}f.A.stopPropagation(a)},GT:function(a){this.U9(a.event,a.vT)},Bga:function(a){this.gH(a.event,a.vT)},vS:function(a){a=this.Hf(a);var b=a.Pc,c=this.K.get("allBubble")||b.get("bubble"); b!==document&&(b.r("mouseup",a),a.Pc!==this&&c&&this.r("mouseup",a));this.Jp(a.ub,this.Q.cl)&&(this.qe&&this.Jp(this.Q.Mq,a.ub)&&a.button===this.Q.f1?(clearTimeout(this.qe),this.qe=null,f.A.aT(a)?c?(b.r("dblclick",a),b!==this&&this.r("dblclick",a)):b.r("dblclick",a):b.r("rdblclick",a),this.Q.Mq=null):(f.A.aT(a)?(this.r("clickstart",a),c?(b.r("click",a),b!==this&&this.r("click",a)):(b.r("click",a),this.r("closeOverlays",a)),b.get("topWhenClick")&&b.Qc.setTop(!0),this.r("clickend",a)):c?(b.r("rightclick", a),b!==this&&this.r("rightclick",a),this.r("contextmenu",a)):(b.r("rightclick",a),b.r("contextmenu",a)),this.Q.Mq=a.ub,this.qe&&clearTimeout(this.qe),this.qe=setTimeout(f.a.bind(function(){clearTimeout(this.qe);this.qe=null;this.Q.Mq=null},this),260)))}});f.Sb.gb({wO:function(a){this.da("mousewheel",a);var b=this;if(1<=Math.abs(this.Q.Uu)&&!this.LW){var c=this.Q.Uu;if(1<=c)c=1;else if(-1>=c)c=-1;else return;b.ky(a.wd,c);this.Q.Uu=0;this.LW=!0;setTimeout(function(){b.LW=!1;b.Q.Uu=0},f.l.Iv?50:40)}},sO:function(a){this.da("mousemove",a)},tO:function(a){this.da("mouseout",a)},uO:function(a){this.da("mouseover",a)},vO:function(a){this.da("mouseup",a)},rO:function(a){this.da("mousedown",a)},xO:function(a){this.da("rightclick",a)},jO:function(a){this.da("contextmenu", a)},yO:function(a){this.get("doubleClickZoom")&&this.get("zoomEnable")&&this.ky(a.wd,-1);this.da("rdblclick",a)}});f.Sb.gb({O0:function(){this.Tt={left:[37],right:[39],i8:[40],XJ:[38],og:[187,107,61],pg:[189,109,173]};this.tZ={left:this.ir(this.iy(100,0)),right:this.ir(this.iy(-100,0)),i8:this.ir(this.iy(0,-100)),XJ:this.ir(this.iy(0,100)),og:this.ir(this.fQ(1)),pg:this.ir(this.fQ(-1))}},HY:function(){this.get("keyboardEnable")&&(this.Tt||this.O0(),f.A.h(document,"keydown",this.ey,this),f.A.h(document,"keyup",this.fO,this))},iE:function(){f.A.H(document,"keydown",this.ey,this);f.A.H(document,"keyup",this.fO,this)}, fO:function(a){var b=a.keyCode;!a.ctrlKey||37!==b&&39!==b||this.set("refresh",1)},ey:function(a){var b=a.keyCode,c;for(c in this.Tt)if(this.Tt.hasOwnProperty(c))for(var d=0;d<this.Tt[c].length;d+=1)if(b===this.Tt[c][d]){if(!this.Px)return;if(!a.ctrlKey&&!a.shiftKey){this.tZ[c]();f.A.preventDefault(a);return}37===b?(this.k1(),f.A.preventDefault(a)):39===b?(this.g5(),f.A.preventDefault(a)):38===b?(this.j4(),f.A.preventDefault(a)):40===b&&(this.i4(),f.A.preventDefault(a))}},ir:function(a){return function(){a()}}, k1:function(){this.get("rotateEnable")&&(this.r("rotate"),this.set("rotation",-8+parseFloat(this.get("rotation"))%360))},g5:function(){this.get("rotateEnable")&&(this.r("rotate"),this.set("rotation",8+parseFloat(this.get("rotation"))%360))},i4:function(){this.get("rotateEnable")&&this.set("pitch",-4+parseFloat(this.get("pitch")))},j4:function(){this.get("rotateEnable")&&this.set("pitch",4+parseFloat(this.get("pitch")))},fQ:function(a){var b=this.K;return function(){1===a?b.zoomIn():b.zoomOut()}}, iy:function(a,b){var c=this.K;return function(){c.panBy(a,b)}}}); ')
_jsload_('vectorlayer', '(function(a){a.Fn=a.l.un?new a.lt(function(){function a(b,c,d){for(var e=0,g=d.length;e<g;e++){var h=d.charCodeAt(e);if(128>h)b.setUint8(c++,h>>>0&127|0);else if(2048>h)b.setUint8(c++,h>>>6&31|192),b.setUint8(c++,h>>>0&63|128);else if(65536>h)b.setUint8(c++,h>>>12&15|224),b.setUint8(c++,h>>>6&63|128),b.setUint8(c++,h>>>0&63|128);else if(1114112>h)b.setUint8(c++,h>>>18&7|240),b.setUint8(c++,h>>>12&63|128),b.setUint8(c++,h>>>6&63|128),b.setUint8(c++,h>>>0&63|128);else throw Error("bad codepoint "+h); }}function c(a,b,c){var d="",e=b;for(b+=c;e<b;e++)if(c=a.getUint8(e),0===(c&128))d+=String.fromCharCode(c);else if(192===(c&224))d+=String.fromCharCode((c&15)<<6|a.getUint8(++e)&63);else if(224===(c&240))d+=String.fromCharCode((c&15)<<12|(a.getUint8(++e)&63)<<6|(a.getUint8(++e)&63)<<0);else if(240===(c&248))d+=String.fromCharCode((c&7)<<18|(a.getUint8(++e)&63)<<12|(a.getUint8(++e)&63)<<6|(a.getUint8(++e)&63)<<0);else throw Error("Invalid byte "+c.toString(16));return d}function d(a){for(var b=0,c= 0,d=a.length;c<d;c++){var e=a.charCodeAt(c);if(128>e)b+=1;else if(2048>e)b+=2;else if(65536>e)b+=3;else if(1114112>e)b+=4;else throw Error("bad codepoint "+e);}return b}function e(a,b){this.offset=b||0;this.view=a}function g(c,e,h){var k=typeof c;if("string"===k){var q=d(c);if(32>q)return e.setUint8(h,q|160),a(e,h+1,c),1+q;if(256>q)return e.setUint8(h,217),e.setUint8(h+1,q),a(e,h+2,c),2+q;if(65536>q)return e.setUint8(h,218),e.setUint16(h+1,q),a(e,h+3,c),3+q;if(4294967296>q)return e.setUint8(h,219), e.setUint32(h+1,q),a(e,h+5,c),5+q}if(c instanceof ArrayBuffer){q=c.byteLength;if(256>q)return e.setUint8(h,196),e.setUint8(h+1,q),(new Uint8Array(e.buffer)).set(new Uint8Array(c),h+2),2+q;if(65536>q)return e.setUint8(h,197),e.setUint16(h+1,q),(new Uint8Array(e.buffer)).set(new Uint8Array(c),h+3),3+q;if(4294967296>q)return e.setUint8(h,198),e.setUint32(h+1,q),(new Uint8Array(e.buffer)).set(new Uint8Array(c),h+5),5+q}if("number"===k){if(c<<0!==c)return e.setUint8(h,203),e.setFloat64(h+1,c),9;if(0<= c){if(128>c)return e.setUint8(h,c),1;if(256>c)return e.setUint8(h,204),e.setUint8(h+1,c),2;if(65536>c)return e.setUint8(h,205),e.setUint16(h+1,c),3;if(4294967296>c)return e.setUint8(h,206),e.setUint32(h+1,c),5;throw Error("Number too big 0x"+c.toString(16));}if(-32<=c)return e.setInt8(h,c),1;if(-128<=c)return e.setUint8(h,208),e.setInt8(h+1,c),2;if(-32768<=c)return e.setUint8(h,209),e.setInt16(h+1,c),3;if(-2147483648<=c)return e.setUint8(h,210),e.setInt32(h+1,c),5;throw Error("Number too small -0x"+ (-c).toString(16).substr(1));}if("undefined"===k)return e.setUint8(h,212),e.setUint8(h+1,0),e.setUint8(h+2,0),3;if(null===c)return e.setUint8(h,192),1;if("boolean"===k)return e.setUint8(h,c?195:194),1;if("object"===k){var k=0,r=Array.isArray(c),t=null;r?q=c.length:(t=Object.keys(c),q=t.length);16>q?(e.setUint8(h,q|(r?144:128)),k=1):65536>q?(e.setUint8(h,r?220:222),e.setUint16(h+1,q),k=3):4294967296>q&&(e.setUint8(h,r?221:223),e.setUint32(h+1,q),k=5);if(r)for(r=0;r<q;r++)k+=g(c[r],e,h+k);else for(r= 0;r<q;r++)var u=t[r],k=k+g(u,e,h+k),k=k+g(c[u],e,h+k);return k}throw Error("Unknown type "+k);}function h(a){var b=typeof a;if("string"===b){var c=d(a);if(32>c)return 1+c;if(256>c)return 2+c;if(65536>c)return 3+c;if(4294967296>c)return 5+c}if(a instanceof ArrayBuffer){c=a.byteLength;if(256>c)return 2+c;if(65536>c)return 3+c;if(4294967296>c)return 5+c}if("number"===b){if(a<<0!==a)return 9;if(0<=a){if(128>a)return 1;if(256>a)return 2;if(65536>a)return 3;if(4294967296>a)return 5;if(1.8446744073709552E19> a)return 9;throw Error("Number too big 0x"+a.toString(16));}if(-32<=a)return 1;if(-128<=a)return 2;if(-32768<=a)return 3;if(-2147483648<=a)return 5;if(-9223372036854775E3<=a)return 9;throw Error("Number too small -0x"+a.toString(16).substr(1));}if("undefined"===b)return 3;if("boolean"===b||null===a)return 1;if("object"===b){b=0;if(Array.isArray(a))for(var c=a.length,e=0;e<c;e++)b+=h(a[e]);else for(var g=Object.keys(a),c=g.length,e=0;e<c;e++)var k=g[e],b=b+(h(k)+h(a[k]));if(16>c)return 1+b;if(65536> c)return 3+b;if(4294967296>c)return 5+b;throw Error("Array or object too long 0x"+c.toString(16));}throw Error("Unknown type "+b);}var k={uha:function(a){if(void 0===a)return"undefined";var b,c;a instanceof ArrayBuffer?(c="ArrayBuffer",b=new DataView(a)):a instanceof DataView&&(c="DataView",b=a);if(!b)return JSON.stringify(a);for(var d=[],e=0;e<a.byteLength;e++){if(20<e){d.push("...");break}var g=b.getUint8(e).toString(16);1===g.length&&(g="0"+g);d.push(g)}return"<"+c+" "+d.join(" ")+">"}};k.Aja= a;k.zja=c;k.yja=d;e.prototype.map=function(a){for(var b={},c=0;c<a;c++){var d=this.parse();b[d]=this.parse()}return b};e.prototype.wF=function(a){var b=new ArrayBuffer(a);(new Uint8Array(b)).set(new Uint8Array(this.view.buffer,this.offset,a),0);this.offset+=a;return b};e.prototype.jB=function(a){var b=c(this.view,this.offset,a);this.offset+=a;return b};e.prototype.nF=function(a){for(var b=Array(a),c=0;c<a;c++)b[c]=this.parse();return b};e.prototype.parse=function(){var a=this.view.getUint8(this.offset); if(160===(a&224))return this.offset++,this.jB(a&31);if(128===(a&240))return this.offset++,this.map(a&15);if(144===(a&240))return this.offset++,this.nF(a&15);if(0===(a&128))return this.offset++,a;if(224===(a&224))return a=this.view.getInt8(this.offset),this.offset++,a;if(212===a&&0===this.view.getUint8(this.offset+1))this.offset+=3;else{switch(a){case 217:return a=this.view.getUint8(this.offset+1),this.offset+=2,this.jB(a);case 218:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.jB(a); case 219:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.jB(a);case 196:return a=this.view.getUint8(this.offset+1),this.offset+=2,this.wF(a);case 197:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.wF(a);case 198:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.wF(a);case 192:return this.offset++,null;case 194:return this.offset++,!1;case 195:return this.offset++,!0;case 204:return a=this.view.getUint8(this.offset+1),this.offset+=2,a;case 205:return a= this.view.getUint16(this.offset+1),this.offset+=3,a;case 206:return a=this.view.getUint32(this.offset+1),this.offset+=5,a;case 207:var a=this.view.getUint32(this.offset+1),b=this.view.getUint32(this.offset+5);this.offset+=9;return 4294967296*a+b;case 208:return a=this.view.getInt8(this.offset+1),this.offset+=2,a;case 209:return a=this.view.getInt16(this.offset+1),this.offset+=3,a;case 210:return a=this.view.getInt32(this.offset+1),this.offset+=5,a;case 211:return a=this.view.getInt32(this.offset+ 1),b=this.view.getUint32(this.offset+5),this.offset+=9,4294967296*a+b;case 222:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.map(a);case 223:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.map(a);case 220:return a=this.view.getUint16(this.offset+1),this.offset+=3,this.nF(a);case 221:return a=this.view.getUint32(this.offset+1),this.offset+=5,this.nF(a);case 202:return a=this.view.getFloat32(this.offset+1),this.offset+=5,a;case 203:return a=this.view.getFloat64(this.offset+ 1),this.offset+=9,a}throw Error("Unknown type 0x"+a.toString(16));}};k.ih=function(a){var b=new DataView(a),b=new e(b),c=b.parse();if(b.offset!==a.byteLength)throw Error(a.byteLength-b.offset+" trailing bytes");return c};k.bv=function(a){var b=new ArrayBuffer(h(a)),c=new DataView(b);g(a,c,0);return b};return{bv:function(a,b){b(null,{Sr:a.Sr,yd:a.yd,Ea:k.bv(a.Ea)})},ih:function(a,b){b(null,{Sr:a.Sr,yd:a.yd,Ea:k.ih(a.Ea)})}}},{hostWorker:a.Vz,clientId:"msg",lazy:!0}):new a.lt(function(){},{hostWorker:a.Vz, clientId:"msg",lazy:!0})})(f);f.GX=f.Z.extend({ea:[f.ja],C:function(){this.y5=f.w.JW+"://"+f.w.Gw;this.kl=[];this.ee=f.a.Fb(this);this.DY=1;this.Dc="closed";this.count=0;this.XI=[];f.event.V(window,"beforeunload",this.V$,this);f.Fn&&f.Fn.nr()},V$:function(){if(this.XI.length){var a=f.w.ac+"://webapi.amap.com/count?",b=["type=v","k="+f.w.key,"u="+f.w.Lm,"m="+(f.l.Y?1:0),"pf="+f.l.Kp,"frq="+this.XI.join(",")];new f.Ka.Xa(a+b.join("&"))}},close:function(){this.Yb&&(this.Dc="closed",this.kl=[],this.fD())},x7:function(){var a=this; if("closed"===a.Dc){var b=new WebSocket(this.y5);b.binaryType="arraybuffer";a.Dc="connecting";b.onopen=f.a.bind(this.r2,this);b.onclose=f.a.bind(this.V1,this);b.onerror=f.a.bind(this.Ab,this);b.ontimeout=f.a.bind(this.Ab,this);b.onmessage=f.a.bind(this.e3,this);this.Yb=b;b.z7=setTimeout(function(){b.readyState!==WebSocket.OPEN&&a.Sv()},1200)}},US:function(){return"connected"===this.Dc},Sv:function(){this.Dc="unsupport";this.kl=[];this.fD();this.r("disable")},Ab:function(){this.Sv()},r2:function(){this.y7= !0;this.flush();this.r("open")},V1:function(){this.y7?(this.Dc="closed",this.fD()):this.Sv()},eO:function(a,b){if("unsupport"===this.Dc)return!1;"connected"===this.Dc?this.wP(a):("closed"===this.Dc&&this.x7(),this.kl.push({data:a,kw:b}));this.count+=1},e2:function(a){if("ack"===a.type)switch(a.command){case "tiles":this.r("ack",a);break;case "retain":this.Dc="connected";this.flush();break;case "close":this.Sv()}else 0===a.content.errcode&&("tiles"===a.type?this.r("tiles",a):"traffic"===a.type&&this.r("traffic", a))},Faa:function(a){"encode"===a.yd?this.eO(a.Ea):"decode"===a.yd&&this.e2(a.Ea)},send:function(a){var b=this.DY++,c=this;f.Fn.bv({yd:"encode",Ea:a,Sr:this.ee},function(a,e){a||c.eO(e.Ea,b)});return b},wP:function(a){var b=this,c=b.Yb;c.readyState===WebSocket.OPEN&&(c.send(a),b.Rs&&clearTimeout(b.Rs),b.Rs=setTimeout(function(){b.Sv();b.Rs=null},5E3),b.eK&&clearTimeout(b.eK),b.eK=setTimeout(function(){b.close();b.eK=null},1E4))},fD:function(){var a=this.Yb;a&&(clearTimeout(a.z7),a.onopen=a.onmessage= a.onerror=null,a.close(),this.Yb=null)},flush:function(){if("connected"===this.Dc){for(var a=0;a<this.kl.length;a+=1)this.wP(this.kl[a].data);this.kl=[]}},w8:function(a){for(var b=0;b<this.kl.length;b+=1)if(this.kl[b].kw===a)return this.kl.splice(b,1),!0;return!1},e3:function(a){this.Rs&&(clearTimeout(this.Rs),this.Rs=null);var b=this;f.Fn.Vy([a.data]);f.Fn.ih({Sr:b.ee,yd:"decode",Ea:a.data},function(a,d){a||b.Faa(d)})}});f.Rh={kW:function(){0===f.Pa.Ed&&f.Rh.yS()},xja:function(a,b){if(!a)return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]&&a[c].Ns===b)return!0},g7:function(a,b){var c="limg-"+a.key+"-"+b.q.ee;f.Pa[c]&&delete f.Pa[c]},LR:function(a){return f.Pa[a.Ns?a.Ns:a]},Jl:function(a){var b=null,c=null,d=!1;a.Ns?(b=a,c=b.Ns,(a=b.url)&&(d=!0)):c=a;var e=f.Pa[c];d&&e&&e.src!==a&&(e=f.Pa[c]=null);if(!e&&a){d="data:"===a.substr(0,5);e=document.createElement("img");d||(e.crossOrigin="Anonymous");f.Pa[c]=e;e.loaded=!1;f.Pa.Ed+= 1;f.A.h(e,"load",this.Yz,this);f.A.h(e,"error",this.xS,this);var g=this;e.Gs=setTimeout(function(){e.loaded||g.yS()},300);e.src=a;b&&(e.Vfa=c,b.url=null)}},yS:function(){for(var a=0;a<f.Pa.Yn.length;a+=1)f.Pa.Yn[a].set("display")},SQ:function(a){f.A.H(a,"load",this.Yz,this);f.A.H(a,"error",this.xS,this)},Yz:function(a){a=a.target;a.loaded=!0;f.Pa.Ed-=1;this.SQ(a);this.kW();a.Gs&&(clearTimeout(a.Gs),a.Gs=null)},xS:function(a){a=a.target;a.loaded=!1;f.Pa.Ed-=1;this.SQ(a);this.kW();a.Gs&&(clearTimeout(a.Gs), a.Gs=null)}};f.B.Zi=f.B.kc.extend({C:function(a,b,c){this.Wy=c;f.Pa.Yn.push(this);this.ee=f.a.TR("layer");this.hb=2;a.get("textRatio");this.xK=25;this.X("tiles",a);this.qea=a.get("vdataUrl")||b.K.get("vdataUrl")||f.w.Gw;this.Og=!0;this.oa=a;this.hi=f.l.Y?!1:!0;this.j=b;this.dh=this.bh=!0;this.Ud("zoom center centerCoords resolution coordsBound styleID iconsID businessIconsID forceBig mode display".split(" "),b);this.Ud("zooms detectRetina visible zIndex textIndex watermark opacity".split(" "),a);this.X("lang", b,!0);this.get("watermark")&&(this.Ts=new Image,this.Ts.src=this.get("watermark"));this.Bja="v4";this.wa={};this.Df={};this.Kc=256;this.Ep=[];this.ae=this.we=0;this.ga=f.l.ga&&this.get("detectRetina");this.Kc=256*(this.ga?2:1);this.X("mapStyle",b);this.X("style",b);this.ul=0;this.X("features",b);this.Yd=18;this.X("reload",a)},mapStyleChanged:function(){this.get("mapStyle");this.Ge=!1;if(this.j.get("styleUrl")||"normal"===this.get("mapStyle"))this.Ge=!!this.j.get("showBuildingBlock");this.featuresChanged()}, featuresChanged:function(){this.set("reload")},langChanged:function(){this.set("reload");this.oa.Nn()},K5:function(){var a=!1,b=this.VM();if(b){if(this.tg){var c="active"===this.tg.Mt;b.ut(this.tg);c&&(b.ro(this.tg,"active"),a=!0)}f.l.c7&&!a&&b.Iy()}},ot:function(){this.K5()},xw:function(a,b){var c=!0;if("hotspotout"===a)this.j.K.set("optimalCursor",null);else if("hotspotover"===a)this.j.K.set("optimalCursor","pointer");else if("mouseup"===a||"mousedown"===a)c=!1;var d=this.VM();if(d)switch(a){case "hotspotout":d.Ny(b); break;case "hotspotover":d.ro(b,"hover");break;case "mouseup":d.ro(b,"hoverup");break;case "mousedown":d.ro(b,"active")}c&&(c=b.Na,c=new f.I(c[0],c[1]),c=this.j.Fd(c,3),this.j.K.r(a,{name:b.name,lnglat:c,id:b.Tl,isIndoorPOI:b.AH}))},VM:function(){if(!f.l.FS){var a=this.R||this.Mk;if(!a)return null;var b=this.j?this.j.K.get("hotspotOptions"):{},b=f.extend({},b);if(b.disableHighlight)return null;this.su||(this.su=new f.B.Zi.JX(a));return this.su}},ym:function(a){(a=this.cS(a))&&this.xw("hotspotclick", a)},Uq:function(a){var b="mousemove"===a.type;if(!this.j.vg||!b){var c=this.cS(a);switch(a.type){case "mousemove":case "mouseup":case "mousedown":c&&this.tg!==c&&(this.tg&&this.xw("hotspotout",this.tg),this.xw("hotspotover",c)),!c&&this.tg&&this.xw("hotspotout",this.tg),c&&!b&&this.xw(a.type,c)}this.tg=c}},textIndexChanged:function(){this.set("display")},Jaa:function(){this.j.h("click",this.ym,this);this.j.h("mousemove",this.Uq,this);this.j.h("mousedown",this.Uq,this);this.j.h("mouseup",this.Uq,this)}, NF:function(){this.j.H("click",this.ym,this);this.j.H("mousemove",this.Uq,this);this.j.H("mousedown",this.Uq,this);this.j.H("mouseup",this.Uq,this)},Ai:function(){return null},Cl:function(){var a=this.j.K.get("forceZooms");return{Og:!0,Kc:256,visible:this.get("visible"),$c:a||this.get("zooms"),ez:this.hi&&this.Aa,bh:!this.j.sB,dh:!this.j.sB,opacity:this.get("opacity"),md:!1}},zj:function(a){if(f.R.canvas.Zi)return new f.R.canvas.Zi(this,a)},Ku:function(a){0===a.indexOf("amap://styles/")&&(a="normal"); var b=this.get("forceBig")||f.l.Y&&!this.ga?"6":"5";this.url=f.w.ac+"://"+this.qea+"/tiles?mapType="+a+"&v=2&style="+b;this.url+=this.ga?"&rd=2":"&rd=1";this.url+="&flds="+this.Oa;this.url+="&t="},styleChanged:function(){this.j.Ub||this.featuresChanged()}}); f.B.Ac=f.B.Zi.extend({zj:function(a){var b=this;if(!b.Ts&&f.l.Ef&&"vw"===b.j.get("baseRender")){var c=["wgl"];this.j.Ub&&c.push("wgl2");if(f.jb.Av(c))return new f.R.Ie.Ac(b,a)}else if(c=["cmng","cgl"],this.j.Ub&&c.push("cgl2"),f.jb.Av(c))return new f.R.canvas.Ac(b,a);f.jb.kg(c,function(){b.set("display")})},featuresChanged:function(){var a=this.get("features"),b=[];"all"===a?b=this.Wy:a&&(-1!==f.a.indexOf(a,"bg")&&-1!==f.a.indexOf(this.Wy,"region")&&b.push("region"),-1!==f.a.indexOf(a,"building")&& -1!==f.a.indexOf(this.Wy,"building")&&b.push("building"),-1!==f.a.indexOf(a,"road")&&-1!==f.a.indexOf(this.Wy,"road")&&b.push("road"));this.Oa=b;this.Ku(this.get("mapStyle")||"normal");this.set("reload")}}); f.B.Xg=f.B.Zi.extend({zj:function(a){var b=this;if(this.qH()){if(this.Ps=!0,f.R.canvas.gC)return this.DQ(),a=new f.R.canvas.gC(this,a),a.h("afterLabelRender",this.ot,this),a}else{b.Ps=!1;if(f.R.canvas.fC)return a=new f.R.canvas.fC(this,a),a.h("afterLabelRender",this.ot,this),a;a=["cmng","labelcanvas"];f.l.jG&&a.push("labelDir");f.jb.kg(a,function(){b.set("display")})}},qH:function(){var a=this.get("mapStyle");return"normal"!==a&&"amap://styles/normal"!==a||this.j.get("nolimg")?!1:f.l.Ps?!0:!1},i$:function(){var a= this.get("mapStyle");return"normal"!==a&&"amap://styles/normal"!==a||this.j.get("nolimg")||f.l.md||f.l.Y?!1:!0},featuresChanged:function(){var a=this.get("features"),b=this.get("mapStyle"),c=[];"all"===a?c=["roadlabel","poilabel"]:a&&(-1!==f.a.indexOf(a,"road")&&c.push("roadlabel"),-1!==f.a.indexOf(a,"point")&&c.push("poilabel"));a=this.qH();c.length&&(a||this.i$())&&c.unshift("limg");this.Oa=c;this.Ku(b);this.set("reload");(b=this.R||this.Mk)&&a^this.Ps&&(this.su&&(this.su=this.su.R=null),b.H("afterLabelRender", this.ot,this),b.yr(),this.Mk=this.R=null)},DQ:function(){this.Ap=f.w.ac+"://"+(this.oa.get("vdataUrl")||this.j.K.get("vdataUrl")||f.w.Gw)+"/limg?";var a=this.ga?2:1;this.Ap+="&font="+(f.l.Y&&!this.ga?"big":"small");this.Ap+="&scl="+a;this.Ap+="&t="},cS:function(a){return a.De?(a=this.PR(this.j.Lb(a.De,20),!0))?a[0]:null:null},PR:function(a,b){var c=this.j.Nz();if(c&&(c=c.mp(this)))return c.Jr(a,b)}});f.B.Zi.JX=f.Z.extend({C:function(a){this.o5(a)},o5:function(a){this.R=a},Ny:function(a){if(a.Mt){a.Mt=!1;var b=this.R;b&&b.Ny.apply(b,arguments)}},ut:function(a){a.Mt=!1;var b=this.R;b&&b.ut.apply(b,arguments)},ro:function(a,b){b||(console.warn("hlStyle is required, e.g. hover, active.."),b="hover");if(a.Mt!==b){a.Mt=b;var c=this.R;c&&c.ro.apply(c,arguments)}},Iy:function(){var a=this.R;a&&a.Iy()}});f.it={rt:function(a,b){this.cf={};this.cf.Sr=f.a.Fb(this.cf);b.Yb||(b.Yb=new f.GX);this.Yb=b.Yb;this.Yb.h("tiles",this.UT,this);this.Yb.h("ack",this.TT,this);this.Yb.h("disable",this.ST,this)},yA:function(a){if(this.q&&a.GH===this.q.ee){var b=this.q.Oa,b=b[b.length],c=null,c="poilabel"===b||"roadlabel"===b?"labels":"allbase";this.me||this.Te?this.II([this.q,"groupcomplete",null,null,c]):(this.Nh(),this.Co.sz(this.q,"groupcomplete",null,null,c));b=0;for(c=a.Nd.length;b<c;b+=1)this.Rv(a.Nd[b],a.Ev, a.us,a.Y)}},Rv:function(a,b){var c=a.yd,d=this.wa.get(a.Pi);if(d){var e=this.q.Oa;d.Oa||(d.Ja={},d.Oa=[]);var g="";(this.j.Mi&&!this.j.Ub||this.r$&&this.j.Ub)&&this.yG(c,a.Ea);"poilabel"===c||"roadlabel"===c?(a.Ii||(g=a.Ea,a.Ii=null),d.Oa.push.apply(d.Oa,a.Ea),c===this.q.Oa[this.q.Oa.length-1]&&(d.Ii=null)):d.Ja[c]=a.Ea;"building"!==c&&"poilabel"!==c||!a.Gj||d.Zf||(d.Zf={},d.Zf.fe=a.Gj,f.im&&f.im.r("vecTileParsed.buildings",{qw:d}));if("roadlabel"!==c&&"poilabel"!==c||this.s$||!f.l.jG&&!this.j.Ub)this.me|| this.Te?this.II([this.q,g,d,b,c]):(this.Nh(),this.Co.sz(this.q,g,d,b,c));c===e[e.length-1]&&(c="roadlabel"===c||"poilabel"===c?"labels":"allbase",this.me||this.Te?this.II([this.q,"tileComplete",d,b,c]):(this.Nh(),this.Co.sz(this.q,"tileComplete",d,b,c)))}},HF:function(){if(this.j){var a=this.j.K.getMapStyle();this.Bn=a;this.$0(a);this.Yb&&"unsupport"!==this.Yb.Dc&&(-1!==a.indexOf("amap://styles")&&(a="normal"),this.Yb.send({command:"status",payload:{mapType:a,style:f.l.Y&&!this.q.ga?"6":"5",rd:this.q.ga? 2:1}}))}},mapStyleChanged:function(){this.HF()},styleChanged:function(){this.HF()},ST:function(){for(var a in this.cf)this.cf.hasOwnProperty(a)&&this.cf[a].Fs&&(this.Bt(this.cf[a].Fs,this.cf[a].Ff),delete this.cf[a]);this.Yb=null;this.ci("mapStyle");this.set("display",1)},TT:function(a){var b=a.reqId;this.cf[b]&&(!a.content.status&&this.cf[b]&&this.Bt(this.cf[b].Fs,this.cf[b].Ff),delete this.cf[b])},UT:function(a){if(this.cf[a.reqId]){var b=a.content.opt;b===this.lb?this.gI(a.content.data,b):this.Bt(this.cf[a.reqId].Fs, this.cf[a.reqId].Ff)}},OH:function(a,b){if(a.length)if(this.MU)this.KT=!0;else{var c=1,d=[],e=this;18<b&&(c=Math.pow(2,b-18));for(var g=Math.pow(2,20-a[0].ha.z),h=0;h<a.length;h+=1){var k=a[h],l=k.ha;k.Ff=b;l.P=g;if(18<b&&!this.Sh){for(var m=0;m<c;m+=1)for(var n=0;n<c;n+=1){var p=new f.Za(new f.ei(b,c*l.x+m,c*l.y+n));this.wa.Sc(p.key)||(this.wa.set(p.key,p),p.status="loading")}this.wa.set(k.key+"/"+b,k)}else this.wa.set(k.key,k),this.Sh&&10>l.z&&this.JR(k)?this.set("display",0):k.status="loading"}this.t4(a, b,f.a.bind(function(a,c){if(c.length){for(var e=0,g=c.length;e<g;e++){var h=c[e].ha,k=h.x,l=h.y,h=h.z;if(10>h){var m=Math.pow(2,h);if(k>=m||0>k)k=(k+m)%m}k=f.a.Cz(k,l,h).join(",");f.a.ea(d,k)||d.push(k)}!this.tn&&this.Yb&&"unsupport"!==this.Yb.Dc?(1>this.Yb.count||3<this.UE?this.NH(c,b,d):(2!==this.Yb.count&&"connected"===this.Yb.Dc||this.HF(),this.Q$(c,b,d)),this.Yb.count+=1,this.Yb.oT&&this.Yb.XI.push(Math.ceil((new Date-this.Yb.oT)/1E3)),this.Yb.oT=new Date):this.NH(c,b,d)}},this));window.renderDelay&& (this.MU=setTimeout(function(){e.KT&&e.set("display",!1);e.KT=!1;e.MU=null},window.renderDelay))}},$0:function(a){a&&"normal"!==a&&0!==a.indexOf("amap://styles/")?this.$J=!0:this.$J=!1},t4:function(a,b,c){if((f.l.He||f.l.Kj&&!this.j.K.Aa)&&(this.zv||!this.$J)&&18>=b){var d=f.ko,e=this,g=this.j,h=g.K;g.HH||void 0!==g.kA||("dv"===h.get("baseRender")?g.kA=1:g.kA=2);d.get({type:h.Aa?"NFS":"FS",Ge:h.get("showBuildingBlock"),wda:a,Ef:!!this.Sh,B:this.q,url:this.Gr(b,[])},function(d,l){if(e.q){if(!d&&l.nH.length){l.nH.length=== a.length&&(g.HH||g.kA--,f.od.Hd.end({key:e.UM(),index:0,id:h.id}));if(l.Nd){e.nk=l.dg["x-vd-v"];e.Rr=l.dg.tv;var m="#"+l.dg.bgc;e.j.Id!==m&&(e.j.Id=m);l.nH.forEach(function(a){a.status="loaded"});m=e.QM(b,l.Nd);e.yA(m)}else l.E$.forEach(function(a){e.xA(a,b,[],l.dg["x-vd-v"],!0)}),e.set("display");a=l.daa}c(null,a)}})}else c(null,a)},Q$:function(a,b,c){var d=(new Date).getTime()+"-"+(this.Yb.count+1&65535),e={command:"tiles",reqId:d,payload:{t:c,opt:b,cs:{level:b,flds:this.q.Oa.join(",")}}},g;if(!this.Yb.US()){var h= this;setTimeout(function(){h.Yb&&!h.Yb.US()&&(h.UE?h.UE++:h.UE=1,h.Yb.w8(g)&&(delete h.cf[d],h.NH(a,b,c)))},300)}g=this.Yb.send(e);this.cf[d]={Fs:a,Ff:b}},iI:function(a){a.Aa||(a.status="",a.Aa=void 0,a.ta=null,a.nc=null,a.Lc&&(a.Lc.nc=null,a.Lc.Lc=null,a.Lc=null),this.wa.fm(a.key))},QM:function(a,b){return{q$:"3D"===this.q.j.K.view.type,O6:this.q.Ge,iz:f.w.iz||null,hga:this.q.get("businessIconsID"),nk:this.nk,Rr:this.Rr,sha:this.q.get("iconsID"),GH:this.q.ee,Ev:a,Nd:b,Y:this.q.get("forceBig")||f.l.Y, mode:this.q.get("mode"),zba:f.w.ac,bV:this.q.get("forceBig")?1:this.q.hb,us:this.q.get("forceBig")?!1:this.q.ga}},S7:function(a){a=a.split(";");for(var b=0,c=a.length;b<c;b+=1){a[b]=a[b].split(",");for(var d=0,e=a[b].length;d<e;d+=1)a[b][d]=parseInt(a[b][d],36)}return a},gI:function(a,b,c){if(this.q){for(var d=[],e=0,g=a.length;e<g;e+=1){var h=a[e];h&&(c&&(h=JSON.parse(h)),h["x-vd-v"]?(this.nk=h["x-vd-v"],this.Rr=h.tv,this.Rk=[h.tv,h.vdv].join("-"),h.bgc&&(h="#"+h.bgc.substring(2),this.j.Id!==h&& (this.j.Id=h))):this.xA(h,b,d))}if(d.length){var k=this;a=null;var l;this.Sh?(a=f.HB,l=a.xI):(a=f.Fn,l=this.tn?a["label:parseLabel"]:a["base:parseData"]);k.q.get("iconsID");k.q.get("businessIconsID");k.q.get("mode");(function(){l(k.QM(b,d),function(a,c){if(k.q&&!a){var d=c.icons;if(d)for(var e=0;e<d.length;e+=1)f.Rh.Jl(d[e]);(f.l.He||f.l.Kj&&!k.j.K.Aa)&&(k.zv||!k.$J)&&18>=b&&f.ko.set({Nd:c.data.Nd,"x-vd-v":k.nk,tv:k.Rr,bgc:k.j.Id,Rk:k.Rk,Ef:!!k.Sh,url:k.Gr(10,[]),B:k.q,Ge:k.j.K.get("showBuildingBlock")}, function(){});c.data&&k.yA(c.data)}})})()}}},xA:function(a,b,c){function d(d,e,g){e=[g,d,e].join("/");18<b&&!l.Sh&&(e+="/"+b);if((d=l.wa.get(e))&&"loaded"!==d.status)if(l.bW(d,p)){if(-1!==n.indexOf(m))if("limg"===m){if(e=a[1],d.Ii=e,"string"===typeof e.b&&(e.b=l.S7(e.b)),g="",g="object"===typeof e.u?e.u.url:e.u)d={url:g,Ns:"limg-"+d.key+"-"+l.q.ee},e.u=d,f.Rh.Jl(d,!0)}else{e={Oi:d.ha,Pi:e,Ea:a,yd:m,uQ:l.j.Id,t$:"building"===m,mh:"poilabel"===m||"roadlabel"===m||"building"===m&&l.q.Ge};if("poilabel"=== m||"roadlabel"===m)e.Ii=d.Ii;m===n[n.length-1]&&(d.status="loaded");c.push(e)}}else l.iJ(b,d,p,f.a.bind(l.iI,l)),18<b&&l.wa.fm(e)}var e=a[0].split("-"),g=parseInt(e[1]),h=parseInt(e[2]),k=parseInt(e[0]),l=this,m=e[3],n=this.q.Oa,p=18<b?Math.pow(2,b-18):1,e=l.Ee.eH,q=Math.pow(2,k);10>k&&(g<=e&&d(g+q,h,k),g>=q-e&&d(g-q,h,k));d(g,h,k)},II:function(a){this.Jo||(this.Jo=[]);this.Jo.push(a)},Nh:function(){if(this.Jo&&this.Jo.length){for(var a=0,b=this.Jo.length;a<b;a+=1)this.Co.sz.apply(this.Co,this.Jo[a]); this.Jo=[]}},Bt:function(a,b,c){c||(c=18<b?Math.pow(2,b-18):1);for(var d=0;d<a.length;d+=1){var e=a[d];this.iJ(b,e,c,f.a.bind(this.iI,this));18<b&&this.wa.fm(e.key+"/"+b)}f.l.He&&f.ko.fm({Fs:a,url:this.Gr(b,[]),B:this.q,Ef:!!this.Sh,Ge:this.j.K.get("showBuildingBlock")})},Gr:function(a,b){return this.q.url+b.join(";")+"&lv="+a},UM:function(){var a=this.q.url,b="rb";if(/\\/limg/.test(a)||/flds=[^&]+label/.test(a))b="rl";return b},NH:function(a,b,c){function d(c,d){if(b!==h.lb)h.Bt(a,b,k),e.nM=!0,e.startTime|| (e.onreadystatechange="");else{var g=c.split("|");g[0]=d+g[0];var p=g,q="";g[g.length-1]&&(q=g[g.length-1],p=g.splice(0,g.length-1));h.gI(p,b,!0);return q}}var e=new XMLHttpRequest;c=this.Gr(b,c,a);var g=0,h=this;e.GA="";var k=18<b?Math.pow(2,b-18):1;e.onreadystatechange=function(){if(h.q)if(3===e.readyState){if(!e.nM){var c=e.responseText.substring(g);e.GA=d(c,e.GA);g=e.responseText.length;e.WL=!0}}else 4===e.readyState&&(f.od.Hd.end({key:h.UM(),index:0,id:h.j.K.id}),e.nM||(c=e.responseText.substring(g), h.tn&&(c+="|"),d(c,e.GA),e.GA="",e.WL=!0),e.startTime&&f.od.Hd.push({id:h.j.K.id,key:"ds",gm:e.responseText.length/2}),e.WL||h.Bt(a,b,k))};e.onerror=function(){};this.V9||(this.V9=1);e.open("GET",c,!0);e.send()},bW:function(a,b){var c=this.Sk||this.Ee,d=a.ha.x,e=a.ha.y;return d>Math.floor(c.Md/b)||d<Math.floor(c.he/b)||e>Math.floor(c.ud/b)||e<Math.floor(c.vd/b)?!1:!0},iJ:function(a,b,c,d){if(18<a){b=b.ha;for(var e=0;e<c;e+=1)for(var g=0;g<c;g+=1){var h=new f.ei(a,c*b.x+e,c*b.y+g)+"";(h=this.wa.get(h))&& d(h)}}else d(b),b.Lc&&d(b.Lc)}};f.R.canvas.Xg=f.R.xh.extend({ea:[f.it],C:function(a,b){arguments.callee.ma.apply(this,arguments);this.ee=f.a.Fb(this);this.Zk=300;this.Yd=a.Yd;this.tn=this.Og=!0;this.X("mapStyle",a.j);this.X("style",a.j);this.zv=!0;this.cr=1;var c=this;this.hN=function(){c.oaa=!0;c.set("display",0)};this.Pe();this.LH(a)},LH:function(a){a=f.l.Y||a.ga?"big":"small";var b=f.w.ac+"://vdata.amap.com/style_icon/icon-biz-"+a+".png";f.Rh.Jl(f.w.ac+"://vdata.amap.com/style_icon/icon-normal-"+a+".png",!0);f.Rh.Jl(b,!0)},zt:function(a){f.Rh.g7(a, this);var b=f.R.canvas.Xg.Bc.zt;b&&b.apply(this,arguments)},Pe:function(){this.ej=document.createElement("canvas");this.ej.className="amap-labels";this.ej.draggable=!1;this.ej.$S=!0;this.li=this.ej.getContext("2d",{alpha:!0});this.pv=[];this.Dv=[];this.mn=this.q.ga?16:8},Pp:function(a){var b=Math.pow(2,a.U.zoom-this.wc),c=this.q.ga?this.q.hb:1,d=a.U.Ua.Sa(this.wn).cc(this.Zd);this.transform={translate:this.transform.translate.add(d.ed(c)),scale:b/c,rotate:0};this.Ua=a.U.Ua},ss:function(a,b){if(!this.la|| 3E4<Math.abs(this.Ua.x-this.la.x)/this.P||3E4<Math.abs(this.Ua.y-this.la.y)/this.P)this.la=this.Ua;this.Od=this.wc;this.qh=this.Zd;this.ph=!1;this.currentTime=+new Date;this.aK=b.aK;this.hd=[this.pa.nb.x,this.pa.nb.y];this.hi=b.ez;var c=this.bi;this.me=this.zoom<<0!==this.zoom;var d=this.Ua.Sa(this.la);d.x<-f.a.Ya/2&&(d.x+=f.a.Ya);d.x>f.a.Ya/2&&(d.x-=f.a.Ya);this.GF=d.cc(this.Zd);for(d=c.length-1;0<=d;d-=1){var e=c[d];if(e.length){var g=e[0].ha.z,h=!1;!1===a.rQ||!e.yf||f.Pa.Ed||!(g<=this.zoom&&"in"=== this.zA||g>=this.zoom&&"out"===this.zA)&&this.zA||this.labels&&this.labels.length&&!a.Ji&&this.IA(this.labels.Es,this.Ee)||(h=!0,this.labels&&this.labels.Jj?(this.xn=this.labels.Jj,this.xn.zoom=this.labels.zoom):(this.xn=[],this.xn.zoom=null),this.labels=[],this.labels.zoom=g,this.labels.Es=this.Ee);if(h){for(g=e.length-1;0<=g;g-=1){var k=e[g],h=!1,l=k.Oa;!l&&k.Lc&&k.Lc.Oa&&(l=k.Lc.Oa,h=!0);if(l){for(var k=0,m=l.length;k<m;k+=1)l[k].reverse=h;Array.prototype.push.apply(this.labels,l)}}this.labels.sort(function(a, b){return a.Lk>b.Lk?-1:a.re>=b.re?-1:1})}}}this.W6(a)&&this.VI(a);this.oaa=!1;this.Gd(a);this.yf&&!this.q.Aa&&(c=this.q,f.od.Hd.end({id:this.j.K.id,key:"rl",index:2}),c.Aa=!0,c.Gc?c.da("renderComplete"):(c.Gc=!0,c.da("complete")))},Xb:function(a,b){this.Bn=a.Bn;this.Vi=a.Vi;this.Kk(a,b);this.me||this.Nh();this.wn&&(a.gW||a.GJ&&f.l.gh||a.Te&&!a.me&&a.C6)?this.Pp(a,b):this.ss(a,b);this.wn=this.Ua;this.zl=this.labels;this.ph&&this.set("display",0)},Gd:function(a){var b=this.Ua.Sa(this.la);b.x<-f.a.Ya/ 2&&(b.x+=f.a.Ya);b.x>f.a.Ya/2&&(b.x-=f.a.Ya);this.transform={translate:new f.I(a.U.pa.Hb.x*(this.q.ga?this.q.hb:1),a.U.pa.Hb.y*(this.q.ga?this.q.hb:1)),scale:1/(this.q.ga?this.q.hb:1),rotate:0}},IA:function(a,b){return a.vd===b.vd&&a.he===b.he&&a.ud===b.ud&&a.Md===b.Md},Jr:function(a,b){var c;if(this.zoom){var d=a.cc(Math.pow(2,20-this.zoom));this.labels&&(c=this.s9(d,b))&&(c.AH=!1);!c&&this.hc&&(c=this.r9(d))&&(c.AH=!0)}return c?[c]:[]},s9:function(a,b){for(var c=a.x,d=a.y,e=this.labels.Jj||this.labels, g=e.length-1;0<=g;g-=1){var h=e[g],k=h.Na[0]/this.P,l=h.Na[1]/this.P;if((h.Tl||!b)&&this.VS(h,c,d,k,l))return h}},r9:function(a){var b=a.x;a=a.y;for(var c=this.hc.length-1;0<=c;c-=1){var d=this.hc[c],e=d.Na[0]/this.P,g=d.Na[1]/this.P;if(d.Tl&&this.VS(d,b,a,e,g))return d}},VS:function(a,b,c,d,e){for(var g=0;g<a.Kb.length;g+=1){var h=a.Kb[g][2],k=a.Kb[g][3],l=a.Kb[g][0],m=a.Kb[g][1];this.q.ga&&(h/=this.q.hb,k/=this.q.hb,l/=this.q.hb,m/=this.q.hb);if(b>=d+l-1&&b<=d+l+h+1&&c>=e+m-1&&c<=e+m+k+1)return!0}return!1}, reloadChanged:function(){this.q&&(this.q.Aa=!1);this.wa.clear();this.labels=[];this.pv=[];this.Dv=[];this.pb&&this.pb.parentNode&&this.pb.parentNode.removeChild(this.pb);this.ej&&this.ej.parentNode&&this.ej.parentNode.removeChild(this.ej);this.set("display")},Kg:function(){return this.ej},yG:function(a,b){if("roadlabel"===a||"poilabel"===a)for(var c=0;c<b.length;c+=1){var d=b[c];if(d.Gb){var e="",g="",h="";d.xd&&(h=d.xd[0],e=h[3],g=h[4],h=d.Hi?"":h[7]);if(e=this.T.Hr&&this.T.Hr(e,g,h,d.Gb,d.Zo))d.visible= e[4],d.Pk=e[3];if(d.xd)for(g=0;g<d.xd.length;g+=1)h=d.xd[g],h[3]=e[0],h[4]=e[1],h[7]=e[2]}}}});f.WK={Gr:function(a,b){return this.q.Ap+b.join(";")+"&lv="+a},gI:function(a,b){if(this.q){for(var c=[],d=0,e=a.length;d<e;d+=1){var g=a[d];g&&(g=JSON.parse(g),g["x-vd-v"]?(this.nk=g["x-vd-v"],this.Rk=[g.tv||"",g.vdv].join("-"),this.Rr=g.tv,this.j.Id="#"+g.bgc.substring(2)):(this.xA(g,b,c,this.nk||"v4"),(f.l.He||f.l.Kj&&!this.j.K.Aa)&&18>=b&&f.ko.set({Ii:!0,data:g,url:this.Gr(b,[]),Pi:g[0].split("-").slice(0,3).join("/"),B:this.q,vdataVersion:this.Rk,"x-vd-v":this.nk,tv:this.Rr,bgc:this.j.Id,Ge:this.j.K.get("showBuildingBlock")})))}this.set("display")}}, wU:function(a,b){var c=0,d=0,e=1,c=256*b.x,d=256*b.y,e=b.P;return[(c+a[0])*e,(d+a[1])*e]},xA:function(a,b,c,d,e){function g(c,g,l){c=[l,c,g].join("/");if(c=p.wa.get(c)){g=c.ha;var m=f.w.ac+"://vdata.amap.com/icons/"+(h||k?"b":"n")+(10>g.z?"39":"18")+"/1/";if(c&&"loaded"!==c.status)if(p.bW(c,t)){if(-1!==r.indexOf(q))if("limg"===q)a[1]&&(c.Ii={url:"data:image/png;base64,"+a[1],Ns:"limg-"+c.key+"-"+p.q.ee},f.Rh.Jl(c.Ii,!0));else{if("roadlabel"===q)for(var n=1;n<a.length;n+=1){var x=a[n];x.oB=x[0];var J= f.a.WJ(x[1],d);if(!(0>J[0]||256<=J[0]||0>J[1]||256<=J[1])){var L=p.wU(J,g),J={Na:L,name:x[0],Hi:!0,wd:J,Pa:[],Kb:[],visible:!0,Pk:!0},M=J.name;J.ws=15>x[2]%90||75<x[2]%90?90*Math.floor((x[2]+15)/90):x[2];L=x[3];0<=x[8]&&(J.LE={name:x[6],qda:x[7],dir:x[8]});var T=L[2];l=L[3];var Z=-Math.floor(l/2);if(x[4])if("v5"<=d){var A=x[5].split(":"),F=A[1],F=parseInt(F)-1,A=f.w.ac+"://vdata.amap.com/style_icon/icon-normal-"+(h||k?"big":"small")+".png";J.Pa.push(A);var A=Math.floor(F/10),C=F%10,E=0,I=0,W=0;k? (E=48,W=I=40):h?(E=I=40,W=36):(E=I=24,W=20);var H=E*Math.max(T+2,W)/W,A=[-H/2,-E/2,H,E,I*C,I*A,I,I];J.re=7;J.Kb.push(A)}else{Z=!1;F=parseInt(x[5]);153===F&&(0===M.indexOf("G")?(F="153g",Z=!0):0===M.indexOf("S")&&(F="153s",Z=!0));if(151===F||150===F)Z=!1,0===M.indexOf("G")&&(F=150,Z=!0),0===M.indexOf("S")&&(F=151,Z=!0);152===F&&(F=151);!0===Z&&(m=f.w.ac+"://webapi.amap.com/theme/v1.3/icons/"+(h||k?"b/":"n/"));A=m+F+".png";f.Rh.Jl(A);J.Pa.push(A);H=x[4][0]*u;x=x[4][1]*u;A=[-H/2,-x/2,H,x];J.Kb.push(A); T=Math.min(H-3,T);l=Math.min(x,l);Z=-Math.floor(l/2)+(k?3:1)}J.Pa.push(c.Ii);J.re=11;J.Kb.push([-Math.floor(T/2),Z,T,l,L[0],L[1],L[2],L[3]]);c.Oa||(c.Oa=[]);c.Oa.push(J)}}else if("poilabel"===q){M=[];for(n=1;n<a.length;n+=1)if(x=a[n],x.oB=x[0],J=f.a.WJ(x[1],d),!(0>J[0]||256<=J[0]||0>J[1]||256<=J[1])){L=p.wU(J,g);J={Na:L,name:x[0].replace("^",""),Ur:!0,wd:J,Pa:[],Kb:[],visible:!0,Pk:!0};F=0;J.Lk=x[8];x[6]&&("v5"<=d?(A=x[6].split(":"),F=A[1],Z=Math.floor((parseInt(A[0].split("_")[1])-28)/2)):F=x[6]); if(F&&x[3]){if("v5"<=d){A=f.w.ac+"://vdata.amap.com/style_icon/icon-"+(1===Z?"biz-":"normal-")+(h||k?"big":"small")+".png";J.Pa.push(A);F=parseInt(F)-1;A=Math.floor(F/10);C=F%10;k?(E=48,I=40,W=28):h?(E=I=40,W=28):(E=I=24,W=20);H=E;if(151===F||152===F||153===F)W-=4,T=x[7][0][2],H=E*Math.max(T+2,W)/W;A=[-H/2,-E/2,H,E,I*C,I*A,I,I]}else A=m+F+".png",f.Rh.Jl(A),J.Pa.push(A),A=[-Math.round(x[3][0]/2),-Math.round(x[3][1]/2),x[3][0],x[3][1]],k&&!e&&(A[0]*=u,A[1]*=u,A[2]*=u,A[3]*=u);J.Kb.push(A)}if(x[2]&& x[7])for(T=x[2],A=0;A<x[2].length;A+=1){J.Pa.push(c.Ii);L=x[7][A];k&&!e&&(T[A][0]=Math.round(T[A][0]*u),T[A][1]=Math.round(T[A][1]*u),T[A][2]=Math.round(T[A][2]*u),T[A][3]=Math.round(T[A][3]*u));H=T[A][0];C=T[A][1]-(k?4:2);E=L[3];I=L[2];H<-I&&F&&x[3]&&(H=-I+J.Kb[0][0]);if("v5">d){if("375"===F||"3751"===F)I=Math.min(T[A][2],k?24:14),H=-Math.floor(I/2),C=-Math.floor(E/2)}else H-=2;J.re=E-4;4===l&&"\\u5317\\u4eac"===J.name&&(C=k?-50:-26);J.Kb.push([H,C,I,L[3],L[0],L[1],L[2],L[3]])}J.wp=x[5];J.wp&&M.push(J.wp); J.Tl=x[4];J.Pl=x[9];J.AT=x[10];J.Ce=F;J.Qr=Z;c.Oa||(c.Oa=[]);c.Oa.push(J)}c.Zf||(c.Zf={},c.Zf.fe=M)}q===r[r.length-1]&&(c.status="loaded",c.Aa=c.ta=!0,c.Lc&&(c.Lc.Aa=c.Lc.ta=!0))}}else p.iJ(b,c,t,f.a.bind(p.iI,p))}}var h=f.l.Y,k=this.q.ga,l=a[0].split("-");1===l.length&&(l=a[0].split("_"));c=parseInt(l[1]);var m=parseInt(l[2]),n=parseInt(l[0]),p=this,q=l[3],r=this.q.Oa,t=18<b?Math.pow(2,b-18):1,l=Math.ceil(p.Ee.eH),u=this.q.ga?this.q.hb:1,x=Math.pow(2,n);10>n&&(c<=l&&g(c+x,m,n),c>=x-l&&g(c-x,m,n)); g(c,m,n)}};f.R.canvas.gC=f.R.canvas.Xg.extend({ea:[f.WK]});f.R.canvas.Xg.gb({VI:function(a){this.cr++;var b=this.ej,c=this.li;this.Mr={};var d=this.q.ga?this.q.hb:1,e;0!==a.U.rotation?(e=2*Math.floor(a.U.pa.Hb.x)*d,d*=2*Math.floor(a.U.pa.Hb.y)):(e=a.size.width*d,d*=a.size.height);f.g.Nk(b,e,d,!0);c.textBaseline="bottom";this.zS=0;a.hc&&(this.xU(a.hc,1,a.hc),0===a.hc.length&&this.labels&&this.labels.Jj&&this.labels.zoom===this.zoom&&this.labels.Jj.length!==this.labels.length&&(this.labels.Jj=null));this.labels&&this.xU(this.labels,0,a.hc);!f.l.Y&&this.xn&& this.xn.length&&this.q9(a);this.pv=this.pv&&this.OU(c,this.pv,480);this.Dv=this.Dv&&this.OU(c,this.Dv,200);a.hc&&this.RU(a.hc,c,f.sg.VR(this.j.K),this.Wb,e,d);this.labels&&this.RU(this.labels,c,f.sg.VR(this.j.K),this.Wb,e,d);this.xn=[];this.labels&&(this.labels.ts=this.zoom,this.labels.ps=this.Ua,this.labels.gw=this.rotation,this.labels.TU=this.q.ga,this.labels.size=a.size);a.hc&&(this.hc=a.hc);this.hc&&(this.hc.ts=this.zoom,this.hc.ps=this.Ua,this.hc.gw=this.rotation,this.hc.size=a.size);this.r("afterLabelRender")}, PU:function(a,b,c){var d=void 0===b.Pk?!0:b.Pk,e=1,g=void 0===b.visible?!0:b.visible,h=null;if(b.Gb&&this.j.Ub){var k=h="",l="";b.xd&&this.fG&&(l=b.xd[0],h=l[3],k=l[4],l=b.Hi?"":l[7]);if(h=this.T.Hr&&this.T.Hr(h,k,l,b.Gb,b.Zo))g=h[4],d=h[3],e=h[5]}if(g){if(this.li.globalAlpha!==c||e)this.li.globalAlpha=c||e;g=0;for(k=b.Pa.length;g<k;g+=1)(d||"CANVAS"===b.Pa[g].tagName)&&this.m8(a,b.Pa[g],b.Kb[g],b.ws,c||e);this.li.globalAlpha!==c&&(this.li.globalAlpha=c);b.xd&&this.fG&&this.fG(a,b,h)}},m8:function(a, b,c,d){var e=this.li;b=this.Bl(b);if(!b)return 1;var g=c[2],h=c[3],k=c[0],l=c[1];d=(d||0)%360*-Math.PI/180;if(0!==d){var m=Math.cos(d),n=Math.sin(d),p=a[0],q=a[1];e.transform(m,n,-n,m,(1-m)*p+n*q,(1-m)*q-n*p)}k=a[0]+k;a=a[1]+l;4===c.length?b.loaded&&e.drawImage(b,k,a,g,h):e.drawImage(b,c[4],c[5],c[6],c[7],k,a,g,h);0!==d&&e.setTransform(1,0,0,1,0,0)},Bl:function(a){if("IMG"===a.tagName||"CANVAS"===a.tagName||(a=f.Rh.LR(a))&&a.loaded)return a},Rz:function(a){var b=a.Na,c=b[0];a.reverse&&(c>f.a.Ya/2? c-=f.a.Ya:c<-f.a.Ya/2&&(c+=f.a.Ya));return this.Lh(c,b[1])},Lh:function(a,b){var c=this.q.ga?this.q.hb:1,d=this.P,e=0,g=0,e=(a-this.hd[0])/d,g=(b-this.hd[1])/d;return[Math.round(e*c),Math.round(g*c)]},x9:function(a){var b=a.Na,c=b[0];a.reverse&&(c>f.a.Ya/2?c-=f.a.Ya:c<f.a.Ya/2&&(c+=f.a.Ya));return[c/this.P,b[1]/this.P]},C$:function(a,b){var c=a.Na;return c[0]>b.vc.x||c[1]>b.vc.y||c[0]<b.nb.x||c[1]<b.nb.y?!1:!0},q9:function(a){var b=this.xn;if(this.xn.zoom!==this.labels.zoom)for(var c=0,d=b.length;c< d;c+=1){var e=b[c];e.Ur&&this.C$(e,a.U.pa)&&(this.Dv.push(e),e.zoom=b.zoom,e.mH=new Date)}},xU:function(a,b,c){var d=!(!c||!c.length),e=a.zoom-this.zoom,g=a.Jj||a;if(0<e||d){a.Jj=[];for(var h=0,k=g.length;h<k;h+=1){var l=g[h],m=this.x9(l);l.Ur||b?l.wp&&d&&c.JT&&-1!==f.a.indexOf(c.JT,l.wp)||(5>e&&this.g$(m,l,0<e,b,d)?a.Jj.push(l):f.l.Y||0===e&&!b||(this.pv.push(l),l.zoom=this.labels?this.labels.zoom:this.wc,l.mH=new Date)):l.Hi&&a.Jj.push(l)}}else a.Jj=a;return!1},OU:function(a,b,c,d,e){a=new Date; for(var g=[],h=0,k=b.length;h<k;h+=1){var l=b[h],m=Math.max(0,Math.abs(l.zoom-this.zoom)),m=Math.max(0,1-(a-l.mH)/(1/Math.pow(1.3,m)*c));if(0<m){g.push(l);var n=this.Rz(l);-20>n[0]||n[0]>d+20||-20>n[1]||n[1]>e+20||this.PU(n,l,m)}else l.mH=void 0}g.length&&(this.zS=this.ph=1);return g},RU:function(a,b,c,d,e,g){d=a.zoom!==this.zoom;18===a.zoom&&18<this.zoom&&(d=!1);b.globalAlpha=1;a=a.Jj;b=0;for(var h=a.length;b<h;b+=1){var k=a[b];if(!(d&&k.Hi||k.$k&&c&&0<=c.indexOf(k.$k))){var l=this.Rz(k);-20>l[0]|| l[0]>e+20||-20>l[1]||l[1]>g+20||this.PU(l,k)}}},W6:function(a){this.zl&&this.zl.TU!==this.q.ga&&this.q.set("reload");if(this.zS)return!0;if(a.hc&&a.hc.length)if(this.hc&&this.hc.length){if(this.hc!==a.hc||this.hc.ts!==this.zoom||this.hc.ps!==this.Ua||this.hc.gw!==this.rotation||!this.hc.size.yb(a.size))return!0}else return!0;else if(this.hc&&this.hc.length)return!0;return!this.labels||!this.j.ER&&this.labels===this.zl&&this.zl&&this.zl.ts===this.zoom&&this.zl.ps===this.Ua&&!a.Ji&&this.zl.gw===this.rotation&& this.zl.TU===this.q.ga&&this.zl.size.yb(a.size)?!1:!0},g$:function(a,b,c,d,e){if(!e&&!c&&!d)return!0;var g;e=b.Pa.length;if(b.Pl>this.zoom)g=!0;else if(!c&&d)g=!1;else for(var h=0;h<e;h+=1){var k=b.Kb[h],l=k[2],m=k[3],n=k[0],k=k[1],n=a[0]+n,k=a[1]+k;this.h$(n,k,l,m)||(g=!0)}if(!g&&(c||d))for(h=0;h<e;h+=1)for(k=b.Kb[h],l=k[2],m=k[3],n=k[0],k=k[1],n=a[0]+n,k=a[1]+k,l=Math.ceil((n+l)/this.mn),c=Math.ceil((k+m)/this.mn),n=Math.floor(n/this.mn),k=Math.floor(k/this.mn),d=0,m=l-n;d<=m;d+=1)for(var l=0,p= c-k;l<=p;l+=1)this.Mr[n+d]||(this.Mr[n+d]={}),this.Mr[n+d][k+l]=1;return!g},h$:function(a,b,c,d){var e=Math.ceil((a+c)/this.mn);d=Math.ceil((b+d)/this.mn);a=Math.floor(a/this.mn);b=Math.floor(b/this.mn);c=0;for(e-=a;c<=e;c+=1)if(this.Mr[a+c])for(var g=0,h=d-b;g<=h;g+=1){if(1===this.Mr[a+c][b+g])return!1}else this.Mr[a+c]={};return!0}});f.R.canvas.Xg.eX=f.Z.extend({C:function(a){this.R=a},n5:function(a){this.Bn=a;return this.NE([0,0,0])?!0:this.Bn=!1},xN:function(){return this.R.me?!1:!0},x0:function(a){if(a){var b=Array.prototype.slice.call(arguments,0);switch(a.type){case "icon":return this.A0.apply(this,b);case "label":return this.B0.apply(this,b);default:console.error("Unknown type",a)}}},MM:function(a,b,c){a=null;try{a=b.getImageData.apply(b,c)}catch(d){console.error(d),a=null}return a},J5:function(a){return 0>a?0:255<a?255: Math.round(a)},UP:function(a,b){for(var c=0;4>c;c++)a[b+c]=this.J5(a[b+c]);return a},ME:function(a,b){var c=259*(b+255)/(255*(259-b));return[c*(a[0]-128)+128,c*(a[1]-128)+128,c*(a[2]-128)+128]},e5:function(a){return[255-a[0],255-a[1],255-a[2]]},NE:function(a,b){isNaN(b)&&(b=20);var c=Math.max(0,0.299*a[0]+0.587*a[1]+0.114*a[2]-b);switch(this.Bn){case "amap://styles/normal":case "normal":return[1*c,1.2*c,255];case "amap://styles/light":case "light":return[1*c,1*c,255];case "amap://styles/fresh":case "fresh":return[1* c,1*c,220];case "amap://styles/grey":case "amap://styles/dark":case "insight":case "dark":return[1.5*a[0],1.5*a[1],1*a[2]];case "amap://styles/blue":case "amap://styles/darkblue":case "blue_night":case "mapv":return[2*a[0],1.5*a[1],1*a[2]]}return!1},C0:function(a,b){var c=20,d=10;switch(b.wk){case "active":c+=20,d+=20}return this.ME(this.NE(a,c),d)},fN:function(a,b){var c=-110;switch(b.wk){case "active":c+=30}return this.ME(this.NE(this.e5(a),c),50)},z0:function(a){return this.ME(a,20)},eN:function(a, b,c,d,e,g){var h=a[b],k=a[b+1],l=a[b+2];a=a[b+3];0<a?(e=e.call(this,[h,k,l,a],g),c[d]=e[0],c[d+1]=e[1],c[d+2]=e[2]):(c[d]=h,c[d+1]=k,c[d+2]=l);c[d+3]=a;this.UP(c,d)},Q_:function(a){var b=a.data,c=a.width;a=a.height;for(var d=0,e=0,g=[Infinity,Infinity],h=[-Infinity,-Infinity],k=0;k<c;k++)for(var l=0;l<a;l++){var m=4*this.pD(k,l,c,a);if(!(76.5>b[m+3])){e++;k<g[0]&&(g[0]=k);l<g[1]&&(g[1]=l);k>h[0]&&(h[0]=k);l>h[1]&&(h[1]=l);for(var n=!0,p=0;4>p;p++)if(220>b[m+p]){n=!1;break}n&&d++}}return{Aea:0<e?d/ e:0,t7:[g[0],g[1],h[0]-g[0]+1,h[1]-g[1]+1]}},pD:function(a,b,c){return b*c+a},Gy:function(a,b,c,d,e,g,h){var k=this.pD(b,c,d,e);d=a[4*k+0];e=a[4*k+1];var l=a[4*k+2];a=a[4*k+3];if(a/255<h.DT||h.WV&&!h.WV.call(this,d,e,l,a))return!1;g.push([b,c]);return!0},k4:function(a,b){var c=Math.abs(a[0]-b[0]),d=Math.abs(a[1]-b[1]);return Math.sqrt(c*c+d*d)},Wq:function(a,b){return 0.1>Math.abs(a[0]-b[0])&&0.1>Math.abs(a[1]-b[1])},x5:function(a,b){for(var c=[a[0]],d=1,e=a.length;d<e;d++){var g=a[d];this.k4(g,c[c.length- 1])<=b&&c.push(g)}return this.Wq(c[c.length-1],a[a.length-1])?c:null},Pfa:function(){},rZ:function(a,b,c,d){d=f.extend({DT:0.2,yT:4},d);var e,g,h=[],k=[],l=[],m=[];for(e=0;e<c;e++){for(g=0;g<b&&!this.Gy(a,g,e,b,c,h,d);g++);for(g=b-1;0<=g&&!this.Gy(a,g,e,b,c,k,d);g--);}if(!h.length||!k.length)return null;for(g=0;g<b;g++){var n;e=h[0][0];n=k[0][0];if(g>=e&&g<=n)for(e=0;e<c&&!this.Gy(a,g,e,b,c,l,d);e++);e=h[h.length-1][0];n=k[k.length-1][0];if(g>=e&&g<=n)for(e=c-1;0<=e&&!this.Gy(a,g,e,b,c,m,d);e--); }if(!l.length||!m.length)return null;m.reverse();h.reverse();if(this.Wq(l[l.length-1],k[0])&&this.Wq(k[k.length-1],m[0])&&this.Wq(m[m.length-1],h[0])&&this.Wq(h[h.length-1],l[0])){b=[m,h,l,k];e=0;for(a=b.length;e<a;e++)if(!(2>b[e].length||(b[e]=this.x5(b[e],d.yT),b[e])))return null;return[].concat(b[0]).concat(b[1].slice(1)).concat(b[2].slice(1)).concat(b[3].slice(1))}return null},A_:function(a){for(var b=[Infinity,Infinity],c=[-Infinity,-Infinity],d=0,e=a.length;d<e;d++){var g=a[d][0],h=a[d][1]; b[0]>g&&(b[0]=g);b[1]>h&&(b[1]=h);c[0]<g&&(c[0]=g);c[1]<h&&(c[1]=h)}return b.concat([c[0]-b[0]+1,c[1]-b[1]+1])},WM:function(a,b){this.MP||(this.MP=document.createElement("canvas"));var c=this.MP;c.width=a;c.height=b;return c},W_:function(a){switch(a.length){case 2:return"lineTo";case 4:return"quadraticCurveTo"}return null},sM:function(a){switch(a.length){case 2:return[a[0]+0.5,a[1]+0.5];case 4:return[a[0]+0.5,a[1]+0.5,a[2]+0.5,a[3]+0.5]}return a},CL:function(a,b){a.beginPath();for(var c=0,d=b.length;c< d;c++){var e=b[c];0===c?(2<e.length&&(4===e.length?e=e.slice(-2):console.error("Unknown start point: ",b)),a.moveTo.apply(a,this.sM(e))):a[this.W_(e)].apply(a,this.sM(e))}},E_:function(a){a=this.fN([255,255,255],{wk:a.wk});this.UP(a,0);return"rgba("+a.slice(0,3).join(",")+", 0.8)"},y0:function(a,b,c){function d(a){return[Math.round((a[0]-n)*q+n-m[0]),Math.round((a[1]-p)*r+p-m[1])]}c=f.extend({wk:"hover",lQ:!0,padding:[1.5,1.5]},c);var e=a.width,g=a.height,h=this.WM(2*e+10,g),k=h.getContext("2d"), l=this.A_(b),m=c.padding;f.l.md&&(m[0]+=2.5,m[1]+=2.5);for(var n=l[0],p=l[1],q=(l[2]+2*m[0])/l[2],r=(l[3]+2*m[1])/l[3],l=0,t=b.length;l<t;l++)switch(b[l].length){case 2:b[l]=d(b[l]);break;case 4:b[l]=d(b[l]).concat(d(b[l].slice(2)));break;default:console.error("Unknown point: ",b[l])}k.save();this.CL(k,b);k.closePath();k.fillStyle=c.fillStyle||"rgba(255,255,255,0.85)";k.fill();k.putImageData(a,e+6,0);k.drawImage(h,e+6,0,e,g,0,0,e,g);a=c.lQ&&10<b.length;var u=c.strokeStyle||this.E_(c);k.strokeStyle= a?"#fff":u;k.lineCap="butt";k.lineJoin="round";k.lineWidth=f.l.md?2:1.2;k.stroke();k.restore();return{ta:h,zf:[0,0,e,g],Ne:a?function(a,c){this.z5(a,c,b,u)}:null}},z5:function(a,b,c,d){this.vZ();var e=this.R.cr;this.tL(a,c,{duration:200,AI:0,startTime:Date.now(),Fca:function(a){a.strokeStyle=d;a.lineCap="butt";a.lineJoin="round";a.lineWidth=f.l.md?2:1;a.translate(b[0],b[1])},Bea:function(){return this.R.cr!==e}})},vZ:function(){this.vC&&f.a.cg(this.vC)},tL:function(a,b,c,d){this.xN()?this.vC=f.a.ec(function(){this.vC= null;if(c.Bea.call(this))d&&d.call(this);else{var e=(Date.now()-c.startTime)/c.duration;1<e&&(e=1);var g=Math.round(b.length*e);if(c.AI<g){var h=1===e?b:b.slice(c.AI,g+1);h.length&&(a.save(),c.Fca.call(this,a,e),this.CL(a,h),a.stroke(),a.restore());c.AI=g}1>e?this.tL(a,b,c,d):d&&d.call(this)}},this):d&&d.call(this)},DZ:function(a,b,c){a=a.createImageData(b.width,b.height);var d=a.data,e=a.width,g=a.height,h=c[0]+c[2],k=c[1],l=c[1]+c[3];for(c=c[0];c<h;c++)for(var m=k;m<l;m++)for(var n=4*this.pD(c, m,e,g),p=0;4>p;p++)d[n+p]=b.data[n+p];return a},l1:function(a,b,c){var d=a[1]+(b[1]-a[1])*c;return[Math.round(a[0]+(b[0]-a[0])*c),Math.round(d)]},U0:function(a,b,c){for(var d=1/c,e=[],g=1;g<c;g++){var h=this.l1(a,b,d*g);e.length&&this.Wq(h,e[e.length-1])||e.push(h)}return e},V0:function(a,b){for(var c=1,d=a.length;c<d;c++){var e=a[c-1],g=a[c];2===g.length&&(4===e.length&&(e=e.slice(2)),2===e.length&&(e=this.U0(e,g,b),a.splice.apply(a,[c,0].concat(e)),c+=e.length,d+=e.length))}},Z_:function(a,b,c, d,e){e=Math.round(Math.min(c,d)*e);c--;d--;e?a=[[a+c,b+d-e],[a+c,b+d,a+c-e,b+d],[a+e,b+d],[a,b+d,a,b+d-e],[a,b+e],[a,b,a+e,b],[a+c-e,b],[a+c,b,a+c,b+e],[a+c,b+d-e]]:(e=[a+c,b+d],a=[e,[a,b+d],[a,b],[a+c,b],e]);this.V0(a,5);return a},A0:function(a,b,c,d,e,g){b=a.zf;var h=c?c.sH:this.MM(d,e,b);if(h){var k=c?c.CS:null,l=h,m=a.padding,n=m?m[0]:0,p=m?m[1]:0;(m=0<n*p)&&(l=this.DZ(e,l,[n,p,l.width-2*n,l.height-2*p]));d=l.data;b=l.width;var q=l.height;if(b&&q){c=(c=this.R.j)&&c.K?c.K.get("hotspotOptions"): {};c=f.extend({borderAnimation:!0},c);l=this.Q_(l);a=!a.w$&&0.46<=l.Aea;var r=e.createImageData(b,q);e=r.data;for(var t=a?this.fN:this.z0,u=0,x=d.length;u<x;u+=4)this.eN(d,u,e,u,t,{wk:g});if(m&&(e=a&&!f.l.md?this.rZ(d,b,q,{WV:a?function(a,b,c){return!(220<a&&220<b&&220<c)}:null,DT:0.2,yT:4}):null,e||(e=l.t7,e=this.Z_(e[0],e[1],e[2],e[3],0.2)),e)){var w=this.y0(r,e,{wk:g,fillStyle:"active"!==g?null:"#ddd",tA:h,lQ:c.borderAnimation&&"hover"===g&&!k,padding:a?[1.5,1.5]:[2.5,2.5]}),r=null;return{tA:h, qs:function(a,b){k&&h&&a.putImageData(h,b[0],b[1]);a.drawImage(w.ta,w.zf[0],w.zf[1],w.zf[2],w.zf[3],b[0],b[1],b[2],b[3]);w.Ne&&(w.Ne.call(this,a,b),w.Ne=null)}}}return{tA:h,qs:function(a,b){if(m){var c=this.WM(r.width,r.height);c.getContext("2d").putImageData(r,0,0);a.clearRect(b[0]+n,b[1]+p,b[2]-2*n,b[3]-2*p);a.drawImage(c,0,0,c.width,c.height,b[0],b[1],b[2],b[3])}else a.putImageData(r,b[0],b[1]);r=null}}}}},B0:function(a,b,c,d,e,g){a=a.zf;if(c=c?c.sH:this.MM(d,e,a))if(d=c.data,a=c.width,b=c.height, a&&b){var h=e.createImageData(a,b);e=h.data;a=0;for(b=d.length;a<b;a+=4)this.eN(d,a,e,a,this.C0,{wk:g});return{tA:c,qs:function(a,b){a.putImageData(h,b[0],b[1]);h=null}}}},YM:function(a,b,c){var d=c[2],e=c[3],g=a[0]+c[0];a=a[1]+c[1];if(4===c.length||c.sN){if((b=this.R.Bl(b))&&b.loaded)return c=[4,4],f.l.md&&(c[0]*=2,c[1]*=2),{type:"icon",w$:b.src&&b.src.indexOf&&0<=b.src.indexOf("/indoor_icon/"),padding:c,zf:[g-c[0],a-c[1],d+2*c[0],e+2*c[1]]}}else return{type:"label",zf:[g,a,d,e]}}}); f.R.canvas.Xg.gb({KM:function(){this.yD||(this.yD=new f.R.canvas.Xg.eX(this));return!1===this.yD.n5(this.Bn)?null:this.yD},ro:function(a,b){var c=this.KM();if(c&&c.xN()&&a&&a.Pa&&a.Kb&&0===this.rotation){var d=this.cr,e=this.Rz(a),g=[],h;a.Bm||(a.Bm=[]);var k=a.Bm;for(h=a.Kb.length-1;0<=h;h--){if(k[h]){if(k[h].rev!==d)continue;if(k[h].CS===b)continue}var l=c.YM(e,a.Pa[h],a.Kb[h]);if(l){var m=c.x0(l,a,k[h],this.ej,this.li,b);m&&(k[h]={CS:b,rev:d,sH:m.tA},g.push({qs:m.qs,zf:l.zf,Xv:"icon"===l.type? 2:1}))}}g.sort(function(a,b){return a.Xv-b.Xv});h=0;for(d=g.length;h<d;h++)g[h].qs.call(c,this.li,g[h].zf),g[h].qs=null}},ut:function(a){a.Bm&&(a.Bm.length=0,a.Bm=null)},Iy:function(){var a=this.li;a&&a.putImageData&&a.putImageData(a.getImageData(0,0,1,1),0,0)},Ny:function(a){if(a&&a.Pa&&a.Kb&&a.Bm){var b=this.li,c=this.KM();if(c){for(var d=this.cr,e=this.Rz(a),g=a.Bm,h=0,k=a.Kb.length;h<k;h++){var l=g[h];if(l&&(g[h]=null,d===l.rev)){var m=c.YM(e,a.Pa[h],a.Kb[h]);m&&m.zf&&b.putImageData(l.sH,m.zf[0], m.zf[1])}}a.Bm=null;this.cr++}}}}); ')
_jsload_('overlay', 'f.ka.Rb=f.ka.fo.extend({C:function(a,b){var c=a.length;this.ng=Array(c);for(var d,e,g=0;g<c;g+=1)if(d=a[g],e=new f.ka.JK(d),this.ng[g]=e,!b)if(0===g){if(0===d.length)break;e.rn(d)||d.reverse()}else 0!==d.length&&e.rn(d)&&d.reverse()},Hc:function(){if(0===this.ng.length)return[Infinity,Infinity,-Infinity,-Infinity];if(!this.Oe){for(var a=this.ng[0].Hc(),b=1;b<this.ng.length;b+=1){var c=this.ng[b].Hc();f.G.aR(a,c)||f.G.extend(a,c)}this.Oe=a}return this.Oe},jS:function(){return this.ng},ig:function(){return f.ka.Ad.Ww}, Xc:function(a){for(var b=this.ng,c,d=0,e=b.length;d<e&&(c=b[d].Xc(a),0<d&&(c=!c),c);d+=1);return c}});f.ka.pq=f.ka.fo.extend({C:function(a){var b=a.length;this.ze=Array(b);for(var c=0;c<b;c+=1){var d=new f.ka.Rb(a[c]);this.ze[c]=d}},Hc:function(){if(!this.Oe){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=this.ze,c=0,d=b.length;c<d;c+=1)f.G.extend(a,b[c].Hc());this.Oe=a}return this.Oe},HG:function(){return this.Na},ig:function(){return f.ka.Ad.Uw},OR:function(){return this.ze},Xc:function(a){for(var b=!1,c=0,d=this.ze.length;c<d;c+=1)if(this.ze[c].Xc(a)){b=!0;break}return b}});f.ka.jm=f.ka.fo.extend({C:function(a){this.Na=a},Hc:function(){if(!this.Oe){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=0,c=this.Na.length;b<c;b+=1)f.G.Fz(a,this.Na[b]);this.Oe=a}return this.Oe},HG:function(){return this.Na},ig:function(){return f.ka.Ad.RB},h9:function(){return this.Na.length},Ar:function(a){return f.zc.Xm(a,this.Na)}});f.ka.JK=f.ka.jm.extend({ig:function(){return f.ka.Ad.HK},rn:f.zc.rn,Xc:function(a){return f.zc.Xc(a,this.Na)}});f.ka.ft=f.ka.fo.extend({C:function(a){var b=a.length;this.ze=Array(b);for(var c=0;c<b;c+=1){var d=new f.ka.jm(a[c]);this.ze[c]=d}},OR:function(){return this.ze},Hc:function(){if(!this.Oe){for(var a=[Infinity,Infinity,-Infinity,-Infinity],b=this.ze,c=0,d=b.length;c<d;c+=1)f.G.extend(a,b[c].Hc());this.Oe=a}return this.Oe},HG:function(){return this.Na},ig:function(){return f.ka.Ad.XB},h9:function(){return this.Na.length},Ar:function(a){for(var b=Infinity,c=0,d=this.ze.length;c<d;c+=1)b=Math.min(b,this.ze[c].Ar(a)); return b}});f.D.Ob=f.D.Sf.extend({C:function(a,b){arguments.callee.ma.apply(this,arguments);this.p6=a;this.X("options",a);this.X("geodesic",a);this.X("path",a);this.X("noSelect",a);this.No();this.X("display",b);b.h("zoomend",this.ik,this)},pl:function(){if("3D"==this.map.K.view.type){var a=this.L;a&&(a=a.Ba)&&(delete a.Ea,delete a.xr)}},deltaPosChanged:function(){this.set("display")},geodesicChanged:function(){this.pathChanged()},En:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path"),b=a.ed(b), d=[],e,g,h;e=0;for(g=c.length;e<g;e+=1)h=this.map.Qb(c[e]).add(b),d.push(this.map.Fd(h));0<d.length&&this.set("path",d);if(this.yE&&0<this.yE.length)for(e=0,c=this.yE.length;e<c;e+=1)this.yE[e].En(a);this.p6.r("movepoly",{ls:b})},Lv:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]])},It:function(a){this.get("options");return this.W0()?this.N_(a):this.kD(a)},W0:function(){var a=this.get("options");return a&&!!a.geodesic},getStrokeWeight:function(){return this.get("options").strokeWeight}, N_:function(a){if(!a||!a.length)return[];var b,c=[],d,e,g=[],h,k=this.map.get("resolution"),l=this.get("options").geodesicInterpolatePixelWidth||17;c.push(a[0]);g.push(this.lD(a[0]));d=1;for(e=a.length;d<e;d+=1)h=this.lD(a[d]),b=Math.round(Math.abs(h[0]-g[g.length-1][0])/k),b=Math.min(31,Math.round(b/l),Math.round(Math.abs(a[d-1].M-a[d].M))),"3D"==this.map.K.view.type&&(b=Math.round(b/1.2)),b=f.W.y9(a[d-1],a[d],b),c.push.apply(c,b),g.push.apply(g,this.kD(b)),c.push(a[d]),g.push(h);return g},gz:function(a){var b= [],c=[],d,e,g,h,k,l,m=a.Ba;m instanceof f.ka.jm?l=[m]:m instanceof f.ka.ft&&(l=m.ze);m=[];a=a.Fa.rotation;b=this.map.get("size");d=Math.PI*a/180;a=(Math.abs(b.width*Math.cos(d))+Math.abs(b.height*Math.sin(d)))/2;var n=(Math.abs(b.width*Math.sin(d))+Math.abs(b.height*Math.cos(d)))/2;d=0;for(e=l.length;d<e;d+=1)if(g=l[d].Na,g.length)for(h=0,k=g.length;h<k;h+=1)if(b=g[h],b=this.ue(b),b[0]=Math.round(b[0]+a),b[1]=Math.round(b[1]+n),0===h)c[0]=NaN,c[1]=NaN,m.push("M"+b[0]+" "+b[1]);else if(b[0]!==c[0]|| b[1]!==c[1])m.push("L"+b[0]+" "+b[1]),c[0]=b[0],c[1]=b[1];return m},No:function(){if(this.map&&!this.L){var a=this.map,b=this.get("path"),b=this.L=new f.of({gD:this.Qc.Vx,name:"polyline-"+f.a.Fb(this),zIndex:this.get("options").zIndex||1,map:a,Ba:new f.ka.jm(this.It(b)),style:this.get("options")});b.Fm=this;this.X("resolution",a);this.X("center",a);this.X("coords",b);this.X("style",b);b.Ud("noSelect visible zIndex strokeWeight isOutline deltaPos".split(" "),this)}},pathChanged:function(){this.pl(); var a=this.L,b=this.get("path");a&&(this.set("coords",this.It(b)),a.gg=!0,"c"!==this.map.get("overlayRender")&&a.Fa?(b=this.gz(a),f.l.Ck||b.push("e"),b=b.join(" "),0===b.length&&a.Fa?(a.Fa.se.parentNode.removeChild(a.Fa.se),a.Fa.Jb.parentNode&&a.Fa.Jb.parentNode.removeChild(a.Fa.Jb),a.Fa=null):f.l.Ck?(a.Fa.se.setAttribute("d",b),a.Fa.Jb&&a.Fa.Jb.setAttribute("d",b)):(a.Fa.se.path=b,a.Fa.Jb&&(a.Fa.Jb.path=b))):this.set("display"))},ik:function(){},visibleChanged:function(){this.L&&(this.L.Fa?this.get("visible")? (this.L.Fa.se.style.display="block",this.L.Fa.Jb&&(this.L.Fa.Jb.style.display="block")):(this.L.Fa.se.style.display="none",this.L.Fa.Jb&&(this.L.Fa.Jb.style.display="none")):this.set("display"))},optionsChanged:function(){this.pl();this.L&&(this.L.style=this.get("options"),this.L.zIndex=this.get("options").zIndex,this.L.bn(),this.L.Fa&&(this.L.Fa.se.parentNode&&this.L.Fa.se.parentNode.removeChild(this.L.Fa.se),this.L.Fa.Jb&&this.L.Fa.Jb.parentNode&&this.L.Fa.Jb.parentNode.removeChild(this.L.Fa.Jb))); this.set("display")}});f.D.Xs=f.D.Ob.extend({C:function(a,b){this.n6=a;arguments.callee.ma.apply(this,arguments);this.X("tolerance",a);b.h("zoomend",this.ik,this)},kD:function(a){var b=Math.pow(2,20-Math.round(this.map.get("zoom")));return f.oK.WR(a,this.map.tl,b,this.n6.F)},toleranceChanged:function(){this.pathChanged()},ik:function(){this.pathChanged()}});f.D.Rb=f.D.Sf.extend({C:function(a,b){arguments.callee.ma.apply(this,arguments);this.nQ=a;this.X("options",a);this.X("path",a);this.No();this.X("display",b)},pl:function(){if("3D"==this.map.K.view.type){var a=this.L;a&&(a=a.Ba.get("rings"))&&f.a.isArray(a)&&a.forEach(function(a){delete a.Ea;delete a.xr})}},deltaPosChanged:function(){this.set("display")},En:function(a){var b=Math.pow(2,20-this.map.get("zoom")),c=this.get("path");a=a.ed(b);var b=[],d,e;c.length&&c[0]instanceof f.W&&(c=[c],e=!0);for(var g= 0,h=c.length;g<h;g+=1){for(var k=c[g],l=[],m=0,n=k.length;m<n;m+=1)d=this.map.Qb(k[m]).add(a),l.push(this.map.Fd(d));b.push(l)}0<b.length&&this.set("path",e?b[0]:b);this.nQ.r("movepoly",{ls:a})},Lv:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos",[c.x+a[0],c.y+a[1]]);this.nQ.r("movepoly",{ls:c})},It:function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];a.length&&a[0]instanceof f.W&&(a=[a]);for(var b,c,d=[],e,g=this.map,h=0;h<a.length;h+=1){var k=a[h];e=[];b=0; for(c=k.length;b<c;b+=1){var l=g.Qb(k[b]);e.push([l.x,l.y])}d.push(e)}return d},No:function(){if(this.map&&!this.L){var a=this.map,b=this.get("path"),b=this.L=new f.of({gD:this.Qc.Vx,name:"polygon-"+f.a.Fb(this),zIndex:this.get("options").zIndex||1,map:a,Ba:new f.ka.Rb(this.It(b)),style:this.get("options")});b.Fm=this;this.X("resolution",a);this.X("center",a);this.X("coords",b);this.X("style",b);b.Ud(["visible","zIndex","strokeWeight","deltaPos"],this)}},pathChanged:function(){var a=this.L,b=this.get("path"); this.pl();a&&(this.set("coords",this.It(b)),a.gg=!0,"c"!==this.map.get("overlayRender")&&a.aa?(b=this.hz(a),0===b.length?(a.aa.parentNode.removeChild(a.aa),a.aa=null):f.l.Ck?a.aa.setAttribute("d",b.join(" ")):(b.push("e"),a.aa.path=b.join(" "))):this.set("display"))},getStrokeWeight:function(){return this.get("options").strokeWeight},visibleChanged:function(){this.L&&(this.L.aa?this.get("visible")?this.L.aa.style.display="block":this.L.aa.style.display="none":this.set("display"))},optionsChanged:function(){this.pl(); this.L&&(this.L.style=this.get("options"),this.L.zIndex=this.get("options").zIndex,this.L.bn());this.set("display")},hz:function(a){var b=[NaN,NaN,0],c=[NaN,NaN],d,e,g,h,k,l,m,n=a.aa.rotation,p=this.map.get("size");e=Math.PI*n/180;n=(Math.abs(p.width*Math.cos(e))+Math.abs(p.height*Math.sin(e)))/2;p=(Math.abs(p.width*Math.sin(e))+Math.abs(p.height*Math.cos(e)))/2;a=a.Ba;a instanceof f.ka.Rb?d=[a]:a instanceof f.ka.pq&&(d=a.ze);var q=[];a=0;for(e=d.length;a<e;a+=1)if(b=d[a],g=b.ng,h=g.length,0<h)for(var r= 0;r<h;r+=1){var t;k=g[r].Na;l=0;for(m=k.length;l<m;l+=1)if(b=k[l],b=this.ue(b),b[0]=Math.ceil(b[0]+n),b[1]=Math.ceil(b[1]+p),0===l)c[0]=NaN,c[1]=NaN,t=b,q.push("M"+b[0]+" "+b[1]);else if(b[0]!==c[0]||b[1]!==c[1])q.push("L"+b[0]+" "+b[1]),c=b;t&&q.push("L"+t[0]+" "+t[1])}return q}});f.D.Xe=f.D.Sf.extend({C:function(a,b){arguments.callee.ma.apply(this,arguments);this.o6=a;this.X("center",a);this.X("draggable",a);this.X("unit",a,!0);this.X("radius",a);this.X("options",a);this.No();this.X("display",b)},En:function(a){var b=this.get("center");a=a.ed(Math.pow(2,20-this.map.get("zoom")));var c=this.map.Qb(b).add(a);b instanceof f.W?this.set("center",this.map.Fd(c)):this.set("center",c);this.o6.r("movepoly",{ls:a})},Lv:function(a,b,c){a=this.get("deltaPos")||[0,0];this.set("deltaPos", [c.x+a[0],c.y+a[1]])},No:function(){if(this.map&&!this.L){var a=this.map,b=a.Qb(this.get("center")),c="px"===this.get("unit"),b=this.L=new f.of({Qt:!0,gD:this.Qc.Vx,name:"circle-"+f.a.Fb(this),zIndex:this.get("options").zIndex||1,map:a,Ba:new f.ka.Ze([b.x,b.y]),style:this.get("options")});b.yp=c;b.Fm=this;this.X("resolution",a);this.X("coords",b);this.X("style",b);b.X("visible",this,!0);b.Ud("radius center unit resolution zIndex strokeWeight deltaPos".split(" "),this)}},pl:function(){if("3D"==this.map.K.view.type){var a= this.L;a&&(a=a.Ba)&&(delete a.Ea,delete a.xr,delete a.wW)}},deltaPosChanged:function(){this.set("display")},getStrokeWeight:function(){return this.get("options").strokeWeight},centerChanged:function(){var a=this.L,b=this.map.Qb(this.get("center"));a&&(a.Ba.Na=[b.x,b.y],this.pl(),this.set("coords",[b.x,b.y]),this.gg=!0,a.aa?this.EU():this.set("display"))},visibleChanged:function(){this.L&&(this.L.aa?this.get("visible")?this.L.aa.style.display="block":this.L.aa.style.display="none":this.set("display"))}, optionsChanged:function(){this.pl();this.L&&(this.L.style=this.get("options"),this.L.zIndex=this.get("options").zIndex,this.L.bn(),this.L.gg=!0,this.set("display"))},AF:function(a){var b=[],c=[],d,c=a.Ba;c instanceof f.ka.Ze&&(d=[c]);var c=this.map.get("resolution",Math.floor(this.map.get("zoom"))),e=a.aa.rotation,b=this.map.get("size"),g=Math.PI*e/180,e=(Math.abs(b.width*Math.cos(g))+Math.abs(b.height*Math.sin(g)))/2,g=(Math.abs(b.width*Math.sin(g))+Math.abs(b.height*Math.cos(g)))/2,b=this.ue(d[0].Na); b[0]=Math.round(b[0]+e);b[1]=Math.round(b[1]+g);a=a.get("remain")?5.23:a.yp?this.get("radius"):this.get("radius")/(c*Math.cos(Math.PI*this.get("center").O/180));return c=["M",b[0],b[1]-a,"A",a,a,0,1,1,b[0]-0.01,b[1]-a,"Z"].join(" ")},EU:function(){var a=this.L,b=this.get("radius");if("c"!==this.map.get("overlayRender")&&a.aa)if(f.l.Ck)b=this.AF(a),a.aa.setAttribute("d",b);else{b=this.map.get("resolution",Math.floor(this.map.get("zoom")));b=a.yp?this.get("radius"):this.get("radius")/(b*Math.cos(Math.PI* this.get("center").O/180));a.aa.style.width=Math.round(2*b);a.aa.style.height=Math.round(2*b);var c=this.map.get("size").width/2,d=this.map.get("size").height/2,e=this.ue(a.Ba.Na);e[0]=Math.round(e[0]+c);e[1]=Math.round(e[1]+d);a.aa.style.top=Math.round(e[1]-b);a.aa.style.left=Math.round(e[0]-b)}else this.set("display")},radiusChanged:function(){var a=this.L,b=this.get("radius");a&&(this.pl(),a.gg=!0,a.r("rad",{target:a,Sg:b}),this.EU())}}); ')
_jsload_('wgl', '(function(){if(f.l.$l){var a=function(a){function c(a,b,c,d,g,h){c=a.Ea;d=[];var k=a.Oi,l=null,m=null;a.Ea=[];h=h&&16<b;for(var n=1,p=c.length;n<p;n+=1){var q=c[n],s=q[1].split("&"),l=r(z?z:s[0]),m=r(s[4]),w=q[2],B=q[0],U=q[3]*Math.pow(2,2),K=q[4],$={};if((q=q[5])&&q.length)for(var R=0,G=q.length;R<G;R+=1)for(var N=q[R].split("-")[1].split("^"),s=0,Q=N.length;s<Q;s+=1)-1===e(d,N[s])&&d.push(N[s]);if(K&&K.length)for(q=0,R=K.length;q<R;q+=1)for(G=K[q].split("-"),N=parseInt(G[0]),$[N]={},s=1,Q=G.length;s< Q;s+=1)$[N][parseInt(G[s])]=!0;q=0;for(K=B.length;q<K;q+=1){for(var s=B[q],R=[],G=[],N=[],s=u(s,x,b),s=t(s,k,g,!0)[1],Q=[],O=0,P=0,D=0,V=s.length-1;D<V;D+=1){var aa=s[D],ca=s[D+1],O=O+aa[0],P=P+ca[1];if(!$[q]||!$[q][D])if(h){var ia=0,fa=ca[0]-aa[0],qa=ca[1]-aa[1];0===fa?ia=0.5:0===qa?ia=ca[0]>aa[0]?0:1:(ia=Math.abs(Math.atan(qa/fa)/Math.PI),ia=ca[0]>aa[0]?ia:1-ia);qa=Math.sqrt(Math.pow(fa,2)+Math.pow(qa,2));fa=Math.round(U/64);qa=Math.ceil(qa/64);fa?N.push(0,0,qa,fa,0,fa,0,0,qa,0,qa,fa):N.push(-1, -1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1);fa=0.4+0.6*ia;ia=0.8+0.2*ia;R.push(aa[0],aa[1],-U,fa);R.push(ca[0],ca[1],0,ia);R.push(aa[0],aa[1],0,ia);R.push(aa[0],aa[1],-U,fa);R.push(ca[0],ca[1],-U,fa);R.push(ca[0],ca[1],0,ia)}else G.push(aa[0],aa[1],0,1,ca[0],ca[1],0,1);Q.push([aa[0],aa[1]])}s.pop();O=[O/s.length+215440491,P/s.length+106744817];Q=y.uB(h?Q:s,[],0,1);P=0;for(D=Q.length;P<D;P+=1)for(s=0;3>s;s+=1)V=-U,h||(V=0),N.push(0,0,0,0,0,0),R.push(Q[P][s][0],Q[P][s][1],V,0);s=[l,m,w];a.Ea.push([new Float32Array(R), new Float32Array(N),new Float32Array(G),s,null,O])}}a.Gj=d;return a}function d(a,b,c,d,g,h){c=a.Ea;d=[];for(var k=a.Oi,l=null,m=null,n={},q=1,p=c.length;q<p;q+=1){var s=c[q],w=s[1].split("&"),l=r(z?z:w[0]),m=r(w[2]),B=w[0]+w[2];n[B]||(n[B]={iW:[],eV:[],yn:[],vG:[],G8:l,borderColor:m,Gb:s[2]});var l=n[B].iW,m=n[B].eV,w=n[B].yn,B=n[B].vG,U=s[0],K=s[3]*Math.pow(2,2),$=s[4],R={};if((s=s[5])&&s.length)for(var G=0,N=s.length;G<N;G+=1)for(var Q=s[G].split("-")[1].split("^"),O=0,P=Q.length;O<P;O+=1)-1=== e(d,Q[O])&&d.push(Q[O]);if($&&$.length)for(s=0,N=$.length;s<N;s+=1)for(Q=$[s].split("-"),O=parseInt(Q[0]),R[O]={},G=1,P=Q.length;G<P;G+=1)R[O][parseInt(Q[G])]=!0;s=0;for($=U.length;s<$;s+=1){for(var D=U[s],D=u(D,x,b),D=t(D,k,g,!0)[1],G=[],N=0,Q=D.length-1;N<Q;N+=1){var O=D[N],P=D[N+1],V=[O[0]-0*K,O[1]-0.3*K],aa=[P[0]-0*K,P[1]-0.3*K];R[s]&&R[s][N]||(h?((P[0]-O[0])*(V[1]-O[1])<(V[0]-O[0])*(P[1]-O[1])&&(l.push(V[0],V[1],2),l.push(P[0],P[1],-1),l.push(O[0],O[1],-1),l.push(V[0],V[1],2),l.push(aa[0],aa[1], 2),l.push(P[0],P[1],-1),B.push([O,P,aa,V])),w.push(V[0],V[1],-1,aa[0],aa[1],-1)):w.push(O[0],O[1],-1,P[0],P[1],2));G.push([V[0],V[1]])}D.pop();N=y.uB(h?G:D,[],0,1);B.push(h?G:D);D=0;for(Q=N.length;D<Q;D+=1)for(G=0;3>G;G+=1)m.push(N[D][G][0],N[D][G][1],3)}}a.Ea=[];for(D in n)n.hasOwnProperty(D)&&(w=[n[D].G8,n[D].borderColor,n[D].Gb],n[D].vG.Fp=!0,a.Ea.push([new Float32Array(n[D].iW),new Float32Array(n[D].eV),new Float32Array(n[D].yn),w,n[D].vG]));a.Gj=d;return a}function e(a,b){if(a&&!a.length)return-1; if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c+=1)if(a[c]===b)return c;return-1}function g(a,b){for(var c=a.Ea,d=[],e={0:"ffde0000",1:"ffffcc00",2:"ff33b100",3:"ff8c0e0e",4:"ffadadad"},g=0,h=c.length;g<h;g++){for(var k=[],l=0,n=c[g].length;l<n;l++){var q=[],p=[],t=[];m(q,t,p,c[g][l][1],a.ha,b);p.Fp=!0;q.forEach(function(a,b){k.push([a,t[b]])})}if(k.length){var s=[[],[],{width:0.75*c[g][0][0],borderColor:r(e[g])}];k.forEach(function(a){var b=s[0].length/9;b&&(a[1]=a[1].map(function(a){return a+ b}));s[0]=s[0].concat(a[0]);s[1]=s[1].concat(a[1])});s[0]=new Float32Array(s[0]);s[1]=new Uint16Array(s[1]);d.push(s)}}a.Ea=d;return a}function h(a){var b=[],c=[],d=[];a=t(a,{x:0,y:0},1);c.push.apply(c,a[2]);if(2<a[1].length){var e=y.uB(a[1],[],0);e.length&&(b.push.apply(b,a[0]),d.push.apply(d,e))}return[new Float32Array(b),new Uint16Array(d),{},c]}function k(a,b,c,d,e){for(var g="solid solid_roundcap solid_squarecap dash railway dash_crewel".split(" "),h=a.Ea.slice(1),k=h.length-1;0<=k;k--)h[k].JS= k;h.sort(function(a,b){return a[2]>b[2]?1:a.JS>b.JS?1:-1});for(var m={},k=0,n=h.length;k<n;k+=1){var q=h[k],p=q[1].split("&"),t,u,x,w,B;t=u=x=w=B=null;var y,z,G,N,Q=null,O=!1;y=z=G=N=null;p[1]&&(t=r(p[1]));u=parseInt(p[0]);x=p[2];x!==g[0]&&(x===g[1]?y="round":x===g[2]?y="square":0===x.indexOf(g[5])?(Q=!0,G=[3,2]):0===x.indexOf(g[3])?(G=eval("["+x.substring(5).split(")")[0]+"]"),G.forEach(function(a,b){G[b]*=e})):0===x.indexOf(g[4])&&(w=t,t=p[4]?r(p[4]):[1,1,1,t[3]],G=[12,12],O=!0,B=3,u=1));p[3]&& p[4]&&3<p.length&&(B=u+parseInt(p[3]),w=r(p[4]),x=p[5],x!==g[0]&&(x===g[1]?z="round":x===g[2]?z="square":0!==x.indexOf(g[5])&&0===x.indexOf(g[3])&&(B+=1,N=eval("["+x.substring(5).split(")")[0]+"]"),N.forEach(function(a,b){N[b]*=e}))));if(c){if(G)for(p=G.length-1;0<=p;p-=1)G[p]*=e;if(N)for(p=N.length-1;0<=p;p-=1)N[p]*=e}x=[];x.ff=0;var P=[],D=[];l(x,D,P,q[0],a.Oi,b,c,d,e,y);"app"===s&&(u/=4,B/=4);p=[u,t,G,B,w,N,Q,O,y,z,q[3]];p.Xha=!0;q=q[2];m[q]||(m[q]=[]);P.Fp=!0;m[q].push([new Float32Array(x),new Uint16Array(D), p,P])}a.Ea=m;return a}function l(a,b,c,d,e,g,h,k,l,m){for(var n=0,p=d.length;n<p;n+=1){var q=a.length/11,s=q+6,r=u(d[n],x,g),w=t(r,e,k);if(1<w[1].length){for(var r=w[0],B=w[2],y=0,w=w[1].length;y<w;y+=1){if(0<y){var z=r[2*y]-r[2*y-2],G=r[2*y+1]-r[2*y-1];a.ff+=Math.sqrt(z*z+G*G)*(h?l:1)}var z=r[2*y],G=r[2*y+1],N=B[y][0],Q=B[y][1],O,P;y===w-1?(O=r[2*w-2],P=r[2*w-1]):(O=r[2*y+2],P=r[2*y+3]);var D,V;0===y?(D=z,V=G):(D=r[2*y-2],V=r[2*y-1]);if(0!==y){var aa=y===w-1?0:-1;a.push(z,G,N,Q,1,D,V,aa,O,P,a.ff); a.push(z,G,N,Q,-1,D,V,aa,O,P,a.ff)}else a.push(z,G,N,Q,0,D,V,0,O,P,a.ff),a.push(z,G,N,Q,1,D,V,0,O,P,a.ff),a.push(z,G,N,Q,1,D,V,1,O,P,a.ff),a.push(z,G,N,Q,0,D,V,1,O,P,a.ff),a.push(z,G,N,Q,-1,D,V,1,O,P,a.ff),a.push(z,G,N,Q,-1,D,V,0,O,P,a.ff),m&&(b.push(q+2,q+0,q+3),b.push(q+2,q+1,q+0),b.push(q+3,q+0,q+4),b.push(q+4,q+0,q+5));y!==w-1?(aa=0===y?0:1,a.push(z,G,N,Q,1,D,V,aa,O,P,a.ff),a.push(z,G,N,Q,-1,D,V,aa,O,P,a.ff)):(a.push(z,G,N,Q,0,D,V,0,O,P,a.ff),a.push(z,G,N,Q,1,D,V,0,O,P,a.ff),a.push(z,G,N,Q,1, D,V,-1,O,P,a.ff),a.push(z,G,N,Q,0,D,V,-1,O,P,a.ff),a.push(z,G,N,Q,-1,D,V,-1,O,P,a.ff),a.push(z,G,N,Q,-1,D,V,0,O,P,a.ff));y!==w-1?(b.push(s+4*y,s+4*y+3,s+4*y+1),b.push(s+4*y,s+4*y+2,s+4*y+3)):m&&(z=s+4*(w-1),b.push(z+1,z+2,z+0),b.push(z+2,z+3,z+0),b.push(z+0,z+4,z+5),b.push(z+0,z+3,z+4))}c.push(B)}}}function m(a,b,c,d,e,g){for(var h=0,k=d.length;h<k;h+=1){var l=[],m=[],n=u(d[h]),q=t(n,e,g);c.push(q[2]);if(1<q[1].length){var p=q[1].length;q[1].forEach(function(a,b,c){var d=c[b-1];c=c[b+1];0===b?d=a: b===p-1&&(c=a);l.push(a[0],a[1],q[2][b][0],q[2][b][1],1,d[0],d[1],c[0],c[1]);l.push(a[0],a[1],q[2][b][0],q[2][b][1],-1,d[0],d[1],c[0],c[1]);0===b?m.push(0,1,2):b!=p-1?(m.push(2*(b-1)+1,2*b+1,2*b),m.push(2*b,2*b+1,2*(b+1))):m.push(2*(b-1)+1,2*b+1,2*b)});a.push(l);b.push(m)}}}function n(a,b,c,d,e,g,h,k){for(var l=0,m=d.length;l<m;l+=1){var n=a.length/2,q=t(u(d[l],x,g),e,h);if(2<q[1].length&&(n=y.uB(q[1],[],n),n.length&&(a.push.apply(a,q[0]),b.push.apply(b,n),c.push(q[2]),k)))for(var n=0,p=q[2].length;n< p;n+=1){var s=q[2][n][0]/512,r=q[2][n][1]/512;1==e.x%2&&(s+=0.5);1==e.y%2&&(r+=0.5);k.push(s,r)}}}function p(a,b,c){var d=a.Ea,e=[],g=[],h=[],k=[];q(a,g,h,c);for(var l=[[[0,0],[255,0],[255,255],[0,255]]],m=[[0,0],[255,0],[0,255],[255,255]],p=a.Oi,t=0,s=m.length;t<s;t+=1){var u=m[t][0]/512,x=m[t][1]/512;1==p.x%2&&(u+=0.5);1==p.y%2&&(x+=0.5);k.push(u,x)}l.Fp=!0;e.push([new Float32Array(g),new Uint16Array(h),r("ff"+a.uQ.substr(1)),"regions:land",l,new Float32Array(k)]);d.sort(function(a,b){return"string"=== typeof a?-1:"string"===typeof b?1:a[2]>b[2]?1:a[2]<b[2]?-1:0});m=1;for(p=d.length;m<p;m+=1)t=d[m],g=[],h=[],l=[],k=[],s=r(t[1].split("&")[0]),n(g,h,l,t[0],a.Oi,b,c,k),l.Fp=!0,e.push([new Float32Array(g),new Uint16Array(h),s,t[3],l,new Float32Array(k)]);a.Ea=e;return a}function q(a,b,c,d){var e=a.Oi;a=256*e.x*d-215440491;e=256*e.y*d-106744817;b.push(a,e);var g=256*d;d=a+g;b.push(d,e);e+=g;b.push(a,e);b.push(d,e);c.push(0,1,2,1,3,2)}function r(a){for(var b=[],c=0,d=a.length;c<d;c+=2)b.push(parseInt(a.substr(c, 2),16)/255);b.push(b.shift());return b}function t(a,b,c,d){var e=0,g=0,e=256*b.x,g=256*b.y;b=[];for(var h=[],k=[],l=0,m=a.length;l<m;l+=2){var n=(e+a[l])*c-215440491,q=(g+a[l+1])*c-106744817,p=k.length;if(d||0===b.length)k.push(n),k.push(q),b.push([n,q]),h.push([a[l],a[l+1]]);else if(n!==k[p-2]||q!==k[p-1])n===k[p-2]&&n===k[p-4]?(k[p-1]=q,b[b.length-1][1]=q,h[b.length-1][1]=a[l+1]):q===k[p-1]&&q===k[p-3]?(k[p-2]=n,b[b.length-1][0]=n,h[b.length-1][0]=a[l]):(k.push(n),k.push(q),b.push([n,q]),h.push([a[l], a[l+1]]))}return[k,b,h]}function u(a,b,c){var d="ASDFGHJKLQWERTYUIO!sdfghjkleiu3~yr5-P&mq9`%zCN*b=8@^xpVM";b=b||"v5";var e,g;"v5"<b?(e=d.length,g=512):(e=27,d=d.substr(0,27),g=333);var h,k,l,m,n;k=[];l=NaN;m=0;for(n=a.length;m<n;m++)h=a[m],h=d.indexOf(h),isNaN(l)?l=h*e:(h=l+h-g,18===c&&"v5"<b&&(h/=4),k.push(h),l=NaN);return k}var x,w=Number.EPSILON||2E-16,s,B=!1,z=null,y={zf:function(a){for(var b=a.length,c=0,d=b-1,e=0;e<b;d=e++)c+=a[d][0]*a[e][1]-a[e][0]*a[d][1];return 0.5*c},Dda:function(){return function(a, b){var c=a.length;if(3>c)return null;var d=[],e=[],g=[],h,k,l;if(0<y.zf(a))for(k=0;k<c;k++)e[k]=k;else for(k=0;k<c;k++)e[k]=c-1-k;var m=2*c;for(k=c-1;2<c&&!(0>=m--);){h=k;c<=h&&(h=0);k=h+1;c<=k&&(k=0);l=k+1;c<=l&&(l=0);var n;a:{var q=n=void 0,p=void 0,t=void 0,s=void 0,r=void 0,u=void 0,x=void 0,B=void 0,q=a[e[h]][0],p=a[e[h]][1],t=a[e[k]][0],s=a[e[k]][1],r=a[e[l]][0],u=a[e[l]][1];if(w>(t-q)*(u-p)-(s-p)*(r-q))n=!1;else{var z=void 0,N=void 0,Q=void 0,O=void 0,P=void 0,D=void 0,V=void 0,aa=void 0,ca= void 0,ia=void 0,ca=aa=V=B=x=void 0,z=r-t,N=u-s,Q=q-r,O=p-u,P=t-q,D=s-p;for(n=0;n<c;n++)if(x=a[e[n]][0],B=a[e[n]][1],!(x===q&&B===p||x===t&&B===s||x===r&&B===u)&&(V=x-q,aa=B-p,ca=x-t,ia=B-s,x-=r,B-=u,ca=z*ia-N*ca,V=P*aa-D*V,aa=Q*B-O*x,ca>=-w&&aa>=-w&&V>=-w)){n=!1;break a}n=!0}}if(n){d.push([a[e[h]],a[e[k]],a[e[l]]]);g.push([e[h],e[k],e[l]]);h=k;for(l=k+1;l<c;h++,l++)e[h]=e[l];c--;m=2*c}}return b?g:d}}(),uB:function(a,b,c,d){var e,g,h,k={};b=0;for(e=a.length;b<e;b++)h=a[b][0]+":"+a[b][1],k[h]=b;a= y.Dda(a,!1);if(!a)return[];if(d)return a;var l=[];b=0;for(e=a.length;b<e;b++)for(g=a[b],d=0;3>d;d++)h=g[d][0]+":"+g[d][1],h=k[h],l.push(h+c);return l},wha:function(a){return 0>y.zf(a)}};return{xI:function(e,g){x=e.nk;B=e.q$;s=e.mode;var h=B?c:d,l=e.Ev,m=e.us;z=e.iz;for(var n=e.Y,q=[],t=Math.pow(2,20-l),r=0,u=e.Nd.length;r<u;r+=1){var w=e.Nd[r];switch(w.yd){case "region":q.push(p(w,l,t));break;case "road":q.push(k(w,l,m,t,e.bV));break;case "building":q.push(h(w,l,m,n,t,e.O6))}}e.Nd=q;if(a){h=[];r= 0;for(u=q.length;r<u;r++)if((l=q[r].Ea)&&l.length)for(m=0,n=l.length;m<n;m++)l[m].buffer&&l[m].buffer instanceof ArrayBuffer&&h.push(l[m].buffer);a.Vy(h)}g(null,{data:e})},gba:function(a,b){for(var c=a.Nd,d=Math.pow(2,20-a.Ff),e=[],h=0,k=c.length;h<k;h++)e.push(g(c[h],d));a.Nd=e;b(null,{data:a})},kU:function(a,b){var c=a.ks.reduce(function(a,b){return a.concat(b)},[]),c=h(c);b(null,{data:c})},hU:function(a,b){var c=a.$a,d=a.Sg,e=0,g=Math.PI/180*6,h=[],k=[];h.push(c[0],c[1]);for(var l=0;60>l;l++)h.push(c[0]+ d*Math.cos(e),c[1]+d*Math.sin(e)),e+=g,0<l&&k.push(0,l,l+1),59==l&&k.push(0,l+1,1);b(null,{data:[h,k]})},zia:function(){}}};f.DW=a();f.HB=new f.lt(a,{})}})(f);(function(){function a(){function a(b,c,d,e,g,k){var l=[0,0,0,0,0],n=d.slice(0,4).concat(l),p=[],r=Math.PI/180*1,L=void 0,M=void 0,L=d.slice(0,2),T=m(e),Z=m(g),M=q.normalize(h(T).mf(h(L))),A=q.normalize(h(Z).mf(h(L)));q.yH(M,k)?(L=q.bA(M),M=q.bA(A)):(L=q.bA(A),M=q.bA(M),k=[Z,T],T=k[0],Z=k[1],g=[g,e],e=g[0],g=g[1]);T=Math.round(Math.abs(M-L)/r);for(k=0;k<=T;k++)0===k?(n.push.apply(n,e.slice(0,4)),n.push.apply(n,l)):k===T?(n.push.apply(n,g.slice(0,4)),n.push.apply(n,l)):(Z=(k*r+L)%(2*Math.PI),n.push.apply(n, d.slice(0,2).concat([0,0])),n.push(1*Math.cos(Z),1*Math.sin(Z),0,0,0)),0<k&&p.push(0,k-1,k),k==T&&p.push(0,T,T+1);var F=b.length/9;b.push.apply(b,n);c.push.apply(c,p.map(function(a){return a+F}))}function c(c,d,e,g,k){function l(a,b,c,d,e){var g=void 0;a.Ez(b)||q.ZS(a,b)?g=b:c&&d&&e?g=a:c&&!d&&e?g=b:c||d||e?c||!d||e?(g=q.normalize(a.oh(b)),L=q.cos(g,a),g=g.$F(L)):g=a:g=b;return g}function n(a,b,c){if(void 0===c||!0===c)d.push(a[0],a[1]),d.push(-b.y,b.x,0,0),d.push(J,0,0);if(void 0===c||!1===c)d.push(a[0], a[1]),d.push(b.y,-b.x,0,0),d.push(J,0,0)}var p=c.length,r=0,J=0,L=void 0,M=void 0;k&&(g="bevel");c.forEach(function(c,t,A){var F=A[t-1];A=A[t+1];var C=void 0;F&&(J+=q.Mh(c,F));if(0===t||t===p-1)0===t?(void 0===A&&(A=c),C=q.normalize(h(A[0]-c[0],A[1]-c[1])),e.push(0,1,2)):(C=q.normalize(h(c[0]-F[0],c[1]-F[1])),t=d.length/9+2,4===t?e.push(3,2,1):e.push(t-3-r,t-1,t-2)),n(c,C);else{var E=q.normalize(h(c[0]-F[0],c[1]-F[1])),I=q.normalize(h(A[0]-c[0],A[1]-c[1]));t=q.normalize(E.multiply(-1).oh(I));M=q.yH(t, E);L=q.cos(t,E);n(c,l(E,I,M,!0,!0),!0);n(c,l(E,I,M,!0,!1),!1);n(c,l(E,I,M,!1,!0),!0);n(c,l(E,I,M,!1,!1),!1);F=d.length/9;A=F-4;var C=A+2,W=9*A,H=W+9,Y=H+9,S=Y+9;M?(Y=m(d.slice(H,Y)),W=m(d.slice(W,H)),W=q.normalize(h(Y).mf(h(W))),W=Math.abs(q.cos(E,W)/q.sin(E,W)*2),d[H+7]=-W,d[S+7]=W):(S=m(d.slice(W,H)),H=m(d.slice(H,Y)),H=q.normalize(h(S).mf(h(H))),H=Math.abs(q.cos(H,E)/q.sin(H,E)*2),d[W+7]=-H,d[Y+7]=H);q.ZS(E,I)?e.push(A,A+1,A-2-r):e.push(A,A-1-r,A+1);"miter"==g&&(M?n(c,l(E,I,0,!0,!0),!0):n(c,l(E, I,0,!0,!0),!1),r=1);"round"===g&&(I=E=c=void 0,M?(c=d.slice(9*(A+1),9*(A+2)),E=d.slice(9*A,9*(A+1)),I=d.slice(9*C,9*(C+1))):(c=d.slice(9*A,9*(A+1)),E=d.slice(9*(A+1),9*(A+2)),I=d.slice(9*(C+1),9*(C+2))),a(d,e,c,E,I,t.multiply(-1)),r=d.length/9-F);e.push(C,C+1,C+2+r);k||"bevel"!=g&&"miter"!=g||(M?e.push(C,A,A+1):e.push(C,C-1,C+1),"miter"==g&&(M?e.push(C+2,C-2,C):e.push(C+2,C+1,C-1)))}})}function d(a,b,c){function d(a,b){var c=void 0;if(a.Ez(b))c=b;else{var c=q.normalize(a.oh(b)),e=q.cos(c,a);e>Math.sqrt(3)/ 2&&(e=Math.sqrt(3)/2);c=c.$F(e)}return c}function e(a,c,d){if(void 0===d||!0===d)b.push(a[0],a[1]),b.push(-c.y,c.x,0,0),b.push(l,0,0);if(void 0===d||!1===d)b.push(a[0],a[1]),b.push(c.y,-c.x,0,0),b.push(l,0,0)}for(var g=a[0],k=a[a.length-1],l=0,m=void 0;g[0]===k[0]&&g[1]===k[1]&&g!==k;)a.pop(),k=a[a.length-1];a.push(g);a.push(a[1]);a.unshift(k);var n=a.length;a.forEach(function(a,g,k){var p=k[g-1];k=k[g+1];var r=void 0;p&&(l+=q.Mh(a,p));if(0===g||g===n-1)0===g?(r=q.normalize(h(k[0]-a[0],k[1]-a[1])), c.push(0,1,2)):(r=q.normalize(h(a[0]-p[0],a[1]-p[1])),g=b.length/9+2,c.push(g-3,g-1,g-2)),e(a,r);else{g=q.normalize(h(a[0]-p[0],a[1]-p[1]));k=q.normalize(h(k[0]-a[0],k[1]-a[1]));p=q.normalize(g.multiply(-1).oh(k));m=q.yH(p,g);e(a,d(g,k),!0);e(a,d(g,k),!1);e(a,d(g,k),!0);e(a,d(g,k),!1);a=b.length/9-4;k=a+2;var r=9*a,t=r+9,B=t+9,z=B+9;g=Math.abs(q.cos(g,p)/q.sin(g,p));m?(b[r+7]=g,b[t+7]=-g,b[B+7]=-g,b[z+7]=g):(b[r+7]=-g,b[t+7]=g,b[B+7]=g,b[z+7]=-g);c.push(a,a-1,a+1);c.push(k,k+1,k+2)}})}function e(c, d,e){function g(a,b){r.push.apply(r,a.slice(0,k));r.push(b.x,b.y);r.push.apply(r,a.slice(l));r.push.apply(r,a)}var m=3<arguments.length&&void 0!==arguments[3]?arguments[3]:"butt",n=c.length-1,p=d.length,r=[],X=[],J=[d.slice(0,9),d.slice(9,18)],L=[d.slice(p-9,p),d.slice(p-18,p-9)];"square"===m?(m=q.normalize(h(c[0]).mf(h(c[1]))),g(J[0],m),g(J[1],m),m=q.normalize(h(c[n]).mf(h(c[n-1]))),g(L[0],m),g(L[1],m),X.push(0,2,3,3,1,0),X.push(6,7,4,4,7,5)):"round"===m&&(m=J[0].slice(0,2).concat(0,0,0,0).concat(J[0].slice(l)), a(d,e,m,J[0],J[1],q.normalize(h(c[0]).mf(h(c[1])))),m=L[0].slice(0,2).concat(0,0,0,0).concat(L[0].slice(l)),a(d,e,m,L[0],L[1],q.normalize(h(c[n]).mf(h(c[n-1])))));d.push.apply(d,r);e.push.apply(e,X.map(function(a){return a+p/9}))}function g(a){var b=[];a.forEach(function(a){var c=a[0]-p[0];a=a[1]-p[1];var d=b.length-1;if(-1===d)b.push([c,a]);else if(c!==b[d][0]||a!==b[d][1])if(1<=d){var e=q.normalize(h(c-b[d][0],a-b[d][1])),g=q.normalize(h(b[d][0]-b[d-1][0],b[d][1]-b[d-1][1]));e.Ez(g)?b[d]=[c,a]: b.push([c,a])}else b.push([c,a])});return b}function h(a,b){"object"===typeof a&&a.length&&(b=a[1],a=a[0]);return Object.create(r,{x:{value:a},y:{value:b}})}var k,l;function m(a){return[a[0]+n*a[2],a[1]+n*a[3]]}var n=1;k=4;l=6;var p=[215440491,106744817],q={normalize:function(a){var b=this.length(a);return a.$F(b)},Br:function(a,b){return a.multiply(b)},TF:function(a,b){return a.x*b.y-a.y*b.x},length:function(a){return Math.sqrt(Math.pow(a.x,2)+Math.pow(a.y,2))},sin:function(a,b){return this.TF(a, b)/(this.length(a)*this.length(b))},cos:function(a,b){return this.Br(a,b)/(this.length(a)*this.length(b))},yH:function(a,b){return 0<this.TF(a,b)},Mh:function(a,b){return Math.sqrt(Math.pow(b[0]-a[0],2)+Math.pow(b[1]-a[1],2))},ZS:function(a,b){return a.multiply(-1).Ez(b)},bA:function(a){a=Math.atan2(a.y,a.x);0>=a&&(a+=2*Math.PI);return a}},r={oh:function(a){return h(this.x+a.x,this.y+a.y)},mf:function(a){return h(this.x-a.x,this.y-a.y)},multiply:function(a){return"number"===typeof a?h(this.x*a,this.y* a):this.x*a.x+this.y*a.y},$F:function(a){return h(this.x/a,this.y/a)},Ez:function(a){var b=a.y;return this.x===a.x&&this.y===b}};return{parse:function(a,b){var h=a.lineJoin,h=void 0===h?"miter":h,k=a.lineCap,k=void 0===k?"butt":k,l=a.y$,l=void 0===l?!1:l,m=a.Hl,n=void 0===m?!1:m,p=[],m=[],q=g(a.ks);l?(d(q,p,m),h=p.length,[0,1,2,h/9-1,h/9-2].forEach(function(a){p[9*a+8]=-1})):(c(q,p,m,h,n),e(q,p,m,k));b(null,{data:[new Float32Array(p),new Uint16Array(m)]})}}}f.AW=a();f.yea=new f.lt(a,{})})();f.Jw={p$:function(a,b,c){b=f.Jw.createProgram(a,b,c);if(!b)return console.log("Failed to create program"),!1;a.useProgram(b);a.Ga=b;return!0},createProgram:function(a,b,c){b=f.Jw.tT(a,a.VERTEX_SHADER,b);c=f.Jw.tT(a,a.FRAGMENT_SHADER,c);if(!b||!c)return null;var d=a.createProgram();if(!d)return null;a.attachShader(d,b);a.attachShader(d,c);a.linkProgram(d);return a.getProgramParameter(d,a.LINK_STATUS)?d:(console.log("Failed to link program: "+a.getProgramInfoLog(d)),a.deleteProgram(d),a.deleteShader(c), a.deleteShader(b),null)},tT:function(a,b,c){b=a.createShader(b);if(null===b)return console.log("unable to create shader"),null;a.shaderSource(b,c);a.compileShader(b);return a.getShaderParameter(b,a.COMPILE_STATUS)?b:(console.log("Failed to compile shader: "+a.getShaderInfoLog(b)),a.deleteShader(b),null)}};f.R.Ie.Ac=f.R.kd.xh.extend({ea:[f.it],C:function(a,b){this.rj=20;this.hb=Math.min(2,window.devicePixelRatio||1);this.Hn=1;arguments.callee.ma.apply(this,arguments);this.X("mapStyle",a.j);this.X("style",a.j);this.Sh=this.Og=!0;a.j.K.un&&this.rt(a,b);this.Zk=0;this.$z()||this.set("reload")},RX:"precision highp float;attribute vec4 a_Position;attribute vec3 a_op,a_Next,a_Previous;attribute float a_Tags;uniform float u_xDelta,u_width;uniform lowp int u_type;uniform mat4 u_othMatrix,u_zoomMatrix,u_modelMatrix;uniform float u_scale;varying float v_distance;varying vec2 v_op;varying float v_TB;varying float v_cap;varying lowp float v_Tags;void main() {vec4 position=a_Position;position.x+=u_xDelta;if (u_type==0) {gl_Position=u_othMatrix*u_zoomMatrix*u_modelMatrix*position;}else if(u_type>1) {v_op=a_op.xy;v_TB=a_op.z;vec3 curPos=position.xyz;v_distance=a_Next.z;float ddis=0.0;vec3 previous=vec3(a_Previous.x+u_xDelta,a_Previous.y,0);vec3 next=vec3(a_Next.x+u_xDelta,a_Next.y,0);vec4 up,dir;v_distance *= u_scale;if(previous==curPos){ dir= vec4(normalize(next-curPos).xy,0,0);}else if(next==curPos){dir= -vec4(normalize(previous-curPos).xy,0,0);}else {vec3 dir0=previous-curPos;vec3 dir1=next-curPos;vec3 dir2=normalize(dir0);vec3 dir3=normalize(dir1);float f0=dir0.x*dir1.y-dir1.x*dir0.y;dir = vec4(0); v_cap=1.0;if(f0==0.0){up = vec4(dir3.y,-dir3.x,0,0); }else{vec3 dir4=normalize(dir2+dir3);float sinA=length(cross(dir4,dir2));float cosA=dot(dir4,dir2);if(sinA<0.5){sinA=0.5;}up= vec4(dir4,0)/sinA;ddis=abs(length(up)*cosA*u_width*0.5);if(f0<0.0){up=-up;ddis=-ddis;}v_distance += v_TB*a_Previous.z*ddis;}}if(previous==curPos||next==curPos){ up = vec4(dir.y,-dir.x,0,0); if(u_type==4){v_cap=sqrt(v_TB*v_TB+a_Previous.z*a_Previous.z);}else if(u_type==3){v_cap=1.0;}else{dir = vec4(0);}}vec4 pos=u_zoomMatrix*u_modelMatrix*position;pos=pos+(up*v_TB-dir*a_Previous.z)*u_width*0.5;gl_Position=u_othMatrix*pos;}else if (u_type==1) {v_Tags=a_Tags;gl_Position=u_othMatrix*u_zoomMatrix*u_modelMatrix*position;}}", ZW:"precision lowp float;uniform vec4 u_FragColor,u_FragColor2;varying lowp float v_distance,v_TB;varying vec2 v_op;varying lowp float v_Tags;varying float v_cap;uniform lowp int u_type;uniform int u_isDash,u_onlyBorder;uniform vec4 u_dash;void main() {vec4 color=u_FragColor;if (u_type==0) {}else if(u_type>1) {if(v_op.x<-0.2||v_op.x>256.2||v_op.y<-0.2||v_op.y>256.2){discard;}if(v_cap>1.0){discard;}if(u_isDash==1){float all = u_dash[0] + u_dash[1] + u_dash[2] + u_dash[3];float off = mod(v_distance - u_dash[0], all);if(off> u_dash[0]&&off<=(u_dash[0]+u_dash[1])||off>(all-u_dash[3])){discard;}}if(u_onlyBorder==1&&v_TB<=0.7&&v_TB>=-0.7){discard;}}else if(u_type==1) {color=v_Tags==3.0?u_FragColor2:vec4((u_FragColor+(u_FragColor2-u_FragColor)*v_Tags/3.0).xyzw);}gl_FragColor=color;}", reloadChanged:function(){this.q&&(this.q.Aa=!1);this.wa.clear();this.sa&&this.sa.parentNode&&this.sa.parentNode.removeChild(this.sa);this.set("display")},yA:function(a){if(this.q&&a.GH===this.q.ee)for(var b=0,c=a.Nd.length;b<c;b+=1)this.Rv(a.Nd[b],a.Ev,a.us,a.Y)},OI:function(a){for(var b=0,c=a.length;b<c;b+=1){var d=a[b];this.j.Mi&&d[3]&&!this.j.Ub&&(d[2]=this.T.hn(d[2],d[3]));d.te=d[1].length;d[0]=this.Vf(this.Ca.ARRAY_BUFFER,d[0]);d[1]=this.Vf(this.Ca.ELEMENT_ARRAY_BUFFER,d[1])}},ZI:function(a){for(var b= 0,c=a.length;b<c;b+=1){var d=a[b];d.te=d[1].length;d[0]=this.Vf(this.Ca.ARRAY_BUFFER,d[0]);d[1]=this.Vf(this.Ca.ELEMENT_ARRAY_BUFFER,d[1]);this.j.Mi&&d[2][10]&&!this.j.Ub&&(d[2][1]=this.T.xi(d[2][1],d[2][10],1),d[2][4]=this.T.xi(d[2][4],d[2][10],0))}},EF:function(a){for(var b=0,c=a.length;b<c;b+=1){var d=a[b];d.Mv=d[0].length/3;d[0]=this.Vf(this.Ca.ARRAY_BUFFER,d[0]);d.qA=d[1].length/3;d[1]=this.Vf(this.Ca.ARRAY_BUFFER,d[1]);d.Nv=d[2].length/3;d[2]=this.Vf(this.Ca.ARRAY_BUFFER,d[2]);if(this.j.Mi&& d[3][2]&&!this.j.Ub){var e=this.T.gp(d[3][0],d[3][1],d[3][2]);d[3][0]=e[0];d[3][1]=e[1]}}},Vf:function(a,b){if(b.length){var c=this.Ca,d=c.createBuffer();c.bindBuffer(a,d);c.bufferData(a,b,c.STATIC_DRAW);return d}},JR:function(a){var b=a.ha,c=b.x,d=b.y,e=b.z,g=Math.pow(2,e),h=(c+g)%g,k=h+g,l=h-g,m=null;h!==c&&(m=this.op(e,h,d));m||l===c||(m=this.op(e,l,d));m||k===c||(m=this.op(e,k,d));return m?(a.status=m.status,a.ta=m.ta,a.Wb=m.Wb,a.sc=m.sc,a.Ja={building:m.Ja.building,region:m.Ja.region,road:m.Ja.road, vl:(b.x-m.ha.x)/g+m.Ja.vl},!0):!1},op:function(a,b,c){if((a=this.wa.get(a+"/"+b+"/"+c))&&a.Ja)return a},Rv:function(a){var b=a.yd,c=this.wa.get(a.Pi);if(c){c.Ja||(c.Ja={vl:0});c.Ja[b]=a.Ea;if("region"===b)this.OI(a.Ea);else if("road"===b)for(var d in a.Ea)a.Ea.hasOwnProperty(d)&&this.ZI(a.Ea[d]);else"building"===b&&(this.EF(a.Ea),a.Gj&&a.Gj.length&&!c.Zf&&(c.Zf={},c.Zf.fe=a.Gj,f.im&&f.im.r("vecTileParsed.buildings",{qw:c})));b===this.q.Oa[this.q.Oa.length-1]&&(c.ta=!0,this.set("display"))}},Xb:function(a, b){this.Vi=a.Vi;this.Kk(a,b);a.rQ=this.yf;this.ss(a,b);if(this.yf&&!this.q.Aa){var c=this.q;f.od.Hd.end({id:this.j.K.id,key:"rb",index:2});c.Aa=!0;c.Gc?c.da("renderComplete"):(c.Gc=!0,c.da("complete"))}this.wn=this.Ua;this.ph&&this.set("display",0)},Kg:function(){return this.sa},Qv:function(){f.R.Ie.Ac.Um+=1;this.sa&&f.A.H(this.sa,"webglcontextlost",this.Qv,this);this.sa.parentNode&&this.sa.parentNode.removeChild(this.sa);if(1<f.R.Ie.Ac.Um)this.wA();else{var a=this.sa.className;this.sa=document.createElement("canvas"); this.sa.className=a;this.$z()}this.set("reload");new f.Ka.Xa(f.w.ac+"://webapi.amap.com/count?"+["type=glfail","c="+f.R.Ie.Ac.Um,"crd="+f.l.cH,"k="+f.w.key,"u="+f.w.Lm,"m="+(f.l.Y?1:0),"pf="+f.l.Kp,"dpr="+window.devicePixelRatio,"scale="+(f.l.EB||0),"detect="+f.l.ga].join("&"))},wA:function(){f.l.Ef=!1;this.q&&this.q.j.K&&(this.q.j.set("baseRender",f.l.uR?"dv":"d"),this.q.j.K.RH(),this.q.R=null,this.q.oa.Nn(),this.q=null);this.sa=this.T=null},Pe:function(a){this.sa=document.createElement("canvas"); this.sa.className=a||"amap-layer"},$z:function(){if(1<f.R.Ie.Ac.Um)return this.wA(),!1;var a=this.Ca=this.sa.getContext(f.l.zW,f.l.BW);if(a)f.A.h(this.sa,"webglcontextlost",this.Qv,this);else return this.wA(),!1;f.Jw.p$(a,this.RX,this.ZW);this.VJ=a.getUniformLocation(a.Ga,"u_xDelta");this.pW=a.getUniformLocation(a.Ga,"u_othMatrix");this.sW=a.getUniformLocation(a.Ga,"u_zoomMatrix");this.nW=a.getUniformLocation(a.Ga,"u_modelMatrix");this.Me=a.getAttribLocation(a.Ga,"a_Position");this.si=a.getAttribLocation(a.Ga, "a_op");this.ri=a.getAttribLocation(a.Ga,"a_Previous");this.Ag=a.getAttribLocation(a.Ga,"a_Next");this.jr=a.getAttribLocation(a.Ga,"a_Tags");a.enableVertexAttribArray(this.Me);this.em=a.getUniformLocation(a.Ga,"u_FragColor");this.JJ=a.getUniformLocation(a.Ga,"u_FragColor2");this.Si=a.getUniformLocation(a.Ga,"u_type");this.Cw=a.getUniformLocation(a.Ga,"u_width");this.NJ=a.getUniformLocation(a.Ga,"u_isDash");this.OJ=a.getUniformLocation(a.Ga,"u_onlyBorder");this.MJ=a.getUniformLocation(a.Ga,"u_dash"); this.SJ=a.getUniformLocation(a.Ga,"u_scale");a.enable(a.BLEND);a.enable(a.CULL_FACE);a.cullFace(a.FRONT);a.blendEquationSeparate(a.FUNC_ADD,a.FUNC_ADD);a.blendFuncSeparate(a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA);a.clearColor(0,0,0,0);this.hs=this.wr=this.Hl=void 0;this.Ui=0;return!0},Pp:function(a){var b=Math.pow(2,a.U.zoom-this.Od),c=a.U.Ua.Sa(this.wn).cc(this.qh);this.transform={translate:this.transform[0].translate.add(c),scale:b,rotate:0};this.Ua=a.U.Ua},ss:function(a,b){var c= this.vF(a,b),d=this.Ca;d.clear(d.COLOR_BUFFER_BIT);var e=this.q.ga?this.hb:this.Hn,g=0,h=0;0!==a.U.rotation?(g=2*Math.floor(a.U.pa.Hb.x)*e,h=2*Math.floor(a.U.pa.Hb.y)*e):(g=a.size.width*e,h=a.size.height*e);g&&h&&(this.sa.width=g,this.sa.height=h,d.viewport(0,0,this.sa.width,this.sa.height),this.On.apply(this,c),this.Gd(a))},Pn:256*Math.pow(2,20),hG:function(a,b){var c=b.Ja.region;if(c){this.ol(b.Ja.vl*this.Pn);for(var d=0;d<c.length;d+=1){var e=c[d],g=e[2],h=e[3];h&&this.j.Ub&&(g=this.T.hn(g,h), e.Jc=g);g&&(a.bindBuffer(a.ARRAY_BUFFER,e[0]),a.vertexAttribPointer(this.Me,2,a.FLOAT,!1,8,0),a.uniform4f(this.em,g[0],g[1],g[2],g[3]),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,e[1]),a.drawElements(a.TRIANGLES,e.te,a.UNSIGNED_SHORT,0))}}},iG:function(a,b,c){var d=this.q.ga?this.hb:this.Hn,e;for(e in b)if(b.hasOwnProperty(e)){for(var g=b[e],h=0;h<g.length;h+=1){var k=g[h],l=k[2],m=l[4],n=l[10];n&&this.j.Ub&&(m=this.T.xi(m,n,0),k.Jc=m);m&&(n="square"===k[2][9]?3:"round"===k[2][9]?4:2,a.uniform1i(this.Si, n),k[2][3]&&(this.ol(k.Ui*this.Pn),a.bindBuffer(a.ARRAY_BUFFER,k[0]),a.vertexAttribPointer(this.Me,2,a.FLOAT,!1,44,0),a.vertexAttribPointer(this.si,3,a.FLOAT,!1,44,8),a.vertexAttribPointer(this.ri,3,a.FLOAT,!1,44,20),a.vertexAttribPointer(this.Ag,3,a.FLOAT,!1,44,32),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,k[1]),k=k.te,n=l[7]?l[3]:l[3]*c,a.uniform1f(this.Cw,n*d),a.uniform4f(this.em,m[0],m[1],m[2],m[3]),this.nl(l[5]?1:0,l[5],0),a.drawElements(a.TRIANGLES,k,a.UNSIGNED_SHORT,0)))}for(h=0;h<g.length;h+=1)k= g[h],l=k[2],l[0]&&(m=l[1],(n=l[10])&&this.j.Ub&&(m=this.T.xi(m,n,1),k.Jc=m),m&&(n="square"===k[2][8]?3:"round"===k[2][8]?4:2,a.uniform1i(this.Si,n),this.ol(k.Ui*this.Pn),a.bindBuffer(a.ARRAY_BUFFER,k[0]),a.vertexAttribPointer(this.Me,2,a.FLOAT,!1,44,0),a.vertexAttribPointer(this.si,3,a.FLOAT,!1,44,8),a.vertexAttribPointer(this.ri,3,a.FLOAT,!1,44,20),a.vertexAttribPointer(this.Ag,3,a.FLOAT,!1,44,32),a.bindBuffer(a.ELEMENT_ARRAY_BUFFER,k[1]),k=k.te,n=l[7]?l[0]:l[0]*c,a.uniform1f(this.Cw,n*d),a.uniform4f(this.em, m[0],m[1],m[2],m[3]),this.nl(l[2]?1:0,l[2],l[6]?1:0),a.drawElements(a.TRIANGLES,k,a.UNSIGNED_SHORT,0)))}},Mc:new f.I(215440491,106744817),On:function(a,b,c){if(a.length){this.Wb+=1;b=this.sa.width;c=this.sa.height;var d=this.Ca;b=(new f.qf).vV(-b/2,b/2,c/2,-c/2,0);c=Math.pow(2,this.zoom-this.rj)*(this.q.ga?this.hb:this.Hn);c=(new f.qf).scale(c,c,1);var e=this.Ua.cc(this.P/Math.pow(2,this.rj-this.zoom)).Sa(this.Mc),e=(new f.qf).translate(-e.x,-e.y,0);d.uniformMatrix4fv(this.pW,!1,b.elements);d.uniformMatrix4fv(this.sW, !1,c.elements);d.uniformMatrix4fv(this.nW,!1,e.elements);d.uniform1f(this.SJ,Math.pow(2,this.zoom-this.rj)*(this.q.ga?this.hb:1));b=this.qm=[];for(c=a.length-1;0<=c;c-=1){e=a[c];d.disableVertexAttribArray(this.si);d.disableVertexAttribArray(this.ri);d.disableVertexAttribArray(this.Ag);d.disableVertexAttribArray(this.jr);this.nl(0,void 0,void 0);d.uniform1i(this.Si,0);this.ol(0);for(var g=0,h=e.length;g<h;g+=1){var k=e[g];e[g].Ja&&(k.Wb=this.Wb,b.push(k),this.hG(d,k))}d.enableVertexAttribArray(this.si); d.enableVertexAttribArray(this.ri);d.enableVertexAttribArray(this.Ag);d.disableVertexAttribArray(this.jr);if(e.length){for(var l={},g=0,h=e.length;g<h;g+=1){var k=e[g],m=k.Ja.road;if(m)for(var n in m)if(m.hasOwnProperty(n)){l[n]||(l[n]=[]);for(var p=0,q=m[n].length;p<q;p+=1)m[n][p].Ui=k.Ja.vl,l[n].push(m[n][p])}}this.iG(d,l,Math.pow(1.3,this.zoom-e[0].ha.z))}if(!(14>this.zoom))for(d.uniform1i(this.Si,1),this.nl(0,void 0,void 0),d.disableVertexAttribArray(this.si),d.disableVertexAttribArray(this.ri), d.disableVertexAttribArray(this.Ag),d.enableVertexAttribArray(this.jr),g=0,h=e.length;g<h;g+=1)k=e[g],k.Ja.building&&this.Az(d,k)}}},Az:function(a,b){for(var c=b.Ja.building,d=0;d<c.length;d+=1){var e=c[d],g=e[3][0],h=e[3][1];if(!e||!g)break;var k=e[3][2];k&&this.j.Ub&&(h=this.T.gp(g,h,k),g=h[0],h=h[1],e.Jc=g);if(g||h)g||(g=[0,0,0,0]),h||(h=[0,0,0,0]),a.uniform4f(this.JJ,g[0],g[1],g[2],g[3]),a.uniform4f(this.em,h[0],h[1],h[2],h[3]),e.Mv&&(a.bindBuffer(a.ARRAY_BUFFER,e[0]),a.vertexAttribPointer(this.Me, 2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.jr,1,a.FLOAT,!1,12,8),a.drawArrays(a.TRIANGLES,0,e.Mv)),e.Nv&&(a.bindBuffer(a.ARRAY_BUFFER,e[2]),a.vertexAttribPointer(this.Me,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.jr,1,a.FLOAT,!1,12,8),a.drawArrays(a.LINES,0,e.Nv)),e.qA&&(a.bindBuffer(a.ARRAY_BUFFER,e[1]),a.vertexAttribPointer(this.Me,2,a.FLOAT,!1,12,0),a.vertexAttribPointer(this.jr,1,a.FLOAT,!1,12,8),a.drawArrays(a.TRIANGLES,0,e.qA))}},nl:function(a,b,c){var d=this.Ca;a!==this.Hl&&(d.uniform1i(this.NJ, a),this.Hl=a);a&&b!==this.wr&&(this.wr=b,d.uniform4f(this.MJ,b[0],b[1],b[2]||0,b[3]||0));c!==this.hs&&(d.uniform1i(this.OJ,c),this.hs=c)},ol:function(a){a!==this.Ui&&(this.Ca.uniform1f(this.VJ,a),this.Ui=a)},Gd:function(){this.transform={translate:{x:this.sa.width/2,y:this.sa.height/2},scale:this.q.ga?1/this.hb:1/this.Hn,rotate:0}}});f.R.Ie.Ac.Um=0; ')
_jsload_('AMap.PlaceSearch', 'f.Xw=f.Z.extend({ea:[f.ja],C:function(a){this.CLASS_NAME="AMap.PlaceSearch";f.e.ab(this.CLASS_NAME,a);this.S=f.extend({showCover:!0,autoFitView:!0},a||{});this.S.pageIndex=this.S.pageIndex||1;this.S.pageSize="number"!==typeof this.S.pageSize||0>this.S.pageSize?10:50<this.S.pageSize?50:this.S.pageSize;this.url=f.w.Yc+"/v3/place";this.SI=this.S.renderEngine||"PlaceSearchRenderByMarkerList";if(this.S.map||this.S.panel)f.jb.load("AMap."+this.SI),this.S.extensions="all";this.S.children&&(this.S.extensions= "all")},clear:function(){f.e.add(this.CLASS_NAME,"clear");this.R&&this.R.clear()},setLang:function(a){f.e.add(this.CLASS_NAME,"setLang");this.S.lang=a||"zh_cn"},getLang:function(){return this.S.lang},search:function(a,b){var c=["s=rsv3","children="+(this.S.children?"1":"")];c.push("key="+f.w.key);this.xm(this.S,{city:"city",rankBy:"sortrule",type:"types",pageIndex:"page",pageSize:"offset",extensions:"extensions",citylimit:"citylimit"},c);this.ny(this.url+"/text",c,b,{keywords:a||""},"KEYWORD",arguments)}, searchInBounds:function(a,b,c){f.e.add(this.CLASS_NAME,"searchInBounds");if(b){var d=["polygon="+b,"s=rsv3","children="+(this.S.children?"1":"")];d.push("key="+f.w.key);this.xm(this.S,{city:"city",rankBy:"sortrule",type:"types",pageIndex:"page",pageSize:"offset",extensions:"extensions",citylimit:"citylimit"},d);this.ny(this.url+"/polygon",d,c,{keywords:a||""},"POLYGON",arguments)}else f.event.N(this,"error",{info:"NO_PARAMS"}),c&&"function"===typeof c&&c("error","NO_PARAMS")},searchNearBy:function(a, b,c,d){f.e.add(this.CLASS_NAME,"searchNearBy");if(b){b=f.a.ra(b);var e=["location="+b,"s=rsv3","children="+(this.S.children?"1":"")];e.push("key="+f.w.key);c&&e.push("radius="+c);this.xm(this.S,{city:"city",rankBy:"sortrule",type:"types",pageIndex:"page",pageSize:"offset",extensions:"extensions",citylimit:"citylimit"},e);this.ny(this.url+"/around",e,d,{keywords:a||""},"NEARBY",arguments)}else f.event.N(this,"error",{info:"NO_PARAMS"}),d&&"function"===typeof d&&d("error","NO_PARAMS")},getDetails:function(a, b){f.e.add(this.CLASS_NAME,"getDetails");if(a){var c=["id="+a,"s=rsv3"];c.push("key="+f.w.key);this.ny(this.url+"/detail",c,b,{},"ID")}else f.event.N(this,"error",{info:"NO_PARAMS"}),b&&"function"===typeof b&&b("error","NO_PARAMS")},setType:function(a){f.e.add(this.CLASS_NAME,"setType");this.S.type=a},setPageIndex:function(a){f.e.add(this.CLASS_NAME,"setPageIndex");this.S.pageIndex=a||1},setPageSize:function(a){f.e.add(this.CLASS_NAME,"setPageSize");this.S.pageSize="number"!==typeof a||0>a?10:50< a?50:a},setCity:function(a){f.e.add(this.CLASS_NAME,"setCity");this.S.city=a},setCityLimit:function(a){this.S.citylimit=a},xm:function(a,b,c){for(var d in a)"undefined"!==typeof a[d]&&"undefined"!==typeof b[d]&&c.push(b[d]+"="+a[d]);c.push("language="+this.getLang())},ny:function(a,b,c,d,e,g){a+=0<b.length?"?"+b.join("&"):"";a=new f.Ka.Xa(a,{callback:"callback",yd:e,kr:!0,Dz:d});a.h("complete",function(a){this.Vb(a,c,e,g)},this);a.h("error",function(a){this.Ab(a,c)},this)},ba:function(a){return a instanceof Array&&0===a.length||"undefined"===typeof a?"":a},AM:function(a){for(var b in a)a.hasOwnProperty(b)&&(a[b]=this.ba(a[b]),"object"===typeof a[b]&&this.AM(a[b]))},jd:function(a){if(a){var b=a.split(",");return 2===b.length?new f.W(b[0],b[1]):a}return a},tE:function(a){function b(a){return a?(a=a.split(","),new f.W(a[0],a[1])):null}this.AM(a);var c={id:a.id,name:a.name,type:a.type,location:b(a.location),address:a.address,tel:a.tel,distance:parseFloat(a.distance),shopinfo:a.shopinfo};c.shopinfo=a.shopinfo&& a.shopinfo.length?a.shopinfo:"";if(a.children){for(var d=a.children,e=0,g=d.length;e<g;e++)d[e].location=b(d[e].location);c.children=d}d={website:a.website,pcode:a.pcode,citycode:a.citycode,adcode:a.adcode,postcode:a.postcode,pname:a.pname,cityname:a.cityname,adname:a.adname,email:a.email,photos:a.photos,entr_location:b(a.entr_location),exit_location:b(a.exit_location),groupbuy:"0"!==a.groupbuy_num,discount:"0"!==a.discount_num};"1"===a.indoor_map?(d.indoor_map=!0,d.indoor_data={cpid:this.ba(a.indoor_data.cpid), floor:this.ba(a.indoor_data.floor),truefloor:this.ba(a.indoor_data.truefloor)}):d.indoor_map=!1;e={groupbuys:"",discounts:"",deep_type:"",dining:"",hotel:"",cinema:"",scenic:""};if(a.rich_content){if(d.groupbuy){var g=a.rich_content.groupbuys,h=g.length;0<h&&(e.groupbuys=[]);for(var k=0;k<h;k+=1)e.groupbuys.push({title:g[k].title,type_code:g[k].typecode,type:g[k].type,detail:g[k].detail,stime:g[k].start_time,etime:g[k].end_time,count:g[k].num,sold_num:parseInt(g[k].sold_num),original_price:parseFloat(g[k].original_price), groupbuy_price:parseFloat(g[k].groupbuy_price),discount:parseFloat(g[k].discount),ticket_address:g[k].ticket_address,ticket_tel:g[k].ticket_tel,photos:g[k].photos,url:g[k].url,provider:""})}if(d.discount)for(g=a.rich_content.discounts,h=g.length,0<h&&(e.discounts=[]),k=0;k<h;k+=1)e.discounts.push({title:g[k].title,detail:g[k].detail,start_time:g[k].start_time,end_time:g[k].end_time,sold_num:parseInt(g[k].sold_num),photos:g[k].photos,url:g[k].url,provider:""})}if(a.deep_info)switch(e.deep_type=a.deep_info.type, a=a.deep_info,e.deep_type){case "cinema":e.cinema={intro:a.intro,rating:a.rating,deep_src:"",parking:a.parking,opentime_GDF:a.opentime_GDF,opentime:a.opentime,photos:a.photos};e.deep_type="CINEMA";break;case "dining":e.dining={cuisines:a.cuisines,tag:a.tag,intro:a.intro,rating:a.rating,cp_rating:a.cp_rating,deep_src:"",taste_rating:a.taste_rating,environment_rating:a.environment_rating,service_rating:a.service_rating,cost:a.cost,recommend:a.recommend,atmosphere:a.atmosphere,ordering_wap_url:a.ordering_wap_url, ordering_web_url:a.ordering_web_url,ordering_app_url:a.ordering_app_url,opentime_GDF:a.opentime_GDF,opentime:a.opentime,addition:a.addition,photos:a.photos};e.deep_type="DINING";break;case "scenic":e.scenic={intro:a.intro,rating:a.rating,deep_src:"",level:a.level,price:a.price,season:a.season,recommend:a.recommend,theme:a.theme,ordering_wap_url:a.ordering_wap_url,ordering_web_url:a.ordering_web_url,opentime_GDF:a.opentime_GDF,opentime:a.opentime,photos:a.photos};e.deep_type="SCENIC";break;case "hotel":e.hotel= {rating:a.rating,star:a.star,intro:a.intro,lowest_price:a.lowest_price,faci_rating:a.faci_rating,health_rating:a.health_rating,environment_rating:a.environment_rating,service_rating:a.service_rating,traffic:a.traffic,addition:a.addition,deep_src:"",photos:a.photos},e.deep_type="HOTEL"}a={};for(var l in c)c.hasOwnProperty(l)&&(a[l]=c[l]);if(this.S.extensions&&"base"!==this.S.extensions){for(var m in e)e.hasOwnProperty(m)&&e[m]&&(a[m]=e[m]);for(var n in d)d.hasOwnProperty(n)&&(a[n]=d[n])}return a}, close:function(){f.e.add(this.CLASS_NAME,"close");this.closed=!0},open:function(){f.e.add(this.CLASS_NAME,"open");this.closed=!1},poiOnAMAP:function(a){f.e.add(this.CLASS_NAME,"poiOnAMAP");var b={},c=f.a.ra(a.location);b.id=a.id;c&&(b.y=c.O,b.x=c.M);b.name=a.name;b.address=a.address;f.Pf.Sn(f.Pf.gS(b))},detailOnAMAP:function(a){f.e.add(this.CLASS_NAME,"detailOnAMAP");var b={},c=f.a.ra(a.location);b.id=a.id;c&&(b.y=c.O,b.x=c.M);b.name=a.name;f.Pf.Sn(f.Pf.eS(b))},Vb:function(a,b,c,d){if(!this.closed){var e; if(parseInt(a.status,10)){e={info:a.info,poiList:{}};e.poiList={pois:[],count:parseInt(a.count,10),pageIndex:this.S.pageIndex,pageSize:this.S.pageSize};if(a.pois)for(var g=0;g<a.pois.length;g+=1)e.poiList.pois[g]=this.tE(a.pois[g]);a.suggestion&&a.suggestion.keywords.length&&(e.keywordList=a.suggestion.keywords,e.info="TIP_KEYWORDS");if(a.suggestion&&a.suggestion.cities.length){for(var g=a.suggestion.cities,h=[],k=0;k<g.length;k+=1){var l=g[k],m;for(m in l)l.hasOwnProperty(m)&&"num"===m&&(l.count= l[m],delete l[m]);l.count=parseInt(l.count);h.push(l)}e.info="TIP_CITIES";e.cityList=h}a.count&&0!==parseInt(a.count,10)||e.cityList||e.keywordList?(f.event.N(this,"complete",e),(this.S.map||this.S.panel)&&this.pt(e,c,d),b&&"function"===typeof b&&b("complete",e)):(e.info="ok"===a.info.toLowerCase()?"NO_DATA":a.info,f.event.N(this,"complete",e),(this.S.map||this.S.panel)&&this.pt(e,c,d),b&&"function"===typeof b&&(e.cityList||e.keywordList?b("complete",e):b("no_data",{})))}else e={info:a.info},v.event.N(this, "error",e),b&&"function"===typeof b&&b("error",a.info)}},pt:function(a,b,c){var d=this;f.jb.load("AMap."+this.SI,function(){d.R||(d.render=d.R=new window.AMap[d.SI](d.S.showCover));d.R.autoRender({data:a,eventTrigger:function(a,b){f.event.N(d,a,b)},methodName:{KEYWORD:"search",NEARBY:"searchNearBy",POLYGON:"searchInBounds",ROUTE:"searchNearRoute"}[b],placeSearchInstance:d,methodArgumments:c,renderStyle:d.S.renderStyle||"newpc",panel:d.S.panel,map:d.S.map,autoFitView:d.S.autoFitView});d.wy=d.R.searchCircle})}, Ab:function(a,b){v.event.N(this,"error",a);b&&"function"===typeof b&&b("error",a.info)}});window.AMap.PlaceSearch=f.Xw; ')
_jsload_('sync', '(function(){if(f.w.Vc){var a=function(){var a=f.w.Vc.split("."),b=window;do if(b=b[a.shift()],!b)return null;while(a.length);return b||null},b=function(b){var c=a();if(c){if("function"!==typeof c)throw Error(f.w.Vc+" is not a function!");c()}else if(b)throw Error("Can not find callback: "+f.w.Vc+", try define it before load JsApi!");};document.body&&a()?b():setTimeout(function(){b(!0)},300)}var c=(new Date).getTime(),c=["s=rsv3&product=JsInit&key="+f.w.key,"t="+c];c.push("resolution="+window.innerWidth+ "*"+window.innerHeight);c.push("mob="+(f.l.Y?1:0));c.push("vt="+(f.l.kz?1:0));c.push("dpr="+window.devicePixelRatio);c.push("scale="+f.l.EB||0);c.push("detect="+f.l.ga);c=f.w.Yc+"/v3/log/init?"+c.join("&");new f.Ka.Xa(c,{callback:"callback"})})(); ')